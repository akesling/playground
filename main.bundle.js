(()=>{var zJ=Object.create;var v0=Object.defineProperty;var HJ=Object.getOwnPropertyDescriptor;var $J=Object.getOwnPropertyNames;var KJ=Object.getPrototypeOf,qJ=Object.prototype.hasOwnProperty;var k4=r=>v0(r,"__esModule",{value:!0});var I4=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var YJ=(r,e)=>()=>(r&&(e=r(r=0)),e);var ZJ=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),O4=(r,e)=>{k4(r);for(var t in e)v0(r,t,{get:e[t],enumerable:!0})},GJ=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $J(e))!qJ.call(r,i)&&i!=="default"&&v0(r,i,{get:()=>e[i],enumerable:!(t=HJ(e,i))||t.enumerable});return r},XJ=r=>GJ(k4(v0(r!=null?zJ(KJ(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var XX={};O4(XX,{conf:()=>lpe,language:()=>cpe});var lpe,cpe,QX=YJ(()=>{lpe={comments:{lineComment:"#",blockComment:["=begin","=end"]},brackets:[["(",")"],["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],indentationRules:{increaseIndentPattern:new RegExp(`^\\s*((begin|class|(private|protected)\\s+def|def|else|elsif|ensure|for|if|module|rescue|unless|until|when|while|case)|([^#]*\\sdo\\b)|([^#]*=\\s*(case|if|unless)))\\b([^#\\{;]|("|'|/).*\\4)*(#.*)?$`),decreaseIndentPattern:new RegExp("^\\s*([}\\]]([,)]?\\s*(#|$)|\\.[a-zA-Z_]\\w*\\b)|(end|rescue|ensure|else|elsif|when)\\b)")}},cpe={tokenPostfix:".ruby",keywords:["__LINE__","__ENCODING__","__FILE__","BEGIN","END","alias","and","begin","break","case","class","def","defined?","do","else","elsif","end","ensure","for","false","if","in","module","next","nil","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield"],keywordops:["::","..","...","?",":","=>"],builtins:["require","public","private","include","extend","attr_reader","protected","private_class_method","protected_class_method","new"],declarations:["module","class","def","case","do","begin","for","if","while","until","unless"],linedecls:["def","case","do","begin","for","if","while","until","unless"],operators:["^","&","|","<=>","==","===","!~","=~",">",">=","<","<=","<<",">>","+","-","*","/","%","**","~","+@","-@","[]","[]=","`","+=","-=","*=","**=","/=","^=","%=","<<=",">>=","&=","&&=","||=","|="],brackets:[{open:"(",close:")",token:"delimiter.parenthesis"},{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"}],symbols:/[=><!~?:&|+\-*\/\^%\.]+/,escape:/(?:[abefnrstv\\"'\n\r]|[0-7]{1,3}|x[0-9A-Fa-f]{1,2}|u[0-9A-Fa-f]{4})/,escapes:/\\(?:C\-(@escape|.)|c(@escape|.)|@escape)/,decpart:/\d(_?\d)*/,decimal:/0|@decpart/,delim:/[^a-zA-Z0-9\s\n\r]/,heredelim:/(?:\w+|'[^']*'|"[^"]*"|`[^`]*`)/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[AzZbBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})?/,tokenizer:{root:[[/^(\s*)([a-z_]\w*[!?=]?)/,["white",{cases:{"for|until|while":{token:"keyword.$2",next:"@dodecl.$2"},"@declarations":{token:"keyword.$2",next:"@root.$2"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}]],[/[a-z_]\w*[!?=]?/,{cases:{"if|unless|while|until":{token:"keyword.$0x",next:"@modifier.$0x"},for:{token:"keyword.$2",next:"@dodecl.$2"},"@linedecls":{token:"keyword.$0",next:"@root.$0"},end:{token:"keyword.$S2",next:"@pop"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],[/[A-Z][\w]*[!?=]?/,"constructor.identifier"],[/\$[\w]*/,"global.constant"],[/@[\w]*/,"namespace.instance.identifier"],[/@@@[\w]*/,"namespace.class.identifier"],[/<<[-~](@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/[ \t\r\n]+<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/^<<(@heredelim).*/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],{include:"@whitespace"},[/"/,{token:"string.d.delim",next:'@dstring.d."'}],[/'/,{token:"string.sq.delim",next:"@sstring.sq"}],[/%([rsqxwW]|Q?)/,{token:"@rematch",next:"pstring"}],[/`/,{token:"string.x.delim",next:"@dstring.x.`"}],[/:(\w|[$@])\w*[!?=]?/,"string.s"],[/:"/,{token:"string.s.delim",next:'@dstring.s."'}],[/:'/,{token:"string.s.delim",next:"@sstring.s"}],[/\/(?=(\\\/|[^\/\n])+\/)/,{token:"regexp.delim",next:"@regexp"}],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@keywordops":"keyword","@operators":"operator","@default":""}}],[/[;,]/,"delimiter"],[/0[xX][0-9a-fA-F](_?[0-9a-fA-F])*/,"number.hex"],[/0[_oO][0-7](_?[0-7])*/,"number.octal"],[/0[bB][01](_?[01])*/,"number.binary"],[/0[dD]@decpart/,"number"],[/@decimal((\.@decpart)?([eE][\-+]?@decpart)?)/,{cases:{$1:"number.float","@default":"number"}}]],dodecl:[[/^/,{token:"",switchTo:"@root.$S2"}],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},do:{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],modifier:[[/^/,"","@pop"],[/[a-z_]\w*[!?=]?/,{cases:{end:{token:"keyword.$S2",next:"@pop"},"then|else|elsif|do":{token:"keyword",switchTo:"@root.$S2"},"@linedecls":{token:"@rematch",switchTo:"@root.$S2"},"@keywords":"keyword","@builtins":"predefined","@default":"identifier"}}],{include:"@root"}],sstring:[[/[^\\']+/,"string.$S2"],[/\\\\|\\'|\\$/,"string.$S2.escape"],[/\\./,"string.$S2.invalid"],[/'/,{token:"string.$S2.delim",next:"@pop"}]],dstring:[[/[^\\`"#]+/,"string.$S2"],[/#/,"string.$S2.escape","@interpolated"],[/\\$/,"string.$S2.escape"],[/@escapes/,"string.$S2.escape"],[/\\./,"string.$S2.escape.invalid"],[/[`"]/,{cases:{"$#==$S3":{token:"string.$S2.delim",next:"@pop"},"@default":"string.$S2"}}]],heredoc:[[/^(\s*)(@heredelim)$/,{cases:{"$2==$S2":["string.heredoc",{token:"string.heredoc.delimiter",next:"@pop"}],"@default":["string.heredoc","string.heredoc"]}}],[/.*/,"string.heredoc"]],interpolated:[[/\$\w*/,"global.constant","@pop"],[/@\w*/,"namespace.class.identifier","@pop"],[/@@@\w*/,"namespace.instance.identifier","@pop"],[/[{]/,{token:"string.escape.curly",switchTo:"@interpolated_compound"}],["","","@pop"]],interpolated_compound:[[/[}]/,{token:"string.escape.curly",next:"@pop"}],{include:"@root"}],pregexp:[{include:"@whitespace"},[/[^\(\{\[\\]/,{cases:{"$#==$S3":{token:"regexp.delim",next:"@pop"},"$#==$S2":{token:"regexp.delim",next:"@push"},"~[)}\\]]":"@brackets.regexp.escape.control","~@regexpctl":"regexp.escape.control","@default":"regexp"}}],{include:"@regexcontrol"}],regexp:[{include:"@regexcontrol"},[/[^\\\/]/,"regexp"],["/[ixmp]*",{token:"regexp.delim"},"@pop"]],regexcontrol:[[/(\{)(\d+(?:,\d*)?)(\})/,["@brackets.regexp.escape.control","regexp.escape.control","@brackets.regexp.escape.control"]],[/(\[)(\^?)/,["@brackets.regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?[:=!])/,["@brackets.regexp.escape.control","regexp.escape.control"]],[/\(\?#/,{token:"regexp.escape.control",next:"@regexpcomment"}],[/[()]/,"@brackets.regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/#/,"regexp.escape","@interpolated"]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/\\$/,"regexp.escape"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,"@brackets.regexp.escape.control","@pop"]],regexpcomment:[[/[^)]+/,"comment"],[/\)/,{token:"regexp.escape.control",next:"@pop"}]],pstring:[[/%([qws])\(/,{token:"string.$1.delim",switchTo:"@qstring.$1.(.)"}],[/%([qws])\[/,{token:"string.$1.delim",switchTo:"@qstring.$1.[.]"}],[/%([qws])\{/,{token:"string.$1.delim",switchTo:"@qstring.$1.{.}"}],[/%([qws])</,{token:"string.$1.delim",switchTo:"@qstring.$1.<.>"}],[/%([qws])(@delim)/,{token:"string.$1.delim",switchTo:"@qstring.$1.$2.$2"}],[/%r\(/,{token:"regexp.delim",switchTo:"@pregexp.(.)"}],[/%r\[/,{token:"regexp.delim",switchTo:"@pregexp.[.]"}],[/%r\{/,{token:"regexp.delim",switchTo:"@pregexp.{.}"}],[/%r</,{token:"regexp.delim",switchTo:"@pregexp.<.>"}],[/%r(@delim)/,{token:"regexp.delim",switchTo:"@pregexp.$1.$1"}],[/%(x|W|Q?)\(/,{token:"string.$1.delim",switchTo:"@qqstring.$1.(.)"}],[/%(x|W|Q?)\[/,{token:"string.$1.delim",switchTo:"@qqstring.$1.[.]"}],[/%(x|W|Q?)\{/,{token:"string.$1.delim",switchTo:"@qqstring.$1.{.}"}],[/%(x|W|Q?)</,{token:"string.$1.delim",switchTo:"@qqstring.$1.<.>"}],[/%(x|W|Q?)(@delim)/,{token:"string.$1.delim",switchTo:"@qqstring.$1.$2.$2"}],[/%([rqwsxW]|Q?)./,{token:"invalid",next:"@pop"}],[/./,{token:"invalid",next:"@pop"}]],qstring:[[/\\$/,"string.$S2.escape"],[/\\./,"string.$S2.escape"],[/./,{cases:{"$#==$S4":{token:"string.$S2.delim",next:"@pop"},"$#==$S3":{token:"string.$S2.delim",next:"@push"},"@default":"string.$S2"}}]],qqstring:[[/#/,"string.$S2.escape","@interpolated"],{include:"@qstring"}],whitespace:[[/[ \t\r\n]+/,""],[/^\s*=begin\b/,"comment","@comment"],[/#.*$/,"comment"]],comment:[[/[^=]+/,"comment"],[/^\s*=begin\b/,"comment.invalid"],[/^\s*=end\b.*/,"comment","@pop"],[/[=]/,"comment"]]}}});var JX=ZJ((CI,g4)=>{var f4=function(){var r=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(e){e=e||{};var e=typeof e!="undefined"?e:{},t,i;e.ready=new Promise(function(b,y){t=b,i=y}),Object.getOwnPropertyDescriptor(e.ready,"_main")||(Object.defineProperty(e.ready,"_main",{configurable:!0,get:function(){f("You are getting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_main",{configurable:!0,set:function(){f("You are setting _main on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_eval")||(Object.defineProperty(e.ready,"_artichoke_eval",{configurable:!0,get:function(){f("You are getting _artichoke_eval on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_eval",{configurable:!0,set:function(){f("You are setting _artichoke_eval on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_string_free")||(Object.defineProperty(e.ready,"_artichoke_string_free",{configurable:!0,get:function(){f("You are getting _artichoke_string_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_string_free",{configurable:!0,set:function(){f("You are setting _artichoke_string_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_string_getch")||(Object.defineProperty(e.ready,"_artichoke_string_getch",{configurable:!0,get:function(){f("You are getting _artichoke_string_getch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_string_getch",{configurable:!0,set:function(){f("You are setting _artichoke_string_getch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_string_getlen")||(Object.defineProperty(e.ready,"_artichoke_string_getlen",{configurable:!0,get:function(){f("You are getting _artichoke_string_getlen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_string_getlen",{configurable:!0,set:function(){f("You are setting _artichoke_string_getlen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_string_new")||(Object.defineProperty(e.ready,"_artichoke_string_new",{configurable:!0,get:function(){f("You are getting _artichoke_string_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_string_new",{configurable:!0,set:function(){f("You are setting _artichoke_string_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_string_putch")||(Object.defineProperty(e.ready,"_artichoke_string_putch",{configurable:!0,get:function(){f("You are getting _artichoke_string_putch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_string_putch",{configurable:!0,set:function(){f("You are setting _artichoke_string_putch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_artichoke_web_repl_init")||(Object.defineProperty(e.ready,"_artichoke_web_repl_init",{configurable:!0,get:function(){f("You are getting _artichoke_web_repl_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_artichoke_web_repl_init",{configurable:!0,set:function(){f("You are setting _artichoke_web_repl_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_artichoke_free")||(Object.defineProperty(e.ready,"_mrb_ary_artichoke_free",{configurable:!0,get:function(){f("You are getting _mrb_ary_artichoke_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_artichoke_free",{configurable:!0,set:function(){f("You are setting _mrb_ary_artichoke_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_concat")||(Object.defineProperty(e.ready,"_mrb_ary_concat",{configurable:!0,get:function(){f("You are getting _mrb_ary_concat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_concat",{configurable:!0,set:function(){f("You are setting _mrb_ary_concat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_new")||(Object.defineProperty(e.ready,"_mrb_ary_new",{configurable:!0,get:function(){f("You are getting _mrb_ary_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_new",{configurable:!0,set:function(){f("You are setting _mrb_ary_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_new_capa")||(Object.defineProperty(e.ready,"_mrb_ary_new_capa",{configurable:!0,get:function(){f("You are getting _mrb_ary_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_new_capa",{configurable:!0,set:function(){f("You are setting _mrb_ary_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_new_from_values")||(Object.defineProperty(e.ready,"_mrb_ary_new_from_values",{configurable:!0,get:function(){f("You are getting _mrb_ary_new_from_values on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_new_from_values",{configurable:!0,set:function(){f("You are setting _mrb_ary_new_from_values on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_pop")||(Object.defineProperty(e.ready,"_mrb_ary_pop",{configurable:!0,get:function(){f("You are getting _mrb_ary_pop on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_pop",{configurable:!0,set:function(){f("You are setting _mrb_ary_pop on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_push")||(Object.defineProperty(e.ready,"_mrb_ary_push",{configurable:!0,get:function(){f("You are getting _mrb_ary_push on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_push",{configurable:!0,set:function(){f("You are setting _mrb_ary_push on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_ref")||(Object.defineProperty(e.ready,"_mrb_ary_ref",{configurable:!0,get:function(){f("You are getting _mrb_ary_ref on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_ref",{configurable:!0,set:function(){f("You are setting _mrb_ary_ref on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_set")||(Object.defineProperty(e.ready,"_mrb_ary_set",{configurable:!0,get:function(){f("You are getting _mrb_ary_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_set",{configurable:!0,set:function(){f("You are setting _mrb_ary_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_shift")||(Object.defineProperty(e.ready,"_mrb_ary_shift",{configurable:!0,get:function(){f("You are getting _mrb_ary_shift on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_shift",{configurable:!0,set:function(){f("You are setting _mrb_ary_shift on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_splat")||(Object.defineProperty(e.ready,"_mrb_ary_splat",{configurable:!0,get:function(){f("You are getting _mrb_ary_splat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_splat",{configurable:!0,set:function(){f("You are setting _mrb_ary_splat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_unshift")||(Object.defineProperty(e.ready,"_mrb_ary_unshift",{configurable:!0,get:function(){f("You are getting _mrb_ary_unshift on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_unshift",{configurable:!0,set:function(){f("You are setting _mrb_ary_unshift on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_assoc_new")||(Object.defineProperty(e.ready,"_mrb_assoc_new",{configurable:!0,get:function(){f("You are getting _mrb_assoc_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_assoc_new",{configurable:!0,set:function(){f("You are setting _mrb_assoc_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_intern")||(Object.defineProperty(e.ready,"_mrb_check_intern",{configurable:!0,get:function(){f("You are getting _mrb_check_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_intern",{configurable:!0,set:function(){f("You are setting _mrb_check_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_intern_cstr")||(Object.defineProperty(e.ready,"_mrb_check_intern_cstr",{configurable:!0,get:function(){f("You are getting _mrb_check_intern_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_intern_cstr",{configurable:!0,set:function(){f("You are setting _mrb_check_intern_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_intern_str")||(Object.defineProperty(e.ready,"_mrb_check_intern_str",{configurable:!0,get:function(){f("You are getting _mrb_check_intern_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_intern_str",{configurable:!0,set:function(){f("You are setting _mrb_check_intern_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_free_symtbl")||(Object.defineProperty(e.ready,"_mrb_free_symtbl",{configurable:!0,get:function(){f("You are getting _mrb_free_symtbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_free_symtbl",{configurable:!0,set:function(){f("You are setting _mrb_free_symtbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_init_symtbl")||(Object.defineProperty(e.ready,"_mrb_init_symtbl",{configurable:!0,get:function(){f("You are getting _mrb_init_symtbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_init_symtbl",{configurable:!0,set:function(){f("You are setting _mrb_init_symtbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern")||(Object.defineProperty(e.ready,"_mrb_intern",{configurable:!0,get:function(){f("You are getting _mrb_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern",{configurable:!0,set:function(){f("You are setting _mrb_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_check")||(Object.defineProperty(e.ready,"_mrb_intern_check",{configurable:!0,get:function(){f("You are getting _mrb_intern_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_check",{configurable:!0,set:function(){f("You are setting _mrb_intern_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_check_cstr")||(Object.defineProperty(e.ready,"_mrb_intern_check_cstr",{configurable:!0,get:function(){f("You are getting _mrb_intern_check_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_check_cstr",{configurable:!0,set:function(){f("You are setting _mrb_intern_check_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_check_str")||(Object.defineProperty(e.ready,"_mrb_intern_check_str",{configurable:!0,get:function(){f("You are getting _mrb_intern_check_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_check_str",{configurable:!0,set:function(){f("You are setting _mrb_intern_check_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_cstr")||(Object.defineProperty(e.ready,"_mrb_intern_cstr",{configurable:!0,get:function(){f("You are getting _mrb_intern_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_cstr",{configurable:!0,set:function(){f("You are setting _mrb_intern_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_static")||(Object.defineProperty(e.ready,"_mrb_intern_static",{configurable:!0,get:function(){f("You are getting _mrb_intern_static on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_static",{configurable:!0,set:function(){f("You are setting _mrb_intern_static on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_intern_str")||(Object.defineProperty(e.ready,"_mrb_intern_str",{configurable:!0,get:function(){f("You are getting _mrb_intern_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_intern_str",{configurable:!0,set:function(){f("You are setting _mrb_intern_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sym_dump")||(Object.defineProperty(e.ready,"_mrb_sym_dump",{configurable:!0,get:function(){f("You are getting _mrb_sym_dump on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sym_dump",{configurable:!0,set:function(){f("You are setting _mrb_sym_dump on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sym_name")||(Object.defineProperty(e.ready,"_mrb_sym_name",{configurable:!0,get:function(){f("You are getting _mrb_sym_name on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sym_name",{configurable:!0,set:function(){f("You are setting _mrb_sym_name on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sym_name_len")||(Object.defineProperty(e.ready,"_mrb_sym_name_len",{configurable:!0,get:function(){f("You are getting _mrb_sym_name_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sym_name_len",{configurable:!0,set:function(){f("You are setting _mrb_sym_name_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sym_str")||(Object.defineProperty(e.ready,"_mrb_sym_str",{configurable:!0,get:function(){f("You are getting _mrb_sym_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sym_str",{configurable:!0,set:function(){f("You are setting _mrb_sym_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_to_flo")||(Object.defineProperty(e.ready,"_mrb_to_flo",{configurable:!0,get:function(){f("You are getting _mrb_to_flo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_to_flo",{configurable:!0,set:function(){f("You are setting _mrb_to_flo on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_rust_eh_personality")||(Object.defineProperty(e.ready,"_rust_eh_personality",{configurable:!0,get:function(){f("You are getting _rust_eh_personality on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_rust_eh_personality",{configurable:!0,set:function(){f("You are setting _rust_eh_personality on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_end")||(Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){f("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){f("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_get_free")||(Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){f("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){f("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_stack_init")||(Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,get:function(){f("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_stack_init",{configurable:!0,set:function(){f("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackSave")||(Object.defineProperty(e.ready,"_stackSave",{configurable:!0,get:function(){f("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackSave",{configurable:!0,set:function(){f("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackRestore")||(Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,get:function(){f("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackRestore",{configurable:!0,set:function(){f("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_stackAlloc")||(Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,get:function(){f("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_stackAlloc",{configurable:!0,set:function(){f("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___wasm_call_ctors")||(Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,get:function(){f("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___wasm_call_ctors",{configurable:!0,set:function(){f("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_fflush")||(Object.defineProperty(e.ready,"_fflush",{configurable:!0,get:function(){f("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_fflush",{configurable:!0,set:function(){f("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___errno_location")||(Object.defineProperty(e.ready,"___errno_location",{configurable:!0,get:function(){f("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___errno_location",{configurable:!0,set:function(){f("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_malloc")||(Object.defineProperty(e.ready,"_malloc",{configurable:!0,get:function(){f("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_malloc",{configurable:!0,set:function(){f("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_free")||(Object.defineProperty(e.ready,"_free",{configurable:!0,get:function(){f("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_free",{configurable:!0,set:function(){f("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___cxa_is_pointer_type")||(Object.defineProperty(e.ready,"___cxa_is_pointer_type",{configurable:!0,get:function(){f("You are getting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___cxa_is_pointer_type",{configurable:!0,set:function(){f("You are setting ___cxa_is_pointer_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"___cxa_can_catch")||(Object.defineProperty(e.ready,"___cxa_can_catch",{configurable:!0,get:function(){f("You are getting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"___cxa_can_catch",{configurable:!0,set:function(){f("You are setting ___cxa_can_catch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_setThrew")||(Object.defineProperty(e.ready,"_setThrew",{configurable:!0,get:function(){f("You are getting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_setThrew",{configurable:!0,set:function(){f("You are setting _setThrew on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_saveSetjmp")||(Object.defineProperty(e.ready,"_saveSetjmp",{configurable:!0,get:function(){f("You are getting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_saveSetjmp",{configurable:!0,set:function(){f("You are setting _saveSetjmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_ntohs")||(Object.defineProperty(e.ready,"_ntohs",{configurable:!0,get:function(){f("You are getting _ntohs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_ntohs",{configurable:!0,set:function(){f("You are setting _ntohs on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_htonl")||(Object.defineProperty(e.ready,"_htonl",{configurable:!0,get:function(){f("You are getting _htonl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_htonl",{configurable:!0,set:function(){f("You are setting _htonl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_htons")||(Object.defineProperty(e.ready,"_htons",{configurable:!0,get:function(){f("You are getting _htons on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_htons",{configurable:!0,set:function(){f("You are setting _htons on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_emscripten_main_thread_process_queued_calls")||(Object.defineProperty(e.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,get:function(){f("You are getting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_emscripten_main_thread_process_queued_calls",{configurable:!0,set:function(){f("You are setting _emscripten_main_thread_process_queued_calls on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_sysconf")||(Object.defineProperty(e.ready,"_sysconf",{configurable:!0,get:function(){f("You are getting _sysconf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_sysconf",{configurable:!0,set:function(){f("You are setting _sysconf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gc_protect")||(Object.defineProperty(e.ready,"_mrb_gc_protect",{configurable:!0,get:function(){f("You are getting _mrb_gc_protect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gc_protect",{configurable:!0,set:function(){f("You are setting _mrb_gc_protect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_value_is_dead")||(Object.defineProperty(e.ready,"_mrb_sys_value_is_dead",{configurable:!0,get:function(){f("You are getting _mrb_sys_value_is_dead on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_value_is_dead",{configurable:!0,set:function(){f("You are setting _mrb_sys_value_is_dead on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class_under")||(Object.defineProperty(e.ready,"_mrb_define_class_under",{configurable:!0,get:function(){f("You are getting _mrb_define_class_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class_under",{configurable:!0,set:function(){f("You are setting _mrb_define_class_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_class_of_value")||(Object.defineProperty(e.ready,"_mrb_sys_class_of_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_class_of_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_class_of_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_class_of_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_defined_under")||(Object.defineProperty(e.ready,"_mrb_class_defined_under",{configurable:!0,get:function(){f("You are getting _mrb_class_defined_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_defined_under",{configurable:!0,set:function(){f("You are setting _mrb_class_defined_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_get_under")||(Object.defineProperty(e.ready,"_mrb_class_get_under",{configurable:!0,get:function(){f("You are getting _mrb_class_get_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_get_under",{configurable:!0,set:function(){f("You are setting _mrb_class_get_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_defined")||(Object.defineProperty(e.ready,"_mrb_class_defined",{configurable:!0,get:function(){f("You are getting _mrb_class_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_defined",{configurable:!0,set:function(){f("You are setting _mrb_class_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_get")||(Object.defineProperty(e.ready,"_mrb_class_get",{configurable:!0,get:function(){f("You are getting _mrb_class_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_get",{configurable:!0,set:function(){f("You are setting _mrb_class_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_gc_arena_restore")||(Object.defineProperty(e.ready,"_mrb_sys_gc_arena_restore",{configurable:!0,get:function(){f("You are getting _mrb_sys_gc_arena_restore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_gc_arena_restore",{configurable:!0,set:function(){f("You are setting _mrb_sys_gc_arena_restore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_data_check_get_ptr")||(Object.defineProperty(e.ready,"_mrb_data_check_get_ptr",{configurable:!0,get:function(){f("You are getting _mrb_data_check_get_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_data_check_get_ptr",{configurable:!0,set:function(){f("You are setting _mrb_data_check_get_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_gc_arena_save")||(Object.defineProperty(e.ready,"_mrb_sys_gc_arena_save",{configurable:!0,get:function(){f("You are getting _mrb_sys_gc_arena_save on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_gc_arena_save",{configurable:!0,set:function(){f("You are setting _mrb_sys_gc_arena_save on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_obj_frozen")||(Object.defineProperty(e.ready,"_mrb_sys_obj_frozen",{configurable:!0,get:function(){f("You are getting _mrb_sys_obj_frozen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_obj_frozen",{configurable:!0,set:function(){f("You are setting _mrb_sys_obj_frozen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module_under")||(Object.defineProperty(e.ready,"_mrb_define_module_under",{configurable:!0,get:function(){f("You are getting _mrb_define_module_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module_under",{configurable:!0,set:function(){f("You are setting _mrb_define_module_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class_method")||(Object.defineProperty(e.ready,"_mrb_define_class_method",{configurable:!0,get:function(){f("You are getting _mrb_define_class_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class_method",{configurable:!0,set:function(){f("You are setting _mrb_define_class_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_singleton_method")||(Object.defineProperty(e.ready,"_mrb_define_singleton_method",{configurable:!0,get:function(){f("You are getting _mrb_define_singleton_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_singleton_method",{configurable:!0,set:function(){f("You are setting _mrb_define_singleton_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_method")||(Object.defineProperty(e.ready,"_mrb_define_method",{configurable:!0,get:function(){f("You are getting _mrb_define_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_method",{configurable:!0,set:function(){f("You are setting _mrb_define_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module_function")||(Object.defineProperty(e.ready,"_mrb_define_module_function",{configurable:!0,get:function(){f("You are getting _mrb_define_module_function on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module_function",{configurable:!0,set:function(){f("You are setting _mrb_define_module_function on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class")||(Object.defineProperty(e.ready,"_mrb_define_class",{configurable:!0,get:function(){f("You are getting _mrb_define_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class",{configurable:!0,set:function(){f("You are setting _mrb_define_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_alloc_rarray")||(Object.defineProperty(e.ready,"_mrb_sys_alloc_rarray",{configurable:!0,get:function(){f("You are getting _mrb_sys_alloc_rarray on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_alloc_rarray",{configurable:!0,set:function(){f("You are setting _mrb_sys_alloc_rarray on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_data_object_alloc")||(Object.defineProperty(e.ready,"_mrb_data_object_alloc",{configurable:!0,get:function(){f("You are getting _mrb_data_object_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_data_object_alloc",{configurable:!0,set:function(){f("You are setting _mrb_data_object_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_obj_value")||(Object.defineProperty(e.ready,"_mrb_sys_obj_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_obj_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_obj_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_obj_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module")||(Object.defineProperty(e.ready,"_mrb_define_module",{configurable:!0,get:function(){f("You are getting _mrb_define_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module",{configurable:!0,set:function(){f("You are setting _mrb_define_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_close")||(Object.defineProperty(e.ready,"_mrb_close",{configurable:!0,get:function(){f("You are getting _mrb_close on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_close",{configurable:!0,set:function(){f("You are setting _mrb_close on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_class_value")||(Object.defineProperty(e.ready,"_mrb_sys_class_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_class_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_class_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_class_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_new")||(Object.defineProperty(e.ready,"_mrb_obj_new",{configurable:!0,get:function(){f("You are getting _mrb_obj_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_new",{configurable:!0,set:function(){f("You are setting _mrb_obj_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_value_is_nil")||(Object.defineProperty(e.ready,"_mrb_sys_value_is_nil",{configurable:!0,get:function(){f("You are getting _mrb_sys_value_is_nil on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_value_is_nil",{configurable:!0,set:function(){f("You are setting _mrb_sys_value_is_nil on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_value_is_true")||(Object.defineProperty(e.ready,"_mrb_sys_value_is_true",{configurable:!0,get:function(){f("You are getting _mrb_sys_value_is_true on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_value_is_true",{configurable:!0,set:function(){f("You are setting _mrb_sys_value_is_true on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_value_is_false")||(Object.defineProperty(e.ready,"_mrb_sys_value_is_false",{configurable:!0,get:function(){f("You are getting _mrb_sys_value_is_false on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_value_is_false",{configurable:!0,set:function(){f("You are setting _mrb_sys_value_is_false on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_global_const")||(Object.defineProperty(e.ready,"_mrb_define_global_const",{configurable:!0,get:function(){f("You are getting _mrb_define_global_const on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_global_const",{configurable:!0,set:function(){f("You are setting _mrb_define_global_const on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_const")||(Object.defineProperty(e.ready,"_mrb_define_const",{configurable:!0,get:function(){f("You are getting _mrb_define_const on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_const",{configurable:!0,set:function(){f("You are setting _mrb_define_const on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_false_value")||(Object.defineProperty(e.ready,"_mrb_sys_false_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_false_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_false_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_false_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_true_value")||(Object.defineProperty(e.ready,"_mrb_sys_true_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_true_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_true_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_true_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_nil_value")||(Object.defineProperty(e.ready,"_mrb_sys_nil_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_nil_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_nil_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_nil_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_new")||(Object.defineProperty(e.ready,"_mrb_str_new",{configurable:!0,get:function(){f("You are getting _mrb_str_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_new",{configurable:!0,set:function(){f("You are setting _mrb_str_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_string_value_ptr")||(Object.defineProperty(e.ready,"_mrb_string_value_ptr",{configurable:!0,get:function(){f("You are getting _mrb_string_value_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_string_value_ptr",{configurable:!0,set:function(){f("You are setting _mrb_string_value_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_string_value_len")||(Object.defineProperty(e.ready,"_mrb_string_value_len",{configurable:!0,get:function(){f("You are getting _mrb_string_value_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_string_value_len",{configurable:!0,set:function(){f("You are setting _mrb_string_value_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_fixnum_value")||(Object.defineProperty(e.ready,"_mrb_sys_fixnum_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_fixnum_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_fixnum_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_fixnum_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_fixnum_to_cint")||(Object.defineProperty(e.ready,"_mrb_sys_fixnum_to_cint",{configurable:!0,get:function(){f("You are getting _mrb_sys_fixnum_to_cint on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_fixnum_to_cint",{configurable:!0,set:function(){f("You are setting _mrb_sys_fixnum_to_cint on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_float_value")||(Object.defineProperty(e.ready,"_mrb_sys_float_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_float_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_float_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_float_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_float_to_cdouble")||(Object.defineProperty(e.ready,"_mrb_sys_float_to_cdouble",{configurable:!0,get:function(){f("You are getting _mrb_sys_float_to_cdouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_float_to_cdouble",{configurable:!0,set:function(){f("You are setting _mrb_sys_float_to_cdouble on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_new_capa")||(Object.defineProperty(e.ready,"_mrb_hash_new_capa",{configurable:!0,get:function(){f("You are getting _mrb_hash_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_new_capa",{configurable:!0,set:function(){f("You are setting _mrb_hash_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_set")||(Object.defineProperty(e.ready,"_mrb_hash_set",{configurable:!0,get:function(){f("You are getting _mrb_hash_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_set",{configurable:!0,set:function(){f("You are setting _mrb_hash_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_keys")||(Object.defineProperty(e.ready,"_mrb_hash_keys",{configurable:!0,get:function(){f("You are getting _mrb_hash_keys on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_keys",{configurable:!0,set:function(){f("You are setting _mrb_hash_keys on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_get")||(Object.defineProperty(e.ready,"_mrb_hash_get",{configurable:!0,get:function(){f("You are getting _mrb_hash_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_get",{configurable:!0,set:function(){f("You are setting _mrb_hash_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_cptr_value")||(Object.defineProperty(e.ready,"_mrb_sys_cptr_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_cptr_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_cptr_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_cptr_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_protect")||(Object.defineProperty(e.ready,"_mrb_protect",{configurable:!0,get:function(){f("You are getting _mrb_protect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_protect",{configurable:!0,set:function(){f("You are setting _mrb_protect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_gc_live_objects")||(Object.defineProperty(e.ready,"_mrb_sys_gc_live_objects",{configurable:!0,get:function(){f("You are getting _mrb_sys_gc_live_objects on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_gc_live_objects",{configurable:!0,set:function(){f("You are setting _mrb_sys_gc_live_objects on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_safe_gc_mark")||(Object.defineProperty(e.ready,"_mrb_sys_safe_gc_mark",{configurable:!0,get:function(){f("You are getting _mrb_sys_safe_gc_mark on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_safe_gc_mark",{configurable:!0,set:function(){f("You are setting _mrb_sys_safe_gc_mark on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_incremental_gc")||(Object.defineProperty(e.ready,"_mrb_incremental_gc",{configurable:!0,get:function(){f("You are getting _mrb_incremental_gc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_incremental_gc",{configurable:!0,set:function(){f("You are setting _mrb_incremental_gc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_full_gc")||(Object.defineProperty(e.ready,"_mrb_full_gc",{configurable:!0,get:function(){f("You are getting _mrb_full_gc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_full_gc",{configurable:!0,set:function(){f("You are setting _mrb_full_gc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_gc_enable")||(Object.defineProperty(e.ready,"_mrb_sys_gc_enable",{configurable:!0,get:function(){f("You are getting _mrb_sys_gc_enable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_gc_enable",{configurable:!0,set:function(){f("You are setting _mrb_sys_gc_enable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_gc_disable")||(Object.defineProperty(e.ready,"_mrb_sys_gc_disable",{configurable:!0,get:function(){f("You are getting _mrb_sys_gc_disable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_gc_disable",{configurable:!0,set:function(){f("You are setting _mrb_sys_gc_disable on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gv_set")||(Object.defineProperty(e.ready,"_mrb_gv_set",{configurable:!0,get:function(){f("You are getting _mrb_gv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gv_set",{configurable:!0,set:function(){f("You are setting _mrb_gv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrbc_filename")||(Object.defineProperty(e.ready,"_mrbc_filename",{configurable:!0,get:function(){f("You are getting _mrbc_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrbc_filename",{configurable:!0,set:function(){f("You are setting _mrbc_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_top_self")||(Object.defineProperty(e.ready,"_mrb_top_self",{configurable:!0,get:function(){f("You are getting _mrb_top_self on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_top_self",{configurable:!0,set:function(){f("You are setting _mrb_top_self on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_module_value")||(Object.defineProperty(e.ready,"_mrb_sys_module_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_module_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_module_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_module_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_get_args")||(Object.defineProperty(e.ready,"_mrb_get_args",{configurable:!0,get:function(){f("You are getting _mrb_get_args on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_get_args",{configurable:!0,set:function(){f("You are setting _mrb_get_args on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_set_instance_tt")||(Object.defineProperty(e.ready,"_mrb_sys_set_instance_tt",{configurable:!0,get:function(){f("You are getting _mrb_sys_set_instance_tt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_set_instance_tt",{configurable:!0,set:function(){f("You are setting _mrb_sys_set_instance_tt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_const_defined_at")||(Object.defineProperty(e.ready,"_mrb_const_defined_at",{configurable:!0,get:function(){f("You are getting _mrb_const_defined_at on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_const_defined_at",{configurable:!0,set:function(){f("You are setting _mrb_const_defined_at on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_module_get_under")||(Object.defineProperty(e.ready,"_mrb_module_get_under",{configurable:!0,get:function(){f("You are getting _mrb_module_get_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_module_get_under",{configurable:!0,set:function(){f("You are setting _mrb_module_get_under on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_module_get")||(Object.defineProperty(e.ready,"_mrb_module_get",{configurable:!0,get:function(){f("You are getting _mrb_module_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_module_get",{configurable:!0,set:function(){f("You are setting _mrb_module_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrbc_context_new")||(Object.defineProperty(e.ready,"_mrbc_context_new",{configurable:!0,get:function(){f("You are getting _mrbc_context_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrbc_context_new",{configurable:!0,set:function(){f("You are setting _mrbc_context_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrbc_context_free")||(Object.defineProperty(e.ready,"_mrbc_context_free",{configurable:!0,get:function(){f("You are getting _mrbc_context_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrbc_context_free",{configurable:!0,set:function(){f("You are setting _mrbc_context_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_data_init")||(Object.defineProperty(e.ready,"_mrb_sys_data_init",{configurable:!0,get:function(){f("You are getting _mrb_sys_data_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_data_init",{configurable:!0,set:function(){f("You are setting _mrb_sys_data_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_exc_raise")||(Object.defineProperty(e.ready,"_mrb_exc_raise",{configurable:!0,get:function(){f("You are getting _mrb_exc_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_exc_raise",{configurable:!0,set:function(){f("You are setting _mrb_exc_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_raise")||(Object.defineProperty(e.ready,"_mrb_sys_raise",{configurable:!0,get:function(){f("You are getting _mrb_sys_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_raise",{configurable:!0,set:function(){f("You are setting _mrb_sys_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_class_ptr")||(Object.defineProperty(e.ready,"_mrb_sys_class_ptr",{configurable:!0,get:function(){f("You are getting _mrb_sys_class_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_class_ptr",{configurable:!0,set:function(){f("You are setting _mrb_sys_class_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_basic_ptr")||(Object.defineProperty(e.ready,"_mrb_sys_basic_ptr",{configurable:!0,get:function(){f("You are getting _mrb_sys_basic_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_basic_ptr",{configurable:!0,set:function(){f("You are setting _mrb_sys_basic_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_write_barrier")||(Object.defineProperty(e.ready,"_mrb_write_barrier",{configurable:!0,get:function(){f("You are getting _mrb_write_barrier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_write_barrier",{configurable:!0,set:function(){f("You are setting _mrb_write_barrier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_new_symbol")||(Object.defineProperty(e.ready,"_mrb_sys_new_symbol",{configurable:!0,get:function(){f("You are getting _mrb_sys_new_symbol on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_new_symbol",{configurable:!0,set:function(){f("You are setting _mrb_sys_new_symbol on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_repack_into_rarray")||(Object.defineProperty(e.ready,"_mrb_sys_repack_into_rarray",{configurable:!0,get:function(){f("You are getting _mrb_sys_repack_into_rarray on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_repack_into_rarray",{configurable:!0,set:function(){f("You are setting _mrb_sys_repack_into_rarray on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_cptr_ptr")||(Object.defineProperty(e.ready,"_mrb_sys_cptr_ptr",{configurable:!0,get:function(){f("You are getting _mrb_sys_cptr_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_cptr_ptr",{configurable:!0,set:function(){f("You are setting _mrb_sys_cptr_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_funcall_with_block")||(Object.defineProperty(e.ready,"_mrb_funcall_with_block",{configurable:!0,get:function(){f("You are getting _mrb_funcall_with_block on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_funcall_with_block",{configurable:!0,set:function(){f("You are setting _mrb_funcall_with_block on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_funcall_argv")||(Object.defineProperty(e.ready,"_mrb_funcall_argv",{configurable:!0,get:function(){f("You are getting _mrb_funcall_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_funcall_argv",{configurable:!0,set:function(){f("You are setting _mrb_funcall_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_load_nstring_cxt")||(Object.defineProperty(e.ready,"_mrb_load_nstring_cxt",{configurable:!0,get:function(){f("You are getting _mrb_load_nstring_cxt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_load_nstring_cxt",{configurable:!0,set:function(){f("You are setting _mrb_load_nstring_cxt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_yield")||(Object.defineProperty(e.ready,"_mrb_yield",{configurable:!0,get:function(){f("You are getting _mrb_yield on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_yield",{configurable:!0,set:function(){f("You are setting _mrb_yield on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_range_beg_len")||(Object.defineProperty(e.ready,"_mrb_range_beg_len",{configurable:!0,get:function(){f("You are getting _mrb_range_beg_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_range_beg_len",{configurable:!0,set:function(){f("You are setting _mrb_range_beg_len on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_default_allocf")||(Object.defineProperty(e.ready,"_mrb_default_allocf",{configurable:!0,get:function(){f("You are getting _mrb_default_allocf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_default_allocf",{configurable:!0,set:function(){f("You are setting _mrb_default_allocf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_open_allocf")||(Object.defineProperty(e.ready,"_mrb_open_allocf",{configurable:!0,get:function(){f("You are getting _mrb_open_allocf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_open_allocf",{configurable:!0,set:function(){f("You are setting _mrb_open_allocf on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_exc_new")||(Object.defineProperty(e.ready,"_mrb_exc_new",{configurable:!0,get:function(){f("You are getting _mrb_exc_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_exc_new",{configurable:!0,set:function(){f("You are setting _mrb_exc_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_exc_new_str")||(Object.defineProperty(e.ready,"_mrb_exc_new_str",{configurable:!0,get:function(){f("You are getting _mrb_exc_new_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_exc_new_str",{configurable:!0,set:function(){f("You are setting _mrb_exc_new_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_format")||(Object.defineProperty(e.ready,"_mrb_format",{configurable:!0,get:function(){f("You are getting _mrb_format on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_format",{configurable:!0,set:function(){f("You are setting _mrb_format on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_vformat")||(Object.defineProperty(e.ready,"_mrb_vformat",{configurable:!0,get:function(){f("You are getting _mrb_vformat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_vformat",{configurable:!0,set:function(){f("You are setting _mrb_vformat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_to_str")||(Object.defineProperty(e.ready,"_mrb_to_str",{configurable:!0,get:function(){f("You are getting _mrb_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_to_str",{configurable:!0,set:function(){f("You are setting _mrb_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_attr_get")||(Object.defineProperty(e.ready,"_mrb_attr_get",{configurable:!0,get:function(){f("You are getting _mrb_attr_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_attr_get",{configurable:!0,set:function(){f("You are setting _mrb_attr_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_classname")||(Object.defineProperty(e.ready,"_mrb_obj_classname",{configurable:!0,get:function(){f("You are getting _mrb_obj_classname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_classname",{configurable:!0,set:function(){f("You are setting _mrb_obj_classname on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_new_cstr")||(Object.defineProperty(e.ready,"_mrb_str_new_cstr",{configurable:!0,get:function(){f("You are getting _mrb_str_new_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_new_cstr",{configurable:!0,set:function(){f("You are setting _mrb_str_new_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_class")||(Object.defineProperty(e.ready,"_mrb_obj_class",{configurable:!0,get:function(){f("You are getting _mrb_obj_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_class",{configurable:!0,set:function(){f("You are setting _mrb_obj_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_as_string")||(Object.defineProperty(e.ready,"_mrb_obj_as_string",{configurable:!0,get:function(){f("You are getting _mrb_obj_as_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_as_string",{configurable:!0,set:function(){f("You are setting _mrb_obj_as_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_is_kind_of")||(Object.defineProperty(e.ready,"_mrb_obj_is_kind_of",{configurable:!0,get:function(){f("You are getting _mrb_obj_is_kind_of on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_is_kind_of",{configurable:!0,set:function(){f("You are setting _mrb_obj_is_kind_of on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_exc_get_id")||(Object.defineProperty(e.ready,"_mrb_exc_get_id",{configurable:!0,get:function(){f("You are getting _mrb_exc_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_exc_get_id",{configurable:!0,set:function(){f("You are setting _mrb_exc_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_raise")||(Object.defineProperty(e.ready,"_mrb_raise",{configurable:!0,get:function(){f("You are getting _mrb_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_raise",{configurable:!0,set:function(){f("You are setting _mrb_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_p")||(Object.defineProperty(e.ready,"_mrb_p",{configurable:!0,get:function(){f("You are getting _mrb_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_p",{configurable:!0,set:function(){f("You are setting _mrb_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_new_capa")||(Object.defineProperty(e.ready,"_mrb_str_new_capa",{configurable:!0,get:function(){f("You are getting _mrb_str_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_new_capa",{configurable:!0,set:function(){f("You are setting _mrb_str_new_capa on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_raisef")||(Object.defineProperty(e.ready,"_mrb_raisef",{configurable:!0,get:function(){f("You are getting _mrb_raisef on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_raisef",{configurable:!0,set:function(){f("You are setting _mrb_raisef on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_inspect")||(Object.defineProperty(e.ready,"_mrb_inspect",{configurable:!0,get:function(){f("You are getting _mrb_inspect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_inspect",{configurable:!0,set:function(){f("You are setting _mrb_inspect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_cat")||(Object.defineProperty(e.ready,"_mrb_str_cat",{configurable:!0,get:function(){f("You are getting _mrb_str_cat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_cat",{configurable:!0,set:function(){f("You are setting _mrb_str_cat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_name_error")||(Object.defineProperty(e.ready,"_mrb_name_error",{configurable:!0,get:function(){f("You are getting _mrb_name_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_name_error",{configurable:!0,set:function(){f("You are setting _mrb_name_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_warn")||(Object.defineProperty(e.ready,"_mrb_warn",{configurable:!0,get:function(){f("You are getting _mrb_warn on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_warn",{configurable:!0,set:function(){f("You are setting _mrb_warn on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_bug")||(Object.defineProperty(e.ready,"_mrb_bug",{configurable:!0,get:function(){f("You are getting _mrb_bug on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_bug",{configurable:!0,set:function(){f("You are setting _mrb_bug on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_make_exception")||(Object.defineProperty(e.ready,"_mrb_make_exception",{configurable:!0,get:function(){f("You are getting _mrb_make_exception on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_make_exception",{configurable:!0,set:function(){f("You are setting _mrb_make_exception on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_argnum_error")||(Object.defineProperty(e.ready,"_mrb_argnum_error",{configurable:!0,get:function(){f("You are getting _mrb_argnum_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_argnum_error",{configurable:!0,set:function(){f("You are setting _mrb_argnum_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_respond_to")||(Object.defineProperty(e.ready,"_mrb_respond_to",{configurable:!0,get:function(){f("You are getting _mrb_respond_to on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_respond_to",{configurable:!0,set:function(){f("You are setting _mrb_respond_to on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_set")||(Object.defineProperty(e.ready,"_mrb_iv_set",{configurable:!0,get:function(){f("You are getting _mrb_iv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_set",{configurable:!0,set:function(){f("You are setting _mrb_iv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_fail")||(Object.defineProperty(e.ready,"_mrb_sys_fail",{configurable:!0,get:function(){f("You are getting _mrb_sys_fail on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_fail",{configurable:!0,set:function(){f("You are setting _mrb_sys_fail on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_funcall")||(Object.defineProperty(e.ready,"_mrb_funcall",{configurable:!0,get:function(){f("You are getting _mrb_funcall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_funcall",{configurable:!0,set:function(){f("You are setting _mrb_funcall on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_no_method_error")||(Object.defineProperty(e.ready,"_mrb_no_method_error",{configurable:!0,get:function(){f("You are getting _mrb_no_method_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_no_method_error",{configurable:!0,set:function(){f("You are setting _mrb_no_method_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_frozen_error")||(Object.defineProperty(e.ready,"_mrb_frozen_error",{configurable:!0,get:function(){f("You are getting _mrb_frozen_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_frozen_error",{configurable:!0,set:function(){f("You are setting _mrb_frozen_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_free")||(Object.defineProperty(e.ready,"_mrb_free",{configurable:!0,get:function(){f("You are getting _mrb_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_free",{configurable:!0,set:function(){f("You are setting _mrb_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_exc_backtrace")||(Object.defineProperty(e.ready,"_mrb_exc_backtrace",{configurable:!0,get:function(){f("You are getting _mrb_exc_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_exc_backtrace",{configurable:!0,set:function(){f("You are setting _mrb_exc_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_new_static")||(Object.defineProperty(e.ready,"_mrb_str_new_static",{configurable:!0,get:function(){f("You are getting _mrb_str_new_static on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_new_static",{configurable:!0,set:function(){f("You are setting _mrb_str_new_static on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_equal")||(Object.defineProperty(e.ready,"_mrb_obj_equal",{configurable:!0,get:function(){f("You are getting _mrb_obj_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_equal",{configurable:!0,set:function(){f("You are setting _mrb_obj_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_clone")||(Object.defineProperty(e.ready,"_mrb_obj_clone",{configurable:!0,get:function(){f("You are getting _mrb_obj_clone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_clone",{configurable:!0,set:function(){f("You are setting _mrb_obj_clone on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_funcall_id")||(Object.defineProperty(e.ready,"_mrb_funcall_id",{configurable:!0,get:function(){f("You are getting _mrb_funcall_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_funcall_id",{configurable:!0,set:function(){f("You are setting _mrb_funcall_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_get_arg1")||(Object.defineProperty(e.ready,"_mrb_get_arg1",{configurable:!0,get:function(){f("You are getting _mrb_get_arg1 on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_get_arg1",{configurable:!0,set:function(){f("You are setting _mrb_get_arg1 on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_mt_foreach")||(Object.defineProperty(e.ready,"_mrb_mt_foreach",{configurable:!0,get:function(){f("You are getting _mrb_mt_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_mt_foreach",{configurable:!0,set:function(){f("You are setting _mrb_mt_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_path")||(Object.defineProperty(e.ready,"_mrb_class_path",{configurable:!0,get:function(){f("You are getting _mrb_class_path on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_path",{configurable:!0,set:function(){f("You are setting _mrb_class_path on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module_id")||(Object.defineProperty(e.ready,"_mrb_define_module_id",{configurable:!0,get:function(){f("You are getting _mrb_define_module_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module_id",{configurable:!0,set:function(){f("You are setting _mrb_define_module_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gc_mark")||(Object.defineProperty(e.ready,"_mrb_gc_mark",{configurable:!0,get:function(){f("You are getting _mrb_gc_mark on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gc_mark",{configurable:!0,set:function(){f("You are setting _mrb_gc_mark on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_iv_defined")||(Object.defineProperty(e.ready,"_mrb_obj_iv_defined",{configurable:!0,get:function(){f("You are getting _mrb_obj_iv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_iv_defined",{configurable:!0,set:function(){f("You are setting _mrb_obj_iv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_iv_get")||(Object.defineProperty(e.ready,"_mrb_obj_iv_get",{configurable:!0,get:function(){f("You are getting _mrb_obj_iv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_iv_get",{configurable:!0,set:function(){f("You are setting _mrb_obj_iv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_dup")||(Object.defineProperty(e.ready,"_mrb_str_dup",{configurable:!0,get:function(){f("You are getting _mrb_str_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_dup",{configurable:!0,set:function(){f("You are setting _mrb_str_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_const_get")||(Object.defineProperty(e.ready,"_mrb_const_get",{configurable:!0,get:function(){f("You are getting _mrb_const_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_const_get",{configurable:!0,set:function(){f("You are setting _mrb_const_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_type")||(Object.defineProperty(e.ready,"_mrb_check_type",{configurable:!0,get:function(){f("You are getting _mrb_check_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_type",{configurable:!0,set:function(){f("You are setting _mrb_check_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_alloc")||(Object.defineProperty(e.ready,"_mrb_obj_alloc",{configurable:!0,get:function(){f("You are getting _mrb_obj_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_alloc",{configurable:!0,set:function(){f("You are setting _mrb_obj_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_malloc")||(Object.defineProperty(e.ready,"_mrb_malloc",{configurable:!0,get:function(){f("You are getting _mrb_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_malloc",{configurable:!0,set:function(){f("You are setting _mrb_malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_iv_set")||(Object.defineProperty(e.ready,"_mrb_obj_iv_set",{configurable:!0,get:function(){f("You are getting _mrb_obj_iv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_iv_set",{configurable:!0,set:function(){f("You are setting _mrb_obj_iv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module_under_id")||(Object.defineProperty(e.ready,"_mrb_define_module_under_id",{configurable:!0,get:function(){f("You are getting _mrb_define_module_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module_under_id",{configurable:!0,set:function(){f("You are setting _mrb_define_module_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class_id")||(Object.defineProperty(e.ready,"_mrb_define_class_id",{configurable:!0,get:function(){f("You are getting _mrb_define_class_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class_id",{configurable:!0,set:function(){f("You are setting _mrb_define_class_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_new")||(Object.defineProperty(e.ready,"_mrb_class_new",{configurable:!0,get:function(){f("You are getting _mrb_class_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_new",{configurable:!0,set:function(){f("You are setting _mrb_class_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_real")||(Object.defineProperty(e.ready,"_mrb_class_real",{configurable:!0,get:function(){f("You are getting _mrb_class_real on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_real",{configurable:!0,set:function(){f("You are setting _mrb_class_real on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_func_basic_p")||(Object.defineProperty(e.ready,"_mrb_func_basic_p",{configurable:!0,get:function(){f("You are getting _mrb_func_basic_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_func_basic_p",{configurable:!0,set:function(){f("You are setting _mrb_func_basic_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_const_defined")||(Object.defineProperty(e.ready,"_mrb_const_defined",{configurable:!0,get:function(){f("You are getting _mrb_const_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_const_defined",{configurable:!0,set:function(){f("You are setting _mrb_const_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_defined_id")||(Object.defineProperty(e.ready,"_mrb_class_defined_id",{configurable:!0,get:function(){f("You are getting _mrb_class_defined_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_defined_id",{configurable:!0,set:function(){f("You are setting _mrb_class_defined_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_defined_under_id")||(Object.defineProperty(e.ready,"_mrb_class_defined_under_id",{configurable:!0,get:function(){f("You are getting _mrb_class_defined_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_defined_under_id",{configurable:!0,set:function(){f("You are setting _mrb_class_defined_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_get_under_id")||(Object.defineProperty(e.ready,"_mrb_class_get_under_id",{configurable:!0,get:function(){f("You are getting _mrb_class_get_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_get_under_id",{configurable:!0,set:function(){f("You are setting _mrb_class_get_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_get_id")||(Object.defineProperty(e.ready,"_mrb_class_get_id",{configurable:!0,get:function(){f("You are getting _mrb_class_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_get_id",{configurable:!0,set:function(){f("You are setting _mrb_class_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_module_get_under_id")||(Object.defineProperty(e.ready,"_mrb_module_get_under_id",{configurable:!0,get:function(){f("You are getting _mrb_module_get_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_module_get_under_id",{configurable:!0,set:function(){f("You are setting _mrb_module_get_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_module_get_id")||(Object.defineProperty(e.ready,"_mrb_module_get_id",{configurable:!0,get:function(){f("You are getting _mrb_module_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_module_get_id",{configurable:!0,set:function(){f("You are setting _mrb_module_get_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class_under_id")||(Object.defineProperty(e.ready,"_mrb_define_class_under_id",{configurable:!0,get:function(){f("You are getting _mrb_define_class_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class_under_id",{configurable:!0,set:function(){f("You are setting _mrb_define_class_under_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_method_raw")||(Object.defineProperty(e.ready,"_mrb_define_method_raw",{configurable:!0,get:function(){f("You are getting _mrb_define_method_raw on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_method_raw",{configurable:!0,set:function(){f("You are setting _mrb_define_method_raw on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_field_write_barrier")||(Object.defineProperty(e.ready,"_mrb_field_write_barrier",{configurable:!0,get:function(){f("You are getting _mrb_field_write_barrier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_field_write_barrier",{configurable:!0,set:function(){f("You are setting _mrb_field_write_barrier on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_method_id")||(Object.defineProperty(e.ready,"_mrb_define_method_id",{configurable:!0,get:function(){f("You are getting _mrb_define_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_method_id",{configurable:!0,set:function(){f("You are setting _mrb_define_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_notimplement")||(Object.defineProperty(e.ready,"_mrb_notimplement",{configurable:!0,get:function(){f("You are getting _mrb_notimplement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_notimplement",{configurable:!0,set:function(){f("You are setting _mrb_notimplement on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_notimplement_m")||(Object.defineProperty(e.ready,"_mrb_notimplement_m",{configurable:!0,get:function(){f("You are getting _mrb_notimplement_m on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_notimplement_m",{configurable:!0,set:function(){f("You are setting _mrb_notimplement_m on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_get_argc")||(Object.defineProperty(e.ready,"_mrb_get_argc",{configurable:!0,get:function(){f("You are getting _mrb_get_argc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_get_argc",{configurable:!0,set:function(){f("You are setting _mrb_get_argc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_get_argv")||(Object.defineProperty(e.ready,"_mrb_get_argv",{configurable:!0,get:function(){f("You are getting _mrb_get_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_get_argv",{configurable:!0,set:function(){f("You are setting _mrb_get_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_string_cstr")||(Object.defineProperty(e.ready,"_mrb_string_cstr",{configurable:!0,get:function(){f("You are getting _mrb_string_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_string_cstr",{configurable:!0,set:function(){f("You are setting _mrb_string_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_to_int")||(Object.defineProperty(e.ready,"_mrb_to_int",{configurable:!0,get:function(){f("You are getting _mrb_to_int on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_to_int",{configurable:!0,set:function(){f("You are setting _mrb_to_int on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_to_sym")||(Object.defineProperty(e.ready,"_mrb_obj_to_sym",{configurable:!0,get:function(){f("You are getting _mrb_obj_to_sym on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_to_sym",{configurable:!0,set:function(){f("You are setting _mrb_obj_to_sym on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_data_get_ptr")||(Object.defineProperty(e.ready,"_mrb_data_get_ptr",{configurable:!0,get:function(){f("You are getting _mrb_data_get_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_data_get_ptr",{configurable:!0,set:function(){f("You are setting _mrb_data_get_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_dup")||(Object.defineProperty(e.ready,"_mrb_hash_dup",{configurable:!0,get:function(){f("You are getting _mrb_hash_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_dup",{configurable:!0,set:function(){f("You are setting _mrb_hash_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_new")||(Object.defineProperty(e.ready,"_mrb_hash_new",{configurable:!0,get:function(){f("You are getting _mrb_hash_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_new",{configurable:!0,set:function(){f("You are setting _mrb_hash_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_key_p")||(Object.defineProperty(e.ready,"_mrb_hash_key_p",{configurable:!0,get:function(){f("You are getting _mrb_hash_key_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_key_p",{configurable:!0,set:function(){f("You are setting _mrb_hash_key_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_delete_key")||(Object.defineProperty(e.ready,"_mrb_hash_delete_key",{configurable:!0,get:function(){f("You are getting _mrb_hash_delete_key on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_delete_key",{configurable:!0,set:function(){f("You are setting _mrb_hash_delete_key on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_empty_p")||(Object.defineProperty(e.ready,"_mrb_hash_empty_p",{configurable:!0,get:function(){f("You are getting _mrb_hash_empty_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_empty_p",{configurable:!0,set:function(){f("You are setting _mrb_hash_empty_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_include_module")||(Object.defineProperty(e.ready,"_mrb_include_module",{configurable:!0,get:function(){f("You are getting _mrb_include_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_include_module",{configurable:!0,set:function(){f("You are setting _mrb_include_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_prepend_module")||(Object.defineProperty(e.ready,"_mrb_prepend_module",{configurable:!0,get:function(){f("You are getting _mrb_prepend_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_prepend_module",{configurable:!0,set:function(){f("You are setting _mrb_prepend_module on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_singleton_class_ptr")||(Object.defineProperty(e.ready,"_mrb_singleton_class_ptr",{configurable:!0,get:function(){f("You are getting _mrb_singleton_class_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_singleton_class_ptr",{configurable:!0,set:function(){f("You are setting _mrb_singleton_class_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_singleton_class")||(Object.defineProperty(e.ready,"_mrb_singleton_class",{configurable:!0,get:function(){f("You are getting _mrb_singleton_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_singleton_class",{configurable:!0,set:function(){f("You are setting _mrb_singleton_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_singleton_method_id")||(Object.defineProperty(e.ready,"_mrb_define_singleton_method_id",{configurable:!0,get:function(){f("You are getting _mrb_define_singleton_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_singleton_method_id",{configurable:!0,set:function(){f("You are setting _mrb_define_singleton_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_class_method_id")||(Object.defineProperty(e.ready,"_mrb_define_class_method_id",{configurable:!0,get:function(){f("You are getting _mrb_define_class_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_class_method_id",{configurable:!0,set:function(){f("You are setting _mrb_define_class_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_module_function_id")||(Object.defineProperty(e.ready,"_mrb_define_module_function_id",{configurable:!0,get:function(){f("You are getting _mrb_define_module_function_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_module_function_id",{configurable:!0,set:function(){f("You are setting _mrb_define_module_function_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_method_search_vm")||(Object.defineProperty(e.ready,"_mrb_method_search_vm",{configurable:!0,get:function(){f("You are getting _mrb_method_search_vm on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_method_search_vm",{configurable:!0,set:function(){f("You are setting _mrb_method_search_vm on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_method_search")||(Object.defineProperty(e.ready,"_mrb_method_search",{configurable:!0,get:function(){f("You are getting _mrb_method_search on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_method_search",{configurable:!0,set:function(){f("You are setting _mrb_method_search on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_respond_to")||(Object.defineProperty(e.ready,"_mrb_obj_respond_to",{configurable:!0,get:function(){f("You are getting _mrb_obj_respond_to on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_respond_to",{configurable:!0,set:function(){f("You are setting _mrb_obj_respond_to on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_class_name")||(Object.defineProperty(e.ready,"_mrb_class_name",{configurable:!0,get:function(){f("You are getting _mrb_class_name on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_class_name",{configurable:!0,set:function(){f("You are setting _mrb_class_name on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ptr_to_str")||(Object.defineProperty(e.ready,"_mrb_ptr_to_str",{configurable:!0,get:function(){f("You are getting _mrb_ptr_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ptr_to_str",{configurable:!0,set:function(){f("You are setting _mrb_ptr_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_cat_str")||(Object.defineProperty(e.ready,"_mrb_str_cat_str",{configurable:!0,get:function(){f("You are getting _mrb_str_cat_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_cat_str",{configurable:!0,set:function(){f("You are setting _mrb_str_cat_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_module_new")||(Object.defineProperty(e.ready,"_mrb_module_new",{configurable:!0,get:function(){f("You are getting _mrb_module_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_module_new",{configurable:!0,set:function(){f("You are setting _mrb_module_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_alias_method")||(Object.defineProperty(e.ready,"_mrb_alias_method",{configurable:!0,get:function(){f("You are getting _mrb_alias_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_alias_method",{configurable:!0,set:function(){f("You are setting _mrb_alias_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_alias")||(Object.defineProperty(e.ready,"_mrb_define_alias",{configurable:!0,get:function(){f("You are getting _mrb_define_alias on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_alias",{configurable:!0,set:function(){f("You are setting _mrb_define_alias on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_alias_id")||(Object.defineProperty(e.ready,"_mrb_define_alias_id",{configurable:!0,get:function(){f("You are getting _mrb_define_alias_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_alias_id",{configurable:!0,set:function(){f("You are setting _mrb_define_alias_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_get")||(Object.defineProperty(e.ready,"_mrb_iv_get",{configurable:!0,get:function(){f("You are getting _mrb_iv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_get",{configurable:!0,set:function(){f("You are setting _mrb_iv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_any_to_s")||(Object.defineProperty(e.ready,"_mrb_any_to_s",{configurable:!0,get:function(){f("You are getting _mrb_any_to_s on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_any_to_s",{configurable:!0,set:function(){f("You are setting _mrb_any_to_s on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_undef_method_id")||(Object.defineProperty(e.ready,"_mrb_undef_method_id",{configurable:!0,get:function(){f("You are getting _mrb_undef_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_undef_method_id",{configurable:!0,set:function(){f("You are setting _mrb_undef_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_undef_method")||(Object.defineProperty(e.ready,"_mrb_undef_method",{configurable:!0,get:function(){f("You are getting _mrb_undef_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_undef_method",{configurable:!0,set:function(){f("You are setting _mrb_undef_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_undef_class_method_id")||(Object.defineProperty(e.ready,"_mrb_undef_class_method_id",{configurable:!0,get:function(){f("You are getting _mrb_undef_class_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_undef_class_method_id",{configurable:!0,set:function(){f("You are setting _mrb_undef_class_method_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_undef_class_method")||(Object.defineProperty(e.ready,"_mrb_undef_class_method",{configurable:!0,get:function(){f("You are getting _mrb_undef_class_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_undef_class_method",{configurable:!0,set:function(){f("You are setting _mrb_undef_class_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_remove_method")||(Object.defineProperty(e.ready,"_mrb_remove_method",{configurable:!0,get:function(){f("You are getting _mrb_remove_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_remove_method",{configurable:!0,set:function(){f("You are setting _mrb_remove_method on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_copy")||(Object.defineProperty(e.ready,"_mrb_iv_copy",{configurable:!0,get:function(){f("You are getting _mrb_iv_copy on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_copy",{configurable:!0,set:function(){f("You are setting _mrb_iv_copy on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_remove")||(Object.defineProperty(e.ready,"_mrb_iv_remove",{configurable:!0,get:function(){f("You are getting _mrb_iv_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_remove",{configurable:!0,set:function(){f("You are setting _mrb_iv_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_dup")||(Object.defineProperty(e.ready,"_mrb_obj_dup",{configurable:!0,get:function(){f("You are getting _mrb_obj_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_dup",{configurable:!0,set:function(){f("You are setting _mrb_obj_dup on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_define_const_id")||(Object.defineProperty(e.ready,"_mrb_define_const_id",{configurable:!0,get:function(){f("You are getting _mrb_define_const_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_define_const_id",{configurable:!0,set:function(){f("You are setting _mrb_define_const_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_yield_with_class")||(Object.defineProperty(e.ready,"_mrb_yield_with_class",{configurable:!0,get:function(){f("You are getting _mrb_yield_with_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_yield_with_class",{configurable:!0,set:function(){f("You are setting _mrb_yield_with_class on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ensure_string_type")||(Object.defineProperty(e.ready,"_mrb_ensure_string_type",{configurable:!0,get:function(){f("You are getting _mrb_ensure_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ensure_string_type",{configurable:!0,set:function(){f("You are setting _mrb_ensure_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_index")||(Object.defineProperty(e.ready,"_mrb_str_index",{configurable:!0,get:function(){f("You are getting _mrb_str_index on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_index",{configurable:!0,set:function(){f("You are setting _mrb_str_index on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_const_set")||(Object.defineProperty(e.ready,"_mrb_const_set",{configurable:!0,get:function(){f("You are getting _mrb_const_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_const_set",{configurable:!0,set:function(){f("You are setting _mrb_const_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_calloc")||(Object.defineProperty(e.ready,"_mrb_calloc",{configurable:!0,get:function(){f("You are getting _mrb_calloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_calloc",{configurable:!0,set:function(){f("You are setting _mrb_calloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_alloca")||(Object.defineProperty(e.ready,"_mrb_alloca",{configurable:!0,get:function(){f("You are getting _mrb_alloca on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_alloca",{configurable:!0,set:function(){f("You are setting _mrb_alloca on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_name_sym_check")||(Object.defineProperty(e.ready,"_mrb_iv_name_sym_check",{configurable:!0,get:function(){f("You are getting _mrb_iv_name_sym_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_name_sym_check",{configurable:!0,set:function(){f("You are setting _mrb_iv_name_sym_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_proc_new_cfunc_with_env")||(Object.defineProperty(e.ready,"_mrb_proc_new_cfunc_with_env",{configurable:!0,get:function(){f("You are getting _mrb_proc_new_cfunc_with_env on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_proc_new_cfunc_with_env",{configurable:!0,set:function(){f("You are setting _mrb_proc_new_cfunc_with_env on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_proc_cfunc_env_get")||(Object.defineProperty(e.ready,"_mrb_proc_cfunc_env_get",{configurable:!0,get:function(){f("You are getting _mrb_proc_cfunc_env_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_proc_cfunc_env_get",{configurable:!0,set:function(){f("You are setting _mrb_proc_cfunc_env_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_realloc")||(Object.defineProperty(e.ready,"_mrb_realloc",{configurable:!0,get:function(){f("You are getting _mrb_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_realloc",{configurable:!0,set:function(){f("You are setting _mrb_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_strlen")||(Object.defineProperty(e.ready,"_mrb_str_strlen",{configurable:!0,get:function(){f("You are getting _mrb_str_strlen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_strlen",{configurable:!0,set:function(){f("You are setting _mrb_str_strlen on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_modify_keep_ascii")||(Object.defineProperty(e.ready,"_mrb_str_modify_keep_ascii",{configurable:!0,get:function(){f("You are getting _mrb_str_modify_keep_ascii on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_modify_keep_ascii",{configurable:!0,set:function(){f("You are setting _mrb_str_modify_keep_ascii on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_modify")||(Object.defineProperty(e.ready,"_mrb_str_modify",{configurable:!0,get:function(){f("You are getting _mrb_str_modify on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_modify",{configurable:!0,set:function(){f("You are setting _mrb_str_modify on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_resize")||(Object.defineProperty(e.ready,"_mrb_str_resize",{configurable:!0,get:function(){f("You are getting _mrb_str_resize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_resize",{configurable:!0,set:function(){f("You are setting _mrb_str_resize on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_to_cstr")||(Object.defineProperty(e.ready,"_mrb_str_to_cstr",{configurable:!0,get:function(){f("You are getting _mrb_str_to_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_to_cstr",{configurable:!0,set:function(){f("You are setting _mrb_str_to_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_concat")||(Object.defineProperty(e.ready,"_mrb_str_concat",{configurable:!0,get:function(){f("You are getting _mrb_str_concat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_concat",{configurable:!0,set:function(){f("You are setting _mrb_str_concat on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_fixnum_to_str")||(Object.defineProperty(e.ready,"_mrb_fixnum_to_str",{configurable:!0,get:function(){f("You are getting _mrb_fixnum_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_fixnum_to_str",{configurable:!0,set:function(){f("You are setting _mrb_fixnum_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_type_convert")||(Object.defineProperty(e.ready,"_mrb_type_convert",{configurable:!0,get:function(){f("You are getting _mrb_type_convert on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_type_convert",{configurable:!0,set:function(){f("You are setting _mrb_type_convert on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_plus")||(Object.defineProperty(e.ready,"_mrb_str_plus",{configurable:!0,get:function(){f("You are getting _mrb_str_plus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_plus",{configurable:!0,set:function(){f("You are setting _mrb_str_plus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_cmp")||(Object.defineProperty(e.ready,"_mrb_str_cmp",{configurable:!0,get:function(){f("You are getting _mrb_str_cmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_cmp",{configurable:!0,set:function(){f("You are setting _mrb_str_cmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_equal")||(Object.defineProperty(e.ready,"_mrb_str_equal",{configurable:!0,get:function(){f("You are getting _mrb_str_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_equal",{configurable:!0,set:function(){f("You are setting _mrb_str_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_substr")||(Object.defineProperty(e.ready,"_mrb_str_substr",{configurable:!0,get:function(){f("You are getting _mrb_str_substr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_substr",{configurable:!0,set:function(){f("You are setting _mrb_str_substr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_intern")||(Object.defineProperty(e.ready,"_mrb_str_intern",{configurable:!0,get:function(){f("You are getting _mrb_str_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_intern",{configurable:!0,set:function(){f("You are setting _mrb_str_intern on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cstr_to_inum")||(Object.defineProperty(e.ready,"_mrb_cstr_to_inum",{configurable:!0,get:function(){f("You are getting _mrb_cstr_to_inum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cstr_to_inum",{configurable:!0,set:function(){f("You are setting _mrb_cstr_to_inum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_string_value_cstr")||(Object.defineProperty(e.ready,"_mrb_string_value_cstr",{configurable:!0,get:function(){f("You are getting _mrb_string_value_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_string_value_cstr",{configurable:!0,set:function(){f("You are setting _mrb_string_value_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_to_inum")||(Object.defineProperty(e.ready,"_mrb_str_to_inum",{configurable:!0,get:function(){f("You are getting _mrb_str_to_inum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_to_inum",{configurable:!0,set:function(){f("You are setting _mrb_str_to_inum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_float_read")||(Object.defineProperty(e.ready,"_mrb_float_read",{configurable:!0,get:function(){f("You are getting _mrb_float_read on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_float_read",{configurable:!0,set:function(){f("You are setting _mrb_float_read on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cstr_to_dbl")||(Object.defineProperty(e.ready,"_mrb_cstr_to_dbl",{configurable:!0,get:function(){f("You are getting _mrb_cstr_to_dbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cstr_to_dbl",{configurable:!0,set:function(){f("You are setting _mrb_cstr_to_dbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_to_dbl")||(Object.defineProperty(e.ready,"_mrb_str_to_dbl",{configurable:!0,get:function(){f("You are getting _mrb_str_to_dbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_to_dbl",{configurable:!0,set:function(){f("You are setting _mrb_str_to_dbl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_cat_cstr")||(Object.defineProperty(e.ready,"_mrb_str_cat_cstr",{configurable:!0,get:function(){f("You are getting _mrb_str_cat_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_cat_cstr",{configurable:!0,set:function(){f("You are setting _mrb_str_cat_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_str_append")||(Object.defineProperty(e.ready,"_mrb_str_append",{configurable:!0,get:function(){f("You are getting _mrb_str_append on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_str_append",{configurable:!0,set:function(){f("You are setting _mrb_str_append on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_range_excl")||(Object.defineProperty(e.ready,"_mrb_sys_range_excl",{configurable:!0,get:function(){f("You are getting _mrb_sys_range_excl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_range_excl",{configurable:!0,set:function(){f("You are setting _mrb_sys_range_excl on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_range_ptr")||(Object.defineProperty(e.ready,"_mrb_range_ptr",{configurable:!0,get:function(){f("You are getting _mrb_range_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_range_ptr",{configurable:!0,set:function(){f("You are setting _mrb_range_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_obj_ptr")||(Object.defineProperty(e.ready,"_mrb_sys_obj_ptr",{configurable:!0,get:function(){f("You are getting _mrb_sys_obj_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_obj_ptr",{configurable:!0,set:function(){f("You are setting _mrb_sys_obj_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_proc_ptr")||(Object.defineProperty(e.ready,"_mrb_sys_proc_ptr",{configurable:!0,get:function(){f("You are getting _mrb_sys_proc_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_proc_ptr",{configurable:!0,set:function(){f("You are setting _mrb_sys_proc_ptr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_class_to_rclass")||(Object.defineProperty(e.ready,"_mrb_sys_class_to_rclass",{configurable:!0,get:function(){f("You are getting _mrb_sys_class_to_rclass on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_class_to_rclass",{configurable:!0,set:function(){f("You are setting _mrb_sys_class_to_rclass on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_data_value")||(Object.defineProperty(e.ready,"_mrb_sys_data_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_data_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_data_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_data_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_proc_value")||(Object.defineProperty(e.ready,"_mrb_sys_proc_value",{configurable:!0,get:function(){f("You are getting _mrb_sys_proc_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_proc_value",{configurable:!0,set:function(){f("You are setting _mrb_sys_proc_value on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_sys_raise_current_exception")||(Object.defineProperty(e.ready,"_mrb_sys_raise_current_exception",{configurable:!0,get:function(){f("You are getting _mrb_sys_raise_current_exception on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_sys_raise_current_exception",{configurable:!0,set:function(){f("You are setting _mrb_sys_raise_current_exception on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_entry")||(Object.defineProperty(e.ready,"_mrb_ary_entry",{configurable:!0,get:function(){f("You are getting _mrb_ary_entry on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_entry",{configurable:!0,set:function(){f("You are setting _mrb_ary_entry on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ary_modify")||(Object.defineProperty(e.ready,"_mrb_ary_modify",{configurable:!0,get:function(){f("You are getting _mrb_ary_modify on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ary_modify",{configurable:!0,set:function(){f("You are setting _mrb_ary_modify on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_object_dead_p")||(Object.defineProperty(e.ready,"_mrb_object_dead_p",{configurable:!0,get:function(){f("You are getting _mrb_object_dead_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_object_dead_p",{configurable:!0,set:function(){f("You are setting _mrb_object_dead_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_stack_extend")||(Object.defineProperty(e.ready,"_mrb_stack_extend",{configurable:!0,get:function(){f("You are getting _mrb_stack_extend on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_stack_extend",{configurable:!0,set:function(){f("You are setting _mrb_stack_extend on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_realloc_simple")||(Object.defineProperty(e.ready,"_mrb_realloc_simple",{configurable:!0,get:function(){f("You are getting _mrb_realloc_simple on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_realloc_simple",{configurable:!0,set:function(){f("You are setting _mrb_realloc_simple on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_vm_run")||(Object.defineProperty(e.ready,"_mrb_vm_run",{configurable:!0,get:function(){f("You are getting _mrb_vm_run on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_vm_run",{configurable:!0,set:function(){f("You are setting _mrb_vm_run on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_yield_argv")||(Object.defineProperty(e.ready,"_mrb_yield_argv",{configurable:!0,get:function(){f("You are getting _mrb_yield_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_yield_argv",{configurable:!0,set:function(){f("You are setting _mrb_yield_argv on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_vm_exec")||(Object.defineProperty(e.ready,"_mrb_vm_exec",{configurable:!0,get:function(){f("You are getting _mrb_vm_exec on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_vm_exec",{configurable:!0,set:function(){f("You are setting _mrb_vm_exec on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gv_get")||(Object.defineProperty(e.ready,"_mrb_gv_get",{configurable:!0,get:function(){f("You are getting _mrb_gv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gv_get",{configurable:!0,set:function(){f("You are setting _mrb_gv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_eq")||(Object.defineProperty(e.ready,"_mrb_obj_eq",{configurable:!0,get:function(){f("You are getting _mrb_obj_eq on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_eq",{configurable:!0,set:function(){f("You are setting _mrb_obj_eq on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ensure_hash_type")||(Object.defineProperty(e.ready,"_mrb_ensure_hash_type",{configurable:!0,get:function(){f("You are getting _mrb_ensure_hash_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ensure_hash_type",{configurable:!0,set:function(){f("You are setting _mrb_ensure_hash_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_range_new")||(Object.defineProperty(e.ready,"_mrb_range_new",{configurable:!0,get:function(){f("You are getting _mrb_range_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_range_new",{configurable:!0,set:function(){f("You are setting _mrb_range_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_merge")||(Object.defineProperty(e.ready,"_mrb_hash_merge",{configurable:!0,get:function(){f("You are getting _mrb_hash_merge on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_merge",{configurable:!0,set:function(){f("You are setting _mrb_hash_merge on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_top_run")||(Object.defineProperty(e.ready,"_mrb_top_run",{configurable:!0,get:function(){f("You are getting _mrb_top_run on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_top_run",{configurable:!0,set:function(){f("You are setting _mrb_top_run on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_fiber_resume")||(Object.defineProperty(e.ready,"_mrb_fiber_resume",{configurable:!0,get:function(){f("You are getting _mrb_fiber_resume on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_fiber_resume",{configurable:!0,set:function(){f("You are setting _mrb_fiber_resume on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_fiber_alive_p")||(Object.defineProperty(e.ready,"_mrb_fiber_alive_p",{configurable:!0,get:function(){f("You are getting _mrb_fiber_alive_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_fiber_alive_p",{configurable:!0,set:function(){f("You are setting _mrb_fiber_alive_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_fiber_yield")||(Object.defineProperty(e.ready,"_mrb_fiber_yield",{configurable:!0,get:function(){f("You are getting _mrb_fiber_yield on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_fiber_yield",{configurable:!0,set:function(){f("You are setting _mrb_fiber_yield on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_proc_new_cfunc")||(Object.defineProperty(e.ready,"_mrb_proc_new_cfunc",{configurable:!0,get:function(){f("You are getting _mrb_proc_new_cfunc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_proc_new_cfunc",{configurable:!0,set:function(){f("You are setting _mrb_proc_new_cfunc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_closure_new_cfunc")||(Object.defineProperty(e.ready,"_mrb_closure_new_cfunc",{configurable:!0,get:function(){f("You are getting _mrb_closure_new_cfunc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_closure_new_cfunc",{configurable:!0,set:function(){f("You are setting _mrb_closure_new_cfunc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_generate_code")||(Object.defineProperty(e.ready,"_mrb_generate_code",{configurable:!0,get:function(){f("You are getting _mrb_generate_code on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_generate_code",{configurable:!0,set:function(){f("You are setting _mrb_generate_code on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_num_mul")||(Object.defineProperty(e.ready,"_mrb_num_mul",{configurable:!0,get:function(){f("You are getting _mrb_num_mul on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_num_mul",{configurable:!0,set:function(){f("You are setting _mrb_num_mul on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_flo_to_fixnum")||(Object.defineProperty(e.ready,"_mrb_flo_to_fixnum",{configurable:!0,get:function(){f("You are getting _mrb_flo_to_fixnum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_flo_to_fixnum",{configurable:!0,set:function(){f("You are setting _mrb_flo_to_fixnum on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_num_plus")||(Object.defineProperty(e.ready,"_mrb_num_plus",{configurable:!0,get:function(){f("You are getting _mrb_num_plus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_num_plus",{configurable:!0,set:function(){f("You are setting _mrb_num_plus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_num_minus")||(Object.defineProperty(e.ready,"_mrb_num_minus",{configurable:!0,get:function(){f("You are getting _mrb_num_minus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_num_minus",{configurable:!0,set:function(){f("You are setting _mrb_num_minus on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cmp")||(Object.defineProperty(e.ready,"_mrb_cmp",{configurable:!0,get:function(){f("You are getting _mrb_cmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cmp",{configurable:!0,set:function(){f("You are setting _mrb_cmp on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_Float")||(Object.defineProperty(e.ready,"_mrb_Float",{configurable:!0,get:function(){f("You are getting _mrb_Float on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_Float",{configurable:!0,set:function(){f("You are setting _mrb_Float on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_float_to_str")||(Object.defineProperty(e.ready,"_mrb_float_to_str",{configurable:!0,get:function(){f("You are getting _mrb_float_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_float_to_str",{configurable:!0,set:function(){f("You are setting _mrb_float_to_str on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_debug_get_filename")||(Object.defineProperty(e.ready,"_mrb_debug_get_filename",{configurable:!0,get:function(){f("You are getting _mrb_debug_get_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_debug_get_filename",{configurable:!0,set:function(){f("You are setting _mrb_debug_get_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_debug_get_line")||(Object.defineProperty(e.ready,"_mrb_debug_get_line",{configurable:!0,get:function(){f("You are getting _mrb_debug_get_line on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_debug_get_line",{configurable:!0,set:function(){f("You are setting _mrb_debug_get_line on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_debug_info_alloc")||(Object.defineProperty(e.ready,"_mrb_debug_info_alloc",{configurable:!0,get:function(){f("You are getting _mrb_debug_info_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_debug_info_alloc",{configurable:!0,set:function(){f("You are setting _mrb_debug_info_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_debug_info_append_file")||(Object.defineProperty(e.ready,"_mrb_debug_info_append_file",{configurable:!0,get:function(){f("You are getting _mrb_debug_info_append_file on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_debug_info_append_file",{configurable:!0,set:function(){f("You are setting _mrb_debug_info_append_file on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_debug_info_free")||(Object.defineProperty(e.ready,"_mrb_debug_info_free",{configurable:!0,get:function(){f("You are getting _mrb_debug_info_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_debug_info_free",{configurable:!0,set:function(){f("You are setting _mrb_debug_info_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_print_error")||(Object.defineProperty(e.ready,"_mrb_print_error",{configurable:!0,get:function(){f("You are getting _mrb_print_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_print_error",{configurable:!0,set:function(){f("You are setting _mrb_print_error on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_print_backtrace")||(Object.defineProperty(e.ready,"_mrb_print_backtrace",{configurable:!0,get:function(){f("You are getting _mrb_print_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_print_backtrace",{configurable:!0,set:function(){f("You are setting _mrb_print_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_show_version")||(Object.defineProperty(e.ready,"_mrb_show_version",{configurable:!0,get:function(){f("You are getting _mrb_show_version on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_show_version",{configurable:!0,set:function(){f("You are setting _mrb_show_version on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_show_copyright")||(Object.defineProperty(e.ready,"_mrb_show_copyright",{configurable:!0,get:function(){f("You are getting _mrb_show_copyright on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_show_copyright",{configurable:!0,set:function(){f("You are setting _mrb_show_copyright on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_float_to_cstr")||(Object.defineProperty(e.ready,"_mrb_float_to_cstr",{configurable:!0,get:function(){f("You are getting _mrb_float_to_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_float_to_cstr",{configurable:!0,set:function(){f("You are setting _mrb_float_to_cstr on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_inspect")||(Object.defineProperty(e.ready,"_mrb_obj_inspect",{configurable:!0,get:function(){f("You are getting _mrb_obj_inspect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_inspect",{configurable:!0,set:function(){f("You are setting _mrb_obj_inspect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_id")||(Object.defineProperty(e.ready,"_mrb_obj_id",{configurable:!0,get:function(){f("You are getting _mrb_obj_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_id",{configurable:!0,set:function(){f("You are setting _mrb_obj_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_freeze")||(Object.defineProperty(e.ready,"_mrb_obj_freeze",{configurable:!0,get:function(){f("You are getting _mrb_obj_freeze on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_freeze",{configurable:!0,set:function(){f("You are setting _mrb_obj_freeze on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_obj_is_instance_of")||(Object.defineProperty(e.ready,"_mrb_obj_is_instance_of",{configurable:!0,get:function(){f("You are getting _mrb_obj_is_instance_of on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_obj_is_instance_of",{configurable:!0,set:function(){f("You are setting _mrb_obj_is_instance_of on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_f_raise")||(Object.defineProperty(e.ready,"_mrb_f_raise",{configurable:!0,get:function(){f("You are getting _mrb_f_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_f_raise",{configurable:!0,set:function(){f("You are setting _mrb_f_raise on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_equal")||(Object.defineProperty(e.ready,"_mrb_equal",{configurable:!0,get:function(){f("You are getting _mrb_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_equal",{configurable:!0,set:function(){f("You are setting _mrb_equal on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ensure_array_type")||(Object.defineProperty(e.ready,"_mrb_ensure_array_type",{configurable:!0,get:function(){f("You are getting _mrb_ensure_array_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ensure_array_type",{configurable:!0,set:function(){f("You are setting _mrb_ensure_array_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parser_parse")||(Object.defineProperty(e.ready,"_mrb_parser_parse",{configurable:!0,get:function(){f("You are getting _mrb_parser_parse on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parser_parse",{configurable:!0,set:function(){f("You are setting _mrb_parser_parse on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parser_set_filename")||(Object.defineProperty(e.ready,"_mrb_parser_set_filename",{configurable:!0,get:function(){f("You are getting _mrb_parser_set_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parser_set_filename",{configurable:!0,set:function(){f("You are setting _mrb_parser_set_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parser_new")||(Object.defineProperty(e.ready,"_mrb_parser_new",{configurable:!0,get:function(){f("You are getting _mrb_parser_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parser_new",{configurable:!0,set:function(){f("You are setting _mrb_parser_new on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parser_free")||(Object.defineProperty(e.ready,"_mrb_parser_free",{configurable:!0,get:function(){f("You are getting _mrb_parser_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parser_free",{configurable:!0,set:function(){f("You are setting _mrb_parser_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_pool_alloc")||(Object.defineProperty(e.ready,"_mrb_pool_alloc",{configurable:!0,get:function(){f("You are getting _mrb_pool_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_pool_alloc",{configurable:!0,set:function(){f("You are setting _mrb_pool_alloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_pool_open")||(Object.defineProperty(e.ready,"_mrb_pool_open",{configurable:!0,get:function(){f("You are getting _mrb_pool_open on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_pool_open",{configurable:!0,set:function(){f("You are setting _mrb_pool_open on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_pool_close")||(Object.defineProperty(e.ready,"_mrb_pool_close",{configurable:!0,get:function(){f("You are getting _mrb_pool_close on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_pool_close",{configurable:!0,set:function(){f("You are setting _mrb_pool_close on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrbc_partial_hook")||(Object.defineProperty(e.ready,"_mrbc_partial_hook",{configurable:!0,get:function(){f("You are getting _mrbc_partial_hook on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrbc_partial_hook",{configurable:!0,set:function(){f("You are setting _mrbc_partial_hook on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrbc_cleanup_local_variables")||(Object.defineProperty(e.ready,"_mrbc_cleanup_local_variables",{configurable:!0,get:function(){f("You are getting _mrbc_cleanup_local_variables on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrbc_cleanup_local_variables",{configurable:!0,set:function(){f("You are setting _mrbc_cleanup_local_variables on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parser_get_filename")||(Object.defineProperty(e.ready,"_mrb_parser_get_filename",{configurable:!0,get:function(){f("You are getting _mrb_parser_get_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parser_get_filename",{configurable:!0,set:function(){f("You are setting _mrb_parser_get_filename on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parse_nstring")||(Object.defineProperty(e.ready,"_mrb_parse_nstring",{configurable:!0,get:function(){f("You are getting _mrb_parse_nstring on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parse_nstring",{configurable:!0,set:function(){f("You are setting _mrb_parse_nstring on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_parse_string")||(Object.defineProperty(e.ready,"_mrb_parse_string",{configurable:!0,get:function(){f("You are getting _mrb_parse_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_parse_string",{configurable:!0,set:function(){f("You are setting _mrb_parse_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_load_exec")||(Object.defineProperty(e.ready,"_mrb_load_exec",{configurable:!0,get:function(){f("You are getting _mrb_load_exec on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_load_exec",{configurable:!0,set:function(){f("You are setting _mrb_load_exec on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_add_irep")||(Object.defineProperty(e.ready,"_mrb_add_irep",{configurable:!0,get:function(){f("You are getting _mrb_add_irep on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_add_irep",{configurable:!0,set:function(){f("You are setting _mrb_add_irep on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_load_nstring")||(Object.defineProperty(e.ready,"_mrb_load_nstring",{configurable:!0,get:function(){f("You are getting _mrb_load_nstring on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_load_nstring",{configurable:!0,set:function(){f("You are setting _mrb_load_nstring on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_load_string_cxt")||(Object.defineProperty(e.ready,"_mrb_load_string_cxt",{configurable:!0,get:function(){f("You are getting _mrb_load_string_cxt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_load_string_cxt",{configurable:!0,set:function(){f("You are setting _mrb_load_string_cxt on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_load_string")||(Object.defineProperty(e.ready,"_mrb_load_string",{configurable:!0,get:function(){f("You are getting _mrb_load_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_load_string",{configurable:!0,set:function(){f("You are setting _mrb_load_string on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_pool_realloc")||(Object.defineProperty(e.ready,"_mrb_pool_realloc",{configurable:!0,get:function(){f("You are getting _mrb_pool_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_pool_realloc",{configurable:!0,set:function(){f("You are setting _mrb_pool_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_defined")||(Object.defineProperty(e.ready,"_mrb_iv_defined",{configurable:!0,get:function(){f("You are getting _mrb_iv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_defined",{configurable:!0,set:function(){f("You are setting _mrb_iv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_get_backtrace")||(Object.defineProperty(e.ready,"_mrb_get_backtrace",{configurable:!0,get:function(){f("You are getting _mrb_get_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_get_backtrace",{configurable:!0,set:function(){f("You are setting _mrb_get_backtrace on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_open_core")||(Object.defineProperty(e.ready,"_mrb_open_core",{configurable:!0,get:function(){f("You are getting _mrb_open_core on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_open_core",{configurable:!0,set:function(){f("You are setting _mrb_open_core on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_open")||(Object.defineProperty(e.ready,"_mrb_open",{configurable:!0,get:function(){f("You are getting _mrb_open on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_open",{configurable:!0,set:function(){f("You are setting _mrb_open on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_free_context")||(Object.defineProperty(e.ready,"_mrb_free_context",{configurable:!0,get:function(){f("You are getting _mrb_free_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_free_context",{configurable:!0,set:function(){f("You are setting _mrb_free_context on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_state_atexit")||(Object.defineProperty(e.ready,"_mrb_state_atexit",{configurable:!0,get:function(){f("You are getting _mrb_state_atexit on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_state_atexit",{configurable:!0,set:function(){f("You are setting _mrb_state_atexit on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_malloc_simple")||(Object.defineProperty(e.ready,"_mrb_malloc_simple",{configurable:!0,get:function(){f("You are getting _mrb_malloc_simple on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_malloc_simple",{configurable:!0,set:function(){f("You are setting _mrb_malloc_simple on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_pool_can_realloc")||(Object.defineProperty(e.ready,"_mrb_pool_can_realloc",{configurable:!0,get:function(){f("You are getting _mrb_pool_can_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_pool_can_realloc",{configurable:!0,set:function(){f("You are setting _mrb_pool_can_realloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_type_convert_check")||(Object.defineProperty(e.ready,"_mrb_type_convert_check",{configurable:!0,get:function(){f("You are getting _mrb_type_convert_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_type_convert_check",{configurable:!0,set:function(){f("You are setting _mrb_type_convert_check on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_convert_to_integer")||(Object.defineProperty(e.ready,"_mrb_convert_to_integer",{configurable:!0,get:function(){f("You are getting _mrb_convert_to_integer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_convert_to_integer",{configurable:!0,set:function(){f("You are setting _mrb_convert_to_integer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_string_type")||(Object.defineProperty(e.ready,"_mrb_check_string_type",{configurable:!0,get:function(){f("You are getting _mrb_check_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_string_type",{configurable:!0,set:function(){f("You are setting _mrb_check_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_Integer")||(Object.defineProperty(e.ready,"_mrb_Integer",{configurable:!0,get:function(){f("You are getting _mrb_Integer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_Integer",{configurable:!0,set:function(){f("You are setting _mrb_Integer on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_string_type")||(Object.defineProperty(e.ready,"_mrb_string_type",{configurable:!0,get:function(){f("You are getting _mrb_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_string_type",{configurable:!0,set:function(){f("You are setting _mrb_string_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_array_type")||(Object.defineProperty(e.ready,"_mrb_check_array_type",{configurable:!0,get:function(){f("You are getting _mrb_check_array_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_array_type",{configurable:!0,set:function(){f("You are setting _mrb_check_array_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_check_hash_type")||(Object.defineProperty(e.ready,"_mrb_check_hash_type",{configurable:!0,get:function(){f("You are getting _mrb_check_hash_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_check_hash_type",{configurable:!0,set:function(){f("You are setting _mrb_check_hash_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_eql")||(Object.defineProperty(e.ready,"_mrb_eql",{configurable:!0,get:function(){f("You are getting _mrb_eql on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_eql",{configurable:!0,set:function(){f("You are setting _mrb_eql on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gc_register")||(Object.defineProperty(e.ready,"_mrb_gc_register",{configurable:!0,get:function(){f("You are getting _mrb_gc_register on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gc_register",{configurable:!0,set:function(){f("You are setting _mrb_gc_register on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gc_unregister")||(Object.defineProperty(e.ready,"_mrb_gc_unregister",{configurable:!0,get:function(){f("You are getting _mrb_gc_unregister on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gc_unregister",{configurable:!0,set:function(){f("You are setting _mrb_gc_unregister on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_garbage_collect")||(Object.defineProperty(e.ready,"_mrb_garbage_collect",{configurable:!0,get:function(){f("You are getting _mrb_garbage_collect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_garbage_collect",{configurable:!0,set:function(){f("You are setting _mrb_garbage_collect on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_data_check_type")||(Object.defineProperty(e.ready,"_mrb_data_check_type",{configurable:!0,get:function(){f("You are getting _mrb_data_check_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_data_check_type",{configurable:!0,set:function(){f("You are setting _mrb_data_check_type on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_int_id")||(Object.defineProperty(e.ready,"_mrb_int_id",{configurable:!0,get:function(){f("You are getting _mrb_int_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_int_id",{configurable:!0,set:function(){f("You are setting _mrb_int_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_float_id")||(Object.defineProperty(e.ready,"_mrb_float_id",{configurable:!0,get:function(){f("You are getting _mrb_float_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_float_id",{configurable:!0,set:function(){f("You are setting _mrb_float_id on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_ensure")||(Object.defineProperty(e.ready,"_mrb_ensure",{configurable:!0,get:function(){f("You are getting _mrb_ensure on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_ensure",{configurable:!0,set:function(){f("You are setting _mrb_ensure on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_rescue")||(Object.defineProperty(e.ready,"_mrb_rescue",{configurable:!0,get:function(){f("You are getting _mrb_rescue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_rescue",{configurable:!0,set:function(){f("You are setting _mrb_rescue on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_rescue_exceptions")||(Object.defineProperty(e.ready,"_mrb_rescue_exceptions",{configurable:!0,get:function(){f("You are getting _mrb_rescue_exceptions on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_rescue_exceptions",{configurable:!0,set:function(){f("You are setting _mrb_rescue_exceptions on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_foreach")||(Object.defineProperty(e.ready,"_mrb_iv_foreach",{configurable:!0,get:function(){f("You are getting _mrb_iv_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_foreach",{configurable:!0,set:function(){f("You are setting _mrb_iv_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_iv_name_sym_p")||(Object.defineProperty(e.ready,"_mrb_iv_name_sym_p",{configurable:!0,get:function(){f("You are getting _mrb_iv_name_sym_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_iv_name_sym_p",{configurable:!0,set:function(){f("You are setting _mrb_iv_name_sym_p on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cv_get")||(Object.defineProperty(e.ready,"_mrb_cv_get",{configurable:!0,get:function(){f("You are getting _mrb_cv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cv_get",{configurable:!0,set:function(){f("You are setting _mrb_cv_get on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_mod_cv_set")||(Object.defineProperty(e.ready,"_mrb_mod_cv_set",{configurable:!0,get:function(){f("You are getting _mrb_mod_cv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_mod_cv_set",{configurable:!0,set:function(){f("You are setting _mrb_mod_cv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cv_set")||(Object.defineProperty(e.ready,"_mrb_cv_set",{configurable:!0,get:function(){f("You are getting _mrb_cv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cv_set",{configurable:!0,set:function(){f("You are setting _mrb_cv_set on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_cv_defined")||(Object.defineProperty(e.ready,"_mrb_cv_defined",{configurable:!0,get:function(){f("You are getting _mrb_cv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_cv_defined",{configurable:!0,set:function(){f("You are setting _mrb_cv_defined on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_const_remove")||(Object.defineProperty(e.ready,"_mrb_const_remove",{configurable:!0,get:function(){f("You are getting _mrb_const_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_const_remove",{configurable:!0,set:function(){f("You are setting _mrb_const_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_gv_remove")||(Object.defineProperty(e.ready,"_mrb_gv_remove",{configurable:!0,get:function(){f("You are getting _mrb_gv_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_gv_remove",{configurable:!0,set:function(){f("You are setting _mrb_gv_remove on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_foreach")||(Object.defineProperty(e.ready,"_mrb_hash_foreach",{configurable:!0,get:function(){f("You are getting _mrb_hash_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_foreach",{configurable:!0,set:function(){f("You are setting _mrb_hash_foreach on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_fetch")||(Object.defineProperty(e.ready,"_mrb_hash_fetch",{configurable:!0,get:function(){f("You are getting _mrb_hash_fetch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_fetch",{configurable:!0,set:function(){f("You are setting _mrb_hash_fetch on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_clear")||(Object.defineProperty(e.ready,"_mrb_hash_clear",{configurable:!0,get:function(){f("You are getting _mrb_hash_clear on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_clear",{configurable:!0,set:function(){f("You are setting _mrb_hash_clear on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_size")||(Object.defineProperty(e.ready,"_mrb_hash_size",{configurable:!0,get:function(){f("You are getting _mrb_hash_size on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_size",{configurable:!0,set:function(){f("You are setting _mrb_hash_size on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"_mrb_hash_values")||(Object.defineProperty(e.ready,"_mrb_hash_values",{configurable:!0,get:function(){f("You are getting _mrb_hash_values on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"_mrb_hash_values",{configurable:!0,set:function(){f("You are setting _mrb_hash_values on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(e.ready,"onRuntimeInitialized")||(Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,get:function(){f("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(e.ready,"onRuntimeInitialized",{configurable:!0,set:function(){f("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var n={},o;for(o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);var s=[],a="./this.program",l=function(b,y){throw y},c=!0,d=!1,h=!1,u=!1;if(e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var m="";function p(b){return e.locateFile?e.locateFile(b,m):m+b}var _,v,C,w;if(u){if(typeof process=="object"&&typeof I4=="function"||typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");typeof read!="undefined"&&(_=function(y){return read(y)}),C=function(y){var x;return typeof readbuffer=="function"?new Uint8Array(readbuffer(y)):(x=read(y,"binary"),ue(typeof x=="object"),x)},v=function(y,x,k){setTimeout(function(){x(C(y))},0)},typeof scriptArgs!="undefined"?s=scriptArgs:typeof arguments!="undefined"&&(s=arguments),typeof quit=="function"&&(l=function(b){quit(b)}),typeof print!="undefined"&&(typeof console=="undefined"&&(console={}),console.log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)}else if(c||d){if(d?m=self.location.href:typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),r&&(m=r),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");_=function(b){var y=new XMLHttpRequest;return y.open("GET",b,!1),y.send(null),y.responseText},d&&(C=function(b){var y=new XMLHttpRequest;return y.open("GET",b,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),v=function(b,y,x){var k=new XMLHttpRequest;k.open("GET",b,!0),k.responseType="arraybuffer",k.onload=function(){if(k.status==200||k.status==0&&k.response){y(k.response);return}x()},k.onerror=x,k.send(null)},w=function(b){document.title=b}}else throw new Error("environment detection error");var S=e.print||console.log.bind(console),D=e.printErr||console.warn.bind(console);for(o in n)n.hasOwnProperty(o)&&(e[o]=n[o]);n=null,e.arguments&&(s=e.arguments),Object.getOwnPropertyDescriptor(e,"arguments")||Object.defineProperty(e,"arguments",{configurable:!0,get:function(){f("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),e.thisProgram&&(a=e.thisProgram),Object.getOwnPropertyDescriptor(e,"thisProgram")||Object.defineProperty(e,"thisProgram",{configurable:!0,get:function(){f("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),e.quit&&(l=e.quit),Object.getOwnPropertyDescriptor(e,"quit")||Object.defineProperty(e,"quit",{configurable:!0,get:function(){f("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),ue(typeof e.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),ue(typeof e.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),ue(typeof e.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),ue(typeof e.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),ue(typeof e.read=="undefined","Module.read option was removed (modify read_ in JS)"),ue(typeof e.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)"),ue(typeof e.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)"),ue(typeof e.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),ue(typeof e.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(e,"read")||Object.defineProperty(e,"read",{configurable:!0,get:function(){f("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readAsync")||Object.defineProperty(e,"readAsync",{configurable:!0,get:function(){f("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"readBinary")||Object.defineProperty(e,"readBinary",{configurable:!0,get:function(){f("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(e,"setWindowTitle")||Object.defineProperty(e,"setWindowTitle",{configurable:!0,get:function(){f("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),ue(!d,"worker environment detected but not enabled at build time.  Add 'worker' to `-s ENVIRONMENT` to enable."),ue(!h,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),ue(!u,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");function I(b){I.shown||(I.shown={}),I.shown[b]||(I.shown[b]=1,D(b))}function A(b,y){if(typeof WebAssembly.Function=="function"){for(var x={i:"i32",j:"i64",f:"f32",d:"f64"},k={parameters:[],results:y[0]=="v"?[]:[x[y[0]]]},P=1;P<y.length;++P)k.parameters.push(x[y[P]]);return new WebAssembly.Function(k,b)}var B=[1,0,1,96],$=y.slice(0,1),Z=y.slice(1),he={i:127,j:126,f:125,d:124};B.push(Z.length);for(var P=0;P<Z.length;++P)B.push(he[Z[P]]);$=="v"?B.push(0):B=B.concat([1,he[$]]),B[1]=B.length-2;var Se=new Uint8Array([0,97,115,109,1,0,0,0].concat(B,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),Oe=new WebAssembly.Module(Se),et=new WebAssembly.Instance(Oe,{e:{f:b}}),Ae=et.exports.f;return Ae}var O=[],N;function F(){if(O.length)return O.pop();try{Ht.grow(1)}catch(b){throw b instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":b}return Ht.length-1}function Y(b,y){if(!N){N=new WeakMap;for(var x=0;x<Ht.length;x++){var k=Ht.get(x);k&&N.set(k,x)}}if(N.has(b))return N.get(b);var P=F();try{Ht.set(P,b)}catch($){if(!($ instanceof TypeError))throw $;ue(typeof y!="undefined","Missing signature argument to addFunction: "+b);var B=A(b,y);Ht.set(P,B)}return N.set(b,P),P}var K=0,ee=function(b){K=b},ie=function(){return K},Ee;e.wasmBinary&&(Ee=e.wasmBinary),Object.getOwnPropertyDescriptor(e,"wasmBinary")||Object.defineProperty(e,"wasmBinary",{configurable:!0,get:function(){f("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var Le=e.noExitRuntime||!0;Object.getOwnPropertyDescriptor(e,"noExitRuntime")||Object.defineProperty(e,"noExitRuntime",{configurable:!0,get:function(){f("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),typeof WebAssembly!="object"&&f("no native wasm support detected");var Te,Ne=!1,Fe;function ue(b,y){b||f("Assertion failed: "+y)}function ni(b){var y=e["_"+b];return ue(y,"Cannot call unknown function "+b+", make sure it is exported"),y}function Xt(b,y,x,k,P){var B={string:function(Ze){var tn=0;if(Ze!=null&&Ze!==0){var Lo=(Ze.length<<2)+1;tn=p0(Lo),jr(Ze,tn,Lo)}return tn},array:function(Ze){var tn=p0(Ze.length);return ut(Ze,tn),tn}};function $(Ze){return y==="string"?Ai(Ze):y==="boolean"?Boolean(Ze):Ze}var Z=ni(b),he=[],Se=0;if(ue(y!=="array",'Return type should not be "array".'),k)for(var Oe=0;Oe<k.length;Oe++){var et=B[x[Oe]];et?(Se===0&&(Se=Kt()),he[Oe]=et(k[Oe])):he[Oe]=k[Oe]}var Ae=Z.apply(null,he);function at(Ze){return Se!==0&&qt(Se),$(Ze)}return Ae=at(Ae),Ae}var zt=1,ri=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function pt(b,y,x){for(var k=y+x,P=y;b[P]&&!(P>=k);)++P;if(P-y>16&&b.subarray&&ri)return ri.decode(b.subarray(y,P));for(var B="";y<P;){var $=b[y++];if(!($&128)){B+=String.fromCharCode($);continue}var Z=b[y++]&63;if(($&224)==192){B+=String.fromCharCode(($&31)<<6|Z);continue}var he=b[y++]&63;if(($&240)==224?$=($&15)<<12|Z<<6|he:(($&248)!=240&&I("Invalid UTF-8 leading byte 0x"+$.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),$=($&7)<<18|Z<<12|he<<6|b[y++]&63),$<65536)B+=String.fromCharCode($);else{var Se=$-65536;B+=String.fromCharCode(55296|Se>>10,56320|Se&1023)}}return B}function Ai(b,y){return b?pt(wr,b,y):""}function qn(b,y,x,k){if(!(k>0))return 0;for(var P=x,B=x+k-1,$=0;$<b.length;++$){var Z=b.charCodeAt($);if(Z>=55296&&Z<=57343){var he=b.charCodeAt(++$);Z=65536+((Z&1023)<<10)|he&1023}if(Z<=127){if(x>=B)break;y[x++]=Z}else if(Z<=2047){if(x+1>=B)break;y[x++]=192|Z>>6,y[x++]=128|Z&63}else if(Z<=65535){if(x+2>=B)break;y[x++]=224|Z>>12,y[x++]=128|Z>>6&63,y[x++]=128|Z&63}else{if(x+3>=B)break;Z>=2097152&&I("Invalid Unicode code point 0x"+Z.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x1FFFFF)."),y[x++]=240|Z>>18,y[x++]=128|Z>>12&63,y[x++]=128|Z>>6&63,y[x++]=128|Z&63}}return y[x]=0,x-P}function jr(b,y,x){return ue(typeof x=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),qn(b,wr,y,x)}function dn(b){for(var y=0,x=0;x<b.length;++x){var k=b.charCodeAt(x);k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|b.charCodeAt(++x)&1023),k<=127?++y:k<=2047?y+=2:k<=65535?y+=3:y+=4}return y}var hi=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):void 0;function ro(b){var y=dn(b)+1,x=p0(y);return qn(b,kn,x,y),x}function ut(b,y){ue(b.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),kn.set(b,y)}function Ve(b,y,x){for(var k=0;k<b.length;++k)ue(b.charCodeAt(k)===b.charCodeAt(k)&255),kn[y++>>0]=b.charCodeAt(k);x||(kn[y>>0]=0)}var na,kn,wr,oo,Ss,Qe,Do,Dh,Qc;function Al(b){na=b,e.HEAP8=kn=new Int8Array(b),e.HEAP16=oo=new Int16Array(b),e.HEAP32=Qe=new Int32Array(b),e.HEAPU8=wr=new Uint8Array(b),e.HEAPU16=Ss=new Uint16Array(b),e.HEAPU32=Do=new Uint32Array(b),e.HEAPF32=Dh=new Float32Array(b),e.HEAPF64=Qc=new Float64Array(b)}var xs=5242880;e.TOTAL_STACK&&ue(xs===e.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Ha=e.INITIAL_MEMORY||16777216;Object.getOwnPropertyDescriptor(e,"INITIAL_MEMORY")||Object.defineProperty(e,"INITIAL_MEMORY",{configurable:!0,get:function(){f("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),ue(Ha>=xs,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Ha+"! (TOTAL_STACK="+xs+")"),ue(typeof Int32Array!="undefined"&&typeof Float64Array!="undefined"&&Int32Array.prototype.subarray!==void 0&&Int32Array.prototype.set!==void 0,"JS engine does not provide full typed array support"),ue(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),ue(Ha==16777216,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically");var Ht;function Lh(){var b=II();ue((b&3)==0),Do[(b>>2)+1]=34821223,Do[(b>>2)+2]=2310721022,Qe[0]=1668509029}function Jo(){if(!Ne){var b=II(),y=Do[(b>>2)+1],x=Do[(b>>2)+2];(y!=34821223||x!=2310721022)&&f("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+x.toString(16)+" "+y.toString(16)),Qe[0]!==1668509029&&f("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var b=new Int16Array(1),y=new Int8Array(b.buffer);if(b[0]=25459,y[0]!==115||y[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"})();var kh=[],Ih=[],dm=[],Es=[],jl=!1,Oh=!1,es=0;function $a(){return Le||es>0}function Th(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Jg(e.preRun.shift());ft(kh)}function hm(){Jo(),ue(!jl),jl=!0,!e.noFSInit&&!T.init.initialized&&T.init(),T.ignorePermissions=!1,td.init(),ft(Ih)}function Qg(){Jo(),ft(dm)}function Nh(){Jo(),Oh=!0}function Ml(){if(Jo(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)ep(e.postRun.shift());ft(Es)}function Jg(b){kh.unshift(b)}function ts(b){Ih.unshift(b)}function ep(b){Es.unshift(b)}ue(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ue(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ue(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),ue(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Ds=0,ra=null,vt=null,is={};function ne(b){for(var y=b;;){if(!is[b])return b;b=y+Math.random()}}function Q(b){Ds++,e.monitorRunDependencies&&e.monitorRunDependencies(Ds),b?(ue(!is[b]),is[b]=1,ra===null&&typeof setInterval!="undefined"&&(ra=setInterval(function(){if(Ne){clearInterval(ra),ra=null;return}var y=!1;for(var x in is)y||(y=!0,D("still waiting on run dependencies:")),D("dependency: "+x);y&&D("(end of list)")},1e4))):D("warning: run dependency added without ID")}function te(b){if(Ds--,e.monitorRunDependencies&&e.monitorRunDependencies(Ds),b?(ue(is[b]),delete is[b]):D("warning: run dependency removed without ID"),Ds==0&&(ra!==null&&(clearInterval(ra),ra=null),vt)){var y=vt;vt=null,y()}}e.preloadedImages={},e.preloadedAudios={};function f(b){e.onAbort&&e.onAbort(b),b+="",D(b),Ne=!0,Fe=1;var y="abort("+b+") at "+Mr();b=y;var x=new WebAssembly.RuntimeError(b);throw i(x),x}var W="data:application/octet-stream;base64,";function U(b){return b.startsWith(W)}function R(b){return b.startsWith("file://")}function E(b,y){return function(){var x=b,k=y;return y||(k=e.asm),ue(jl,"native function `"+x+"` called before runtime initialization"),ue(!Oh,"native function `"+x+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),k[b]||ue(k[b],"exported native function `"+x+"` not found"),k[b].apply(null,arguments)}}var re;re="playground.wasm",U(re)||(re=p(re));function de(b){try{if(b==re&&Ee)return new Uint8Array(Ee);if(C)return C(b);throw"both async and sync fetching of the wasm failed"}catch(y){f(y)}}function ke(){return!Ee&&(c||d)&&typeof fetch=="function"?fetch(re,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+re+"'";return b.arrayBuffer()}).catch(function(){return de(re)}):Promise.resolve().then(function(){return de(re)})}function Je(){var b={env:y4,wasi_snapshot_preview1:y4};function y(Z,he){var Se=Z.exports;e.asm=Se,Te=e.asm.memory,ue(Te,"memory not found in wasm exports"),Al(Te.buffer),Ht=e.asm.__indirect_function_table,ue(Ht,"table not found in wasm exports"),ts(e.asm.__wasm_call_ctors),te("wasm-instantiate")}Q("wasm-instantiate");var x=e;function k(Z){ue(e===x,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),x=null,y(Z.instance)}function P(Z){return ke().then(function(he){var Se=WebAssembly.instantiate(he,b);return Se}).then(Z,function(he){D("failed to asynchronously prepare wasm: "+he),R(re)&&D("warning: Loading from a file URI ("+re+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),f(he)})}function B(){return!Ee&&typeof WebAssembly.instantiateStreaming=="function"&&!U(re)&&typeof fetch=="function"?fetch(re,{credentials:"same-origin"}).then(function(Z){var he=WebAssembly.instantiateStreaming(Z,b);return he.then(k,function(Se){return D("wasm streaming compile failed: "+Se),D("falling back to ArrayBuffer instantiation"),P(k)})}):P(k)}if(e.instantiateWasm)try{var $=e.instantiateWasm(b,y);return $}catch(Z){return D("Module.instantiateWasm callback failed with error: "+Z),!1}return B().catch(i),{}}var $e,rt;function ft(b){for(;b.length>0;){var y=b.shift();if(typeof y=="function"){y(e);continue}var x=y.func;typeof x=="number"?y.arg===void 0?Ht.get(x)():Ht.get(x)(y.arg):x(y.arg===void 0?null:y.arg)}}function qe(b){return I("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),b}function hn(b){var y=/\b_Z[\w\d_]+/g;return b.replace(y,function(x){var k=qe(x);return x===k?x:k+" ["+x+"]"})}function $t(){var b=new Error;if(!b.stack){try{throw new Error}catch(y){b=y}if(!b.stack)return"(no stack trace available)"}return b.stack.toString()}function Mr(){var b=$t();return e.extraStackTrace&&(b+=`
`+e.extraStackTrace()),hn(b)}function Rh(b){return C4(b+16)+16}function _n(b){this.excPtr=b,this.ptr=b-16,this.set_type=function(y){Qe[this.ptr+4>>2]=y},this.get_type=function(){return Qe[this.ptr+4>>2]},this.set_destructor=function(y){Qe[this.ptr+8>>2]=y},this.get_destructor=function(){return Qe[this.ptr+8>>2]},this.set_refcount=function(y){Qe[this.ptr>>2]=y},this.set_caught=function(y){y=y?1:0,kn[this.ptr+12>>0]=y},this.get_caught=function(){return kn[this.ptr+12>>0]!=0},this.set_rethrown=function(y){y=y?1:0,kn[this.ptr+13>>0]=y},this.get_rethrown=function(){return kn[this.ptr+13>>0]!=0},this.init=function(y,x){this.set_type(y),this.set_destructor(x),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var y=Qe[this.ptr>>2];Qe[this.ptr>>2]=y+1},this.release_ref=function(){var y=Qe[this.ptr>>2];return Qe[this.ptr>>2]=y-1,ue(y>0),y===1}}function Fl(b){this.free=function(){S4(this.ptr),this.ptr=0},this.set_base_ptr=function(y){Qe[this.ptr>>2]=y},this.get_base_ptr=function(){return Qe[this.ptr>>2]},this.set_adjusted_ptr=function(y){Qe[this.ptr+4>>2]=y},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return Qe[this.ptr+4>>2]},this.get_exception_ptr=function(){var y=AQ(this.get_exception_info().get_type());if(y)return Qe[this.get_base_ptr()>>2];var x=this.get_adjusted_ptr();return x!==0?x:this.get_base_ptr()},this.get_exception_info=function(){return new _n(this.get_base_ptr())},b===void 0?(this.ptr=C4(8),this.set_adjusted_ptr(0)):this.ptr=b}var tp=[];function um(b){b.add_ref()}var ip=0;function m0(b){var y=new Fl(b),x=y.get_exception_info();return x.get_caught()||(x.set_caught(!0),ip--),x.set_rethrown(!1),tp.push(y),um(x),y.get_exception_ptr()}var Jc=0;function rQ(b){try{return S4(new _n(b).ptr)}catch(y){D("exception during cxa_free_exception: "+y)}}function oQ(b){if(b.release_ref()&&!b.get_rethrown()){var y=b.get_destructor();y&&Ht.get(y)(b.excPtr),rQ(b.excPtr)}}function sQ(){Yt(0),ue(tp.length>0);var b=tp.pop();oQ(b.get_exception_info()),b.free(),Jc=0}function aQ(b){var y=new Fl(b),x=y.get_base_ptr();throw Jc||(Jc=x),y.free(),x}function lQ(){var b=Jc;if(!b)return ee(0),0|0;var y=new _n(b),x=y.get_type(),k=new Fl;if(k.set_base_ptr(b),k.set_adjusted_ptr(b),!x)return ee(0),k.ptr|0;for(var P=Array.prototype.slice.call(arguments),B=0;B<P.length;B++){var $=P[B];if($===0||$===x)break;if(E4($,x,k.get_adjusted_ptr_addr()))return ee($),k.ptr|0}return ee(x),k.ptr|0}function cQ(){var b=Jc;if(!b)return ee(0),0|0;var y=new _n(b),x=y.get_type(),k=new Fl;if(k.set_base_ptr(b),k.set_adjusted_ptr(b),!x)return ee(0),k.ptr|0;for(var P=Array.prototype.slice.call(arguments),B=0;B<P.length;B++){var $=P[B];if($===0||$===x)break;if(E4($,x,k.get_adjusted_ptr_addr()))return ee($),k.ptr|0}return ee(x),k.ptr|0}function dQ(b,y,x){var k=new _n(b);throw k.init(y,x),Jc=b,ip++,b}function hQ(){D("missing function: __gxx_personality_v0"),f(-1)}var xi={splitPath:function(b){var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(b).slice(1)},normalizeArray:function(b,y){for(var x=0,k=b.length-1;k>=0;k--){var P=b[k];P==="."?b.splice(k,1):P===".."?(b.splice(k,1),x++):x&&(b.splice(k,1),x--)}if(y)for(;x;x--)b.unshift("..");return b},normalize:function(b){var y=b.charAt(0)==="/",x=b.substr(-1)==="/";return b=xi.normalizeArray(b.split("/").filter(function(k){return!!k}),!y).join("/"),!b&&!y&&(b="."),b&&x&&(b+="/"),(y?"/":"")+b},dirname:function(b){var y=xi.splitPath(b),x=y[0],k=y[1];return!x&&!k?".":(k&&(k=k.substr(0,k.length-1)),x+k)},basename:function(b){if(b==="/")return"/";b=xi.normalize(b),b=b.replace(/\/$/,"");var y=b.lastIndexOf("/");return y===-1?b:b.substr(y+1)},extname:function(b){return xi.splitPath(b)[3]},join:function(){var b=Array.prototype.slice.call(arguments,0);return xi.normalize(b.join("/"))},join2:function(b,y){return xi.normalize(b+"/"+y)}};function uQ(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var b=new Uint8Array(1);return function(){return crypto.getRandomValues(b),b[0]}}else return function(){f("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}var ed={resolve:function(){for(var b="",y=!1,x=arguments.length-1;x>=-1&&!y;x--){var k=x>=0?arguments[x]:T.cwd();if(typeof k!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!k)return"";b=k+"/"+b,y=k.charAt(0)==="/"}return b=xi.normalizeArray(b.split("/").filter(function(P){return!!P}),!y).join("/"),(y?"/":"")+b||"."},relative:function(b,y){b=ed.resolve(b).substr(1),y=ed.resolve(y).substr(1);function x(Se){for(var Oe=0;Oe<Se.length&&Se[Oe]==="";Oe++);for(var et=Se.length-1;et>=0&&Se[et]==="";et--);return Oe>et?[]:Se.slice(Oe,et-Oe+1)}for(var k=x(b.split("/")),P=x(y.split("/")),B=Math.min(k.length,P.length),$=B,Z=0;Z<B;Z++)if(k[Z]!==P[Z]){$=Z;break}for(var he=[],Z=$;Z<k.length;Z++)he.push("..");return he=he.concat(P.slice($)),he.join("/")}},td={ttys:[],init:function(){},shutdown:function(){},register:function(b,y){td.ttys[b]={input:[],output:[],ops:y},T.registerDevice(b,td.stream_ops)},stream_ops:{open:function(b){var y=td.ttys[b.node.rdev];if(!y)throw new T.ErrnoError(43);b.tty=y,b.seekable=!1},close:function(b){b.tty.ops.flush(b.tty)},flush:function(b){b.tty.ops.flush(b.tty)},read:function(b,y,x,k,P){if(!b.tty||!b.tty.ops.get_char)throw new T.ErrnoError(60);for(var B=0,$=0;$<k;$++){var Z;try{Z=b.tty.ops.get_char(b.tty)}catch(he){throw new T.ErrnoError(29)}if(Z===void 0&&B===0)throw new T.ErrnoError(6);if(Z==null)break;B++,y[x+$]=Z}return B&&(b.node.timestamp=Date.now()),B},write:function(b,y,x,k,P){if(!b.tty||!b.tty.ops.put_char)throw new T.ErrnoError(60);try{for(var B=0;B<k;B++)b.tty.ops.put_char(b.tty,y[x+B])}catch($){throw new T.ErrnoError(29)}return k&&(b.node.timestamp=Date.now()),B}},default_tty_ops:{get_char:function(b){if(!b.input.length){var y=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(y=window.prompt("Input: "),y!==null&&(y+=`
`)):typeof readline=="function"&&(y=readline(),y!==null&&(y+=`
`)),!y)return null;b.input=kI(y,!0)}return b.input.shift()},put_char:function(b,y){y===null||y===10?(S(pt(b.output,0)),b.output=[]):y!=0&&b.output.push(y)},flush:function(b){b.output&&b.output.length>0&&(S(pt(b.output,0)),b.output=[])}},default_tty1_ops:{put_char:function(b,y){y===null||y===10?(D(pt(b.output,0)),b.output=[]):y!=0&&b.output.push(y)},flush:function(b){b.output&&b.output.length>0&&(D(pt(b.output,0)),b.output=[])}}};function mQ(b){f("internal error: mmapAlloc called but `memalign` native symbol not exported")}var Ot={ops_table:null,mount:function(b){return Ot.createNode(null,"/",16384|511,0)},createNode:function(b,y,x,k){if(T.isBlkdev(x)||T.isFIFO(x))throw new T.ErrnoError(63);Ot.ops_table||(Ot.ops_table={dir:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr,lookup:Ot.node_ops.lookup,mknod:Ot.node_ops.mknod,rename:Ot.node_ops.rename,unlink:Ot.node_ops.unlink,rmdir:Ot.node_ops.rmdir,readdir:Ot.node_ops.readdir,symlink:Ot.node_ops.symlink},stream:{llseek:Ot.stream_ops.llseek}},file:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr},stream:{llseek:Ot.stream_ops.llseek,read:Ot.stream_ops.read,write:Ot.stream_ops.write,allocate:Ot.stream_ops.allocate,mmap:Ot.stream_ops.mmap,msync:Ot.stream_ops.msync}},link:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr,readlink:Ot.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr},stream:T.chrdev_stream_ops}});var P=T.createNode(b,y,x,k);return T.isDir(P.mode)?(P.node_ops=Ot.ops_table.dir.node,P.stream_ops=Ot.ops_table.dir.stream,P.contents={}):T.isFile(P.mode)?(P.node_ops=Ot.ops_table.file.node,P.stream_ops=Ot.ops_table.file.stream,P.usedBytes=0,P.contents=null):T.isLink(P.mode)?(P.node_ops=Ot.ops_table.link.node,P.stream_ops=Ot.ops_table.link.stream):T.isChrdev(P.mode)&&(P.node_ops=Ot.ops_table.chrdev.node,P.stream_ops=Ot.ops_table.chrdev.stream),P.timestamp=Date.now(),b&&(b.contents[y]=P,b.timestamp=P.timestamp),P},getFileDataAsTypedArray:function(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage:function(b,y){var x=b.contents?b.contents.length:0;if(!(x>=y)){var k=1024*1024;y=Math.max(y,x*(x<k?2:1.125)>>>0),x!=0&&(y=Math.max(y,256));var P=b.contents;b.contents=new Uint8Array(y),b.usedBytes>0&&b.contents.set(P.subarray(0,b.usedBytes),0)}},resizeFileStorage:function(b,y){if(b.usedBytes!=y)if(y==0)b.contents=null,b.usedBytes=0;else{var x=b.contents;b.contents=new Uint8Array(y),x&&b.contents.set(x.subarray(0,Math.min(y,b.usedBytes))),b.usedBytes=y}},node_ops:{getattr:function(b){var y={};return y.dev=T.isChrdev(b.mode)?b.id:1,y.ino=b.id,y.mode=b.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=b.rdev,T.isDir(b.mode)?y.size=4096:T.isFile(b.mode)?y.size=b.usedBytes:T.isLink(b.mode)?y.size=b.link.length:y.size=0,y.atime=new Date(b.timestamp),y.mtime=new Date(b.timestamp),y.ctime=new Date(b.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr:function(b,y){y.mode!==void 0&&(b.mode=y.mode),y.timestamp!==void 0&&(b.timestamp=y.timestamp),y.size!==void 0&&Ot.resizeFileStorage(b,y.size)},lookup:function(b,y){throw T.genericErrors[44]},mknod:function(b,y,x,k){return Ot.createNode(b,y,x,k)},rename:function(b,y,x){if(T.isDir(b.mode)){var k;try{k=T.lookupNode(y,x)}catch(B){}if(k)for(var P in k.contents)throw new T.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=x,y.contents[x]=b,y.timestamp=b.parent.timestamp,b.parent=y},unlink:function(b,y){delete b.contents[y],b.timestamp=Date.now()},rmdir:function(b,y){var x=T.lookupNode(b,y);for(var k in x.contents)throw new T.ErrnoError(55);delete b.contents[y],b.timestamp=Date.now()},readdir:function(b){var y=[".",".."];for(var x in b.contents)!b.contents.hasOwnProperty(x)||y.push(x);return y},symlink:function(b,y,x){var k=Ot.createNode(b,y,511|40960,0);return k.link=x,k},readlink:function(b){if(!T.isLink(b.mode))throw new T.ErrnoError(28);return b.link}},stream_ops:{read:function(b,y,x,k,P){var B=b.node.contents;if(P>=b.node.usedBytes)return 0;var $=Math.min(b.node.usedBytes-P,k);if(ue($>=0),$>8&&B.subarray)y.set(B.subarray(P,P+$),x);else for(var Z=0;Z<$;Z++)y[x+Z]=B[P+Z];return $},write:function(b,y,x,k,P,B){if(ue(!(y instanceof ArrayBuffer)),!k)return 0;var $=b.node;if($.timestamp=Date.now(),y.subarray&&(!$.contents||$.contents.subarray)){if(B)return ue(P===0,"canOwn must imply no weird position inside the file"),$.contents=y.subarray(x,x+k),$.usedBytes=k,k;if($.usedBytes===0&&P===0)return $.contents=y.slice(x,x+k),$.usedBytes=k,k;if(P+k<=$.usedBytes)return $.contents.set(y.subarray(x,x+k),P),k}if(Ot.expandFileStorage($,P+k),$.contents.subarray&&y.subarray)$.contents.set(y.subarray(x,x+k),P);else for(var Z=0;Z<k;Z++)$.contents[P+Z]=y[x+Z];return $.usedBytes=Math.max($.usedBytes,P+k),k},llseek:function(b,y,x){var k=y;if(x===1?k+=b.position:x===2&&T.isFile(b.node.mode)&&(k+=b.node.usedBytes),k<0)throw new T.ErrnoError(28);return k},allocate:function(b,y,x){Ot.expandFileStorage(b.node,y+x),b.node.usedBytes=Math.max(b.node.usedBytes,y+x)},mmap:function(b,y,x,k,P,B){if(y!==0)throw new T.ErrnoError(28);if(!T.isFile(b.node.mode))throw new T.ErrnoError(43);var $,Z,he=b.node.contents;if(!(B&2)&&he.buffer===na)Z=!1,$=he.byteOffset;else{if((k>0||k+x<he.length)&&(he.subarray?he=he.subarray(k,k+x):he=Array.prototype.slice.call(he,k,k+x)),Z=!0,$=mQ(x),!$)throw new T.ErrnoError(48);kn.set(he,$)}return{ptr:$,allocated:Z}},msync:function(b,y,x,k,P){if(!T.isFile(b.node.mode))throw new T.ErrnoError(43);if(P&2)return 0;var B=Ot.stream_ops.write(b,y,0,k,x,!1);return 0}}};function fQ(b,y,x,k){var P=k?"":ne("al "+b);v(b,function(B){ue(B,'Loading data file "'+b+'" failed (no arrayBuffer).'),y(new Uint8Array(B)),P&&te(P)},function(B){if(x)x();else throw'Loading data file "'+b+'" failed.'}),P&&Q(P)}var gQ={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},p4={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},T={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(b,y){if(b=ed.resolve(T.cwd(),b),y=y||{},!b)return{path:"",node:null};var x={follow_mount:!0,recurse_count:0};for(var k in x)y[k]===void 0&&(y[k]=x[k]);if(y.recurse_count>8)throw new T.ErrnoError(32);for(var P=xi.normalizeArray(b.split("/").filter(function(Ae){return!!Ae}),!1),B=T.root,$="/",Z=0;Z<P.length;Z++){var he=Z===P.length-1;if(he&&y.parent)break;if(B=T.lookupNode(B,P[Z]),$=xi.join2($,P[Z]),T.isMountpoint(B)&&(!he||he&&y.follow_mount)&&(B=B.mounted.root),!he||y.follow)for(var Se=0;T.isLink(B.mode);){var Oe=T.readlink($);$=ed.resolve(xi.dirname($),Oe);var et=T.lookupPath($,{recurse_count:y.recurse_count});if(B=et.node,Se++>40)throw new T.ErrnoError(32)}}return{path:$,node:B}},getPath:function(b){for(var y;;){if(T.isRoot(b)){var x=b.mount.mountpoint;return y?x[x.length-1]!=="/"?x+"/"+y:x+y:x}y=y?b.name+"/"+y:b.name,b=b.parent}},hashName:function(b,y){for(var x=0,k=0;k<y.length;k++)x=(x<<5)-x+y.charCodeAt(k)|0;return(b+x>>>0)%T.nameTable.length},hashAddNode:function(b){var y=T.hashName(b.parent.id,b.name);b.name_next=T.nameTable[y],T.nameTable[y]=b},hashRemoveNode:function(b){var y=T.hashName(b.parent.id,b.name);if(T.nameTable[y]===b)T.nameTable[y]=b.name_next;else for(var x=T.nameTable[y];x;){if(x.name_next===b){x.name_next=b.name_next;break}x=x.name_next}},lookupNode:function(b,y){var x=T.mayLookup(b);if(x)throw new T.ErrnoError(x,b);for(var k=T.hashName(b.id,y),P=T.nameTable[k];P;P=P.name_next){var B=P.name;if(P.parent.id===b.id&&B===y)return P}return T.lookup(b,y)},createNode:function(b,y,x,k){ue(typeof b=="object");var P=new T.FSNode(b,y,x,k);return T.hashAddNode(P),P},destroyNode:function(b){T.hashRemoveNode(b)},isRoot:function(b){return b===b.parent},isMountpoint:function(b){return!!b.mounted},isFile:function(b){return(b&61440)==32768},isDir:function(b){return(b&61440)==16384},isLink:function(b){return(b&61440)==40960},isChrdev:function(b){return(b&61440)==8192},isBlkdev:function(b){return(b&61440)==24576},isFIFO:function(b){return(b&61440)==4096},isSocket:function(b){return(b&49152)==49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(b){var y=T.flagModes[b];if(typeof y=="undefined")throw new Error("Unknown file open mode: "+b);return y},flagsToPermissionString:function(b){var y=["r","w","rw"][b&3];return b&512&&(y+="w"),y},nodePermissions:function(b,y){return T.ignorePermissions?0:y.includes("r")&&!(b.mode&292)||y.includes("w")&&!(b.mode&146)||y.includes("x")&&!(b.mode&73)?2:0},mayLookup:function(b){var y=T.nodePermissions(b,"x");return y||(b.node_ops.lookup?0:2)},mayCreate:function(b,y){try{var x=T.lookupNode(b,y);return 20}catch(k){}return T.nodePermissions(b,"wx")},mayDelete:function(b,y,x){var k;try{k=T.lookupNode(b,y)}catch(B){return B.errno}var P=T.nodePermissions(b,"wx");if(P)return P;if(x){if(!T.isDir(k.mode))return 54;if(T.isRoot(k)||T.getPath(k)===T.cwd())return 10}else if(T.isDir(k.mode))return 31;return 0},mayOpen:function(b,y){return b?T.isLink(b.mode)?32:T.isDir(b.mode)&&(T.flagsToPermissionString(y)!=="r"||y&512)?31:T.nodePermissions(b,T.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd:function(b,y){b=b||0,y=y||T.MAX_OPEN_FDS;for(var x=b;x<=y;x++)if(!T.streams[x])return x;throw new T.ErrnoError(33)},getStream:function(b){return T.streams[b]},createStream:function(b,y,x){T.FSStream||(T.FSStream=function(){},T.FSStream.prototype={object:{get:function(){return this.node},set:function($){this.node=$}},isRead:{get:function(){return(this.flags&2097155)!=1}},isWrite:{get:function(){return(this.flags&2097155)!=0}},isAppend:{get:function(){return this.flags&1024}}});var k=new T.FSStream;for(var P in b)k[P]=b[P];b=k;var B=T.nextfd(y,x);return b.fd=B,T.streams[B]=b,b},closeStream:function(b){T.streams[b]=null},chrdev_stream_ops:{open:function(b){var y=T.getDevice(b.node.rdev);b.stream_ops=y.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek:function(){throw new T.ErrnoError(70)}},major:function(b){return b>>8},minor:function(b){return b&255},makedev:function(b,y){return b<<8|y},registerDevice:function(b,y){T.devices[b]={stream_ops:y}},getDevice:function(b){return T.devices[b]},getMounts:function(b){for(var y=[],x=[b];x.length;){var k=x.pop();y.push(k),x.push.apply(x,k.mounts)}return y},syncfs:function(b,y){typeof b=="function"&&(y=b,b=!1),T.syncFSRequests++,T.syncFSRequests>1&&D("warning: "+T.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var x=T.getMounts(T.root.mount),k=0;function P($){return ue(T.syncFSRequests>0),T.syncFSRequests--,y($)}function B($){if($)return B.errored?void 0:(B.errored=!0,P($));++k>=x.length&&P(null)}x.forEach(function($){if(!$.type.syncfs)return B(null);$.type.syncfs($,b,B)})},mount:function(b,y,x){if(typeof b=="string")throw b;var k=x==="/",P=!x,B;if(k&&T.root)throw new T.ErrnoError(10);if(!k&&!P){var $=T.lookupPath(x,{follow_mount:!1});if(x=$.path,B=$.node,T.isMountpoint(B))throw new T.ErrnoError(10);if(!T.isDir(B.mode))throw new T.ErrnoError(54)}var Z={type:b,opts:y,mountpoint:x,mounts:[]},he=b.mount(Z);return he.mount=Z,Z.root=he,k?T.root=he:B&&(B.mounted=Z,B.mount&&B.mount.mounts.push(Z)),he},unmount:function(b){var y=T.lookupPath(b,{follow_mount:!1});if(!T.isMountpoint(y.node))throw new T.ErrnoError(28);var x=y.node,k=x.mounted,P=T.getMounts(k);Object.keys(T.nameTable).forEach(function($){for(var Z=T.nameTable[$];Z;){var he=Z.name_next;P.includes(Z.mount)&&T.destroyNode(Z),Z=he}}),x.mounted=null;var B=x.mount.mounts.indexOf(k);ue(B!==-1),x.mount.mounts.splice(B,1)},lookup:function(b,y){return b.node_ops.lookup(b,y)},mknod:function(b,y,x){var k=T.lookupPath(b,{parent:!0}),P=k.node,B=xi.basename(b);if(!B||B==="."||B==="..")throw new T.ErrnoError(28);var $=T.mayCreate(P,B);if($)throw new T.ErrnoError($);if(!P.node_ops.mknod)throw new T.ErrnoError(63);return P.node_ops.mknod(P,B,y,x)},create:function(b,y){return y=y!==void 0?y:438,y&=4095,y|=32768,T.mknod(b,y,0)},mkdir:function(b,y){return y=y!==void 0?y:511,y&=511|512,y|=16384,T.mknod(b,y,0)},mkdirTree:function(b,y){for(var x=b.split("/"),k="",P=0;P<x.length;++P)if(!!x[P]){k+="/"+x[P];try{T.mkdir(k,y)}catch(B){if(B.errno!=20)throw B}}},mkdev:function(b,y,x){return typeof x=="undefined"&&(x=y,y=438),y|=8192,T.mknod(b,y,x)},symlink:function(b,y){if(!ed.resolve(b))throw new T.ErrnoError(44);var x=T.lookupPath(y,{parent:!0}),k=x.node;if(!k)throw new T.ErrnoError(44);var P=xi.basename(y),B=T.mayCreate(k,P);if(B)throw new T.ErrnoError(B);if(!k.node_ops.symlink)throw new T.ErrnoError(63);return k.node_ops.symlink(k,P,b)},rename:function(b,y){var x=xi.dirname(b),k=xi.dirname(y),P=xi.basename(b),B=xi.basename(y),$,Z,he;if($=T.lookupPath(b,{parent:!0}),Z=$.node,$=T.lookupPath(y,{parent:!0}),he=$.node,!Z||!he)throw new T.ErrnoError(44);if(Z.mount!==he.mount)throw new T.ErrnoError(75);var Se=T.lookupNode(Z,P),Oe=ed.relative(b,k);if(Oe.charAt(0)!==".")throw new T.ErrnoError(28);if(Oe=ed.relative(y,x),Oe.charAt(0)!==".")throw new T.ErrnoError(55);var et;try{et=T.lookupNode(he,B)}catch(Ze){}if(Se!==et){var Ae=T.isDir(Se.mode),at=T.mayDelete(Z,P,Ae);if(at)throw new T.ErrnoError(at);if(at=et?T.mayDelete(he,B,Ae):T.mayCreate(he,B),at)throw new T.ErrnoError(at);if(!Z.node_ops.rename)throw new T.ErrnoError(63);if(T.isMountpoint(Se)||et&&T.isMountpoint(et))throw new T.ErrnoError(10);if(he!==Z&&(at=T.nodePermissions(Z,"w"),at))throw new T.ErrnoError(at);try{T.trackingDelegate.willMovePath&&T.trackingDelegate.willMovePath(b,y)}catch(Ze){D("FS.trackingDelegate['willMovePath']('"+b+"', '"+y+"') threw an exception: "+Ze.message)}T.hashRemoveNode(Se);try{Z.node_ops.rename(Se,he,B)}catch(Ze){throw Ze}finally{T.hashAddNode(Se)}try{T.trackingDelegate.onMovePath&&T.trackingDelegate.onMovePath(b,y)}catch(Ze){D("FS.trackingDelegate['onMovePath']('"+b+"', '"+y+"') threw an exception: "+Ze.message)}}},rmdir:function(b){var y=T.lookupPath(b,{parent:!0}),x=y.node,k=xi.basename(b),P=T.lookupNode(x,k),B=T.mayDelete(x,k,!0);if(B)throw new T.ErrnoError(B);if(!x.node_ops.rmdir)throw new T.ErrnoError(63);if(T.isMountpoint(P))throw new T.ErrnoError(10);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch($){D("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+$.message)}x.node_ops.rmdir(x,k),T.destroyNode(P);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch($){D("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+$.message)}},readdir:function(b){var y=T.lookupPath(b,{follow:!0}),x=y.node;if(!x.node_ops.readdir)throw new T.ErrnoError(54);return x.node_ops.readdir(x)},unlink:function(b){var y=T.lookupPath(b,{parent:!0}),x=y.node,k=xi.basename(b),P=T.lookupNode(x,k),B=T.mayDelete(x,k,!1);if(B)throw new T.ErrnoError(B);if(!x.node_ops.unlink)throw new T.ErrnoError(63);if(T.isMountpoint(P))throw new T.ErrnoError(10);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch($){D("FS.trackingDelegate['willDeletePath']('"+b+"') threw an exception: "+$.message)}x.node_ops.unlink(x,k),T.destroyNode(P);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch($){D("FS.trackingDelegate['onDeletePath']('"+b+"') threw an exception: "+$.message)}},readlink:function(b){var y=T.lookupPath(b),x=y.node;if(!x)throw new T.ErrnoError(44);if(!x.node_ops.readlink)throw new T.ErrnoError(28);return ed.resolve(T.getPath(x.parent),x.node_ops.readlink(x))},stat:function(b,y){var x=T.lookupPath(b,{follow:!y}),k=x.node;if(!k)throw new T.ErrnoError(44);if(!k.node_ops.getattr)throw new T.ErrnoError(63);return k.node_ops.getattr(k)},lstat:function(b){return T.stat(b,!0)},chmod:function(b,y,x){var k;if(typeof b=="string"){var P=T.lookupPath(b,{follow:!x});k=P.node}else k=b;if(!k.node_ops.setattr)throw new T.ErrnoError(63);k.node_ops.setattr(k,{mode:y&4095|k.mode&~4095,timestamp:Date.now()})},lchmod:function(b,y){T.chmod(b,y,!0)},fchmod:function(b,y){var x=T.getStream(b);if(!x)throw new T.ErrnoError(8);T.chmod(x.node,y)},chown:function(b,y,x,k){var P;if(typeof b=="string"){var B=T.lookupPath(b,{follow:!k});P=B.node}else P=b;if(!P.node_ops.setattr)throw new T.ErrnoError(63);P.node_ops.setattr(P,{timestamp:Date.now()})},lchown:function(b,y,x){T.chown(b,y,x,!0)},fchown:function(b,y,x){var k=T.getStream(b);if(!k)throw new T.ErrnoError(8);T.chown(k.node,y,x)},truncate:function(b,y){if(y<0)throw new T.ErrnoError(28);var x;if(typeof b=="string"){var k=T.lookupPath(b,{follow:!0});x=k.node}else x=b;if(!x.node_ops.setattr)throw new T.ErrnoError(63);if(T.isDir(x.mode))throw new T.ErrnoError(31);if(!T.isFile(x.mode))throw new T.ErrnoError(28);var P=T.nodePermissions(x,"w");if(P)throw new T.ErrnoError(P);x.node_ops.setattr(x,{size:y,timestamp:Date.now()})},ftruncate:function(b,y){var x=T.getStream(b);if(!x)throw new T.ErrnoError(8);if((x.flags&2097155)==0)throw new T.ErrnoError(28);T.truncate(x.node,y)},utime:function(b,y,x){var k=T.lookupPath(b,{follow:!0}),P=k.node;P.node_ops.setattr(P,{timestamp:Math.max(y,x)})},open:function(b,y,x,k,P){if(b==="")throw new T.ErrnoError(44);y=typeof y=="string"?T.modeStringToFlags(y):y,x=typeof x=="undefined"?438:x,y&64?x=x&4095|32768:x=0;var B;if(typeof b=="object")B=b;else{b=xi.normalize(b);try{var $=T.lookupPath(b,{follow:!(y&131072)});B=$.node}catch(et){}}var Z=!1;if(y&64)if(B){if(y&128)throw new T.ErrnoError(20)}else B=T.mknod(b,x,0),Z=!0;if(!B)throw new T.ErrnoError(44);if(T.isChrdev(B.mode)&&(y&=~512),y&65536&&!T.isDir(B.mode))throw new T.ErrnoError(54);if(!Z){var he=T.mayOpen(B,y);if(he)throw new T.ErrnoError(he)}y&512&&T.truncate(B,0),y&=~(128|512|131072);var Se=T.createStream({node:B,path:T.getPath(B),flags:y,seekable:!0,position:0,stream_ops:B.stream_ops,ungotten:[],error:!1},k,P);Se.stream_ops.open&&Se.stream_ops.open(Se),e.logReadFiles&&!(y&1)&&(T.readFiles||(T.readFiles={}),b in T.readFiles||(T.readFiles[b]=1,D("FS.trackingDelegate error on read file: "+b)));try{if(T.trackingDelegate.onOpenFile){var Oe=0;(y&2097155)!=1&&(Oe|=T.tracking.openFlags.READ),(y&2097155)!=0&&(Oe|=T.tracking.openFlags.WRITE),T.trackingDelegate.onOpenFile(b,Oe)}}catch(et){D("FS.trackingDelegate['onOpenFile']('"+b+"', flags) threw an exception: "+et.message)}return Se},close:function(b){if(T.isClosed(b))throw new T.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(y){throw y}finally{T.closeStream(b.fd)}b.fd=null},isClosed:function(b){return b.fd===null},llseek:function(b,y,x){if(T.isClosed(b))throw new T.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new T.ErrnoError(70);if(x!=0&&x!=1&&x!=2)throw new T.ErrnoError(28);return b.position=b.stream_ops.llseek(b,y,x),b.ungotten=[],b.position},read:function(b,y,x,k,P){if(k<0||P<0)throw new T.ErrnoError(28);if(T.isClosed(b))throw new T.ErrnoError(8);if((b.flags&2097155)==1)throw new T.ErrnoError(8);if(T.isDir(b.node.mode))throw new T.ErrnoError(31);if(!b.stream_ops.read)throw new T.ErrnoError(28);var B=typeof P!="undefined";if(!B)P=b.position;else if(!b.seekable)throw new T.ErrnoError(70);var $=b.stream_ops.read(b,y,x,k,P);return B||(b.position+=$),$},write:function(b,y,x,k,P,B){if(k<0||P<0)throw new T.ErrnoError(28);if(T.isClosed(b))throw new T.ErrnoError(8);if((b.flags&2097155)==0)throw new T.ErrnoError(8);if(T.isDir(b.node.mode))throw new T.ErrnoError(31);if(!b.stream_ops.write)throw new T.ErrnoError(28);b.seekable&&b.flags&1024&&T.llseek(b,0,2);var $=typeof P!="undefined";if(!$)P=b.position;else if(!b.seekable)throw new T.ErrnoError(70);var Z=b.stream_ops.write(b,y,x,k,P,B);$||(b.position+=Z);try{b.path&&T.trackingDelegate.onWriteToFile&&T.trackingDelegate.onWriteToFile(b.path)}catch(he){D("FS.trackingDelegate['onWriteToFile']('"+b.path+"') threw an exception: "+he.message)}return Z},allocate:function(b,y,x){if(T.isClosed(b))throw new T.ErrnoError(8);if(y<0||x<=0)throw new T.ErrnoError(28);if((b.flags&2097155)==0)throw new T.ErrnoError(8);if(!T.isFile(b.node.mode)&&!T.isDir(b.node.mode))throw new T.ErrnoError(43);if(!b.stream_ops.allocate)throw new T.ErrnoError(138);b.stream_ops.allocate(b,y,x)},mmap:function(b,y,x,k,P,B){if((P&2)!=0&&(B&2)==0&&(b.flags&2097155)!=2)throw new T.ErrnoError(2);if((b.flags&2097155)==1)throw new T.ErrnoError(2);if(!b.stream_ops.mmap)throw new T.ErrnoError(43);return b.stream_ops.mmap(b,y,x,k,P,B)},msync:function(b,y,x,k,P){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,y,x,k,P)},munmap:function(b){return 0},ioctl:function(b,y,x){if(!b.stream_ops.ioctl)throw new T.ErrnoError(59);return b.stream_ops.ioctl(b,y,x)},readFile:function(b,y){if(y=y||{},y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error('Invalid encoding type "'+y.encoding+'"');var x,k=T.open(b,y.flags),P=T.stat(b),B=P.size,$=new Uint8Array(B);return T.read(k,$,0,B,0),y.encoding==="utf8"?x=pt($,0):y.encoding==="binary"&&(x=$),T.close(k),x},writeFile:function(b,y,x){x=x||{},x.flags=x.flags||577;var k=T.open(b,x.flags,x.mode);if(typeof y=="string"){var P=new Uint8Array(dn(y)+1),B=qn(y,P,0,P.length);T.write(k,P,0,B,void 0,x.canOwn)}else if(ArrayBuffer.isView(y))T.write(k,y,0,y.byteLength,void 0,x.canOwn);else throw new Error("Unsupported data type");T.close(k)},cwd:function(){return T.currentPath},chdir:function(b){var y=T.lookupPath(b,{follow:!0});if(y.node===null)throw new T.ErrnoError(44);if(!T.isDir(y.node.mode))throw new T.ErrnoError(54);var x=T.nodePermissions(y.node,"x");if(x)throw new T.ErrnoError(x);T.currentPath=y.path},createDefaultDirectories:function(){T.mkdir("/tmp"),T.mkdir("/home"),T.mkdir("/home/web_user")},createDefaultDevices:function(){T.mkdir("/dev"),T.registerDevice(T.makedev(1,3),{read:function(){return 0},write:function(y,x,k,P,B){return P}}),T.mkdev("/dev/null",T.makedev(1,3)),td.register(T.makedev(5,0),td.default_tty_ops),td.register(T.makedev(6,0),td.default_tty1_ops),T.mkdev("/dev/tty",T.makedev(5,0)),T.mkdev("/dev/tty1",T.makedev(6,0));var b=uQ();T.createDevice("/dev","random",b),T.createDevice("/dev","urandom",b),T.mkdir("/dev/shm"),T.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){T.mkdir("/proc");var b=T.mkdir("/proc/self");T.mkdir("/proc/self/fd"),T.mount({mount:function(){var y=T.createNode(b,"fd",16384|511,73);return y.node_ops={lookup:function(x,k){var P=+k,B=T.getStream(P);if(!B)throw new T.ErrnoError(8);var $={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return B.path}}};return $.parent=$,$}},y}},{},"/proc/self/fd")},createStandardStreams:function(){e.stdin?T.createDevice("/dev","stdin",e.stdin):T.symlink("/dev/tty","/dev/stdin"),e.stdout?T.createDevice("/dev","stdout",null,e.stdout):T.symlink("/dev/tty","/dev/stdout"),e.stderr?T.createDevice("/dev","stderr",null,e.stderr):T.symlink("/dev/tty1","/dev/stderr");var b=T.open("/dev/stdin",0),y=T.open("/dev/stdout",1),x=T.open("/dev/stderr",1);ue(b.fd===0,"invalid handle for stdin ("+b.fd+")"),ue(y.fd===1,"invalid handle for stdout ("+y.fd+")"),ue(x.fd===2,"invalid handle for stderr ("+x.fd+")")},ensureErrnoError:function(){T.ErrnoError||(T.ErrnoError=function(y,x){this.node=x,this.setErrno=function(k){this.errno=k;for(var P in p4)if(p4[P]===k){this.code=P;break}},this.setErrno(y),this.message=gQ[y],this.stack&&(Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0}),this.stack=hn(this.stack))},T.ErrnoError.prototype=new Error,T.ErrnoError.prototype.constructor=T.ErrnoError,[44].forEach(function(b){T.genericErrors[b]=new T.ErrnoError(b),T.genericErrors[b].stack="<generic error, no stack>"}))},staticInit:function(){T.ensureErrnoError(),T.nameTable=new Array(4096),T.mount(Ot,{},"/"),T.createDefaultDirectories(),T.createDefaultDevices(),T.createSpecialDirectories(),T.filesystems={MEMFS:Ot}},init:function(b,y,x){ue(!T.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),T.init.initialized=!0,T.ensureErrnoError(),e.stdin=b||e.stdin,e.stdout=y||e.stdout,e.stderr=x||e.stderr,T.createStandardStreams()},quit:function(){T.init.initialized=!1;var b=e._fflush;b&&b(0);for(var y=0;y<T.streams.length;y++){var x=T.streams[y];!x||T.close(x)}},getMode:function(b,y){var x=0;return b&&(x|=292|73),y&&(x|=146),x},findObject:function(b,y){var x=T.analyzePath(b,y);return x.exists?x.object:null},analyzePath:function(b,y){try{var x=T.lookupPath(b,{follow:!y});b=x.path}catch(P){}var k={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var x=T.lookupPath(b,{parent:!0});k.parentExists=!0,k.parentPath=x.path,k.parentObject=x.node,k.name=xi.basename(b),x=T.lookupPath(b,{follow:!y}),k.exists=!0,k.path=x.path,k.object=x.node,k.name=x.node.name,k.isRoot=x.path==="/"}catch(P){k.error=P.errno}return k},createPath:function(b,y,x,k){b=typeof b=="string"?b:T.getPath(b);for(var P=y.split("/").reverse();P.length;){var B=P.pop();if(!!B){var $=xi.join2(b,B);try{T.mkdir($)}catch(Z){}b=$}}return $},createFile:function(b,y,x,k,P){var B=xi.join2(typeof b=="string"?b:T.getPath(b),y),$=T.getMode(k,P);return T.create(B,$)},createDataFile:function(b,y,x,k,P,B){var $=y?xi.join2(typeof b=="string"?b:T.getPath(b),y):b,Z=T.getMode(k,P),he=T.create($,Z);if(x){if(typeof x=="string"){for(var Se=new Array(x.length),Oe=0,et=x.length;Oe<et;++Oe)Se[Oe]=x.charCodeAt(Oe);x=Se}T.chmod(he,Z|146);var Ae=T.open(he,577);T.write(Ae,x,0,x.length,0,B),T.close(Ae),T.chmod(he,Z)}return he},createDevice:function(b,y,x,k){var P=xi.join2(typeof b=="string"?b:T.getPath(b),y),B=T.getMode(!!x,!!k);T.createDevice.major||(T.createDevice.major=64);var $=T.makedev(T.createDevice.major++,0);return T.registerDevice($,{open:function(Z){Z.seekable=!1},close:function(Z){k&&k.buffer&&k.buffer.length&&k(10)},read:function(Z,he,Se,Oe,et){for(var Ae=0,at=0;at<Oe;at++){var Ze;try{Ze=x()}catch(tn){throw new T.ErrnoError(29)}if(Ze===void 0&&Ae===0)throw new T.ErrnoError(6);if(Ze==null)break;Ae++,he[Se+at]=Ze}return Ae&&(Z.node.timestamp=Date.now()),Ae},write:function(Z,he,Se,Oe,et){for(var Ae=0;Ae<Oe;Ae++)try{k(he[Se+Ae])}catch(at){throw new T.ErrnoError(29)}return Oe&&(Z.node.timestamp=Date.now()),Ae}}),T.mkdev(P,B,$)},forceLoadFile:function(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(_)try{b.contents=kI(_(b.url),!0),b.usedBytes=b.contents.length}catch(y){throw new T.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(b,y,x,k,P){function B(){this.lengthKnown=!1,this.chunks=[]}if(B.prototype.get=function(Ae){if(!(Ae>this.length-1||Ae<0)){var at=Ae%this.chunkSize,Ze=Ae/this.chunkSize|0;return this.getter(Ze)[at]}},B.prototype.setDataGetter=function(Ae){this.getter=Ae},B.prototype.cacheLength=function(){var Ae=new XMLHttpRequest;if(Ae.open("HEAD",x,!1),Ae.send(null),!(Ae.status>=200&&Ae.status<300||Ae.status===304))throw new Error("Couldn't load "+x+". Status: "+Ae.status);var at=Number(Ae.getResponseHeader("Content-length")),Ze,tn=(Ze=Ae.getResponseHeader("Accept-Ranges"))&&Ze==="bytes",Lo=(Ze=Ae.getResponseHeader("Content-Encoding"))&&Ze==="gzip",ko=1024*1024;tn||(ko=at);var id=function(ns,Ls){if(ns>Ls)throw new Error("invalid range ("+ns+", "+Ls+") or no bytes requested!");if(Ls>at-1)throw new Error("only "+at+" bytes available! programmer error!");var bn=new XMLHttpRequest;if(bn.open("GET",x,!1),at!==ko&&bn.setRequestHeader("Range","bytes="+ns+"-"+Ls),typeof Uint8Array!="undefined"&&(bn.responseType="arraybuffer"),bn.overrideMimeType&&bn.overrideMimeType("text/plain; charset=x-user-defined"),bn.send(null),!(bn.status>=200&&bn.status<300||bn.status===304))throw new Error("Couldn't load "+x+". Status: "+bn.status);return bn.response!==void 0?new Uint8Array(bn.response||[]):kI(bn.responseText||"",!0)},rr=this;rr.setDataGetter(function(ns){var Ls=ns*ko,bn=(ns+1)*ko-1;if(bn=Math.min(bn,at-1),typeof rr.chunks[ns]=="undefined"&&(rr.chunks[ns]=id(Ls,bn)),typeof rr.chunks[ns]=="undefined")throw new Error("doXHR failed!");return rr.chunks[ns]}),(Lo||!at)&&(ko=at=1,at=this.getter(0).length,ko=at,S("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=at,this._chunkSize=ko,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var $=new B;Object.defineProperties($,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var Z={isDevice:!1,contents:$}}else var Z={isDevice:!1,url:x};var he=T.createFile(b,y,Z,k,P);Z.contents?he.contents=Z.contents:Z.url&&(he.contents=null,he.url=Z.url),Object.defineProperties(he,{usedBytes:{get:function(){return this.contents.length}}});var Se={},Oe=Object.keys(he.stream_ops);return Oe.forEach(function(et){var Ae=he.stream_ops[et];Se[et]=function(){return T.forceLoadFile(he),Ae.apply(null,arguments)}}),Se.read=function(Ae,at,Ze,tn,Lo){T.forceLoadFile(he);var ko=Ae.node.contents;if(Lo>=ko.length)return 0;var id=Math.min(ko.length-Lo,tn);if(ue(id>=0),ko.slice)for(var rr=0;rr<id;rr++)at[Ze+rr]=ko[Lo+rr];else for(var rr=0;rr<id;rr++)at[Ze+rr]=ko.get(Lo+rr);return id},he.stream_ops=Se,he},createPreloadedFile:function(b,y,x,k,P,B,$,Z,he,Se){se.init();var Oe=y?ed.resolve(xi.join2(b,y)):b,et=ne("cp "+Oe);function Ae(at){function Ze(Lo){Se&&Se(),Z||T.createDataFile(b,y,Lo,k,P,he),B&&B(),te(et)}var tn=!1;e.preloadPlugins.forEach(function(Lo){tn||Lo.canHandle(Oe)&&(Lo.handle(at,Oe,Ze,function(){$&&$(),te(et)}),tn=!0)}),tn||Ze(at)}Q(et),typeof x=="string"?fQ(x,function(at){Ae(at)},$):Ae(x)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(b,y,x){y=y||function(){},x=x||function(){};var k=T.indexedDB();try{var P=k.open(T.DB_NAME(),T.DB_VERSION)}catch(B){return x(B)}P.onupgradeneeded=function(){S("creating db");var $=P.result;$.createObjectStore(T.DB_STORE_NAME)},P.onsuccess=function(){var $=P.result,Z=$.transaction([T.DB_STORE_NAME],"readwrite"),he=Z.objectStore(T.DB_STORE_NAME),Se=0,Oe=0,et=b.length;function Ae(){Oe==0?y():x()}b.forEach(function(at){var Ze=he.put(T.analyzePath(at).object.contents,at);Ze.onsuccess=function(){Se++,Se+Oe==et&&Ae()},Ze.onerror=function(){Oe++,Se+Oe==et&&Ae()}}),Z.onerror=x},P.onerror=x},loadFilesFromDB:function(b,y,x){y=y||function(){},x=x||function(){};var k=T.indexedDB();try{var P=k.open(T.DB_NAME(),T.DB_VERSION)}catch(B){return x(B)}P.onupgradeneeded=x,P.onsuccess=function(){var $=P.result;try{var Z=$.transaction([T.DB_STORE_NAME],"readonly")}catch(at){x(at);return}var he=Z.objectStore(T.DB_STORE_NAME),Se=0,Oe=0,et=b.length;function Ae(){Oe==0?y():x()}b.forEach(function(at){var Ze=he.get(at);Ze.onsuccess=function(){T.analyzePath(at).exists&&T.unlink(at),T.createDataFile(xi.dirname(at),xi.basename(at),Ze.result,!0,!0,!0),Se++,Se+Oe==et&&Ae()},Ze.onerror=function(){Oe++,Se+Oe==et&&Ae()}}),Z.onerror=x},P.onerror=x},absolutePath:function(){f("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:function(){f("FS.createFolder has been removed; use FS.mkdir instead")},createLink:function(){f("FS.createLink has been removed; use FS.symlink instead")},joinPath:function(){f("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:function(){f("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:function(){f("FS.standardizePath has been removed; use PATH.normalize instead")}},Ka={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(b,y,x){if(y[0]==="/")return y;var k;if(b===-100)k=T.cwd();else{var P=T.getStream(b);if(!P)throw new T.ErrnoError(8);k=P.path}if(y.length==0){if(!x)throw new T.ErrnoError(44);return k}return xi.join2(k,y)},doStat:function(b,y,x){try{var k=b(y)}catch(P){if(P&&P.node&&xi.normalize(y)!==xi.normalize(T.getPath(P.node)))return-54;throw P}return Qe[x>>2]=k.dev,Qe[x+4>>2]=0,Qe[x+8>>2]=k.ino,Qe[x+12>>2]=k.mode,Qe[x+16>>2]=k.nlink,Qe[x+20>>2]=k.uid,Qe[x+24>>2]=k.gid,Qe[x+28>>2]=k.rdev,Qe[x+32>>2]=0,rt=[k.size>>>0,($e=k.size,+Math.abs($e)>=1?$e>0?(Math.min(+Math.floor($e/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],Qe[x+40>>2]=rt[0],Qe[x+44>>2]=rt[1],Qe[x+48>>2]=4096,Qe[x+52>>2]=k.blocks,Qe[x+56>>2]=k.atime.getTime()/1e3|0,Qe[x+60>>2]=0,Qe[x+64>>2]=k.mtime.getTime()/1e3|0,Qe[x+68>>2]=0,Qe[x+72>>2]=k.ctime.getTime()/1e3|0,Qe[x+76>>2]=0,rt=[k.ino>>>0,($e=k.ino,+Math.abs($e)>=1?$e>0?(Math.min(+Math.floor($e/4294967296),4294967295)|0)>>>0:~~+Math.ceil(($e-+(~~$e>>>0))/4294967296)>>>0:0)],Qe[x+80>>2]=rt[0],Qe[x+84>>2]=rt[1],0},doMsync:function(b,y,x,k,P){var B=wr.slice(b,b+x);T.msync(y,B,P,x,k)},doMkdir:function(b,y){return b=xi.normalize(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),T.mkdir(b,y,0),0},doMknod:function(b,y,x){switch(y&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return T.mknod(b,y,x),0},doReadlink:function(b,y,x){if(x<=0)return-28;var k=T.readlink(b),P=Math.min(x,dn(k)),B=kn[y+P];return jr(k,y,x+1),kn[y+P]=B,P},doAccess:function(b,y){if(y&~7)return-28;var x,k=T.lookupPath(b,{follow:!0});if(x=k.node,!x)return-44;var P="";return y&4&&(P+="r"),y&2&&(P+="w"),y&1&&(P+="x"),P&&T.nodePermissions(x,P)?-2:0},doDup:function(b,y,x){var k=T.getStream(x);return k&&T.close(k),T.open(b,y,0,x,x).fd},doReadv:function(b,y,x,k){for(var P=0,B=0;B<x;B++){var $=Qe[y+B*8>>2],Z=Qe[y+(B*8+4)>>2],he=T.read(b,kn,$,Z,k);if(he<0)return-1;if(P+=he,he<Z)break}return P},doWritev:function(b,y,x,k){for(var P=0,B=0;B<x;B++){var $=Qe[y+B*8>>2],Z=Qe[y+(B*8+4)>>2],he=T.write(b,kn,$,Z,k);if(he<0)return-1;P+=he}return P},varargs:void 0,get:function(){ue(Ka.varargs!=null),Ka.varargs+=4;var b=Qe[Ka.varargs-4>>2];return b},getStr:function(b){var y=Ai(b);return y},getStreamFromFD:function(b){var y=T.getStream(b);if(!y)throw new T.ErrnoError(8);return y},get64:function(b,y){return b>=0?ue(y===0):ue(y===-1),b}};function pQ(b,y){try{if(y===0)return-28;var x=T.cwd(),k=dn(x);return y<k+1?-68:(jr(x,b,y),b)}catch(P){return(typeof T=="undefined"||!(P instanceof T.ErrnoError))&&f(P),-P.errno}}function _Q(b,y,x){Ka.varargs=x;try{var k=Ka.getStr(b),P=x?Ka.get():0,B=T.open(k,y,P);return B.fd}catch($){return(typeof T=="undefined"||!($ instanceof T.ErrnoError))&&f($),-$.errno}}function bQ(){throw"longjmp"}function vQ(){f()}function wQ(){return wr.length}function yQ(b,y,x){wr.copyWithin(b,y,y+x)}function CQ(b){var y=wr.length;return b=b>>>0,!1}function xI(b,y){if(Ne){D("user callback triggered after application aborted.  Ignoring.");return}if(y){b();return}try{b()}catch(x){if(x instanceof b0)return;if(x!=="unwind")throw x&&typeof x=="object"&&x.stack&&D("exception thrown: "+[x,x.stack]),x}}function _4(b,y){return setTimeout(function(){xI(b)},y)}var se={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){se.mainLoop.scheduler=null,se.mainLoop.currentlyRunningMainloop++},resume:function(){se.mainLoop.currentlyRunningMainloop++;var b=se.mainLoop.timingMode,y=se.mainLoop.timingValue,x=se.mainLoop.func;se.mainLoop.func=null,v4(x,0,!1,se.mainLoop.arg,!0),EI(b,y),se.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var b=e.statusMessage||"Please wait...",y=se.mainLoop.remainingBlockers,x=se.mainLoop.expectedBlockers;y?y<x?e.setStatus(b+" ("+(x-y)+"/"+x+")"):e.setStatus(b):e.setStatus("")}},runIter:function(b){if(!Ne){if(e.preMainLoop){var y=e.preMainLoop();if(y===!1)return}xI(b),e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),se.initted)return;se.initted=!0;try{new Blob,se.hasBlobConstructor=!0}catch(P){se.hasBlobConstructor=!1,S("warning: no blob constructor, cannot create blobs with mimetypes")}se.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:se.hasBlobConstructor?null:S("warning: no BlobBuilder"),se.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:void 0,!e.noImageDecoding&&typeof se.URLObject=="undefined"&&(S("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var b={};b.canHandle=function(B){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(B)},b.handle=function(B,$,Z,he){var Se=null;if(se.hasBlobConstructor)try{Se=new Blob([B],{type:se.getMimetype($)}),Se.size!==B.length&&(Se=new Blob([new Uint8Array(B).buffer],{type:se.getMimetype($)}))}catch(at){I("Blob constructor present but fails: "+at+"; falling back to blob builder")}if(!Se){var Oe=new se.BlobBuilder;Oe.append(new Uint8Array(B).buffer),Se=Oe.getBlob()}var et=se.URLObject.createObjectURL(Se);ue(typeof et=="string","createObjectURL must return a url as a string");var Ae=new Image;Ae.onload=function(){ue(Ae.complete,"Image "+$+" could not be decoded");var Ze=document.createElement("canvas");Ze.width=Ae.width,Ze.height=Ae.height;var tn=Ze.getContext("2d");tn.drawImage(Ae,0,0),e.preloadedImages[$]=Ze,se.URLObject.revokeObjectURL(et),Z&&Z(B)},Ae.onerror=function(Ze){S("Image "+et+" could not be decoded"),he&&he()},Ae.src=et},e.preloadPlugins.push(b);var y={};y.canHandle=function(B){return!e.noAudioDecoding&&B.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},y.handle=function(B,$,Z,he){var Se=!1;function Oe(tn){Se||(Se=!0,e.preloadedAudios[$]=tn,Z&&Z(B))}function et(){Se||(Se=!0,e.preloadedAudios[$]=new Audio,he&&he())}if(se.hasBlobConstructor){try{var Ae=new Blob([B],{type:se.getMimetype($)})}catch(tn){return et()}var at=se.URLObject.createObjectURL(Ae);ue(typeof at=="string","createObjectURL must return a url as a string");var Ze=new Audio;Ze.addEventListener("canplaythrough",function(){Oe(Ze)},!1),Ze.onerror=function(Lo){if(Se)return;S("warning: browser could not fully decode audio "+$+", trying slower base64 approach");function ko(id){for(var rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ns="=",Ls="",bn=0,np=0,TI=0;TI<id.length;TI++)for(bn=bn<<8|id[TI],np+=8;np>=6;){var VJ=bn>>np-6&63;np-=6,Ls+=rr[VJ]}return np==2?(Ls+=rr[(bn&3)<<4],Ls+=ns+ns):np==4&&(Ls+=rr[(bn&15)<<2],Ls+=ns),Ls}Ze.src="data:audio/x-"+$.substr(-3)+";base64,"+ko(B),Oe(Ze)},Ze.src=at,_4(function(){Oe(Ze)},1e4)}else return et()},e.preloadPlugins.push(y);function x(){se.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}var k=e.canvas;k&&(k.requestPointerLock=k.requestPointerLock||k.mozRequestPointerLock||k.webkitRequestPointerLock||k.msRequestPointerLock||function(){},k.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},k.exitPointerLock=k.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",x,!1),document.addEventListener("mozpointerlockchange",x,!1),document.addEventListener("webkitpointerlockchange",x,!1),document.addEventListener("mspointerlockchange",x,!1),e.elementPointerLock&&k.addEventListener("click",function(P){!se.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),P.preventDefault())},!1))},createContext:function(b,y,x,k){if(y&&e.ctx&&b==e.canvas)return e.ctx;var P,B;if(y){var $={antialias:!1,alpha:!1,majorVersion:1};if(k)for(var Z in k)$[Z]=k[Z];typeof GL!="undefined"&&(B=GL.createContext(b,$),B&&(P=GL.getContext(B).GLctx))}else P=b.getContext("2d");return P?(x&&(y||ue(typeof GLctx=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=P,y&&GL.makeContextCurrent(B),e.useWebGL=y,se.moduleContextCreatedCallbacks.forEach(function(he){he()}),se.init()),P):null},destroyContext:function(b,y,x){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(b,y){se.lockPointer=b,se.resizeCanvas=y,typeof se.lockPointer=="undefined"&&(se.lockPointer=!0),typeof se.resizeCanvas=="undefined"&&(se.resizeCanvas=!1);var x=e.canvas;function k(){se.isFullscreen=!1;var B=x.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===B?(x.exitFullscreen=se.exitFullscreen,se.lockPointer&&x.requestPointerLock(),se.isFullscreen=!0,se.resizeCanvas?se.setFullscreenCanvasSize():se.updateCanvasDimensions(x)):(B.parentNode.insertBefore(x,B),B.parentNode.removeChild(B),se.resizeCanvas?se.setWindowedCanvasSize():se.updateCanvasDimensions(x)),e.onFullScreen&&e.onFullScreen(se.isFullscreen),e.onFullscreen&&e.onFullscreen(se.isFullscreen)}se.fullscreenHandlersInstalled||(se.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",k,!1),document.addEventListener("mozfullscreenchange",k,!1),document.addEventListener("webkitfullscreenchange",k,!1),document.addEventListener("MSFullscreenChange",k,!1));var P=document.createElement("div");x.parentNode.insertBefore(P,x),P.appendChild(x),P.requestFullscreen=P.requestFullscreen||P.mozRequestFullScreen||P.msRequestFullscreen||(P.webkitRequestFullscreen?function(){P.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(P.webkitRequestFullScreen?function(){P.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),P.requestFullscreen()},requestFullScreen:function(){f("Module.requestFullScreen has been replaced by Module.requestFullscreen (without a capital S)")},exitFullscreen:function(){if(!se.isFullscreen)return!1;var b=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return b.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(b){var y=Date.now();if(se.nextRAF===0)se.nextRAF=y+1e3/60;else for(;y+2>=se.nextRAF;)se.nextRAF+=1e3/60;var x=Math.max(se.nextRAF-y,0);setTimeout(b,x)},requestAnimationFrame:function(b){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(b);return}var y=se.fakeRequestAnimationFrame;y(b)},safeSetTimeout:function(b){return _4(b)},safeRequestAnimationFrame:function(b){return se.requestAnimationFrame(function(){xI(b)})},getMimetype:function(b){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[b.substr(b.lastIndexOf(".")+1)]},getUserMedia:function(b){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(b)},getMovementX:function(b){return b.movementX||b.mozMovementX||b.webkitMovementX||0},getMovementY:function(b){return b.movementY||b.mozMovementY||b.webkitMovementY||0},getMouseWheelDelta:function(b){var y=0;switch(b.type){case"DOMMouseScroll":y=b.detail/3;break;case"mousewheel":y=b.wheelDelta/120;break;case"wheel":switch(y=b.deltaY,b.deltaMode){case 0:y/=100;break;case 1:y/=3;break;case 2:y*=80;break;default:throw"unrecognized mouse wheel delta mode: "+b.deltaMode}break;default:throw"unrecognized mouse wheel event: "+b.type}return y},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(b){if(se.pointerLock)b.type!="mousemove"&&"mozMovementX"in b?se.mouseMovementX=se.mouseMovementY=0:(se.mouseMovementX=se.getMovementX(b),se.mouseMovementY=se.getMovementY(b)),typeof SDL!="undefined"?(se.mouseX=SDL.mouseX+se.mouseMovementX,se.mouseY=SDL.mouseY+se.mouseMovementY):(se.mouseX+=se.mouseMovementX,se.mouseY+=se.mouseMovementY);else{var y=e.canvas.getBoundingClientRect(),x=e.canvas.width,k=e.canvas.height,P=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,B=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset;if(ue(typeof P!="undefined"&&typeof B!="undefined","Unable to retrieve scroll position, mouse positions likely broken."),b.type==="touchstart"||b.type==="touchend"||b.type==="touchmove"){var $=b.touch;if($===void 0)return;var Z=$.pageX-(P+y.left),he=$.pageY-(B+y.top);Z=Z*(x/y.width),he=he*(k/y.height);var Se={x:Z,y:he};if(b.type==="touchstart")se.lastTouches[$.identifier]=Se,se.touches[$.identifier]=Se;else if(b.type==="touchend"||b.type==="touchmove"){var Oe=se.touches[$.identifier];Oe||(Oe=Se),se.lastTouches[$.identifier]=Oe,se.touches[$.identifier]=Se}return}var et=b.pageX-(P+y.left),Ae=b.pageY-(B+y.top);et=et*(x/y.width),Ae=Ae*(k/y.height),se.mouseMovementX=et-se.mouseX,se.mouseMovementY=Ae-se.mouseY,se.mouseX=et,se.mouseY=Ae}},resizeListeners:[],updateResizeListeners:function(){var b=e.canvas;se.resizeListeners.forEach(function(y){y(b.width,b.height)})},setCanvasSize:function(b,y,x){var k=e.canvas;se.updateCanvasDimensions(k,b,y),x||se.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var b=Do[SDL.screen>>2];b=b|8388608,Qe[SDL.screen>>2]=b}se.updateCanvasDimensions(e.canvas),se.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var b=Do[SDL.screen>>2];b=b&~8388608,Qe[SDL.screen>>2]=b}se.updateCanvasDimensions(e.canvas),se.updateResizeListeners()},updateCanvasDimensions:function(b,y,x){y&&x?(b.widthNative=y,b.heightNative=x):(y=b.widthNative,x=b.heightNative);var k=y,P=x;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(k/P<e.forcedAspectRatio?k=Math.round(P*e.forcedAspectRatio):P=Math.round(k/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===b.parentNode&&typeof screen!="undefined"){var B=Math.min(screen.width/k,screen.height/P);k=Math.round(k*B),P=Math.round(P*B)}se.resizeCanvas?(b.width!=k&&(b.width=k),b.height!=P&&(b.height=P),typeof b.style!="undefined"&&(b.style.removeProperty("width"),b.style.removeProperty("height"))):(b.width!=y&&(b.width=y),b.height!=x&&(b.height=x),typeof b.style!="undefined"&&(k!=y||P!=x?(b.style.setProperty("width",k+"px","important"),b.style.setProperty("height",P+"px","important")):(b.style.removeProperty("width"),b.style.removeProperty("height"))))}};function EI(b,y){if(se.mainLoop.timingMode=b,se.mainLoop.timingValue=y,!se.mainLoop.func)return D("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1;if(se.mainLoop.running||(se.mainLoop.running=!0),b==0)se.mainLoop.scheduler=function(){var $=Math.max(0,se.mainLoop.tickStartTime+y-DI())|0;setTimeout(se.mainLoop.runner,$)},se.mainLoop.method="timeout";else if(b==1)se.mainLoop.scheduler=function(){se.requestAnimationFrame(se.mainLoop.runner)},se.mainLoop.method="rAF";else if(b==2){if(typeof setImmediate=="undefined"){var x=[],k="setimmediate",P=function(B){(B.data===k||B.data.target===k)&&(B.stopPropagation(),x.shift()())};addEventListener("message",P,!0),setImmediate=function($){x.push($),d?(e.setImmediates===void 0&&(e.setImmediates=[]),e.setImmediates.push($),postMessage({target:k})):postMessage(k,"*")}}se.mainLoop.scheduler=function(){setImmediate(se.mainLoop.runner)},se.mainLoop.method="immediate"}return 0}var DI;DI=function(){return performance.now()};function b4(b){D4(b)}function SQ(){if(!$a())try{b4(Fe)}catch(b){if(b instanceof b0)return;throw b}}function v4(b,y,x,k,P){ue(!se.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),se.mainLoop.func=b,se.mainLoop.arg=k;var B=se.mainLoop.currentlyRunningMainloop;function $(){return B<se.mainLoop.currentlyRunningMainloop?(SQ(),!1):!0}if(se.mainLoop.running=!1,se.mainLoop.runner=function(){if(!Ne){if(se.mainLoop.queue.length>0){var he=Date.now(),Se=se.mainLoop.queue.shift();if(Se.func(Se.arg),se.mainLoop.remainingBlockers){var Oe=se.mainLoop.remainingBlockers,et=Oe%1==0?Oe-1:Math.floor(Oe);Se.counted?se.mainLoop.remainingBlockers=et:(et=et+.5,se.mainLoop.remainingBlockers=(8*Oe+et)/9)}if(S('main loop blocker "'+Se.name+'" took '+(Date.now()-he)+" ms"),se.mainLoop.updateStatus(),!$())return;setTimeout(se.mainLoop.runner,0);return}if(!!$()){if(se.mainLoop.currentFrameNumber=se.mainLoop.currentFrameNumber+1|0,se.mainLoop.timingMode==1&&se.mainLoop.timingValue>1&&se.mainLoop.currentFrameNumber%se.mainLoop.timingValue!=0){se.mainLoop.scheduler();return}else se.mainLoop.timingMode==0&&(se.mainLoop.tickStartTime=DI());se.mainLoop.method==="timeout"&&e.ctx&&(I("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),se.mainLoop.method=""),se.mainLoop.runIter(b),Jo(),!!$()&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),se.mainLoop.scheduler())}}},P||(y&&y>0?EI(0,1e3/y):EI(1,1),se.mainLoop.scheduler()),x)throw"unwind"}function xQ(b,y,x){var k=Ht.get(b);v4(k,y,x)}var LI={};function EQ(){return a||"./this.program"}function yv(){if(!yv.strings){var b=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:b,_:EQ()};for(var x in LI)LI[x]===void 0?delete y[x]:y[x]=LI[x];var k=[];for(var x in y)k.push(x+"="+y[x]);yv.strings=k}return yv.strings}function DQ(b,y){var x=0;return yv().forEach(function(k,P){var B=y+x;Qe[b+P*4>>2]=B,Ve(k,B),x+=k.length+1}),0}function LQ(b,y){var x=yv();Qe[b>>2]=x.length;var k=0;return x.forEach(function(P){k+=P.length+1}),Qe[y>>2]=k,0}function kQ(b){try{var y=Ka.getStreamFromFD(b);return T.close(y),0}catch(x){return(typeof T=="undefined"||!(x instanceof T.ErrnoError))&&f(x),x.errno}}function IQ(b,y,x,k){try{var P=Ka.getStreamFromFD(b),B=Ka.doReadv(P,y,x);return Qe[k>>2]=B,0}catch($){return(typeof T=="undefined"||!($ instanceof T.ErrnoError))&&f($),$.errno}}function OQ(b,y,x,k){try{var P=Ka.getStreamFromFD(b),B=Ka.doWritev(P,y,x);return Qe[k>>2]=B,0}catch($){return(typeof T=="undefined"||!($ instanceof T.ErrnoError))&&f($),$.errno}}function TQ(){return ie()}function NQ(b){return b}function RQ(b){ee(b)}var w4=function(b,y,x,k){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=T.nextInode++,this.name=y,this.mode=x,this.node_ops={},this.stream_ops={},this.rdev=k},f0=292|73,g0=146;Object.defineProperties(w4.prototype,{read:{get:function(){return(this.mode&f0)===f0},set:function(b){b?this.mode|=f0:this.mode&=~f0}},write:{get:function(){return(this.mode&g0)===g0},set:function(b){b?this.mode|=g0:this.mode&=~g0}},isFolder:{get:function(){return T.isDir(this.mode)}},isDevice:{get:function(){return T.isChrdev(this.mode)}}}),T.FSNode=w4,T.staticInit(),e.requestFullscreen=function(y,x){se.requestFullscreen(y,x)},e.requestFullScreen=function(){se.requestFullScreen()},e.requestAnimationFrame=function(y){se.requestAnimationFrame(y)},e.setCanvasSize=function(y,x,k){se.setCanvasSize(y,x,k)},e.pauseMainLoop=function(){se.mainLoop.pause()},e.resumeMainLoop=function(){se.mainLoop.resume()},e.getUserMedia=function(){se.getUserMedia()},e.createContext=function(y,x,k,P){return se.createContext(y,x,k,P)};var gpe=!0;function kI(b,y,x){var k=x>0?x:dn(b)+1,P=new Array(k),B=qn(b,P,0,P.length);return y&&(P.length=B),P}var y4={__cxa_allocate_exception:Rh,__cxa_begin_catch:m0,__cxa_end_catch:sQ,__cxa_find_matching_catch_2:lQ,__cxa_find_matching_catch_4:cQ,__cxa_throw:dQ,__gxx_personality_v0:hQ,__resumeException:aQ,__sys_getcwd:pQ,__sys_open:_Q,_emscripten_throw_longjmp:bQ,abort:vQ,emscripten_get_heap_max:wQ,emscripten_memcpy_big:yQ,emscripten_resize_heap:CQ,emscripten_set_main_loop:xQ,environ_get:DQ,environ_sizes_get:LQ,exit:b4,fd_close:kQ,fd_read:IQ,fd_write:OQ,getTempRet0:TQ,invoke_dd:mJ,invoke_ddd:gJ,invoke_didd:_J,invoke_i:cJ,invoke_ii:lJ,invoke_iii:rJ,invoke_iiii:oJ,invoke_iiiii:dJ,invoke_iiiiii:vJ,invoke_iiiiiiiiiiiii:bJ,invoke_ij:SJ,invoke_j:jJ,invoke_ji:LJ,invoke_jii:yJ,invoke_jiii:xJ,invoke_jiiii:AJ,invoke_jijj:PJ,invoke_v:iJ,invoke_vi:JQ,invoke_vid:fJ,invoke_vii:nJ,invoke_viid:uJ,invoke_viii:eJ,invoke_viiii:tJ,invoke_viiiii:sJ,invoke_viiiiii:hJ,invoke_viiiiiii:pJ,invoke_viiiiiiii:aJ,invoke_viiiiijji:OJ,invoke_viiiij:NJ,invoke_viiiijii:RJ,invoke_viiij:IJ,invoke_viiiji:wJ,invoke_viiijj:DJ,invoke_viij:CJ,invoke_viiji:TJ,invoke_vij:EJ,invoke_vijj:kJ,llvm_eh_typeid_for:NQ,setTempRet0:RQ},ppe=Je(),_pe=e.___wasm_call_ctors=E("__wasm_call_ctors"),bpe=e._main=E("main"),vpe=e._artichoke_web_repl_init=E("artichoke_web_repl_init"),wpe=e._artichoke_string_new=E("artichoke_string_new"),ype=e._artichoke_string_free=E("artichoke_string_free"),Cpe=e._artichoke_string_getlen=E("artichoke_string_getlen"),Spe=e._artichoke_string_getch=E("artichoke_string_getch"),xpe=e._artichoke_string_putch=E("artichoke_string_putch"),Epe=e._artichoke_eval=E("artichoke_eval"),Dpe=e._mrb_gc_protect=E("mrb_gc_protect"),Lpe=e._mrb_sys_value_is_dead=E("mrb_sys_value_is_dead"),kpe=e._mrb_define_class_under=E("mrb_define_class_under"),Ipe=e._mrb_sys_class_of_value=E("mrb_sys_class_of_value"),Ope=e._mrb_class_defined_under=E("mrb_class_defined_under"),Tpe=e._mrb_class_get_under=E("mrb_class_get_under"),Npe=e._mrb_class_defined=E("mrb_class_defined"),Rpe=e._mrb_class_get=E("mrb_class_get"),Ppe=e._mrb_sys_gc_arena_restore=E("mrb_sys_gc_arena_restore"),Ape=e._mrb_data_check_get_ptr=E("mrb_data_check_get_ptr"),jpe=e._mrb_sys_gc_arena_save=E("mrb_sys_gc_arena_save"),Mpe=e._mrb_sys_obj_frozen=E("mrb_sys_obj_frozen"),Fpe=e._mrb_define_module_under=E("mrb_define_module_under"),Bpe=e._mrb_define_class_method=E("mrb_define_class_method"),Wpe=e._mrb_define_singleton_method=E("mrb_define_singleton_method"),Upe=e._mrb_define_method=E("mrb_define_method"),Vpe=e._mrb_define_module_function=E("mrb_define_module_function"),zpe=e._mrb_define_class=E("mrb_define_class"),Hpe=e._mrb_sys_alloc_rarray=E("mrb_sys_alloc_rarray"),$pe=e._mrb_data_object_alloc=E("mrb_data_object_alloc"),Kpe=e._mrb_sys_obj_value=E("mrb_sys_obj_value"),qpe=e._mrb_define_module=E("mrb_define_module"),Ype=e._mrb_close=E("mrb_close"),Zpe=e._mrb_sys_class_value=E("mrb_sys_class_value"),Gpe=e._mrb_obj_new=E("mrb_obj_new"),Xpe=e._mrb_sys_value_is_nil=E("mrb_sys_value_is_nil"),Qpe=e._mrb_sys_value_is_true=E("mrb_sys_value_is_true"),Jpe=e._mrb_sys_value_is_false=E("mrb_sys_value_is_false"),e_e=e._mrb_define_global_const=E("mrb_define_global_const"),t_e=e._mrb_define_const=E("mrb_define_const"),i_e=e._mrb_sys_false_value=E("mrb_sys_false_value"),n_e=e._mrb_sys_true_value=E("mrb_sys_true_value"),r_e=e._mrb_sys_nil_value=E("mrb_sys_nil_value"),o_e=e._mrb_str_new=E("mrb_str_new"),s_e=e._mrb_string_value_ptr=E("mrb_string_value_ptr"),a_e=e._mrb_string_value_len=E("mrb_string_value_len"),l_e=e._mrb_sys_fixnum_value=E("mrb_sys_fixnum_value"),c_e=e._mrb_sys_fixnum_to_cint=E("mrb_sys_fixnum_to_cint"),d_e=e._mrb_sys_float_value=E("mrb_sys_float_value"),h_e=e._mrb_sys_float_to_cdouble=E("mrb_sys_float_to_cdouble"),u_e=e._mrb_hash_new_capa=E("mrb_hash_new_capa"),m_e=e._mrb_hash_set=E("mrb_hash_set"),f_e=e._mrb_hash_keys=E("mrb_hash_keys"),g_e=e._mrb_hash_get=E("mrb_hash_get"),p_e=e._mrb_sys_cptr_value=E("mrb_sys_cptr_value"),__e=e._mrb_protect=E("mrb_protect"),b_e=e._mrb_sys_gc_live_objects=E("mrb_sys_gc_live_objects"),v_e=e._mrb_sys_safe_gc_mark=E("mrb_sys_safe_gc_mark"),w_e=e._mrb_incremental_gc=E("mrb_incremental_gc"),y_e=e._mrb_full_gc=E("mrb_full_gc"),C_e=e._mrb_sys_gc_enable=E("mrb_sys_gc_enable"),S_e=e._mrb_sys_gc_disable=E("mrb_sys_gc_disable"),x_e=e._mrb_gv_set=E("mrb_gv_set"),E_e=e._mrbc_filename=E("mrbc_filename"),D_e=e._mrb_top_self=E("mrb_top_self"),L_e=e._mrb_sys_module_value=E("mrb_sys_module_value"),k_e=e._mrb_get_args=E("mrb_get_args"),I_e=e._mrb_sys_set_instance_tt=E("mrb_sys_set_instance_tt"),O_e=e._mrb_const_defined_at=E("mrb_const_defined_at"),T_e=e._mrb_module_get_under=E("mrb_module_get_under"),N_e=e._mrb_module_get=E("mrb_module_get"),R_e=e._mrbc_context_new=E("mrbc_context_new"),P_e=e._mrbc_context_free=E("mrbc_context_free"),A_e=e._mrb_sys_data_init=E("mrb_sys_data_init"),j_e=e._mrb_exc_raise=E("mrb_exc_raise"),M_e=e._mrb_sys_raise=E("mrb_sys_raise"),F_e=e._mrb_sys_class_ptr=E("mrb_sys_class_ptr"),B_e=e._mrb_sys_basic_ptr=E("mrb_sys_basic_ptr"),W_e=e._mrb_write_barrier=E("mrb_write_barrier"),U_e=e._mrb_sys_new_symbol=E("mrb_sys_new_symbol"),V_e=e._mrb_ary_new=E("mrb_ary_new"),z_e=e._mrb_ary_new_capa=E("mrb_ary_new_capa"),H_e=e._mrb_ary_new_from_values=E("mrb_ary_new_from_values"),$_e=e._mrb_assoc_new=E("mrb_assoc_new"),K_e=e._mrb_ary_splat=E("mrb_ary_splat"),q_e=e._mrb_ary_concat=E("mrb_ary_concat"),Y_e=e._mrb_ary_pop=E("mrb_ary_pop"),Z_e=e._mrb_ary_push=E("mrb_ary_push"),G_e=e._mrb_ary_ref=E("mrb_ary_ref"),X_e=e._mrb_ary_set=E("mrb_ary_set"),Q_e=e._mrb_ary_shift=E("mrb_ary_shift"),J_e=e._mrb_ary_unshift=E("mrb_ary_unshift"),ebe=e._mrb_ary_artichoke_free=E("mrb_ary_artichoke_free"),tbe=e._mrb_sys_repack_into_rarray=E("mrb_sys_repack_into_rarray"),ibe=e._mrb_to_flo=E("mrb_to_flo"),nbe=e._mrb_sys_cptr_ptr=E("mrb_sys_cptr_ptr"),rbe=e._mrb_funcall_with_block=E("mrb_funcall_with_block"),obe=e._mrb_funcall_argv=E("mrb_funcall_argv"),sbe=e._mrb_load_nstring_cxt=E("mrb_load_nstring_cxt"),abe=e._mrb_yield=E("mrb_yield"),lbe=e._mrb_range_beg_len=E("mrb_range_beg_len"),cbe=e._mrb_intern=E("mrb_intern"),dbe=e._mrb_intern_static=E("mrb_intern_static"),hbe=e._mrb_intern_cstr=E("mrb_intern_cstr"),ube=e._mrb_intern_str=E("mrb_intern_str"),mbe=e._mrb_intern_check=E("mrb_intern_check"),fbe=e._mrb_intern_check_cstr=E("mrb_intern_check_cstr"),gbe=e._mrb_intern_check_str=E("mrb_intern_check_str"),pbe=e._mrb_check_intern=E("mrb_check_intern"),_be=e._mrb_check_intern_cstr=E("mrb_check_intern_cstr"),bbe=e._mrb_check_intern_str=E("mrb_check_intern_str"),vbe=e._mrb_sym_name=E("mrb_sym_name"),wbe=e._mrb_sym_name_len=E("mrb_sym_name_len"),ybe=e._mrb_sym_dump=E("mrb_sym_dump"),Cbe=e._mrb_sym_str=E("mrb_sym_str"),Sbe=e._mrb_free_symtbl=E("mrb_free_symtbl"),xbe=e._mrb_default_allocf=E("mrb_default_allocf"),Ebe=e._mrb_open_allocf=E("mrb_open_allocf"),Dbe=e._mrb_init_symtbl=E("mrb_init_symtbl"),Lbe=e._mrb_exc_new=E("mrb_exc_new"),kbe=e._mrb_exc_new_str=E("mrb_exc_new_str"),Ibe=e._mrb_format=E("mrb_format"),Obe=e._mrb_vformat=E("mrb_vformat"),Tbe=e._mrb_to_str=E("mrb_to_str"),Nbe=e._mrb_attr_get=E("mrb_attr_get"),Rbe=e._mrb_obj_classname=E("mrb_obj_classname"),Pbe=e._mrb_str_new_cstr=E("mrb_str_new_cstr"),Abe=e._mrb_obj_class=E("mrb_obj_class"),jbe=e._mrb_obj_as_string=E("mrb_obj_as_string"),Mbe=e._mrb_obj_is_kind_of=E("mrb_obj_is_kind_of"),Fbe=e._mrb_exc_get_id=E("mrb_exc_get_id"),Bbe=e._mrb_raise=E("mrb_raise"),Wbe=e._mrb_p=E("mrb_p"),Ube=e._mrb_str_new_capa=E("mrb_str_new_capa"),Vbe=e._mrb_raisef=E("mrb_raisef"),zbe=e._mrb_inspect=E("mrb_inspect"),Hbe=e._mrb_str_cat=E("mrb_str_cat"),$be=e._mrb_name_error=E("mrb_name_error"),Kbe=e._mrb_warn=E("mrb_warn"),qbe=e._mrb_bug=E("mrb_bug"),Ybe=e._mrb_make_exception=E("mrb_make_exception"),Zbe=e._mrb_argnum_error=E("mrb_argnum_error"),Gbe=e._mrb_respond_to=E("mrb_respond_to"),Xbe=e._mrb_iv_set=E("mrb_iv_set"),Qbe=e._mrb_sys_fail=E("mrb_sys_fail"),Jbe=e.___errno_location=E("__errno_location"),eve=e._mrb_funcall=E("mrb_funcall"),tve=e._mrb_no_method_error=E("mrb_no_method_error"),ive=e._mrb_frozen_error=E("mrb_frozen_error"),C4=e._malloc=E("malloc"),nve=e._saveSetjmp=E("saveSetjmp"),S4=e._free=E("free"),rve=e._mrb_free=E("mrb_free"),ove=e._mrb_exc_backtrace=E("mrb_exc_backtrace"),sve=e._mrb_str_new_static=E("mrb_str_new_static"),ave=e._mrb_obj_equal=E("mrb_obj_equal"),lve=e._mrb_obj_clone=E("mrb_obj_clone"),cve=e._mrb_funcall_id=E("mrb_funcall_id"),dve=e._mrb_get_arg1=E("mrb_get_arg1"),hve=e._mrb_mt_foreach=E("mrb_mt_foreach"),uve=e._mrb_class_path=E("mrb_class_path"),mve=e._mrb_define_module_id=E("mrb_define_module_id"),fve=e._mrb_gc_mark=E("mrb_gc_mark"),gve=e._mrb_obj_iv_defined=E("mrb_obj_iv_defined"),pve=e._mrb_obj_iv_get=E("mrb_obj_iv_get"),_ve=e._mrb_str_dup=E("mrb_str_dup"),bve=e._mrb_const_get=E("mrb_const_get"),vve=e._mrb_check_type=E("mrb_check_type"),wve=e._mrb_obj_alloc=E("mrb_obj_alloc"),yve=e._mrb_malloc=E("mrb_malloc"),Cve=e._mrb_obj_iv_set=E("mrb_obj_iv_set"),Sve=e._mrb_define_module_under_id=E("mrb_define_module_under_id"),xve=e._mrb_define_class_id=E("mrb_define_class_id"),Eve=e._mrb_class_new=E("mrb_class_new"),Dve=e._mrb_class_real=E("mrb_class_real"),Lve=e._mrb_func_basic_p=E("mrb_func_basic_p"),kve=e._mrb_const_defined=E("mrb_const_defined"),Ive=e._mrb_class_defined_id=E("mrb_class_defined_id"),Ove=e._mrb_class_defined_under_id=E("mrb_class_defined_under_id"),Tve=e._mrb_class_get_under_id=E("mrb_class_get_under_id"),Nve=e._mrb_class_get_id=E("mrb_class_get_id"),Rve=e._mrb_module_get_under_id=E("mrb_module_get_under_id"),Pve=e._mrb_module_get_id=E("mrb_module_get_id"),Ave=e._mrb_define_class_under_id=E("mrb_define_class_under_id"),jve=e._mrb_define_method_raw=E("mrb_define_method_raw"),Mve=e._mrb_field_write_barrier=E("mrb_field_write_barrier"),Fve=e._mrb_define_method_id=E("mrb_define_method_id"),Bve=e._mrb_notimplement=E("mrb_notimplement"),Wve=e._mrb_notimplement_m=E("mrb_notimplement_m"),Uve=e._mrb_get_argc=E("mrb_get_argc"),Vve=e._mrb_get_argv=E("mrb_get_argv"),zve=e._mrb_string_cstr=E("mrb_string_cstr"),Hve=e._mrb_to_int=E("mrb_to_int"),$ve=e._mrb_obj_to_sym=E("mrb_obj_to_sym"),Kve=e._mrb_data_get_ptr=E("mrb_data_get_ptr"),qve=e._mrb_hash_dup=E("mrb_hash_dup"),Yve=e._mrb_hash_new=E("mrb_hash_new"),Zve=e._mrb_hash_key_p=E("mrb_hash_key_p"),Gve=e._mrb_hash_delete_key=E("mrb_hash_delete_key"),Xve=e._mrb_hash_empty_p=E("mrb_hash_empty_p"),Qve=e._mrb_include_module=E("mrb_include_module"),Jve=e._mrb_prepend_module=E("mrb_prepend_module"),ewe=e._mrb_singleton_class_ptr=E("mrb_singleton_class_ptr"),twe=e._mrb_singleton_class=E("mrb_singleton_class"),iwe=e._mrb_define_singleton_method_id=E("mrb_define_singleton_method_id"),nwe=e._mrb_define_class_method_id=E("mrb_define_class_method_id"),rwe=e._mrb_define_module_function_id=E("mrb_define_module_function_id"),owe=e._mrb_method_search_vm=E("mrb_method_search_vm"),swe=e._mrb_method_search=E("mrb_method_search"),awe=e._mrb_obj_respond_to=E("mrb_obj_respond_to"),lwe=e._mrb_class_name=E("mrb_class_name"),cwe=e._mrb_ptr_to_str=E("mrb_ptr_to_str"),dwe=e._mrb_str_cat_str=E("mrb_str_cat_str"),hwe=e._mrb_module_new=E("mrb_module_new"),uwe=e._mrb_alias_method=E("mrb_alias_method"),mwe=e._mrb_define_alias=E("mrb_define_alias"),fwe=e._mrb_define_alias_id=E("mrb_define_alias_id"),gwe=e._mrb_iv_get=E("mrb_iv_get"),pwe=e._mrb_any_to_s=E("mrb_any_to_s"),_we=e._mrb_undef_method_id=E("mrb_undef_method_id"),bwe=e._mrb_undef_method=E("mrb_undef_method"),vwe=e._mrb_undef_class_method_id=E("mrb_undef_class_method_id"),wwe=e._mrb_undef_class_method=E("mrb_undef_class_method"),ywe=e._mrb_remove_method=E("mrb_remove_method"),Cwe=e._mrb_iv_copy=E("mrb_iv_copy"),Swe=e._mrb_iv_remove=E("mrb_iv_remove"),xwe=e._mrb_obj_dup=E("mrb_obj_dup"),Ewe=e._mrb_define_const_id=E("mrb_define_const_id"),Dwe=e._mrb_yield_with_class=E("mrb_yield_with_class"),Lwe=e._mrb_ensure_string_type=E("mrb_ensure_string_type"),kwe=e._mrb_str_index=E("mrb_str_index"),Iwe=e._mrb_const_set=E("mrb_const_set"),Owe=e._mrb_calloc=E("mrb_calloc"),Twe=e._mrb_alloca=E("mrb_alloca"),Nwe=e._mrb_iv_name_sym_check=E("mrb_iv_name_sym_check"),Rwe=e._mrb_proc_new_cfunc_with_env=E("mrb_proc_new_cfunc_with_env"),Pwe=e._mrb_proc_cfunc_env_get=E("mrb_proc_cfunc_env_get"),Awe=e._mrb_realloc=E("mrb_realloc"),jwe=e._mrb_str_strlen=E("mrb_str_strlen"),Mwe=e._mrb_str_modify_keep_ascii=E("mrb_str_modify_keep_ascii"),Fwe=e._mrb_str_modify=E("mrb_str_modify"),Bwe=e._mrb_str_resize=E("mrb_str_resize"),Wwe=e._mrb_str_to_cstr=E("mrb_str_to_cstr"),Uwe=e._mrb_str_concat=E("mrb_str_concat"),Vwe=e._mrb_fixnum_to_str=E("mrb_fixnum_to_str"),zwe=e._mrb_type_convert=E("mrb_type_convert"),Hwe=e._mrb_str_plus=E("mrb_str_plus"),$we=e._mrb_str_cmp=E("mrb_str_cmp"),Kwe=e._mrb_str_equal=E("mrb_str_equal"),qwe=e._mrb_str_substr=E("mrb_str_substr"),Ywe=e._mrb_str_intern=E("mrb_str_intern"),Zwe=e._mrb_cstr_to_inum=E("mrb_cstr_to_inum"),Gwe=e._mrb_string_value_cstr=E("mrb_string_value_cstr"),Xwe=e._mrb_str_to_inum=E("mrb_str_to_inum"),Qwe=e._mrb_float_read=E("mrb_float_read"),Jwe=e._mrb_cstr_to_dbl=E("mrb_cstr_to_dbl"),eye=e._mrb_str_to_dbl=E("mrb_str_to_dbl"),tye=e._mrb_str_cat_cstr=E("mrb_str_cat_cstr"),iye=e._mrb_str_append=E("mrb_str_append"),nye=e._mrb_sys_range_excl=E("mrb_sys_range_excl"),rye=e._mrb_range_ptr=E("mrb_range_ptr"),oye=e._mrb_sys_obj_ptr=E("mrb_sys_obj_ptr"),sye=e._mrb_sys_proc_ptr=E("mrb_sys_proc_ptr"),aye=e._mrb_sys_class_to_rclass=E("mrb_sys_class_to_rclass"),lye=e._mrb_sys_data_value=E("mrb_sys_data_value"),cye=e._mrb_sys_proc_value=E("mrb_sys_proc_value"),dye=e._mrb_sys_raise_current_exception=E("mrb_sys_raise_current_exception"),hye=e._mrb_ary_entry=E("mrb_ary_entry"),uye=e._mrb_ary_modify=E("mrb_ary_modify"),mye=e._mrb_object_dead_p=E("mrb_object_dead_p"),fye=e._mrb_stack_extend=E("mrb_stack_extend"),gye=e._mrb_realloc_simple=E("mrb_realloc_simple"),pye=e._mrb_vm_run=E("mrb_vm_run"),_ye=e._mrb_yield_argv=E("mrb_yield_argv"),bye=e._mrb_vm_exec=E("mrb_vm_exec"),vye=e._mrb_gv_get=E("mrb_gv_get"),wye=e._mrb_obj_eq=E("mrb_obj_eq"),yye=e._mrb_ensure_hash_type=E("mrb_ensure_hash_type"),Cye=e._mrb_range_new=E("mrb_range_new"),Sye=e._mrb_hash_merge=E("mrb_hash_merge"),xye=e._mrb_top_run=E("mrb_top_run"),Eye=e._mrb_fiber_resume=E("mrb_fiber_resume"),Dye=e._mrb_fiber_alive_p=E("mrb_fiber_alive_p"),Lye=e._mrb_fiber_yield=E("mrb_fiber_yield"),kye=e._mrb_proc_new_cfunc=E("mrb_proc_new_cfunc"),Iye=e._mrb_closure_new_cfunc=E("mrb_closure_new_cfunc"),Oye=e._mrb_generate_code=E("mrb_generate_code"),Tye=e._mrb_num_mul=E("mrb_num_mul"),Nye=e._mrb_flo_to_fixnum=E("mrb_flo_to_fixnum"),Rye=e._mrb_num_plus=E("mrb_num_plus"),Pye=e._mrb_num_minus=E("mrb_num_minus"),Aye=e._mrb_cmp=E("mrb_cmp"),jye=e._mrb_Float=E("mrb_Float"),Mye=e._mrb_float_to_str=E("mrb_float_to_str"),Fye=e._mrb_debug_get_filename=E("mrb_debug_get_filename"),Bye=e._mrb_debug_get_line=E("mrb_debug_get_line"),Wye=e._mrb_debug_info_alloc=E("mrb_debug_info_alloc"),Uye=e._mrb_debug_info_append_file=E("mrb_debug_info_append_file"),Vye=e._mrb_debug_info_free=E("mrb_debug_info_free"),zye=e._mrb_print_error=E("mrb_print_error"),Hye=e._mrb_print_backtrace=E("mrb_print_backtrace"),$ye=e._mrb_show_version=E("mrb_show_version"),Kye=e._mrb_show_copyright=E("mrb_show_copyright"),qye=e._mrb_float_to_cstr=E("mrb_float_to_cstr"),Yye=e._mrb_obj_inspect=E("mrb_obj_inspect"),Zye=e._mrb_obj_id=E("mrb_obj_id"),Gye=e._mrb_obj_freeze=E("mrb_obj_freeze"),Xye=e._mrb_obj_is_instance_of=E("mrb_obj_is_instance_of"),Qye=e._mrb_f_raise=E("mrb_f_raise"),Jye=e._mrb_equal=E("mrb_equal"),eCe=e._mrb_ensure_array_type=E("mrb_ensure_array_type"),tCe=e._mrb_parser_parse=E("mrb_parser_parse"),iCe=e._mrb_parser_set_filename=E("mrb_parser_set_filename"),nCe=e._mrb_parser_new=E("mrb_parser_new"),rCe=e._mrb_parser_free=E("mrb_parser_free"),oCe=e._mrb_pool_alloc=E("mrb_pool_alloc"),sCe=e._mrb_pool_open=E("mrb_pool_open"),aCe=e._mrb_pool_close=E("mrb_pool_close"),lCe=e._mrbc_partial_hook=E("mrbc_partial_hook"),cCe=e._mrbc_cleanup_local_variables=E("mrbc_cleanup_local_variables"),dCe=e._mrb_parser_get_filename=E("mrb_parser_get_filename"),hCe=e._mrb_parse_nstring=E("mrb_parse_nstring"),uCe=e._mrb_parse_string=E("mrb_parse_string"),mCe=e._mrb_load_exec=E("mrb_load_exec"),fCe=e._mrb_add_irep=E("mrb_add_irep"),gCe=e._mrb_load_nstring=E("mrb_load_nstring"),pCe=e._mrb_load_string_cxt=E("mrb_load_string_cxt"),_Ce=e._mrb_load_string=E("mrb_load_string"),bCe=e._mrb_pool_realloc=E("mrb_pool_realloc"),vCe=e._mrb_iv_defined=E("mrb_iv_defined"),wCe=e._mrb_get_backtrace=E("mrb_get_backtrace"),yCe=e._mrb_open_core=E("mrb_open_core"),CCe=e._mrb_open=E("mrb_open"),SCe=e._mrb_free_context=E("mrb_free_context"),xCe=e._mrb_state_atexit=E("mrb_state_atexit"),ECe=e._mrb_malloc_simple=E("mrb_malloc_simple"),DCe=e._mrb_pool_can_realloc=E("mrb_pool_can_realloc"),LCe=e._mrb_type_convert_check=E("mrb_type_convert_check"),kCe=e._mrb_convert_to_integer=E("mrb_convert_to_integer"),ICe=e._mrb_check_string_type=E("mrb_check_string_type"),OCe=e._mrb_Integer=E("mrb_Integer"),TCe=e._mrb_string_type=E("mrb_string_type"),NCe=e._mrb_check_array_type=E("mrb_check_array_type"),RCe=e._mrb_check_hash_type=E("mrb_check_hash_type"),PCe=e._mrb_eql=E("mrb_eql"),ACe=e._mrb_gc_register=E("mrb_gc_register"),jCe=e._mrb_gc_unregister=E("mrb_gc_unregister"),MCe=e._mrb_garbage_collect=E("mrb_garbage_collect"),FCe=e._mrb_data_check_type=E("mrb_data_check_type"),BCe=e._mrb_int_id=E("mrb_int_id"),WCe=e._mrb_float_id=E("mrb_float_id"),UCe=e._mrb_ensure=E("mrb_ensure"),VCe=e._mrb_rescue=E("mrb_rescue"),zCe=e._mrb_rescue_exceptions=E("mrb_rescue_exceptions"),HCe=e._mrb_iv_foreach=E("mrb_iv_foreach"),$Ce=e._mrb_iv_name_sym_p=E("mrb_iv_name_sym_p"),KCe=e._mrb_cv_get=E("mrb_cv_get"),qCe=e._mrb_mod_cv_set=E("mrb_mod_cv_set"),YCe=e._mrb_cv_set=E("mrb_cv_set"),ZCe=e._mrb_cv_defined=E("mrb_cv_defined"),GCe=e._mrb_const_remove=E("mrb_const_remove"),XCe=e._mrb_gv_remove=E("mrb_gv_remove"),QCe=e._mrb_hash_foreach=E("mrb_hash_foreach"),JCe=e._mrb_hash_fetch=E("mrb_hash_fetch"),eSe=e._mrb_hash_clear=E("mrb_hash_clear"),tSe=e._mrb_hash_size=E("mrb_hash_size"),iSe=e._mrb_hash_values=E("mrb_hash_values"),nSe=e._sysconf=E("sysconf"),rSe=e._rust_eh_personality=E("rust_eh_personality"),oSe=e._emscripten_main_thread_process_queued_calls=E("emscripten_main_thread_process_queued_calls"),II=e._emscripten_stack_get_end=function(){return(II=e._emscripten_stack_get_end=e.asm.emscripten_stack_get_end).apply(null,arguments)},sSe=e._fflush=E("fflush"),aSe=e._ntohs=E("ntohs"),lSe=e._htons=E("htons"),cSe=e._htonl=E("htonl"),Kt=e.stackSave=E("stackSave"),qt=e.stackRestore=E("stackRestore"),p0=e.stackAlloc=E("stackAlloc"),x4=e._emscripten_stack_init=function(){return(x4=e._emscripten_stack_init=e.asm.emscripten_stack_init).apply(null,arguments)},PQ=e._emscripten_stack_get_free=function(){return(PQ=e._emscripten_stack_get_free=e.asm.emscripten_stack_get_free).apply(null,arguments)},Yt=e._setThrew=E("setThrew"),E4=e.___cxa_can_catch=E("__cxa_can_catch"),AQ=e.___cxa_is_pointer_type=E("__cxa_is_pointer_type"),jQ=e.dynCall_ji=E("dynCall_ji"),MQ=e.dynCall_viiiji=E("dynCall_viiiji"),FQ=e.dynCall_jii=E("dynCall_jii"),BQ=e.dynCall_viij=E("dynCall_viij"),WQ=e.dynCall_ij=E("dynCall_ij"),UQ=e.dynCall_jiii=E("dynCall_jiii"),dSe=e.dynCall_viiiijj=E("dynCall_viiiijj"),VQ=e.dynCall_viiiiijji=E("dynCall_viiiiijji"),zQ=e.dynCall_vij=E("dynCall_vij"),HQ=e.dynCall_viiijj=E("dynCall_viiijj"),$Q=e.dynCall_vijj=E("dynCall_vijj"),KQ=e.dynCall_viiij=E("dynCall_viiij"),qQ=e.dynCall_viiji=E("dynCall_viiji"),YQ=e.dynCall_viiiij=E("dynCall_viiiij"),ZQ=e.dynCall_viiiijii=E("dynCall_viiiijii"),GQ=e.dynCall_jijj=E("dynCall_jijj"),XQ=e.dynCall_jiiii=E("dynCall_jiiii"),QQ=e.dynCall_j=E("dynCall_j");function JQ(b,y){var x=Kt();try{Ht.get(b)(y)}catch(k){if(qt(x),k!==k+0&&k!=="longjmp")throw k;Yt(1,0)}}function eJ(b,y,x,k){var P=Kt();try{Ht.get(b)(y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function tJ(b,y,x,k,P){var B=Kt();try{Ht.get(b)(y,x,k,P)}catch($){if(qt(B),$!==$+0&&$!=="longjmp")throw $;Yt(1,0)}}function iJ(b){var y=Kt();try{Ht.get(b)()}catch(x){if(qt(y),x!==x+0&&x!=="longjmp")throw x;Yt(1,0)}}function nJ(b,y,x){var k=Kt();try{Ht.get(b)(y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function rJ(b,y,x){var k=Kt();try{return Ht.get(b)(y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function oJ(b,y,x,k){var P=Kt();try{return Ht.get(b)(y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function sJ(b,y,x,k,P,B){var $=Kt();try{Ht.get(b)(y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function aJ(b,y,x,k,P,B,$,Z,he){var Se=Kt();try{Ht.get(b)(y,x,k,P,B,$,Z,he)}catch(Oe){if(qt(Se),Oe!==Oe+0&&Oe!=="longjmp")throw Oe;Yt(1,0)}}function lJ(b,y){var x=Kt();try{return Ht.get(b)(y)}catch(k){if(qt(x),k!==k+0&&k!=="longjmp")throw k;Yt(1,0)}}function cJ(b){var y=Kt();try{return Ht.get(b)()}catch(x){if(qt(y),x!==x+0&&x!=="longjmp")throw x;Yt(1,0)}}function dJ(b,y,x,k,P){var B=Kt();try{return Ht.get(b)(y,x,k,P)}catch($){if(qt(B),$!==$+0&&$!=="longjmp")throw $;Yt(1,0)}}function hJ(b,y,x,k,P,B,$){var Z=Kt();try{Ht.get(b)(y,x,k,P,B,$)}catch(he){if(qt(Z),he!==he+0&&he!=="longjmp")throw he;Yt(1,0)}}function uJ(b,y,x,k){var P=Kt();try{Ht.get(b)(y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function mJ(b,y){var x=Kt();try{return Ht.get(b)(y)}catch(k){if(qt(x),k!==k+0&&k!=="longjmp")throw k;Yt(1,0)}}function fJ(b,y,x){var k=Kt();try{Ht.get(b)(y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function gJ(b,y,x){var k=Kt();try{return Ht.get(b)(y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function pJ(b,y,x,k,P,B,$,Z){var he=Kt();try{Ht.get(b)(y,x,k,P,B,$,Z)}catch(Se){if(qt(he),Se!==Se+0&&Se!=="longjmp")throw Se;Yt(1,0)}}function _J(b,y,x,k){var P=Kt();try{return Ht.get(b)(y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function bJ(b,y,x,k,P,B,$,Z,he,Se,Oe,et,Ae){var at=Kt();try{return Ht.get(b)(y,x,k,P,B,$,Z,he,Se,Oe,et,Ae)}catch(Ze){if(qt(at),Ze!==Ze+0&&Ze!=="longjmp")throw Ze;Yt(1,0)}}function vJ(b,y,x,k,P,B){var $=Kt();try{return Ht.get(b)(y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function wJ(b,y,x,k,P,B,$){var Z=Kt();try{MQ(b,y,x,k,P,B,$)}catch(he){if(qt(Z),he!==he+0&&he!=="longjmp")throw he;Yt(1,0)}}function yJ(b,y,x){var k=Kt();try{return FQ(b,y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function CJ(b,y,x,k,P){var B=Kt();try{BQ(b,y,x,k,P)}catch($){if(qt(B),$!==$+0&&$!=="longjmp")throw $;Yt(1,0)}}function SJ(b,y,x){var k=Kt();try{return WQ(b,y,x)}catch(P){if(qt(k),P!==P+0&&P!=="longjmp")throw P;Yt(1,0)}}function xJ(b,y,x,k){var P=Kt();try{return UQ(b,y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function EJ(b,y,x,k){var P=Kt();try{zQ(b,y,x,k)}catch(B){if(qt(P),B!==B+0&&B!=="longjmp")throw B;Yt(1,0)}}function DJ(b,y,x,k,P,B,$,Z){var he=Kt();try{HQ(b,y,x,k,P,B,$,Z)}catch(Se){if(qt(he),Se!==Se+0&&Se!=="longjmp")throw Se;Yt(1,0)}}function LJ(b,y){var x=Kt();try{return jQ(b,y)}catch(k){if(qt(x),k!==k+0&&k!=="longjmp")throw k;Yt(1,0)}}function kJ(b,y,x,k,P,B){var $=Kt();try{$Q(b,y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function IJ(b,y,x,k,P,B){var $=Kt();try{KQ(b,y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function OJ(b,y,x,k,P,B,$,Z,he,Se,Oe){var et=Kt();try{VQ(b,y,x,k,P,B,$,Z,he,Se,Oe)}catch(Ae){if(qt(et),Ae!==Ae+0&&Ae!=="longjmp")throw Ae;Yt(1,0)}}function TJ(b,y,x,k,P,B){var $=Kt();try{qQ(b,y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function NJ(b,y,x,k,P,B,$){var Z=Kt();try{YQ(b,y,x,k,P,B,$)}catch(he){if(qt(Z),he!==he+0&&he!=="longjmp")throw he;Yt(1,0)}}function RJ(b,y,x,k,P,B,$,Z,he){var Se=Kt();try{ZQ(b,y,x,k,P,B,$,Z,he)}catch(Oe){if(qt(Se),Oe!==Oe+0&&Oe!=="longjmp")throw Oe;Yt(1,0)}}function PJ(b,y,x,k,P,B){var $=Kt();try{return GQ(b,y,x,k,P,B)}catch(Z){if(qt($),Z!==Z+0&&Z!=="longjmp")throw Z;Yt(1,0)}}function AJ(b,y,x,k,P){var B=Kt();try{return XQ(b,y,x,k,P)}catch($){if(qt(B),$!==$+0&&$!=="longjmp")throw $;Yt(1,0)}}function jJ(b){var y=Kt();try{return QQ(b)}catch(x){if(qt(y),x!==x+0&&x!=="longjmp")throw x;Yt(1,0)}}Object.getOwnPropertyDescriptor(e,"intArrayFromString")||(e.intArrayFromString=function(){f("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"intArrayToString")||(e.intArrayToString=function(){f("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ccall")||(e.ccall=function(){f("'ccall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"cwrap")||(e.cwrap=function(){f("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setValue")||(e.setValue=function(){f("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getValue")||(e.getValue=function(){f("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocate")||(e.allocate=function(){f("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ArrayToString")||(e.UTF8ArrayToString=function(){f("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF8ToString")||(e.UTF8ToString=function(){f("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8Array")||(e.stringToUTF8Array=function(){f("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF8")||(e.stringToUTF8=function(){f("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF8")||(e.lengthBytesUTF8=function(){f("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){f("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreRun")||(e.addOnPreRun=function(){f("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnInit")||(e.addOnInit=function(){f("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPreMain")||(e.addOnPreMain=function(){f("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnExit")||(e.addOnExit=function(){f("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addOnPostRun")||(e.addOnPostRun=function(){f("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeStringToMemory")||(e.writeStringToMemory=function(){f("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeArrayToMemory")||(e.writeArrayToMemory=function(){f("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeAsciiToMemory")||(e.writeAsciiToMemory=function(){f("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addRunDependency")||(e.addRunDependency=function(){f("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"removeRunDependency")||(e.removeRunDependency=function(){f("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createFolder")||(e.FS_createFolder=function(){f("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createPath")||(e.FS_createPath=function(){f("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createDataFile")||(e.FS_createDataFile=function(){f("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createPreloadedFile")||(e.FS_createPreloadedFile=function(){f("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLazyFile")||(e.FS_createLazyFile=function(){f("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_createLink")||(e.FS_createLink=function(){f("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS_createDevice")||(e.FS_createDevice=function(){f("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"FS_unlink")||(e.FS_unlink=function(){f("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(e,"getLEB")||(e.getLEB=function(){f("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFunctionTables")||(e.getFunctionTables=function(){f("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignFunctionTables")||(e.alignFunctionTables=function(){f("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFunctions")||(e.registerFunctions=function(){f("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"addFunction")||(e.addFunction=function(){f("'addFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"removeFunction")||(e.removeFunction=function(){f("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){f("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"prettyPrint")||(e.prettyPrint=function(){f("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){f("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCompilerSetting")||(e.getCompilerSetting=function(){f("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"print")||(e.print=function(){f("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"printErr")||(e.printErr=function(){f("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getTempRet0")||(e.getTempRet0=function(){f("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setTempRet0")||(e.setTempRet0=function(){f("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callMain")||(e.callMain=function(){f("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"abort")||(e.abort=function(){f("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"keepRuntimeAlive")||(e.keepRuntimeAlive=function(){f("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"zeroMemory")||(e.zeroMemory=function(){f("'zeroMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToNewUTF8")||(e.stringToNewUTF8=function(){f("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setFileTime")||(e.setFileTime=function(){f("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscripten_realloc_buffer")||(e.emscripten_realloc_buffer=function(){f("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ENV")||(e.ENV=function(){f("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_CODES")||(e.ERRNO_CODES=function(){f("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ERRNO_MESSAGES")||(e.ERRNO_MESSAGES=function(){f("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setErrNo")||(e.setErrNo=function(){f("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton4")||(e.inetPton4=function(){f("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop4")||(e.inetNtop4=function(){f("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetPton6")||(e.inetPton6=function(){f("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"inetNtop6")||(e.inetNtop6=function(){f("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readSockaddr")||(e.readSockaddr=function(){f("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeSockaddr")||(e.writeSockaddr=function(){f("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"DNS")||(e.DNS=function(){f("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getHostByName")||(e.getHostByName=function(){f("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GAI_ERRNO_MESSAGES")||(e.GAI_ERRNO_MESSAGES=function(){f("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Protocols")||(e.Protocols=function(){f("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Sockets")||(e.Sockets=function(){f("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getRandomDevice")||(e.getRandomDevice=function(){f("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"traverseStack")||(e.traverseStack=function(){f("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UNWIND_CACHE")||(e.UNWIND_CACHE=function(){f("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"withBuiltinMalloc")||(e.withBuiltinMalloc=function(){f("'withBuiltinMalloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgsArray")||(e.readAsmConstArgsArray=function(){f("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readAsmConstArgs")||(e.readAsmConstArgs=function(){f("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mainThreadEM_ASM")||(e.mainThreadEM_ASM=function(){f("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_q")||(e.jstoi_q=function(){f("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jstoi_s")||(e.jstoi_s=function(){f("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getExecutableName")||(e.getExecutableName=function(){f("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"listenOnce")||(e.listenOnce=function(){f("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"autoResumeAudioContext")||(e.autoResumeAudioContext=function(){f("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCallLegacy")||(e.dynCallLegacy=function(){f("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getDynCaller")||(e.getDynCaller=function(){f("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"dynCall")||(e.dynCall=function(){f("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callRuntimeCallbacks")||(e.callRuntimeCallbacks=function(){f("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePush")||(e.runtimeKeepalivePush=function(){f("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runtimeKeepalivePop")||(e.runtimeKeepalivePop=function(){f("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"callUserCallback")||(e.callUserCallback=function(){f("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeExit")||(e.maybeExit=function(){f("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"safeSetTimeout")||(e.safeSetTimeout=function(){f("'safeSetTimeout' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asmjsMangle")||(e.asmjsMangle=function(){f("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"asyncLoad")||(e.asyncLoad=function(){f("'asyncLoad' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"alignMemory")||(e.alignMemory=function(){f("'alignMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"mmapAlloc")||(e.mmapAlloc=function(){f("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reallyNegative")||(e.reallyNegative=function(){f("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"unSign")||(e.unSign=function(){f("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"reSign")||(e.reSign=function(){f("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"formatString")||(e.formatString=function(){f("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH")||(e.PATH=function(){f("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PATH_FS")||(e.PATH_FS=function(){f("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SYSCALLS")||(e.SYSCALLS=function(){f("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMmap2")||(e.syscallMmap2=function(){f("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"syscallMunmap")||(e.syscallMunmap=function(){f("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketFromFD")||(e.getSocketFromFD=function(){f("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getSocketAddress")||(e.getSocketAddress=function(){f("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"JSEvents")||(e.JSEvents=function(){f("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerKeyEventCallback")||(e.registerKeyEventCallback=function(){f("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"specialHTMLTargets")||(e.specialHTMLTargets=function(){f("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"maybeCStringToJsString")||(e.maybeCStringToJsString=function(){f("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findEventTarget")||(e.findEventTarget=function(){f("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"findCanvasEventTarget")||(e.findCanvasEventTarget=function(){f("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getBoundingClientRect")||(e.getBoundingClientRect=function(){f("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillMouseEventData")||(e.fillMouseEventData=function(){f("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerMouseEventCallback")||(e.registerMouseEventCallback=function(){f("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerWheelEventCallback")||(e.registerWheelEventCallback=function(){f("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerUiEventCallback")||(e.registerUiEventCallback=function(){f("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFocusEventCallback")||(e.registerFocusEventCallback=function(){f("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceOrientationEventData")||(e.fillDeviceOrientationEventData=function(){f("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceOrientationEventCallback")||(e.registerDeviceOrientationEventCallback=function(){f("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillDeviceMotionEventData")||(e.fillDeviceMotionEventData=function(){f("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerDeviceMotionEventCallback")||(e.registerDeviceMotionEventCallback=function(){f("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"screenOrientation")||(e.screenOrientation=function(){f("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillOrientationChangeEventData")||(e.fillOrientationChangeEventData=function(){f("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerOrientationChangeEventCallback")||(e.registerOrientationChangeEventCallback=function(){f("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillFullscreenChangeEventData")||(e.fillFullscreenChangeEventData=function(){f("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerFullscreenChangeEventCallback")||(e.registerFullscreenChangeEventCallback=function(){f("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerRestoreOldStyle")||(e.registerRestoreOldStyle=function(){f("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"hideEverythingExceptGivenElement")||(e.hideEverythingExceptGivenElement=function(){f("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreHiddenElements")||(e.restoreHiddenElements=function(){f("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setLetterbox")||(e.setLetterbox=function(){f("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"currentFullscreenStrategy")||(e.currentFullscreenStrategy=function(){f("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"restoreOldWindowedStyle")||(e.restoreOldWindowedStyle=function(){f("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"softFullscreenResizeWebGLRenderTarget")||(e.softFullscreenResizeWebGLRenderTarget=function(){f("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"doRequestFullscreen")||(e.doRequestFullscreen=function(){f("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillPointerlockChangeEventData")||(e.fillPointerlockChangeEventData=function(){f("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockChangeEventCallback")||(e.registerPointerlockChangeEventCallback=function(){f("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerPointerlockErrorEventCallback")||(e.registerPointerlockErrorEventCallback=function(){f("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"requestPointerLock")||(e.requestPointerLock=function(){f("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillVisibilityChangeEventData")||(e.fillVisibilityChangeEventData=function(){f("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerVisibilityChangeEventCallback")||(e.registerVisibilityChangeEventCallback=function(){f("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerTouchEventCallback")||(e.registerTouchEventCallback=function(){f("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillGamepadEventData")||(e.fillGamepadEventData=function(){f("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerGamepadEventCallback")||(e.registerGamepadEventCallback=function(){f("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBeforeUnloadEventCallback")||(e.registerBeforeUnloadEventCallback=function(){f("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"fillBatteryEventData")||(e.fillBatteryEventData=function(){f("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"battery")||(e.battery=function(){f("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"registerBatteryEventCallback")||(e.registerBatteryEventCallback=function(){f("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setCanvasElementSize")||(e.setCanvasElementSize=function(){f("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getCanvasElementSize")||(e.getCanvasElementSize=function(){f("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"polyfillSetImmediate")||(e.polyfillSetImmediate=function(){f("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangle")||(e.demangle=function(){f("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"demangleAll")||(e.demangleAll=function(){f("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"jsStackTrace")||(e.jsStackTrace=function(){f("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackTrace")||(e.stackTrace=function(){f("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getEnvStrings")||(e.getEnvStrings=function(){f("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"checkWasiClock")||(e.checkWasiClock=function(){f("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64")||(e.writeI53ToI64=function(){f("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Clamped")||(e.writeI53ToI64Clamped=function(){f("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToI64Signaling")||(e.writeI53ToI64Signaling=function(){f("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Clamped")||(e.writeI53ToU64Clamped=function(){f("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeI53ToU64Signaling")||(e.writeI53ToU64Signaling=function(){f("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromI64")||(e.readI53FromI64=function(){f("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"readI53FromU64")||(e.readI53FromU64=function(){f("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertI32PairToI53")||(e.convertI32PairToI53=function(){f("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"convertU32PairToI53")||(e.convertU32PairToI53=function(){f("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"uncaughtExceptionCount")||(e.uncaughtExceptionCount=function(){f("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionLast")||(e.exceptionLast=function(){f("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exceptionCaught")||(e.exceptionCaught=function(){f("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"ExceptionInfo")||(e.ExceptionInfo=function(){f("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"CatchInfo")||(e.CatchInfo=function(){f("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_addRef")||(e.exception_addRef=function(){f("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"exception_decRef")||(e.exception_decRef=function(){f("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"Browser")||(e.Browser=function(){f("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"funcWrappers")||(e.funcWrappers=function(){f("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"getFuncWrapper")||(e.getFuncWrapper=function(){f("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"setMainLoop")||(e.setMainLoop=function(){f("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"wget")||(e.wget=function(){f("'wget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"FS")||(e.FS=function(){f("'FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"MEMFS")||(e.MEMFS=function(){f("'MEMFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"TTY")||(e.TTY=function(){f("'TTY' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"PIPEFS")||(e.PIPEFS=function(){f("'PIPEFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SOCKFS")||(e.SOCKFS=function(){f("'SOCKFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"_setNetworkCallback")||(e._setNetworkCallback=function(){f("'_setNetworkCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"tempFixedLengthArray")||(e.tempFixedLengthArray=function(){f("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"miniTempWebGLFloatBuffers")||(e.miniTempWebGLFloatBuffers=function(){f("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapObjectForWebGLType")||(e.heapObjectForWebGLType=function(){f("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"heapAccessShiftForWebGLHeap")||(e.heapAccessShiftForWebGLHeap=function(){f("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GL")||(e.GL=function(){f("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGet")||(e.emscriptenWebGLGet=function(){f("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"computeUnpackAlignedImageSize")||(e.computeUnpackAlignedImageSize=function(){f("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetTexPixelData")||(e.emscriptenWebGLGetTexPixelData=function(){f("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetUniform")||(e.emscriptenWebGLGetUniform=function(){f("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetUniformLocation")||(e.webglGetUniformLocation=function(){f("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglPrepareUniformLocationsBeforeFirstUse")||(e.webglPrepareUniformLocationsBeforeFirstUse=function(){f("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"webglGetLeftBracePos")||(e.webglGetLeftBracePos=function(){f("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"emscriptenWebGLGetVertexAttrib")||(e.emscriptenWebGLGetVertexAttrib=function(){f("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"writeGLArray")||(e.writeGLArray=function(){f("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AL")||(e.AL=function(){f("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_unicode")||(e.SDL_unicode=function(){f("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_ttfContext")||(e.SDL_ttfContext=function(){f("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_audio")||(e.SDL_audio=function(){f("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL")||(e.SDL=function(){f("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"SDL_gfx")||(e.SDL_gfx=function(){f("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLUT")||(e.GLUT=function(){f("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"EGL")||(e.EGL=function(){f("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW_Window")||(e.GLFW_Window=function(){f("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLFW")||(e.GLFW=function(){f("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"GLEW")||(e.GLEW=function(){f("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"IDBStore")||(e.IDBStore=function(){f("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"runAndAbortIfError")||(e.runAndAbortIfError=function(){f("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"warnOnce")||(e.warnOnce=function(){f("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackSave")||(e.stackSave=function(){f("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackRestore")||(e.stackRestore=function(){f("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stackAlloc")||(e.stackAlloc=function(){f("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"AsciiToString")||(e.AsciiToString=function(){f("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToAscii")||(e.stringToAscii=function(){f("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF16ToString")||(e.UTF16ToString=function(){f("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF16")||(e.stringToUTF16=function(){f("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF16")||(e.lengthBytesUTF16=function(){f("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"UTF32ToString")||(e.UTF32ToString=function(){f("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"stringToUTF32")||(e.stringToUTF32=function(){f("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"lengthBytesUTF32")||(e.lengthBytesUTF32=function(){f("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8")||(e.allocateUTF8=function(){f("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(e,"allocateUTF8OnStack")||(e.allocateUTF8OnStack=function(){f("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),e.writeStackCookie=Lh,e.checkStackCookie=Jo,Object.getOwnPropertyDescriptor(e,"ALLOC_NORMAL")||Object.defineProperty(e,"ALLOC_NORMAL",{configurable:!0,get:function(){f("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(e,"ALLOC_STACK")||Object.defineProperty(e,"ALLOC_STACK",{configurable:!0,get:function(){f("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}});var _0;function b0(b){this.name="ExitStatus",this.message="Program terminated with exit("+b+")",this.status=b}var MJ=!1;vt=function b(){_0||OI(),_0||(vt=b)};function FJ(b){ue(Ds==0,'cannot call main when async dependencies remain! (listen on Module["onRuntimeInitialized"])'),ue(kh.length==0,"cannot call main when preRun functions remain to be called");var y=e._main;b=b||[];var x=b.length+1,k=p0((x+1)*4);Qe[k>>2]=ro(a);for(var P=1;P<x;P++)Qe[(k>>2)+P]=ro(b[P-1]);Qe[(k>>2)+x]=0;try{var B=y(x,k);D4(B,!0)}catch(Z){if(Z instanceof b0||Z=="unwind")return;var $=Z;Z&&typeof Z=="object"&&Z.stack&&($=[Z,Z.stack]),D("exception thrown: "+$),l(1,Z)}finally{MJ=!0}}function BJ(){x4(),Lh()}function OI(b){if(b=b||s,Ds>0||(BJ(),Th(),Ds>0))return;function y(){_0||(_0=!0,e.calledRun=!0,!Ne&&(hm(),Qg(),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),L4&&FJ(b),Ml()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),y()},1)):y(),Jo()}e.run=OI;function WJ(){var b=S,y=D,x=!1;S=D=function(P){x=!0};try{var k=e._fflush;k&&k(0),["stdout","stderr"].forEach(function(P){var B=T.analyzePath("/dev/"+P);if(!!B){var $=B.object,Z=$.rdev,he=td.ttys[Z];he&&he.output&&he.output.length&&(x=!0)}})}catch(P){}S=b,D=y,x&&I("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc.")}function D4(b,y){if(Fe=b,WJ(),$a()){if(!y){var x="program exited (with status: "+b+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";i(x),D(x)}}else Nh();UJ(b)}function UJ(b){Fe=b,$a()||(e.onExit&&e.onExit(b),Ne=!0),l(b,new b0(b))}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();var L4=!0;return e.noInitialRun&&(L4=!1),OI(),e.ready}}();typeof CI=="object"&&typeof g4=="object"?g4.exports=f4:typeof define=="function"&&define.amd?define([],function(){return f4}):typeof CI=="object"&&(CI.Module=f4)});var T0={};O4(T0,{afterMain:()=>j4,afterRead:()=>R4,afterWrite:()=>B4,applyStyles:()=>rp,arrow:()=>C0,auto:()=>Cv,basePlacements:()=>nd,beforeMain:()=>P4,beforeRead:()=>T4,beforeWrite:()=>M4,bottom:()=>Yn,clippingParents:()=>NI,computeStyles:()=>op,createPopper:()=>O0,createPopperBase:()=>q4,createPopperLite:()=>Y4,detectOverflow:()=>Oo,end:()=>Ph,eventListeners:()=>sp,flip:()=>D0,hide:()=>L0,left:()=>Mn,main:()=>A4,modifierPhases:()=>PI,offset:()=>k0,placements:()=>xv,popper:()=>mm,popperGenerator:()=>wm,popperOffsets:()=>cp,preventOverflow:()=>I0,read:()=>N4,reference:()=>RI,right:()=>jn,start:()=>Bl,top:()=>In,variationPlacements:()=>w0,viewport:()=>Sv,write:()=>F4});var In="top",Yn="bottom",jn="right",Mn="left",Cv="auto",nd=[In,Yn,jn,Mn],Bl="start",Ph="end",NI="clippingParents",Sv="viewport",mm="popper",RI="reference",w0=nd.reduce(function(r,e){return r.concat([e+"-"+Bl,e+"-"+Ph])},[]),xv=[].concat(nd,[Cv]).reduce(function(r,e){return r.concat([e,e+"-"+Bl,e+"-"+Ph])},[]),T4="beforeRead",N4="read",R4="afterRead",P4="beforeMain",A4="main",j4="afterMain",M4="beforeWrite",F4="write",B4="afterWrite",PI=[T4,N4,R4,P4,A4,j4,M4,F4,B4];function yr(r){return r?(r.nodeName||"").toLowerCase():null}function Fn(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function rd(r){var e=Fn(r).Element;return r instanceof e||r instanceof Element}function Cr(r){var e=Fn(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function y0(r){if(typeof ShadowRoot=="undefined")return!1;var e=Fn(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function QJ(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},o=e.elements[t];!Cr(o)||!yr(o)||(Object.assign(o.style,i),Object.keys(n).forEach(function(s){var a=n[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function JJ(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],o=e.attributes[i]||{},s=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=s.reduce(function(l,c){return l[c]="",l},{});!Cr(n)||!yr(n)||(Object.assign(n.style,a),Object.keys(o).forEach(function(l){n.removeAttribute(l)}))})}}var rp={name:"applyStyles",enabled:!0,phase:"write",fn:QJ,effect:JJ,requires:["computeStyles"]};function Sr(r){return r.split("-")[0]}function oa(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),i=1,n=1;return{width:t.width/i,height:t.height/n,top:t.top/n,right:t.right/i,bottom:t.bottom/n,left:t.left/i,x:t.left/i,y:t.top/n}}function fm(r){var e=oa(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function Ev(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&y0(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Io(r){return Fn(r).getComputedStyle(r)}function AI(r){return["table","td","th"].indexOf(yr(r))>=0}function Fr(r){return((rd(r)?r.ownerDocument:r.document)||window.document).documentElement}function od(r){return yr(r)==="html"?r:r.assignedSlot||r.parentNode||(y0(r)?r.host:null)||Fr(r)}function W4(r){return!Cr(r)||Io(r).position==="fixed"?null:r.offsetParent}function eee(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Cr(r)){var i=Io(r);if(i.position==="fixed")return null}for(var n=od(r);Cr(n)&&["html","body"].indexOf(yr(n))<0;){var o=Io(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function qa(r){for(var e=Fn(r),t=W4(r);t&&AI(t)&&Io(t).position==="static";)t=W4(t);return t&&(yr(t)==="html"||yr(t)==="body"&&Io(t).position==="static")?e:t||eee(r)||e}function gm(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}var sa=Math.max,Ah=Math.min,Dv=Math.round;function pm(r,e,t){return sa(r,Ah(e,t))}function Lv(){return{top:0,right:0,bottom:0,left:0}}function kv(r){return Object.assign({},Lv(),r)}function Iv(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var tee=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,kv(typeof e!="number"?e:Iv(e,nd))};function iee(r){var e,t=r.state,i=r.name,n=r.options,o=t.elements.arrow,s=t.modifiersData.popperOffsets,a=Sr(t.placement),l=gm(a),c=[Mn,jn].indexOf(a)>=0,d=c?"height":"width";if(!(!o||!s)){var h=tee(n.padding,t),u=fm(o),m=l==="y"?In:Mn,p=l==="y"?Yn:jn,_=t.rects.reference[d]+t.rects.reference[l]-s[l]-t.rects.popper[d],v=s[l]-t.rects.reference[l],C=qa(o),w=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,S=_/2-v/2,D=h[m],I=w-u[d]-h[p],A=w/2-u[d]/2+S,O=pm(D,A,I),N=l;t.modifiersData[i]=(e={},e[N]=O,e.centerOffset=O-A,e)}}function nee(r){var e=r.state,t=r.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||!Ev(e.elements.popper,n)||(e.elements.arrow=n))}var C0={name:"arrow",enabled:!0,phase:"main",fn:iee,effect:nee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function aa(r){return r.split("-")[1]}var ree={top:"auto",right:"auto",bottom:"auto",left:"auto"};function oee(r){var e=r.x,t=r.y,i=window,n=i.devicePixelRatio||1;return{x:Dv(Dv(e*n)/n)||0,y:Dv(Dv(t*n)/n)||0}}function U4(r){var e,t=r.popper,i=r.popperRect,n=r.placement,o=r.variation,s=r.offsets,a=r.position,l=r.gpuAcceleration,c=r.adaptive,d=r.roundOffsets,h=d===!0?oee(s):typeof d=="function"?d(s):s,u=h.x,m=u===void 0?0:u,p=h.y,_=p===void 0?0:p,v=s.hasOwnProperty("x"),C=s.hasOwnProperty("y"),w=Mn,S=In,D=window;if(c){var I=qa(t),A="clientHeight",O="clientWidth";I===Fn(t)&&(I=Fr(t),Io(I).position!=="static"&&a==="absolute"&&(A="scrollHeight",O="scrollWidth")),I=I,(n===In||(n===Mn||n===jn)&&o===Ph)&&(S=Yn,_-=I[A]-i.height,_*=l?1:-1),(n===Mn||(n===In||n===Yn)&&o===Ph)&&(w=jn,m-=I[O]-i.width,m*=l?1:-1)}var N=Object.assign({position:a},c&&ree);if(l){var F;return Object.assign({},N,(F={},F[S]=C?"0":"",F[w]=v?"0":"",F.transform=(D.devicePixelRatio||1)<=1?"translate("+m+"px, "+_+"px)":"translate3d("+m+"px, "+_+"px, 0)",F))}return Object.assign({},N,(e={},e[S]=C?_+"px":"",e[w]=v?m+"px":"",e.transform="",e))}function see(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=i===void 0?!0:i,o=t.adaptive,s=o===void 0?!0:o,a=t.roundOffsets,l=a===void 0?!0:a;if(!1)var c;var d={placement:Sr(e.placement),variation:aa(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,U4(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,U4(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var op={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:see,data:{}};var S0={passive:!0};function aee(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,o=n===void 0?!0:n,s=i.resize,a=s===void 0?!0:s,l=Fn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(d){d.addEventListener("scroll",t.update,S0)}),a&&l.addEventListener("resize",t.update,S0),function(){o&&c.forEach(function(d){d.removeEventListener("scroll",t.update,S0)}),a&&l.removeEventListener("resize",t.update,S0)}}var sp={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aee,data:{}};var lee={left:"right",right:"left",bottom:"top",top:"bottom"};function ap(r){return r.replace(/left|right|bottom|top/g,function(e){return lee[e]})}var cee={start:"end",end:"start"};function x0(r){return r.replace(/start|end/g,function(e){return cee[e]})}function _m(r){var e=Fn(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function bm(r){return oa(Fr(r)).left+_m(r).scrollLeft}function jI(r){var e=Fn(r),t=Fr(r),i=e.visualViewport,n=t.clientWidth,o=t.clientHeight,s=0,a=0;return i&&(n=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:n,height:o,x:s+bm(r),y:a}}function MI(r){var e,t=Fr(r),i=_m(r),n=(e=r.ownerDocument)==null?void 0:e.body,o=sa(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=sa(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+bm(r),l=-i.scrollTop;return Io(n||t).direction==="rtl"&&(a+=sa(t.clientWidth,n?n.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function vm(r){var e=Io(r),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function E0(r){return["html","body","#document"].indexOf(yr(r))>=0?r.ownerDocument.body:Cr(r)&&vm(r)?r:E0(od(r))}function jh(r,e){var t;e===void 0&&(e=[]);var i=E0(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),o=Fn(i),s=n?[o].concat(o.visualViewport||[],vm(i)?i:[]):i,a=e.concat(s);return n?a:a.concat(jh(od(s)))}function lp(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function dee(r){var e=oa(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function V4(r,e){return e===Sv?lp(jI(r)):Cr(e)?dee(e):lp(MI(Fr(r)))}function hee(r){var e=jh(od(r)),t=["absolute","fixed"].indexOf(Io(r).position)>=0,i=t&&Cr(r)?qa(r):r;return rd(i)?e.filter(function(n){return rd(n)&&Ev(n,i)&&yr(n)!=="body"}):[]}function FI(r,e,t){var i=e==="clippingParents"?hee(r):[].concat(e),n=[].concat(i,[t]),o=n[0],s=n.reduce(function(a,l){var c=V4(r,l);return a.top=sa(c.top,a.top),a.right=Ah(c.right,a.right),a.bottom=Ah(c.bottom,a.bottom),a.left=sa(c.left,a.left),a},V4(r,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ov(r){var e=r.reference,t=r.element,i=r.placement,n=i?Sr(i):null,o=i?aa(i):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(n){case In:l={x:s,y:e.y-t.height};break;case Yn:l={x:s,y:e.y+e.height};break;case jn:l={x:e.x+e.width,y:a};break;case Mn:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=n?gm(n):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case Bl:l[c]=l[c]-(e[d]/2-t[d]/2);break;case Ph:l[c]=l[c]+(e[d]/2-t[d]/2);break;default:}}return l}function Oo(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?r.placement:i,o=t.boundary,s=o===void 0?NI:o,a=t.rootBoundary,l=a===void 0?Sv:a,c=t.elementContext,d=c===void 0?mm:c,h=t.altBoundary,u=h===void 0?!1:h,m=t.padding,p=m===void 0?0:m,_=kv(typeof p!="number"?p:Iv(p,nd)),v=d===mm?RI:mm,C=r.rects.popper,w=r.elements[u?v:d],S=FI(rd(w)?w:w.contextElement||Fr(r.elements.popper),s,l),D=oa(r.elements.reference),I=Ov({reference:D,element:C,strategy:"absolute",placement:n}),A=lp(Object.assign({},C,I)),O=d===mm?A:D,N={top:S.top-O.top+_.top,bottom:O.bottom-S.bottom+_.bottom,left:S.left-O.left+_.left,right:O.right-S.right+_.right},F=r.modifiersData.offset;if(d===mm&&F){var Y=F[n];Object.keys(N).forEach(function(K){var ee=[jn,Yn].indexOf(K)>=0?1:-1,ie=[In,Yn].indexOf(K)>=0?"y":"x";N[K]+=Y[ie]*ee})}return N}function BI(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,o=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?xv:l,d=aa(i),h=d?a?w0:w0.filter(function(p){return aa(p)===d}):nd,u=h.filter(function(p){return c.indexOf(p)>=0});u.length===0&&(u=h);var m=u.reduce(function(p,_){return p[_]=Oo(r,{placement:_,boundary:n,rootBoundary:o,padding:s})[Sr(_)],p},{});return Object.keys(m).sort(function(p,_){return m[p]-m[_]})}function uee(r){if(Sr(r)===Cv)return[];var e=ap(r);return[x0(r),e,x0(e)]}function mee(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,o=n===void 0?!0:n,s=t.altAxis,a=s===void 0?!0:s,l=t.fallbackPlacements,c=t.padding,d=t.boundary,h=t.rootBoundary,u=t.altBoundary,m=t.flipVariations,p=m===void 0?!0:m,_=t.allowedAutoPlacements,v=e.options.placement,C=Sr(v),w=C===v,S=l||(w||!p?[ap(v)]:uee(v)),D=[v].concat(S).reduce(function(pt,Ai){return pt.concat(Sr(Ai)===Cv?BI(e,{placement:Ai,boundary:d,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:_}):Ai)},[]),I=e.rects.reference,A=e.rects.popper,O=new Map,N=!0,F=D[0],Y=0;Y<D.length;Y++){var K=D[Y],ee=Sr(K),ie=aa(K)===Bl,Ee=[In,Yn].indexOf(ee)>=0,Le=Ee?"width":"height",Te=Oo(e,{placement:K,boundary:d,rootBoundary:h,altBoundary:u,padding:c}),Ne=Ee?ie?jn:Mn:ie?Yn:In;I[Le]>A[Le]&&(Ne=ap(Ne));var Fe=ap(Ne),ue=[];if(o&&ue.push(Te[ee]<=0),a&&ue.push(Te[Ne]<=0,Te[Fe]<=0),ue.every(function(pt){return pt})){F=K,N=!1;break}O.set(K,ue)}if(N)for(var ni=p?3:1,Xt=function(Ai){var qn=D.find(function(jr){var dn=O.get(jr);if(dn)return dn.slice(0,Ai).every(function(hi){return hi})});if(qn)return F=qn,"break"},zt=ni;zt>0;zt--){var ri=Xt(zt);if(ri==="break")break}e.placement!==F&&(e.modifiersData[i]._skip=!0,e.placement=F,e.reset=!0)}}var D0={name:"flip",enabled:!0,phase:"main",fn:mee,requiresIfExists:["offset"],data:{_skip:!1}};function z4(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function H4(r){return[In,jn,Yn,Mn].some(function(e){return r[e]>=0})}function fee(r){var e=r.state,t=r.name,i=e.rects.reference,n=e.rects.popper,o=e.modifiersData.preventOverflow,s=Oo(e,{elementContext:"reference"}),a=Oo(e,{altBoundary:!0}),l=z4(s,i),c=z4(a,n,o),d=H4(l),h=H4(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var L0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fee};function gee(r,e,t){var i=Sr(r),n=[Mn,In].indexOf(i)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,s=o[0],a=o[1];return s=s||0,a=(a||0)*n,[Mn,jn].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function pee(r){var e=r.state,t=r.options,i=r.name,n=t.offset,o=n===void 0?[0,0]:n,s=xv.reduce(function(d,h){return d[h]=gee(h,e.rects,o),d},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}var k0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pee};function _ee(r){var e=r.state,t=r.name;e.modifiersData[t]=Ov({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var cp={name:"popperOffsets",enabled:!0,phase:"read",fn:_ee,data:{}};function WI(r){return r==="x"?"y":"x"}function bee(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,o=n===void 0?!0:n,s=t.altAxis,a=s===void 0?!1:s,l=t.boundary,c=t.rootBoundary,d=t.altBoundary,h=t.padding,u=t.tether,m=u===void 0?!0:u,p=t.tetherOffset,_=p===void 0?0:p,v=Oo(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:d}),C=Sr(e.placement),w=aa(e.placement),S=!w,D=gm(C),I=WI(D),A=e.modifiersData.popperOffsets,O=e.rects.reference,N=e.rects.popper,F=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,Y={x:0,y:0};if(!!A){if(o||a){var K=D==="y"?In:Mn,ee=D==="y"?Yn:jn,ie=D==="y"?"height":"width",Ee=A[D],Le=A[D]+v[K],Te=A[D]-v[ee],Ne=m?-N[ie]/2:0,Fe=w===Bl?O[ie]:N[ie],ue=w===Bl?-N[ie]:-O[ie],ni=e.elements.arrow,Xt=m&&ni?fm(ni):{width:0,height:0},zt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Lv(),ri=zt[K],pt=zt[ee],Ai=pm(0,O[ie],Xt[ie]),qn=S?O[ie]/2-Ne-Ai-ri-F:Fe-Ai-ri-F,jr=S?-O[ie]/2+Ne+Ai+pt+F:ue+Ai+pt+F,dn=e.elements.arrow&&qa(e.elements.arrow),hi=dn?D==="y"?dn.clientTop||0:dn.clientLeft||0:0,ro=e.modifiersData.offset?e.modifiersData.offset[e.placement][D]:0,ut=A[D]+qn-ro-hi,Ve=A[D]+jr-ro;if(o){var na=pm(m?Ah(Le,ut):Le,Ee,m?sa(Te,Ve):Te);A[D]=na,Y[D]=na-Ee}if(a){var kn=D==="x"?In:Mn,wr=D==="x"?Yn:jn,oo=A[I],Ss=oo+v[kn],Qe=oo-v[wr],Do=pm(m?Ah(Ss,ut):Ss,oo,m?sa(Qe,Ve):Qe);A[I]=Do,Y[I]=Do-oo}}e.modifiersData[i]=Y}}var I0={name:"preventOverflow",enabled:!0,phase:"main",fn:bee,requiresIfExists:["offset"]};function UI(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function VI(r){return r===Fn(r)||!Cr(r)?_m(r):UI(r)}function vee(r){var e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,i=e.height/r.offsetHeight||1;return t!==1||i!==1}function zI(r,e,t){t===void 0&&(t=!1);var i=Cr(e),n=Cr(e)&&vee(e),o=Fr(e),s=oa(r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((yr(e)!=="body"||vm(o))&&(a=VI(e)),Cr(e)?(l=oa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=bm(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function wee(r){var e=new Map,t=new Set,i=[];r.forEach(function(o){e.set(o.name,o)});function n(o){t.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&n(l)}}),i.push(o)}return r.forEach(function(o){t.has(o.name)||n(o)}),i}function HI(r){var e=wee(r);return PI.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function $I(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function KI(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var $4={placement:"bottom",modifiers:[],strategy:"absolute"};function K4(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function wm(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,o=n===void 0?$4:n;return function(a,l,c){c===void 0&&(c=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},$4,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],u=!1,m={state:d,setOptions:function(C){var w=typeof C=="function"?C(d.options):C;_(),d.options=Object.assign({},o,d.options,w),d.scrollParents={reference:rd(a)?jh(a):a.contextElement?jh(a.contextElement):[],popper:jh(l)};var S=HI(KI([].concat(i,d.options.modifiers)));if(d.orderedModifiers=S.filter(function(K){return K.enabled}),!1){var D;if(getBasePlacement(d.options.placement)===auto)var I;var A,O,N,F,Y}return p(),m.update()},forceUpdate:function(){if(!u){var C=d.elements,w=C.reference,S=C.popper;if(!!K4(w,S)){d.rects={reference:zI(w,qa(S),d.options.strategy==="fixed"),popper:fm(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(K){return d.modifiersData[K.name]=Object.assign({},K.data)});for(var D=0,I=0;I<d.orderedModifiers.length;I++){if(d.reset===!0){d.reset=!1,I=-1;continue}var A=d.orderedModifiers[I],O=A.fn,N=A.options,F=N===void 0?{}:N,Y=A.name;typeof O=="function"&&(d=O({state:d,options:F,name:Y,instance:m})||d)}}}},update:$I(function(){return new Promise(function(v){m.forceUpdate(),v(d)})}),destroy:function(){_(),u=!0}};if(!K4(a,l))return m;m.setOptions(c).then(function(v){!u&&c.onFirstUpdate&&c.onFirstUpdate(v)});function p(){d.orderedModifiers.forEach(function(v){var C=v.name,w=v.options,S=w===void 0?{}:w,D=v.effect;if(typeof D=="function"){var I=D({state:d,name:C,instance:m,options:S}),A=function(){};h.push(I||A)}})}function _(){h.forEach(function(v){return v()}),h=[]}return m}}var q4=wm();var yee=[sp,cp,op,rp],Y4=wm({defaultModifiers:yee});var Cee=[sp,cp,op,rp,k0,D0,I0,C0,L0],O0=wm({defaultModifiers:Cee});var See=1e6,xee=1e3,qI="transitionend",Eee=r=>r==null?`${r}`:{}.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase(),Dee=r=>{do r+=Math.floor(Math.random()*See);while(document.getElementById(r));return r},Z4=r=>{let e=r.getAttribute("data-bs-target");if(!e||e==="#"){let t=r.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e},YI=r=>{let e=Z4(r);return e&&document.querySelector(e)?e:null},Mh=r=>{let e=Z4(r);return e?document.querySelector(e):null},Lee=r=>{if(!r)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(r),i=Number.parseFloat(e),n=Number.parseFloat(t);return!i&&!n?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*xee)},G4=r=>{r.dispatchEvent(new Event(qI))},ym=r=>!r||typeof r!="object"?!1:(typeof r.jquery!="undefined"&&(r=r[0]),typeof r.nodeType!="undefined"),Fh=r=>ym(r)?r.jquery?r[0]:r:typeof r=="string"&&r.length>0?document.querySelector(r):null,Wl=(r,e,t)=>{Object.keys(t).forEach(i=>{let n=t[i],o=e[i],s=o&&ym(o)?"element":Eee(o);if(!new RegExp(n).test(s))throw new TypeError(`${r.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${n}".`)})},Tv=r=>!ym(r)||r.getClientRects().length===0?!1:getComputedStyle(r).getPropertyValue("visibility")==="visible",Cm=r=>!r||r.nodeType!==Node.ELEMENT_NODE||r.classList.contains("disabled")?!0:typeof r.disabled!="undefined"?r.disabled:r.hasAttribute("disabled")&&r.getAttribute("disabled")!=="false",X4=r=>{if(!document.documentElement.attachShadow)return null;if(typeof r.getRootNode=="function"){let e=r.getRootNode();return e instanceof ShadowRoot?e:null}return r instanceof ShadowRoot?r:r.parentNode?X4(r.parentNode):null},N0=()=>{},dp=r=>{r.offsetHeight},Q4=()=>{let{jQuery:r}=window;return r&&!document.body.hasAttribute("data-bs-no-jquery")?r:null},ZI=[],kee=r=>{document.readyState==="loading"?(ZI.length||document.addEventListener("DOMContentLoaded",()=>{ZI.forEach(e=>e())}),ZI.push(r)):r()},rs=()=>document.documentElement.dir==="rtl",la=r=>{kee(()=>{let e=Q4();if(e){let t=r.NAME,i=e.fn[t];e.fn[t]=r.jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=()=>(e.fn[t]=i,r.jQueryInterface)}})},Sm=r=>{typeof r=="function"&&r()},J4=(r,e,t=!0)=>{if(!t){Sm(r);return}let i=5,n=Lee(e)+i,o=!1,s=({target:a})=>{a===e&&(o=!0,e.removeEventListener(qI,s),Sm(r))};e.addEventListener(qI,s),setTimeout(()=>{o||G4(e)},n)},eB=(r,e,t,i)=>{let n=r.indexOf(e);if(n===-1)return r[!t&&i?r.length-1:0];let o=r.length;return n+=t?1:-1,i&&(n=(n+o)%o),r[Math.max(0,Math.min(n,o-1))]},Iee=/[^.]*(?=\..*)\.|.*/,Oee=/\..*/,Tee=/::\d+$/,GI={},tB=1,Nee={mouseenter:"mouseover",mouseleave:"mouseout"},Ree=/^(mouseenter|mouseleave)/i,iB=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function nB(r,e){return e&&`${e}::${tB++}`||r.uidEvent||tB++}function rB(r){let e=nB(r);return r.uidEvent=e,GI[e]=GI[e]||{},GI[e]}function Pee(r,e){return function t(i){return i.delegateTarget=r,t.oneOff&&xe.off(r,i.type,e),e.apply(r,[i])}}function Aee(r,e,t){return function i(n){let o=r.querySelectorAll(e);for(let{target:s}=n;s&&s!==this;s=s.parentNode)for(let a=o.length;a--;)if(o[a]===s)return n.delegateTarget=s,i.oneOff&&xe.off(r,n.type,e,t),t.apply(s,[n]);return null}}function oB(r,e,t=null){let i=Object.keys(r);for(let n=0,o=i.length;n<o;n++){let s=r[i[n]];if(s.originalHandler===e&&s.delegationSelector===t)return s}return null}function sB(r,e,t){let i=typeof e=="string",n=i?t:e,o=lB(r);return iB.has(o)||(o=r),[i,n,o]}function aB(r,e,t,i,n){if(typeof e!="string"||!r)return;if(t||(t=i,i=null),Ree.test(e)){let m=p=>function(_){if(!_.relatedTarget||_.relatedTarget!==_.delegateTarget&&!_.delegateTarget.contains(_.relatedTarget))return p.call(this,_)};i?i=m(i):t=m(t)}let[o,s,a]=sB(e,t,i),l=rB(r),c=l[a]||(l[a]={}),d=oB(c,s,o?t:null);if(d){d.oneOff=d.oneOff&&n;return}let h=nB(s,e.replace(Iee,"")),u=o?Aee(r,t,i):Pee(r,t);u.delegationSelector=o?t:null,u.originalHandler=s,u.oneOff=n,u.uidEvent=h,c[h]=u,r.addEventListener(a,u,o)}function XI(r,e,t,i,n){let o=oB(e[t],i,n);!o||(r.removeEventListener(t,o,Boolean(n)),delete e[t][o.uidEvent])}function jee(r,e,t,i){let n=e[t]||{};Object.keys(n).forEach(o=>{if(o.includes(i)){let s=n[o];XI(r,e,t,s.originalHandler,s.delegationSelector)}})}function lB(r){return r=r.replace(Oee,""),Nee[r]||r}var xe={on(r,e,t,i){aB(r,e,t,i,!1)},one(r,e,t,i){aB(r,e,t,i,!0)},off(r,e,t,i){if(typeof e!="string"||!r)return;let[n,o,s]=sB(e,t,i),a=s!==e,l=rB(r),c=e.startsWith(".");if(typeof o!="undefined"){if(!l||!l[s])return;XI(r,l,s,o,n?t:null);return}c&&Object.keys(l).forEach(h=>{jee(r,l,h,e.slice(1))});let d=l[s]||{};Object.keys(d).forEach(h=>{let u=h.replace(Tee,"");if(!a||e.includes(u)){let m=d[h];XI(r,l,s,m.originalHandler,m.delegationSelector)}})},trigger(r,e,t){if(typeof e!="string"||!r)return null;let i=Q4(),n=lB(e),o=e!==n,s=iB.has(n),a,l=!0,c=!0,d=!1,h=null;return o&&i&&(a=i.Event(e,t),i(r).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),d=a.isDefaultPrevented()),s?(h=document.createEvent("HTMLEvents"),h.initEvent(n,l,!0)):h=new CustomEvent(e,{bubbles:l,cancelable:!0}),typeof t!="undefined"&&Object.keys(t).forEach(u=>{Object.defineProperty(h,u,{get(){return t[u]}})}),d&&h.preventDefault(),c&&r.dispatchEvent(h),h.defaultPrevented&&typeof a!="undefined"&&a.preventDefault(),h}},Bh=new Map,Nv={set(r,e,t){Bh.has(r)||Bh.set(r,new Map);let i=Bh.get(r);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,t)},get(r,e){return Bh.has(r)&&Bh.get(r).get(e)||null},remove(r,e){if(!Bh.has(r))return;let t=Bh.get(r);t.delete(e),t.size===0&&Bh.delete(r)}},Mee="5.1.3",ca=class{constructor(e){e=Fh(e),!!e&&(this._element=e,Nv.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Nv.remove(this._element,this.constructor.DATA_KEY),xe.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,i=!0){J4(e,t,i)}static getInstance(e){return Nv.get(Fh(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return Mee}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}},R0=(r,e="hide")=>{let t=`click.dismiss${r.EVENT_KEY}`,i=r.NAME;xe.on(document,t,`[data-bs-dismiss="${i}"]`,function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Cm(this))return;let o=Mh(this)||this.closest(`.${i}`);r.getOrCreateInstance(o)[e]()})},Fee="alert",Bee="bs.alert",cB=`.${Bee}`,Wee=`close${cB}`,Uee=`closed${cB}`,Vee="fade",zee="show",Rv=class extends ca{static get NAME(){return Fee}close(){if(xe.trigger(this._element,Wee).defaultPrevented)return;this._element.classList.remove(zee);let t=this._element.classList.contains(Vee);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),xe.trigger(this._element,Uee),this.dispose()}static jQueryInterface(e){return this.each(function(){let t=Rv.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}};R0(Rv,"close");la(Rv);var Hee="button",$ee="bs.button",Kee=`.${$ee}`,qee=".data-api",Yee="active",dB='[data-bs-toggle="button"]',Zee=`click${Kee}${qee}`,Pv=class extends ca{static get NAME(){return Hee}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Yee))}static jQueryInterface(e){return this.each(function(){let t=Pv.getOrCreateInstance(this);e==="toggle"&&t[e]()})}};xe.on(document,Zee,dB,r=>{r.preventDefault();let e=r.target.closest(dB);Pv.getOrCreateInstance(e).toggle()});la(Pv);function hB(r){return r==="true"?!0:r==="false"?!1:r===Number(r).toString()?Number(r):r===""||r==="null"?null:r}function QI(r){return r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}var Br={setDataAttribute(r,e,t){r.setAttribute(`data-bs-${QI(e)}`,t)},removeDataAttribute(r,e){r.removeAttribute(`data-bs-${QI(e)}`)},getDataAttributes(r){if(!r)return{};let e={};return Object.keys(r.dataset).filter(t=>t.startsWith("bs")).forEach(t=>{let i=t.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=hB(r.dataset[t])}),e},getDataAttribute(r,e){return hB(r.getAttribute(`data-bs-${QI(e)}`))},offset(r){let e=r.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position(r){return{top:r.offsetTop,left:r.offsetLeft}}},Gee=3,Dt={find(r,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,r))},findOne(r,e=document.documentElement){return Element.prototype.querySelector.call(e,r)},children(r,e){return[].concat(...r.children).filter(t=>t.matches(e))},parents(r,e){let t=[],i=r.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&i.nodeType!==Gee;)i.matches(e)&&t.push(i),i=i.parentNode;return t},prev(r,e){let t=r.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(r,e){let t=r.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(r){let e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(", ");return this.find(e,r).filter(t=>!Cm(t)&&Tv(t))}},uB="carousel",Xee="bs.carousel",ks=`.${Xee}`,mB=".data-api",Qee="ArrowLeft",Jee="ArrowRight",ete=500,tte=40,fB={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ite={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},xm="next",Em="prev",Dm="left",Av="right",nte={[Qee]:Av,[Jee]:Dm},rte=`slide${ks}`,gB=`slid${ks}`,ote=`keydown${ks}`,ste=`mouseenter${ks}`,ate=`mouseleave${ks}`,lte=`touchstart${ks}`,cte=`touchmove${ks}`,dte=`touchend${ks}`,hte=`pointerdown${ks}`,ute=`pointerup${ks}`,mte=`dragstart${ks}`,fte=`load${ks}${mB}`,gte=`click${ks}${mB}`,pte="carousel",Lm="active",_te="slide",bte="carousel-item-end",vte="carousel-item-start",wte="carousel-item-next",yte="carousel-item-prev",Cte="pointer-event",Ste=".active",P0=".active.carousel-item",xte=".carousel-item",Ete=".carousel-item img",Dte=".carousel-item-next, .carousel-item-prev",Lte=".carousel-indicators",kte="[data-bs-target]",Ite="[data-bs-slide], [data-bs-slide-to]",Ote='[data-bs-ride="carousel"]',Tte="touch",Nte="pen",Ul=class extends ca{constructor(e,t){super(e);this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=Dt.findOne(Lte,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return fB}static get NAME(){return uB}next(){this._slide(xm)}nextWhenVisible(){!document.hidden&&Tv(this._element)&&this.next()}prev(){this._slide(Em)}pause(e){e||(this._isPaused=!0),Dt.findOne(Dte,this._element)&&(G4(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=Dt.findOne(P0,this._element);let t=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0)return;if(this._isSliding){xe.one(this._element,gB,()=>this.to(e));return}if(t===e){this.pause(),this.cycle();return}let i=e>t?xm:Em;this._slide(i,this._items[e])}_getConfig(e){return e={...fB,...Br.getDataAttributes(this._element),...typeof e=="object"?e:{}},Wl(uB,e,ite),e}_handleSwipe(){let e=Math.abs(this.touchDeltaX);if(e<=tte)return;let t=e/this.touchDeltaX;this.touchDeltaX=0,!!t&&this._slide(t>0?Av:Dm)}_addEventListeners(){this._config.keyboard&&xe.on(this._element,ote,e=>this._keydown(e)),this._config.pause==="hover"&&(xe.on(this._element,ste,e=>this.pause(e)),xe.on(this._element,ate,e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){let e=o=>this._pointerEvent&&(o.pointerType===Nte||o.pointerType===Tte),t=o=>{e(o)?this.touchStartX=o.clientX:this._pointerEvent||(this.touchStartX=o.touches[0].clientX)},i=o=>{this.touchDeltaX=o.touches&&o.touches.length>1?0:o.touches[0].clientX-this.touchStartX},n=o=>{e(o)&&(this.touchDeltaX=o.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(s=>this.cycle(s),ete+this._config.interval))};Dt.find(Ete,this._element).forEach(o=>{xe.on(o,mte,s=>s.preventDefault())}),this._pointerEvent?(xe.on(this._element,hte,o=>t(o)),xe.on(this._element,ute,o=>n(o)),this._element.classList.add(Cte)):(xe.on(this._element,lte,o=>t(o)),xe.on(this._element,cte,o=>i(o)),xe.on(this._element,dte,o=>n(o)))}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;let t=nte[e.key];t&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?Dt.find(xte,e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){let i=e===xm;return eB(this._items,t,i,this._config.wrap)}_triggerSlideEvent(e,t){let i=this._getItemIndex(e),n=this._getItemIndex(Dt.findOne(P0,this._element));return xe.trigger(this._element,rte,{relatedTarget:e,direction:t,from:n,to:i})}_setActiveIndicatorElement(e){if(this._indicatorsElement){let t=Dt.findOne(Ste,this._indicatorsElement);t.classList.remove(Lm),t.removeAttribute("aria-current");let i=Dt.find(kte,this._indicatorsElement);for(let n=0;n<i.length;n++)if(Number.parseInt(i[n].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){i[n].classList.add(Lm),i[n].setAttribute("aria-current","true");break}}}_updateInterval(){let e=this._activeElement||Dt.findOne(P0,this._element);if(!e)return;let t=Number.parseInt(e.getAttribute("data-bs-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(e,t){let i=this._directionToOrder(e),n=Dt.findOne(P0,this._element),o=this._getItemIndex(n),s=t||this._getItemByOrder(i,n),a=this._getItemIndex(s),l=Boolean(this._interval),c=i===xm,d=c?vte:bte,h=c?wte:yte,u=this._orderToDirection(i);if(s&&s.classList.contains(Lm)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(s,u).defaultPrevented||!n||!s)return;this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(s),this._activeElement=s;let p=()=>{xe.trigger(this._element,gB,{relatedTarget:s,direction:u,from:o,to:a})};if(this._element.classList.contains(_te)){s.classList.add(h),dp(s),n.classList.add(d),s.classList.add(d);let _=()=>{s.classList.remove(d,h),s.classList.add(Lm),n.classList.remove(Lm,h,d),this._isSliding=!1,setTimeout(p,0)};this._queueCallback(_,n,!0)}else n.classList.remove(Lm),s.classList.add(Lm),this._isSliding=!1,p();l&&this.cycle()}_directionToOrder(e){return[Av,Dm].includes(e)?rs()?e===Dm?Em:xm:e===Dm?xm:Em:e}_orderToDirection(e){return[xm,Em].includes(e)?rs()?e===Em?Dm:Av:e===Em?Av:Dm:e}static carouselInterface(e,t){let i=Ul.getOrCreateInstance(e,t),{_config:n}=i;typeof t=="object"&&(n={...n,...t});let o=typeof t=="string"?t:n.slide;if(typeof t=="number")i.to(t);else if(typeof o=="string"){if(typeof i[o]=="undefined")throw new TypeError(`No method named "${o}"`);i[o]()}else n.interval&&n.ride&&(i.pause(),i.cycle())}static jQueryInterface(e){return this.each(function(){Ul.carouselInterface(this,e)})}static dataApiClickHandler(e){let t=Mh(this);if(!t||!t.classList.contains(pte))return;let i={...Br.getDataAttributes(t),...Br.getDataAttributes(this)},n=this.getAttribute("data-bs-slide-to");n&&(i.interval=!1),Ul.carouselInterface(t,i),n&&Ul.getInstance(t).to(n),e.preventDefault()}};xe.on(document,gte,Ite,Ul.dataApiClickHandler);xe.on(window,fte,()=>{let r=Dt.find(Ote);for(let e=0,t=r.length;e<t;e++)Ul.carouselInterface(r[e],Ul.getInstance(r[e]))});la(Ul);var pB="collapse",_B="bs.collapse",jv=`.${_B}`,Rte=".data-api",bB={toggle:!0,parent:null},Pte={toggle:"boolean",parent:"(null|element)"},Ate=`show${jv}`,jte=`shown${jv}`,Mte=`hide${jv}`,Fte=`hidden${jv}`,Bte=`click${jv}${Rte}`,JI="show",hp="collapse",A0="collapsing",vB="collapsed",wB=`:scope .${hp} .${hp}`,Wte="collapse-horizontal",Ute="width",Vte="height",zte=".collapse.show, .collapse.collapsing",eO='[data-bs-toggle="collapse"]',km=class extends ca{constructor(e,t){super(e);this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=[];let i=Dt.find(eO);for(let n=0,o=i.length;n<o;n++){let s=i[n],a=YI(s),l=Dt.find(a).filter(c=>c===this._element);a!==null&&l.length&&(this._selector=a,this._triggerArray.push(s))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return bB}static get NAME(){return pB}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[],t;if(this._config.parent){let c=Dt.find(wB,this._config.parent);e=Dt.find(zte,this._config.parent).filter(d=>!c.includes(d))}let i=Dt.findOne(this._selector);if(e.length){let c=e.find(d=>i!==d);if(t=c?km.getInstance(c):null,t&&t._isTransitioning)return}if(xe.trigger(this._element,Ate).defaultPrevented)return;e.forEach(c=>{i!==c&&km.getOrCreateInstance(c,{toggle:!1}).hide(),t||Nv.set(c,_B,null)});let o=this._getDimension();this._element.classList.remove(hp),this._element.classList.add(A0),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let s=()=>{this._isTransitioning=!1,this._element.classList.remove(A0),this._element.classList.add(hp,JI),this._element.style[o]="",xe.trigger(this._element,jte)},l=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[o]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||xe.trigger(this._element,Mte).defaultPrevented)return;let t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,dp(this._element),this._element.classList.add(A0),this._element.classList.remove(hp,JI);let i=this._triggerArray.length;for(let o=0;o<i;o++){let s=this._triggerArray[o],a=Mh(s);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;let n=()=>{this._isTransitioning=!1,this._element.classList.remove(A0),this._element.classList.add(hp),xe.trigger(this._element,Fte)};this._element.style[t]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(JI)}_getConfig(e){return e={...bB,...Br.getDataAttributes(this._element),...e},e.toggle=Boolean(e.toggle),e.parent=Fh(e.parent),Wl(pB,e,Pte),e}_getDimension(){return this._element.classList.contains(Wte)?Ute:Vte}_initializeChildren(){if(!this._config.parent)return;let e=Dt.find(wB,this._config.parent);Dt.find(eO,this._config.parent).filter(t=>!e.includes(t)).forEach(t=>{let i=Mh(t);i&&this._addAriaAndCollapsedClass([t],this._isShown(i))})}_addAriaAndCollapsedClass(e,t){!e.length||e.forEach(i=>{t?i.classList.remove(vB):i.classList.add(vB),i.setAttribute("aria-expanded",t)})}static jQueryInterface(e){return this.each(function(){let t={};typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1);let i=km.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof i[e]=="undefined")throw new TypeError(`No method named "${e}"`);i[e]()}})}};xe.on(document,Bte,eO,function(r){(r.target.tagName==="A"||r.delegateTarget&&r.delegateTarget.tagName==="A")&&r.preventDefault();let e=YI(this);Dt.find(e).forEach(i=>{km.getOrCreateInstance(i,{toggle:!1}).toggle()})});la(km);var tO="dropdown",Hte="bs.dropdown",Im=`.${Hte}`,iO=".data-api",j0="Escape",yB="Space",CB="Tab",nO="ArrowUp",M0="ArrowDown",$te=2,Kte=new RegExp(`${nO}|${M0}|${j0}`),qte=`hide${Im}`,Yte=`hidden${Im}`,Zte=`show${Im}`,Gte=`shown${Im}`,SB=`click${Im}${iO}`,xB=`keydown${Im}${iO}`,Xte=`keyup${Im}${iO}`,up="show",Qte="dropup",Jte="dropend",eie="dropstart",tie="navbar",Mv='[data-bs-toggle="dropdown"]',rO=".dropdown-menu",iie=".navbar-nav",nie=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",rie=rs()?"top-end":"top-start",oie=rs()?"top-start":"top-end",sie=rs()?"bottom-end":"bottom-start",aie=rs()?"bottom-start":"bottom-end",lie=rs()?"left-start":"right-start",cie=rs()?"right-start":"left-start",die={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},hie={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"},Is=class extends ca{constructor(e,t){super(e);this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return die}static get DefaultType(){return hie}static get NAME(){return tO}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Cm(this._element)||this._isShown(this._menu))return;let e={relatedTarget:this._element};if(xe.trigger(this._element,Zte,e).defaultPrevented)return;let i=Is.getParentFromElement(this._element);this._inNavbar?Br.setDataAttribute(this._menu,"popper","none"):this._createPopper(i),"ontouchstart"in document.documentElement&&!i.closest(iie)&&[].concat(...document.body.children).forEach(n=>xe.on(n,"mouseover",N0)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(up),this._element.classList.add(up),xe.trigger(this._element,Gte,e)}hide(){if(Cm(this._element)||!this._isShown(this._menu))return;let e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){xe.trigger(this._element,qte,e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(i=>xe.off(i,"mouseover",N0)),this._popper&&this._popper.destroy(),this._menu.classList.remove(up),this._element.classList.remove(up),this._element.setAttribute("aria-expanded","false"),Br.removeDataAttribute(this._menu,"popper"),xe.trigger(this._element,Yte,e))}_getConfig(e){if(e={...this.constructor.Default,...Br.getDataAttributes(this._element),...e},Wl(tO,e,this.constructor.DefaultType),typeof e.reference=="object"&&!ym(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${tO.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(e){if(typeof T0=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=e:ym(this._config.reference)?t=Fh(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let i=this._getPopperConfig(),n=i.modifiers.find(o=>o.name==="applyStyles"&&o.enabled===!1);this._popper=O0(t,this._menu,i),n&&Br.setDataAttribute(this._menu,"popper","static")}_isShown(e=this._element){return e.classList.contains(up)}_getMenuElement(){return Dt.next(this._element,rO)[0]}_getPlacement(){let e=this._element.parentNode;if(e.classList.contains(Jte))return lie;if(e.classList.contains(eie))return cie;let t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Qte)?t?oie:rie:t?aie:sie}_detectNavbar(){return this._element.closest(`.${tie}`)!==null}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){let e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){let i=Dt.find(nie,this._menu).filter(Tv);!i.length||eB(i,t,e===M0,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){let t=Is.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e&&(e.button===$te||e.type==="keyup"&&e.key!==CB))return;let t=Dt.find(Mv);for(let i=0,n=t.length;i<n;i++){let o=Is.getInstance(t[i]);if(!o||o._config.autoClose===!1||!o._isShown())continue;let s={relatedTarget:o._element};if(e){let a=e.composedPath(),l=a.includes(o._menu);if(a.includes(o._element)||o._config.autoClose==="inside"&&!l||o._config.autoClose==="outside"&&l||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===CB||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;e.type==="click"&&(s.clickEvent=e)}o._completeHide(s)}}static getParentFromElement(e){return Mh(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===yB||e.key!==j0&&(e.key!==M0&&e.key!==nO||e.target.closest(rO)):!Kte.test(e.key))return;let t=this.classList.contains(up);if(!t&&e.key===j0||(e.preventDefault(),e.stopPropagation(),Cm(this)))return;let i=this.matches(Mv)?this:Dt.prev(this,Mv)[0],n=Is.getOrCreateInstance(i);if(e.key===j0){n.hide();return}if(e.key===nO||e.key===M0){t||n.show(),n._selectMenuItem(e);return}(!t||e.key===yB)&&Is.clearMenus()}};xe.on(document,xB,Mv,Is.dataApiKeydownHandler);xe.on(document,xB,rO,Is.dataApiKeydownHandler);xe.on(document,SB,Is.clearMenus);xe.on(document,Xte,Is.clearMenus);xe.on(document,SB,Mv,function(r){r.preventDefault(),Is.getOrCreateInstance(this).toggle()});la(Is);var EB=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",DB=".sticky-top",F0=class{constructor(){this._element=document.body}getWidth(){let e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){let e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",t=>t+e),this._setElementAttributes(EB,"paddingRight",t=>t+e),this._setElementAttributes(DB,"marginRight",t=>t-e)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){let n=this.getWidth(),o=s=>{if(s!==this._element&&window.innerWidth>s.clientWidth+n)return;this._saveInitialAttribute(s,t);let a=window.getComputedStyle(s)[t];s.style[t]=`${i(Number.parseFloat(a))}px`};this._applyManipulationCallback(e,o)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(EB,"paddingRight"),this._resetElementAttributes(DB,"marginRight")}_saveInitialAttribute(e,t){let i=e.style[t];i&&Br.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){let i=n=>{let o=Br.getDataAttribute(n,t);typeof o=="undefined"?n.style.removeProperty(t):(Br.removeDataAttribute(n,t),n.style[t]=o)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,t){ym(e)?t(e):Dt.find(e,this._element).forEach(t)}isOverflowing(){return this.getWidth()>0}},uie={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},mie={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},LB="backdrop",fie="fade",kB="show",IB=`mousedown.bs.${LB}`,oO=class{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){if(!this._config.isVisible){Sm(e);return}this._append(),this._config.isAnimated&&dp(this._getElement()),this._getElement().classList.add(kB),this._emulateAnimation(()=>{Sm(e)})}hide(e){if(!this._config.isVisible){Sm(e);return}this._getElement().classList.remove(kB),this._emulateAnimation(()=>{this.dispose(),Sm(e)})}_getElement(){if(!this._element){let e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(fie),this._element=e}return this._element}_getConfig(e){return e={...uie,...typeof e=="object"?e:{}},e.rootElement=Fh(e.rootElement),Wl(LB,e,mie),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),xe.on(this._getElement(),IB,()=>{Sm(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(xe.off(this._element,IB),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){J4(e,this._getElement(),this._config.isAnimated)}},gie={trapElement:null,autofocus:!0},pie={trapElement:"element",autofocus:"boolean"},_ie="focustrap",bie="bs.focustrap",B0=`.${bie}`,vie=`focusin${B0}`,wie=`keydown.tab${B0}`,yie="Tab",Cie="forward",OB="backward",sO=class{constructor(e){this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}activate(){let{trapElement:e,autofocus:t}=this._config;this._isActive||(t&&e.focus(),xe.off(document,B0),xe.on(document,vie,i=>this._handleFocusin(i)),xe.on(document,wie,i=>this._handleKeydown(i)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,xe.off(document,B0))}_handleFocusin(e){let{target:t}=e,{trapElement:i}=this._config;if(t===document||t===i||i.contains(t))return;let n=Dt.focusableChildren(i);n.length===0?i.focus():this._lastTabNavDirection===OB?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===yie&&(this._lastTabNavDirection=e.shiftKey?OB:Cie)}_getConfig(e){return e={...gie,...typeof e=="object"?e:{}},Wl(_ie,e,pie),e}},TB="modal",Sie="bs.modal",da=`.${Sie}`,xie=".data-api",NB="Escape",RB={backdrop:!0,keyboard:!0,focus:!0},Eie={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Die=`hide${da}`,Lie=`hidePrevented${da}`,PB=`hidden${da}`,AB=`show${da}`,kie=`shown${da}`,jB=`resize${da}`,MB=`click.dismiss${da}`,FB=`keydown.dismiss${da}`,Iie=`mouseup.dismiss${da}`,BB=`mousedown.dismiss${da}`,Oie=`click${da}${xie}`,WB="modal-open",Tie="fade",UB="show",aO="modal-static",Nie=".modal.show",Rie=".modal-dialog",Pie=".modal-body",Aie='[data-bs-toggle="modal"]',Om=class extends ca{constructor(e,t){super(e);this._config=this._getConfig(t),this._dialog=Dt.findOne(Rie,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new F0}static get Default(){return RB}static get NAME(){return TB}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||xe.trigger(this._element,AB,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(WB),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),xe.on(this._dialog,BB,()=>{xe.one(this._element,Iie,i=>{i.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning||xe.trigger(this._element,Die).defaultPrevented)return;this._isShown=!1;let t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(UB),xe.off(this._element,MB),xe.off(this._dialog,BB),this._queueCallback(()=>this._hideModal(),this._element,t)}dispose(){[window,this._dialog].forEach(e=>xe.off(e,da)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new oO({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sO({trapElement:this._element})}_getConfig(e){return e={...RB,...Br.getDataAttributes(this._element),...typeof e=="object"?e:{}},Wl(TB,e,Eie),e}_showElement(e){let t=this._isAnimated(),i=Dt.findOne(Pie,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),t&&dp(this._element),this._element.classList.add(UB);let n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,xe.trigger(this._element,kie,{relatedTarget:e})};this._queueCallback(n,this._dialog,t)}_setEscapeEvent(){this._isShown?xe.on(this._element,FB,e=>{this._config.keyboard&&e.key===NB?(e.preventDefault(),this.hide()):!this._config.keyboard&&e.key===NB&&this._triggerBackdropTransition()}):xe.off(this._element,FB)}_setResizeEvent(){this._isShown?xe.on(window,jB,()=>this._adjustDialog()):xe.off(window,jB)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(WB),this._resetAdjustments(),this._scrollBar.reset(),xe.trigger(this._element,PB)})}_showBackdrop(e){xe.on(this._element,MB,t=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}t.target===t.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains(Tie)}_triggerBackdropTransition(){if(xe.trigger(this._element,Lie).defaultPrevented)return;let{classList:t,scrollHeight:i,style:n}=this._element,o=i>document.documentElement.clientHeight;!o&&n.overflowY==="hidden"||t.contains(aO)||(o||(n.overflowY="hidden"),t.add(aO),this._queueCallback(()=>{t.remove(aO),o||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;(!i&&e&&!rs()||i&&!e&&rs())&&(this._element.style.paddingLeft=`${t}px`),(i&&!e&&!rs()||!i&&e&&rs())&&(this._element.style.paddingRight=`${t}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){let i=Om.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]=="undefined")throw new TypeError(`No method named "${e}"`);i[e](t)}})}};xe.on(document,Oie,Aie,function(r){let e=Mh(this);["A","AREA"].includes(this.tagName)&&r.preventDefault(),xe.one(e,AB,n=>{n.defaultPrevented||xe.one(e,PB,()=>{Tv(this)&&this.focus()})});let t=Dt.findOne(Nie);t&&Om.getInstance(t).hide(),Om.getOrCreateInstance(e).toggle(this)});R0(Om);la(Om);var VB="offcanvas",jie="bs.offcanvas",Tm=`.${jie}`,zB=".data-api",Mie=`load${Tm}${zB}`,Fie="Escape",HB={backdrop:!0,keyboard:!0,scroll:!1},Bie={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},$B="show",Wie="offcanvas-backdrop",KB=".offcanvas.show",Uie=`show${Tm}`,Vie=`shown${Tm}`,zie=`hide${Tm}`,qB=`hidden${Tm}`,Hie=`click${Tm}${zB}`,$ie=`keydown.dismiss${Tm}`,Kie='[data-bs-toggle="offcanvas"]',Wh=class extends ca{constructor(e,t){super(e);this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return VB}static get Default(){return HB}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||xe.trigger(this._element,Uie,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new F0().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($B);let i=()=>{this._config.scroll||this._focustrap.activate(),xe.trigger(this._element,Vie,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||xe.trigger(this._element,zie).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove($B),this._backdrop.hide();let t=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new F0().reset(),xe.trigger(this._element,qB)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(e){return e={...HB,...Br.getDataAttributes(this._element),...typeof e=="object"?e:{}},Wl(VB,e,Bie),e}_initializeBackDrop(){return new oO({className:Wie,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new sO({trapElement:this._element})}_addEventListeners(){xe.on(this._element,$ie,e=>{this._config.keyboard&&e.key===Fie&&this.hide()})}static jQueryInterface(e){return this.each(function(){let t=Wh.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}};xe.on(document,Hie,Kie,function(r){let e=Mh(this);if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Cm(this))return;xe.one(e,qB,()=>{Tv(this)&&this.focus()});let t=Dt.findOne(KB);t&&t!==e&&Wh.getInstance(t).hide(),Wh.getOrCreateInstance(e).toggle(this)});xe.on(window,Mie,()=>Dt.find(KB).forEach(r=>Wh.getOrCreateInstance(r).show()));R0(Wh);la(Wh);var qie=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yie=/^aria-[\w-]*$/i,Zie=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Gie=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Xie=(r,e)=>{let t=r.nodeName.toLowerCase();if(e.includes(t))return qie.has(t)?Boolean(Zie.test(r.nodeValue)||Gie.test(r.nodeValue)):!0;let i=e.filter(n=>n instanceof RegExp);for(let n=0,o=i.length;n<o;n++)if(i[n].test(t))return!0;return!1},Qie={"*":["class","dir","id","lang","role",Yie],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function YB(r,e,t){if(!r.length)return r;if(t&&typeof t=="function")return t(r);let n=new window.DOMParser().parseFromString(r,"text/html"),o=[].concat(...n.body.querySelectorAll("*"));for(let s=0,a=o.length;s<a;s++){let l=o[s],c=l.nodeName.toLowerCase();if(!Object.keys(e).includes(c)){l.remove();continue}let d=[].concat(...l.attributes),h=[].concat(e["*"]||[],e[c]||[]);d.forEach(u=>{Xie(u,h)||l.removeAttribute(u.nodeName)})}return n.body.innerHTML}var ZB="tooltip",Jie="bs.tooltip",Vl=`.${Jie}`,ene="bs-tooltip",tne=new Set(["sanitize","allowList","sanitizeFn"]),ine={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},nne={AUTO:"auto",TOP:"top",RIGHT:rs()?"left":"right",BOTTOM:"bottom",LEFT:rs()?"right":"left"},rne={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Qie,popperConfig:null},one={HIDE:`hide${Vl}`,HIDDEN:`hidden${Vl}`,SHOW:`show${Vl}`,SHOWN:`shown${Vl}`,INSERTED:`inserted${Vl}`,CLICK:`click${Vl}`,FOCUSIN:`focusin${Vl}`,FOCUSOUT:`focusout${Vl}`,MOUSEENTER:`mouseenter${Vl}`,MOUSELEAVE:`mouseleave${Vl}`},W0="fade",sne="modal",Fv="show",Bv="show",lO="out",GB=".tooltip-inner",XB=`.${sne}`,QB="hide.bs.modal",Wv="hover",cO="focus",ane="click",lne="manual",Nm=class extends ca{constructor(e,t){if(typeof T0=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e);this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return rne}static get NAME(){return ZB}static get Event(){return one}static get DefaultType(){return ine}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(!!this._isEnabled)if(e){let t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else{if(this.getTipElement().classList.contains(Fv)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),xe.off(this._element.closest(XB),QB,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;let e=xe.trigger(this._element,this.constructor.Event.SHOW),t=X4(this._element),i=t===null?this._element.ownerDocument.documentElement.contains(this._element):t.contains(this._element);if(e.defaultPrevented||!i)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(GB).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);let n=this.getTipElement(),o=Dee(this.constructor.NAME);n.setAttribute("id",o),this._element.setAttribute("aria-describedby",o),this._config.animation&&n.classList.add(W0);let s=typeof this._config.placement=="function"?this._config.placement.call(this,n,this._element):this._config.placement,a=this._getAttachment(s);this._addAttachmentClass(a);let{container:l}=this._config;Nv.set(n,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(n),xe.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=O0(this._element,n,this._getPopperConfig(a)),n.classList.add(Fv);let c=this._resolvePossibleFunction(this._config.customClass);c&&n.classList.add(...c.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(u=>{xe.on(u,"mouseover",N0)});let d=()=>{let u=this._hoverState;this._hoverState=null,xe.trigger(this._element,this.constructor.Event.SHOWN),u===lO&&this._leave(null,this)},h=this.tip.classList.contains(W0);this._queueCallback(d,this.tip,h)}hide(){if(!this._popper)return;let e=this.getTipElement(),t=()=>{this._isWithActiveTrigger()||(this._hoverState!==Bv&&e.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),xe.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(xe.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;e.classList.remove(Fv),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(o=>xe.off(o,"mouseover",N0)),this._activeTrigger[ane]=!1,this._activeTrigger[cO]=!1,this._activeTrigger[Wv]=!1;let n=this.tip.classList.contains(W0);this._queueCallback(t,this.tip,n),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;let e=document.createElement("div");e.innerHTML=this._config.template;let t=e.children[0];return this.setContent(t),t.classList.remove(W0,Fv),this.tip=t,this.tip}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),GB)}_sanitizeAndSetContent(e,t,i){let n=Dt.findOne(i,e);if(!t&&n){n.remove();return}this.setElementContent(n,t)}setElementContent(e,t){if(e!==null){if(ym(t)){t=Fh(t),this._config.html?t.parentNode!==e&&(e.innerHTML="",e.append(t)):e.textContent=t.textContent;return}this._config.html?(this._config.sanitize&&(t=YB(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t}}getTitle(){let e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}updateAttachment(e){return e==="right"?"end":e==="left"?"start":e}_initializeOnDelegatedTarget(e,t){return t||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){let t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:i=>this._handlePopperPlacementChange(i)}],onFirstUpdate:i=>{i.options.placement!==i.placement&&this._handlePopperPlacementChange(i)}};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(e)}`)}_getAttachment(e){return nne[e.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(t=>{if(t==="click")xe.on(this._element,this.constructor.Event.CLICK,this._config.selector,i=>this.toggle(i));else if(t!==lne){let i=t===Wv?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t===Wv?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;xe.on(this._element,i,this._config.selector,o=>this._enter(o)),xe.on(this._element,n,this._config.selector,o=>this._leave(o))}}),this._hideModalHandler=()=>{this._element&&this.hide()},xe.on(this._element.closest(XB),QB,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){let e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");(e||t!=="string")&&(this._element.setAttribute("data-bs-original-title",e||""),e&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){if(t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger[e.type==="focusin"?cO:Wv]=!0),t.getTipElement().classList.contains(Fv)||t._hoverState===Bv){t._hoverState=Bv;return}if(clearTimeout(t._timeout),t._hoverState=Bv,!t._config.delay||!t._config.delay.show){t.show();return}t._timeout=setTimeout(()=>{t._hoverState===Bv&&t.show()},t._config.delay.show)}_leave(e,t){if(t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger[e.type==="focusout"?cO:Wv]=t._element.contains(e.relatedTarget)),!t._isWithActiveTrigger()){if(clearTimeout(t._timeout),t._hoverState=lO,!t._config.delay||!t._config.delay.hide){t.hide();return}t._timeout=setTimeout(()=>{t._hoverState===lO&&t.hide()},t._config.delay.hide)}}_isWithActiveTrigger(){for(let e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){let t=Br.getDataAttributes(this._element);return Object.keys(t).forEach(i=>{tne.has(i)&&delete t[i]}),e={...this.constructor.Default,...t,...typeof e=="object"&&e?e:{}},e.container=e.container===!1?document.body:Fh(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),Wl(ZB,e,this.constructor.DefaultType),e.sanitize&&(e.template=YB(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){let e={};for(let t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){let e=this.getTipElement(),t=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),i=e.getAttribute("class").match(t);i!==null&&i.length>0&&i.map(n=>n.trim()).forEach(n=>e.classList.remove(n))}_getBasicClassPrefix(){return ene}_handlePopperPlacementChange(e){let{state:t}=e;!t||(this.tip=t.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(t.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each(function(){let t=Nm.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()}})}};la(Nm);var cne="popover",dne="bs.popover",zl=`.${dne}`,hne="bs-popover",une={...Nm.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},mne={...Nm.DefaultType,content:"(string|element|function)"},fne={HIDE:`hide${zl}`,HIDDEN:`hidden${zl}`,SHOW:`show${zl}`,SHOWN:`shown${zl}`,INSERTED:`inserted${zl}`,CLICK:`click${zl}`,FOCUSIN:`focusin${zl}`,FOCUSOUT:`focusout${zl}`,MOUSEENTER:`mouseenter${zl}`,MOUSELEAVE:`mouseleave${zl}`},gne=".popover-header",pne=".popover-body",U0=class extends Nm{static get Default(){return une}static get NAME(){return cne}static get Event(){return fne}static get DefaultType(){return mne}isWithContent(){return this.getTitle()||this._getContent()}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),gne),this._sanitizeAndSetContent(e,this._getContent(),pne)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return hne}static jQueryInterface(e){return this.each(function(){let t=U0.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()}})}};la(U0);var JB="scrollspy",_ne="bs.scrollspy",V0=`.${_ne}`,bne=".data-api",e5={offset:10,method:"auto",target:""},vne={offset:"number",method:"string",target:"(string|element)"},wne=`activate${V0}`,yne=`scroll${V0}`,Cne=`load${V0}${bne}`,t5="dropdown-item",mp="active",Sne='[data-bs-spy="scroll"]',xne=".nav, .list-group",dO=".nav-link",Ene=".nav-item",i5=".list-group-item",hO=`${dO}, ${i5}, .${t5}`,Dne=".dropdown",Lne=".dropdown-toggle",kne="offset",n5="position",Uv=class extends ca{constructor(e,t){super(e);this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(t),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,xe.on(this._scrollElement,yne,()=>this._process()),this.refresh(),this._process()}static get Default(){return e5}static get NAME(){return JB}refresh(){let e=this._scrollElement===this._scrollElement.window?kne:n5,t=this._config.method==="auto"?e:this._config.method,i=t===n5?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Dt.find(hO,this._config.target).map(o=>{let s=YI(o),a=s?Dt.findOne(s):null;if(a){let l=a.getBoundingClientRect();if(l.width||l.height)return[Br[t](a).top+i,s]}return null}).filter(o=>o).sort((o,s)=>o[0]-s[0]).forEach(o=>{this._offsets.push(o[0]),this._targets.push(o[1])})}dispose(){xe.off(this._scrollElement,V0),super.dispose()}_getConfig(e){return e={...e5,...Br.getDataAttributes(this._element),...typeof e=="object"&&e?e:{}},e.target=Fh(e.target)||document.documentElement,Wl(JB,e,vne),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){let e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),i=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=i){let n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n);return}if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let n=this._offsets.length;n--;)this._activeTarget!==this._targets[n]&&e>=this._offsets[n]&&(typeof this._offsets[n+1]=="undefined"||e<this._offsets[n+1])&&this._activate(this._targets[n])}_activate(e){this._activeTarget=e,this._clear();let t=hO.split(",").map(n=>`${n}[data-bs-target="${e}"],${n}[href="${e}"]`),i=Dt.findOne(t.join(","),this._config.target);i.classList.add(mp),i.classList.contains(t5)?Dt.findOne(Lne,i.closest(Dne)).classList.add(mp):Dt.parents(i,xne).forEach(n=>{Dt.prev(n,`${dO}, ${i5}`).forEach(o=>o.classList.add(mp)),Dt.prev(n,Ene).forEach(o=>{Dt.children(o,dO).forEach(s=>s.classList.add(mp))})}),xe.trigger(this._scrollElement,wne,{relatedTarget:e})}_clear(){Dt.find(hO,this._config.target).filter(e=>e.classList.contains(mp)).forEach(e=>e.classList.remove(mp))}static jQueryInterface(e){return this.each(function(){let t=Uv.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()}})}};xe.on(window,Cne,()=>{Dt.find(Sne).forEach(r=>new Uv(r))});la(Uv);var Ine="tab",One="bs.tab",Vv=`.${One}`,Tne=".data-api",Nne=`hide${Vv}`,Rne=`hidden${Vv}`,Pne=`show${Vv}`,Ane=`shown${Vv}`,jne=`click${Vv}${Tne}`,Mne="dropdown-menu",zv="active",r5="fade",o5="show",Fne=".dropdown",Bne=".nav, .list-group",s5=".active",a5=":scope > li > .active",Wne='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Une=".dropdown-toggle",Vne=":scope > .dropdown-menu .active",Hv=class extends ca{static get NAME(){return Ine}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(zv))return;let e,t=Mh(this._element),i=this._element.closest(Bne);if(i){let a=i.nodeName==="UL"||i.nodeName==="OL"?a5:s5;e=Dt.find(a,i),e=e[e.length-1]}let n=e?xe.trigger(e,Nne,{relatedTarget:this._element}):null;if(xe.trigger(this._element,Pne,{relatedTarget:e}).defaultPrevented||n!==null&&n.defaultPrevented)return;this._activate(this._element,i);let s=()=>{xe.trigger(e,Rne,{relatedTarget:this._element}),xe.trigger(this._element,Ane,{relatedTarget:e})};t?this._activate(t,t.parentNode,s):s()}_activate(e,t,i){let o=(t&&(t.nodeName==="UL"||t.nodeName==="OL")?Dt.find(a5,t):Dt.children(t,s5))[0],s=i&&o&&o.classList.contains(r5),a=()=>this._transitionComplete(e,o,i);o&&s?(o.classList.remove(o5),this._queueCallback(a,e,!0)):a()}_transitionComplete(e,t,i){if(t){t.classList.remove(zv);let o=Dt.findOne(Vne,t.parentNode);o&&o.classList.remove(zv),t.getAttribute("role")==="tab"&&t.setAttribute("aria-selected",!1)}e.classList.add(zv),e.getAttribute("role")==="tab"&&e.setAttribute("aria-selected",!0),dp(e),e.classList.contains(r5)&&e.classList.add(o5);let n=e.parentNode;if(n&&n.nodeName==="LI"&&(n=n.parentNode),n&&n.classList.contains(Mne)){let o=e.closest(Fne);o&&Dt.find(Une,o).forEach(s=>s.classList.add(zv)),e.setAttribute("aria-expanded",!0)}i&&i()}static jQueryInterface(e){return this.each(function(){let t=Hv.getOrCreateInstance(this);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e]()}})}};xe.on(document,jne,Wne,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Cm(this))return;Hv.getOrCreateInstance(this).show()});la(Hv);var l5="toast",zne="bs.toast",Uh=`.${zne}`,Hne=`mouseover${Uh}`,$ne=`mouseout${Uh}`,Kne=`focusin${Uh}`,qne=`focusout${Uh}`,Yne=`hide${Uh}`,Zne=`hidden${Uh}`,Gne=`show${Uh}`,Xne=`shown${Uh}`,Qne="fade",c5="hide",$v="show",z0="showing",Jne={animation:"boolean",autohide:"boolean",delay:"number"},d5={animation:!0,autohide:!0,delay:5e3},Kv=class extends ca{constructor(e,t){super(e);this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Jne}static get Default(){return d5}static get NAME(){return l5}show(){if(xe.trigger(this._element,Gne).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Qne);let t=()=>{this._element.classList.remove(z0),xe.trigger(this._element,Xne),this._maybeScheduleHide()};this._element.classList.remove(c5),dp(this._element),this._element.classList.add($v),this._element.classList.add(z0),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this._element.classList.contains($v)||xe.trigger(this._element,Yne).defaultPrevented)return;let t=()=>{this._element.classList.add(c5),this._element.classList.remove(z0),this._element.classList.remove($v),xe.trigger(this._element,Zne)};this._element.classList.add(z0),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains($v)&&this._element.classList.remove($v),super.dispose()}_getConfig(e){return e={...d5,...Br.getDataAttributes(this._element),...typeof e=="object"&&e?e:{}},Wl(l5,e,this.constructor.DefaultType),e}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t){this._clearTimeout();return}let i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){xe.on(this._element,Hne,e=>this._onInteraction(e,!0)),xe.on(this._element,$ne,e=>this._onInteraction(e,!1)),xe.on(this._element,Kne,e=>this._onInteraction(e,!0)),xe.on(this._element,qne,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){let t=Kv.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]=="undefined")throw new TypeError(`No method named "${e}"`);t[e](this)}})}};R0(Kv);la(Kv);function ere(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(i,n){let o=n[0];return typeof e[o]!="undefined"?e[o]:i}),t}function g(r,e,...t){return ere(e,t)}var uO,H0="en",qv=!1,Yv=!1,Zv=!1,tre=!1,h5=!1,u5=!1,mO=!1,$0,fO=H0,ire,Vh,ei=typeof self=="object"?self:typeof global=="object"?global:{},xr;typeof ei.vscode!="undefined"&&typeof ei.vscode.process!="undefined"?xr=ei.vscode.process:typeof process!="undefined"&&(xr=process);var nre=typeof((uO=xr==null?void 0:xr.versions)===null||uO===void 0?void 0:uO.electron)=="string"&&xr.type==="renderer";if(typeof navigator=="object"&&!nre)Vh=navigator.userAgent,qv=Vh.indexOf("Windows")>=0,Yv=Vh.indexOf("Macintosh")>=0,mO=(Vh.indexOf("Macintosh")>=0||Vh.indexOf("iPad")>=0||Vh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Zv=Vh.indexOf("Linux")>=0,u5=!0,$0=navigator.language,fO=$0;else if(typeof xr=="object"){qv=xr.platform==="win32",Yv=xr.platform==="darwin",Zv=xr.platform==="linux",tre=Zv&&!!xr.env.SNAP&&!!xr.env.SNAP_REVISION,$0=H0,fO=H0;let r=xr.env.VSCODE_NLS_CONFIG;if(r)try{let e=JSON.parse(r),t=e.availableLanguages["*"];$0=e.locale,fO=t||H0,ire=e._translationsConfigFile}catch{}h5=!0}else console.error("Unable to resolve platform.");var gO=0;Yv?gO=1:qv?gO=3:Zv&&(gO=2);var bi=qv,We=Yv,ji=Zv,so=h5,Ya=u5,To=mO,m5=Vh,Gv=function(){if(ei.setImmediate)return ei.setImmediate.bind(ei);if(typeof ei.postMessage=="function"&&!ei.importScripts){let t=[];ei.addEventListener("message",n=>{if(n.data&&n.data.vscodeSetImmediateId)for(let o=0,s=t.length;o<s;o++){let a=t[o];if(a.id===n.data.vscodeSetImmediateId){t.splice(o,1),a.callback();return}}});let i=0;return n=>{let o=++i;t.push({id:o,callback:n}),ei.postMessage({vscodeSetImmediateId:o},"*")}}if(typeof(xr==null?void 0:xr.nextTick)=="function")return xr.nextTick.bind(xr);let e=Promise.resolve();return t=>e.then(t)}(),Wr=Yv||mO?2:qv?1:3,f5=!0,g5=!1;function K0(){if(!g5){g5=!0;let r=new Uint8Array(2);r[0]=1,r[1]=2,f5=new Uint16Array(r.buffer)[0]===(2<<8)+1}return f5}var pO="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function rre(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of pO)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var _O=rre();function fp(r){let e=_O;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}var ore={maxLen:1e3,windowSize:15,timeBudget:150};function gp(r,e,t,i,n=ore){if(t.length>n.maxLen){let c=r-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,r+n.maxLen/2),gp(r,e,t,i,n)}let o=Date.now(),s=r-1-i,a=-1,l=null;for(let c=1;!(Date.now()-o>=n.timeBudget);c++){let d=s-n.windowSize*c;e.lastIndex=Math.max(0,d);let h=sre(e,t,s,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){let c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function sre(r,e,t,i){let n;for(;n=r.exec(e);){let o=n.index||0;if(o<=t&&r.lastIndex>=t)return n;if(i>0&&o>i)return null}return null}var sd=8,Xv=class{constructor(e){this._values=e}hasChanged(e){return this._values[e]}},bO=class{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},q0=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},vn=class{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}compute(e,t,i){return i}},Rm=class{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}},zh=class{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}validate(e){return typeof e=="undefined"?this.defaultValue:e}compute(e,t,i){return i}};function je(r,e){return typeof r=="undefined"?e:r==="false"?!1:Boolean(r)}var wt=class extends zh{constructor(e,t,i,n=void 0){typeof n!="undefined"&&(n.type="boolean",n.default=i);super(e,t,i,n)}validate(e){return je(e,this.defaultValue)}};function Y0(r,e,t,i){if(typeof r=="undefined")return e;let n=parseInt(r,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}var vi=class extends zh{constructor(e,t,i,n,o,s=void 0){typeof s!="undefined"&&(s.type="integer",s.default=i,s.minimum=n,s.maximum=o);super(e,t,i,s);this.minimum=n,this.maximum=o}static clampedInt(e,t,i,n){return Y0(e,t,i,n)}validate(e){return vi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}},Za=class extends zh{constructor(e,t,i,n,o){typeof o!="undefined"&&(o.type="number",o.default=i);super(e,t,i,o);this.validationFn=n}static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e=="undefined")return t;let i=parseFloat(e);return isNaN(i)?t:i}validate(e){return this.validationFn(Za.float(e,this.defaultValue))}},ao=class extends zh{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n!="undefined"&&(n.type="string",n.default=i);super(e,t,i,n)}validate(e){return ao.string(e,this.defaultValue)}};function Ur(r,e,t){return typeof r!="string"||t.indexOf(r)===-1?e:r}var nn=class extends zh{constructor(e,t,i,n,o=void 0){typeof o!="undefined"&&(o.type="string",o.enum=n,o.default=i);super(e,t,i,o);this._allowedValues=n}validate(e){return Ur(e,this.defaultValue,this._allowedValues)}},pp=class extends vn{constructor(e,t,i,n,o,s,a=void 0){typeof a!="undefined"&&(a.type="string",a.enum=o,a.default=n);super(e,t,i,a);this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function are(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var p5=class extends vn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[g("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),g("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),g("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:g("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},_5=class extends vn{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:g("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:g("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:je(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:je(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function lre(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var wn;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(wn||(wn={}));function cre(r){switch(r){case"line":return wn.Line;case"block":return wn.Block;case"underline":return wn.Underline;case"line-thin":return wn.LineThin;case"block-outline":return wn.BlockOutline;case"underline-thin":return wn.UnderlineThin}}var b5=class extends Rm{constructor(){super(126,[65,33])}compute(e,t,i){let n=["monaco-editor"];return t.get(33)&&n.push(t.get(33)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(65)==="default"?n.push("mouse-default"):t.get(65)==="copy"&&n.push("mouse-copy"),t.get(99)&&n.push("showUnused"),t.get(124)&&n.push("showDeprecated"),n.join(" ")}},v5=class extends wt{constructor(){super(32,"emptySelectionClipboard",!0,{description:g("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}},w5=class extends vn{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:g("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[g("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),g("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),g("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:g("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[g("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),g("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),g("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:g("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:g("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:We},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:g("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:g("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:je(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ur(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ur(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:je(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:je(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:je(t.loop,this.defaultValue.loop)}}},Zn=class extends vn{constructor(){super(44,"fontLigatures",Zn.OFF,{anyOf:[{type:"boolean",description:g("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:g("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:g("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e=="undefined"?this.defaultValue:typeof e=="string"?e==="false"?Zn.OFF:e==="true"?Zn.ON:e:Boolean(e)?Zn.ON:Zn.OFF}};Zn.OFF='"liga" off, "calt" off';Zn.ON='"liga" on, "calt" on';var y5=class extends Rm{constructor(){super(43)}compute(e,t,i){return e.fontInfo}},C5=class extends zh{constructor(){super(45,"fontSize",Qi.fontSize,{type:"number",minimum:6,maximum:100,default:Qi.fontSize,description:g("fontSize","Controls the font size in pixels.")})}validate(e){let t=Za.float(e,this.defaultValue);return t===0?Qi.fontSize:Za.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},Ga=class extends vn{constructor(){super(46,"fontWeight",Qi.fontWeight,{anyOf:[{type:"number",minimum:Ga.MINIMUM_VALUE,maximum:Ga.MAXIMUM_VALUE,errorMessage:g("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Ga.SUGGESTION_VALUES}],default:Qi.fontWeight,description:g("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(vi.clampedInt(e,Qi.fontWeight,Ga.MINIMUM_VALUE,Ga.MAXIMUM_VALUE))}};Ga.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Ga.MINIMUM_VALUE=1;Ga.MAXIMUM_VALUE=1e3;var S5=class extends vn{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[g("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),g("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),g("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:g("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:g("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:g("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:g("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:g("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:g("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:g("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:g("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:g("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:g("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:g("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,n,o,s;if(!e||typeof e!="object")return this.defaultValue;let a=e;return{multiple:Ur(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Ur(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:Ur(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(n=a.multipleDeclarations)!==null&&n!==void 0?n:Ur(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Ur(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(s=a.multipleReferences)!==null&&s!==void 0?s:Ur(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ao.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ao.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ao.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ao.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ao.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}},x5=class extends vn{constructor(){let e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:g("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:g("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:g("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:g("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:je(t.enabled,this.defaultValue.enabled),delay:vi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:je(t.sticky,this.defaultValue.sticky),above:je(t.above,this.defaultValue.above)}}},Hh=class extends Rm{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(e,t,i){return Hh.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,i=e.scrollBeyondLastLine?t-1:0,n=(e.viewLineCount+i)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/n);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:i,desiredRatio:n,minimapLineCount:o}}static _computeMinimapLayout(e,t){let i=e.outerWidth,n=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters,u=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale,m=e.minimap.maxColumn,p=e.minimap.size,_=e.minimap.side,v=e.verticalScrollbarWidth,C=e.viewLineCount,w=e.remainingWidth,S=e.isViewportWrapping,D=h?2:3,I=Math.floor(o*n),A=I/o,O=!1,N=!1,F=D*u,Y=u/o,K=1;if(p==="fill"||p==="fit"){let{typicalViewportLineCount:Fe,extraLinesBeyondLastLine:ue,desiredRatio:ni,minimapLineCount:Xt}=Hh.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:d,height:n,lineHeight:l,pixelRatio:o});if(C/Xt>1)O=!0,N=!0,u=1,F=1,Y=u/o;else{let ri=!1,pt=u+1;if(p==="fit"){let Ai=Math.ceil((C+ue)*F);S&&a&&w<=t.stableFitRemainingWidth?(ri=!0,pt=t.stableFitMaxMinimapScale):ri=Ai>I}if(p==="fill"||ri){O=!0;let Ai=u;F=Math.min(l*o,Math.max(1,Math.floor(1/ni))),S&&a&&w<=t.stableFitRemainingWidth&&(pt=t.stableFitMaxMinimapScale),u=Math.min(pt,Math.max(1,Math.floor(F/D))),u>Ai&&(K=Math.min(2,u/Ai)),Y=u/o/K,I=Math.ceil(Math.max(Fe,C+ue)*F),S?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=u):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let ee=Math.floor(m*Y),ie=Math.min(ee,Math.max(0,Math.floor((w-v-2)*Y/(c+Y)))+sd),Ee=Math.floor(o*ie),Le=Ee/o;Ee=Math.floor(Ee*K);let Te=h?1:2,Ne=_==="left"?0:i-ie-v;return{renderMinimap:Te,minimapLeft:Ne,minimapWidth:ie,minimapHeightIsEditorHeight:O,minimapIsSampling:N,minimapScale:u,minimapLineHeight:F,minimapCanvasInnerWidth:Ee,minimapCanvasInnerHeight:I,minimapCanvasOuterWidth:Le,minimapCanvasOuterHeight:A}}static computeLayout(e,t){let i=t.outerWidth|0,n=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(121),u=h==="inherit"?e.get(120):h,m=u==="inherit"?e.get(116):u,p=e.get(119),_=e.get(2),v=t.isDominatedByLongLines,C=e.get(49),w=e.get(59).renderType!==0,S=e.get(60),D=e.get(93),I=e.get(64),A=e.get(91),O=A.verticalScrollbarSize,N=A.verticalHasArrows,F=A.arrowSize,Y=A.horizontalScrollbarSize,K=e.get(57),ee=e.get(37),ie;if(typeof K=="string"&&/^\d+(\.\d+)?ch$/.test(K)){let dn=parseFloat(K.substr(0,K.length-2));ie=vi.clampedInt(dn*a,0,0,1e3)}else ie=vi.clampedInt(K,0,0,1e3);ee&&(ie+=16);let Ee=0;if(w){let dn=Math.max(s,S);Ee=Math.round(dn*l)}let Le=0;C&&(Le=o);let Te=0,Ne=Te+Le,Fe=Ne+Ee,ue=Fe+ie,ni=i-Le-Ee-ie,Xt=!1,zt=!1,ri=-1;_!==2&&(u==="inherit"&&v?(Xt=!0,zt=!0):m==="on"||m==="bounded"?zt=!0:m==="wordWrapColumn"&&(ri=p));let pt=Hh._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:D,minimap:I,verticalScrollbarWidth:O,viewLineCount:d,remainingWidth:ni,isViewportWrapping:zt},t.memory||new q0);pt.renderMinimap!==0&&pt.minimapLeft===0&&(Te+=pt.minimapWidth,Ne+=pt.minimapWidth,Fe+=pt.minimapWidth,ue+=pt.minimapWidth);let Ai=ni-pt.minimapWidth,qn=Math.max(1,Math.floor((Ai-O-2)/a)),jr=N?F:0;return zt&&(ri=Math.max(1,qn),m==="bounded"&&(ri=Math.min(ri,p))),{width:i,height:n,glyphMarginLeft:Te,glyphMarginWidth:Le,lineNumbersLeft:Ne,lineNumbersWidth:Ee,decorationsLeft:Fe,decorationsWidth:ie,contentLeft:ue,contentWidth:Ai,minimap:pt,viewportColumn:qn,isWordWrapMinified:Xt,isViewportWrapping:zt,wrappingColumn:ri,verticalScrollbarWidth:O,horizontalScrollbarHeight:Y,overviewRuler:{top:jr,width:O,height:n-2*jr,right:0}}}},E5=class extends vn{constructor(){let e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:g("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:je(e.enabled,this.defaultValue.enabled)}}},D5=class extends vn{constructor(){let e={enabled:!0,fontSize:0,fontFamily:""};super(125,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:g("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:g("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:g("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:je(t.enabled,this.defaultValue.enabled),fontSize:vi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ao.string(t.fontFamily,this.defaultValue.fontFamily)}}},L5=class extends Za{constructor(){super(58,"lineHeight",Qi.lineHeight,e=>Za.clamp(e,0,150),{markdownDescription:g("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}},k5=class extends vn{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:g("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[g("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),g("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),g("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:g("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:g("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:g("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:g("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:g("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:g("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:je(t.enabled,this.defaultValue.enabled),size:Ur(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ur(t.side,this.defaultValue.side,["right","left"]),showSlider:Ur(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:je(t.renderCharacters,this.defaultValue.renderCharacters),scale:vi.clampedInt(t.scale,1,1,3),maxColumn:vi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}};function dre(r){return r==="ctrlCmd"?We?"metaKey":"ctrlKey":"altKey"}var I5=class extends vn{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:g("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:g("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:vi.clampedInt(t.top,0,0,1e3),bottom:vi.clampedInt(t.bottom,0,0,1e3)}}},O5=class extends vn{constructor(){let e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:g("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:g("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:je(t.enabled,this.defaultValue.enabled),cycle:je(t.cycle,this.defaultValue.cycle)}}},T5=class extends Rm{constructor(){super(127)}compute(e,t,i){return e.pixelRatio}},N5=class extends vn{constructor(){let e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:g("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:g("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:g("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:g("quickSuggestions","Controls whether suggestions should automatically show up while typing.")});this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){let t=e,i={other:je(t.other,this.defaultValue.other),comments:je(t.comments,this.defaultValue.comments),strings:je(t.strings,this.defaultValue.strings)};return i.other&&i.comments&&i.strings?!0:!i.other&&!i.comments&&!i.strings?!1:i}return this.defaultValue}},R5=class extends vn{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[g("lineNumbers.off","Line numbers are not rendered."),g("lineNumbers.on","Line numbers are rendered as absolute number."),g("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),g("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:g("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e!="undefined"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}};function _p(r){let e=r.get(86);return e==="editable"?r.get(80):e!=="on"}var P5=class extends vn{constructor(){let e=[],t={type:"number",description:g("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:g("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:g("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let i of e)if(typeof i=="number")t.push({column:vi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){let n=i;t.push({column:vi.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}};function A5(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}var j5=class extends vn{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[g("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),g("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),g("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:g("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[g("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),g("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),g("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:g("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:g("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:g("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:g("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,i=vi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=vi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:vi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:A5(t.vertical,this.defaultValue.vertical),horizontal:A5(t.horizontal,this.defaultValue.horizontal),useShadows:je(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:je(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:je(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:je(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:je(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:vi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:vi.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:je(t.scrollByPage,this.defaultValue.scrollByPage)}}},M5=class extends vn{constructor(){let e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:g("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:je(t.enabled,this.defaultValue.enabled),mode:Ur(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}},F5=class extends vn{constructor(){let e={enabled:Bn.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:g("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:je(e.enabled,this.defaultValue.enabled)}}},B5=class extends vn{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[g("editor.guides.bracketPairs.true","Enables bracket pair guides."),g("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),g("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:g("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[g("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),g("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),g("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:g("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:g("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:g("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:g("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:W5(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:W5(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:je(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:je(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:je(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}};function W5(r,e,t){let i=t.indexOf(r);return i===-1?e:t[i]}var U5=class extends vn{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[g("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),g("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:g("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:g("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:g("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:g("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:g("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:g("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:g("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:g("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:g("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:g("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:g("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:g("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:Ur(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:je(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:je(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:je(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:je(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:je(t.showIcons,this.defaultValue.showIcons),showStatusBar:je(t.showStatusBar,this.defaultValue.showStatusBar),preview:je(t.preview,this.defaultValue.preview),previewMode:Ur(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:je(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:je(t.showMethods,this.defaultValue.showMethods),showFunctions:je(t.showFunctions,this.defaultValue.showFunctions),showConstructors:je(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:je(t.showDeprecated,this.defaultValue.showDeprecated),showFields:je(t.showFields,this.defaultValue.showFields),showVariables:je(t.showVariables,this.defaultValue.showVariables),showClasses:je(t.showClasses,this.defaultValue.showClasses),showStructs:je(t.showStructs,this.defaultValue.showStructs),showInterfaces:je(t.showInterfaces,this.defaultValue.showInterfaces),showModules:je(t.showModules,this.defaultValue.showModules),showProperties:je(t.showProperties,this.defaultValue.showProperties),showEvents:je(t.showEvents,this.defaultValue.showEvents),showOperators:je(t.showOperators,this.defaultValue.showOperators),showUnits:je(t.showUnits,this.defaultValue.showUnits),showValues:je(t.showValues,this.defaultValue.showValues),showConstants:je(t.showConstants,this.defaultValue.showConstants),showEnums:je(t.showEnums,this.defaultValue.showEnums),showEnumMembers:je(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:je(t.showKeywords,this.defaultValue.showKeywords),showWords:je(t.showWords,this.defaultValue.showWords),showColors:je(t.showColors,this.defaultValue.showColors),showFiles:je(t.showFiles,this.defaultValue.showFiles),showReferences:je(t.showReferences,this.defaultValue.showReferences),showFolders:je(t.showFolders,this.defaultValue.showFolders),showTypeParameters:je(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:je(t.showSnippets,this.defaultValue.showSnippets),showUsers:je(t.showUsers,this.defaultValue.showUsers),showIssues:je(t.showIssues,this.defaultValue.showIssues)}}},V5=class extends vn{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:g("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:je(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}},z5=class extends Rm{constructor(){super(128,[80])}compute(e,t,i){return t.get(80)?!0:e.tabFocusMode}};function hre(r){switch(r){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}var H5=class extends Rm{constructor(){super(130,[129])}compute(e,t,i){let n=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}},ure="Consolas, 'Courier New', monospace",mre="Menlo, Monaco, 'Courier New', monospace",fre="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",Qi={fontFamily:We?mre:ji?fre:ure,fontWeight:"normal",fontSize:We?12:14,lineHeight:0,letterSpacing:0},Bn={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},Pm=[];function me(r){return Pm[r.id]=r,r}var lo={acceptSuggestionOnCommitCharacter:me(new wt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:g("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:me(new nn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",g("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:g("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:me(new p5),accessibilityPageSize:me(new vi(3,"accessibilityPageSize",10,1,1073741824,{description:g("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:me(new ao(4,"ariaLabel",g("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:me(new nn(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",g("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),g("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:g("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:me(new nn(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",g("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:g("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:me(new nn(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",g("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:g("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:me(new nn(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",g("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),g("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:g("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:me(new pp(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],are,{enumDescriptions:[g("editor.autoIndent.none","The editor will not insert indentation automatically."),g("editor.autoIndent.keep","The editor will keep the current line's indentation."),g("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),g("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),g("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:g("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:me(new wt(10,"automaticLayout",!1)),autoSurround:me(new nn(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[g("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),g("editor.autoSurround.quotes","Surround with quotes but not brackets."),g("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:g("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:me(new F5),bracketPairGuides:me(new B5),stickyTabStops:me(new wt(103,"stickyTabStops",!1,{description:g("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:me(new wt(14,"codeLens",!0,{description:g("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:me(new ao(15,"codeLensFontFamily","",{description:g("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:me(new vi(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:g("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:me(new wt(17,"colorDecorators",!0,{description:g("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:me(new wt(18,"columnSelection",!1,{description:g("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:me(new _5),contextmenu:me(new wt(20,"contextmenu",!0)),copyWithSyntaxHighlighting:me(new wt(21,"copyWithSyntaxHighlighting",!0,{description:g("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:me(new pp(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],lre,{description:g("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:me(new wt(23,"cursorSmoothCaretAnimation",!1,{description:g("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:me(new pp(24,"cursorStyle",wn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],cre,{description:g("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:me(new vi(25,"cursorSurroundingLines",0,0,1073741824,{description:g("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:me(new nn(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[g("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),g("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:g("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:me(new vi(27,"cursorWidth",0,0,1073741824,{markdownDescription:g("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:me(new wt(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:me(new wt(29,"disableMonospaceOptimizations",!1)),domReadOnly:me(new wt(30,"domReadOnly",!1)),dragAndDrop:me(new wt(31,"dragAndDrop",!0,{description:g("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:me(new v5),extraEditorClassName:me(new ao(33,"extraEditorClassName","")),fastScrollSensitivity:me(new Za(34,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:g("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:me(new w5),fixedOverflowWidgets:me(new wt(36,"fixedOverflowWidgets",!1)),folding:me(new wt(37,"folding",!0,{description:g("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:me(new nn(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[g("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),g("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:g("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:me(new wt(39,"foldingHighlight",!0,{description:g("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:me(new wt(40,"foldingImportsByDefault",!1,{description:g("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:me(new wt(41,"unfoldOnClickAfterEndOfLine",!1,{description:g("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:me(new ao(42,"fontFamily",Qi.fontFamily,{description:g("fontFamily","Controls the font family.")})),fontInfo:me(new y5),fontLigatures2:me(new Zn),fontSize:me(new C5),fontWeight:me(new Ga),formatOnPaste:me(new wt(47,"formatOnPaste",!1,{description:g("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:me(new wt(48,"formatOnType",!1,{description:g("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:me(new wt(49,"glyphMargin",!0,{description:g("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:me(new S5),hideCursorInOverviewRuler:me(new wt(51,"hideCursorInOverviewRuler",!1,{description:g("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:me(new x5),inDiffEditor:me(new wt(53,"inDiffEditor",!1)),letterSpacing:me(new Za(55,"letterSpacing",Qi.letterSpacing,r=>Za.clamp(r,-5,20),{description:g("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:me(new E5),lineDecorationsWidth:me(new zh(57,"lineDecorationsWidth",10)),lineHeight:me(new L5),lineNumbers:me(new R5),lineNumbersMinChars:me(new vi(60,"lineNumbersMinChars",5,1,300)),linkedEditing:me(new wt(61,"linkedEditing",!1,{description:g("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:me(new wt(62,"links",!0,{description:g("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:me(new nn(63,"matchBrackets","always",["always","near","never"],{description:g("matchBrackets","Highlight matching brackets.")})),minimap:me(new k5),mouseStyle:me(new nn(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:me(new Za(66,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:g("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:me(new wt(67,"mouseWheelZoom",!1,{markdownDescription:g("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:me(new wt(68,"multiCursorMergeOverlapping",!0,{description:g("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:me(new pp(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],dre,{markdownEnumDescriptions:[g("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),g("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:g({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:me(new nn(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[g("multiCursorPaste.spread","Each cursor pastes a single line of the text."),g("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:g("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:me(new wt(71,"occurrencesHighlight",!0,{description:g("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:me(new wt(72,"overviewRulerBorder",!0,{description:g("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:me(new vi(73,"overviewRulerLanes",3,0,3)),padding:me(new I5),parameterHints:me(new O5),peekWidgetDefaultFocus:me(new nn(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[g("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),g("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:g("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:me(new wt(77,"definitionLinkOpensInPeek",!1,{description:g("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:me(new N5),quickSuggestionsDelay:me(new vi(79,"quickSuggestionsDelay",10,0,1073741824,{description:g("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:me(new wt(80,"readOnly",!1)),renameOnType:me(new wt(81,"renameOnType",!1,{description:g("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:g("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:me(new wt(82,"renderControlCharacters",!0,{description:g("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:me(new wt(83,"renderFinalNewline",!0,{description:g("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:me(new nn(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",g("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:g("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:me(new wt(85,"renderLineHighlightOnlyWhenFocus",!1,{description:g("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:me(new nn(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:me(new nn(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",g("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),g("renderWhitespace.selection","Render whitespace characters only on selected text."),g("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:g("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:me(new vi(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:me(new wt(89,"roundedSelection",!0,{description:g("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:me(new P5),scrollbar:me(new j5),scrollBeyondLastColumn:me(new vi(92,"scrollBeyondLastColumn",5,0,1073741824,{description:g("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:me(new wt(93,"scrollBeyondLastLine",!0,{description:g("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:me(new wt(94,"scrollPredominantAxis",!0,{description:g("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:me(new wt(95,"selectionClipboard",!0,{description:g("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ji})),selectionHighlight:me(new wt(96,"selectionHighlight",!0,{description:g("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:me(new wt(97,"selectOnLineNumbers",!0)),showFoldingControls:me(new nn(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[g("showFoldingControls.always","Always show the folding controls."),g("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:g("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:me(new wt(99,"showUnused",!0,{description:g("showUnused","Controls fading out of unused code.")})),showDeprecated:me(new wt(124,"showDeprecated",!0,{description:g("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:me(new D5),snippetSuggestions:me(new nn(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[g("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),g("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),g("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),g("snippetSuggestions.none","Do not show snippet suggestions.")],description:g("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:me(new V5),smoothScrolling:me(new wt(102,"smoothScrolling",!1,{description:g("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:me(new vi(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:me(new U5),inlineSuggest:me(new M5),suggestFontSize:me(new vi(106,"suggestFontSize",0,0,1e3,{markdownDescription:g("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:me(new vi(107,"suggestLineHeight",0,0,1e3,{markdownDescription:g("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:me(new wt(108,"suggestOnTriggerCharacters",!0,{description:g("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:me(new nn(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[g("suggestSelection.first","Always select the first suggestion."),g("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),g("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:g("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:me(new nn(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[g("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),g("tabCompletion.off","Disable tab completions."),g("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:g("tabCompletion","Enables tab completions.")})),tabIndex:me(new vi(111,"tabIndex",0,-1,1073741824)),unusualLineTerminators:me(new nn(112,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[g("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),g("unusualLineTerminators.off","Unusual line terminators are ignored."),g("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:g("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:me(new wt(113,"useShadowDOM",!0)),useTabStops:me(new wt(114,"useTabStops",!0,{description:g("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:me(new ao(115,"wordSeparators",pO,{description:g("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:me(new nn(116,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[g("wordWrap.off","Lines will never wrap."),g("wordWrap.on","Lines will wrap at the viewport width."),g({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),g({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:g({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:me(new ao(117,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:me(new ao(118,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:me(new vi(119,"wordWrapColumn",80,1,1073741824,{markdownDescription:g({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:me(new nn(120,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:me(new nn(121,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:me(new pp(122,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],hre,{enumDescriptions:[g("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),g("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),g("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),g("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:g("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:me(new nn(123,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[g("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),g("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:g("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:me(new b5),pixelRatio:me(new T5),tabFocusMode:me(new z5),layoutInfo:me(new Hh),wrappingInfo:me(new H5)};var $5=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},K5=new $5;function we(r){co(r)||K5.onUnexpectedError(r)}function Qt(r){co(r)||K5.onUnexpectedExternalError(r)}function vO(r){if(r instanceof Error){let{name:e,message:t}=r,i=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:i}}return r}var wO="Canceled";function co(r){return r instanceof Error&&r.name===wO&&r.message===wO}function Hl(){let r=new Error(wO);return r.name=r.message,r}function Vr(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function q5(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}var yO=class extends Error{constructor(e){super("NotSupported");e&&(this.message=e)}};function os(r){let e=this,t=!1,i;return function(){return t||(t=!0,i=r.apply(e,arguments)),i}}var ot;(function(r){function e(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}r.is=e;let t=Object.freeze([]);function i(){return t}r.empty=i;function*n(w){yield w}r.single=n;function o(w){return w||t}r.from=o;function s(w){return!w||w[Symbol.iterator]().next().done===!0}r.isEmpty=s;function a(w){return w[Symbol.iterator]().next().value}r.first=a;function l(w,S){for(let D of w)if(S(D))return!0;return!1}r.some=l;function c(w,S){for(let D of w)if(S(D))return D}r.find=c;function*d(w,S){for(let D of w)S(D)&&(yield D)}r.filter=d;function*h(w,S){let D=0;for(let I of w)yield S(I,D++)}r.map=h;function*u(...w){for(let S of w)for(let D of S)yield D}r.concat=u;function*m(w){for(let S of w)for(let D of S)yield D}r.concatNested=m;function p(w,S,D){let I=D;for(let A of w)I=S(I,A);return I}r.reduce=p;function*_(w,S,D=w.length){for(S<0&&(S+=w.length),D<0?D+=w.length:D>w.length&&(D=w.length);S<D;S++)yield w[S]}r.slice=_;function v(w,S=Number.POSITIVE_INFINITY){let D=[];if(S===0)return[D,w];let I=w[Symbol.iterator]();for(let A=0;A<S;A++){let O=I.next();if(O.done)return[D,r.empty()];D.push(O.value)}return[D,{[Symbol.iterator](){return I}}]}r.consume=v;function C(w,S,D=(I,A)=>I===A){let I=w[Symbol.iterator](),A=S[Symbol.iterator]();for(;;){let O=I.next(),N=A.next();if(O.done!==N.done)return!1;if(O.done)return!0;if(!D(O.value,N.value))return!1}}r.equals=C})(ot||(ot={}));var gre=!1,No=null;function pre(r){No=r}if(gre){let r="__is_disposable_tracked__";pre(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[r]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==H.None)try{e[r]=!0}catch{}}markAsDisposed(e){if(e&&e!==H.None)try{e[r]=!0}catch{}}markAsSingleton(e){}})}function Z0(r){return No==null||No.trackDisposable(r),r}function G0(r){No==null||No.markAsDisposed(r)}function X0(r,e){No==null||No.setParent(r,e)}function _re(r,e){if(!!No)for(let t of r)No.setParent(t,e)}function Y5(r){return No==null||No.markAsSingleton(r),r}var Z5=class extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`);this.errors=e}};function bp(r){return typeof r.dispose=="function"&&r.dispose.length===0}function Ge(r){if(ot.is(r)){let e=[];for(let t of r)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new Z5(e);return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function Os(...r){let e=Re(()=>Ge(r));return _re(r,e),e}function Re(r){let e=Z0({dispose:os(()=>{G0(e),r()})});return e}var G=class{constructor(){this._toDispose=new Set,this._isDisposed=!1,Z0(this)}dispose(){this._isDisposed||(G0(this),this._isDisposed=!0,this.clear())}clear(){try{Ge(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return X0(e,this),this._isDisposed?G.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};G.DISABLE_DISPOSED_WARNING=!1;var H=class{constructor(){this._store=new G,Z0(this),X0(this._store,this)}dispose(){G0(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};H.None=Object.freeze({dispose(){}});var Mi=class{constructor(){this._isDisposed=!1,Z0(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),e&&X0(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,G0(this),(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&X0(e,null),e}},CO=class{constructor(e){this.object=e}dispose(){}};var Fi=class{constructor(e){this.element=e,this.next=Fi.Undefined,this.prev=Fi.Undefined}};Fi.Undefined=new Fi(void 0);var yn=class{constructor(){this._first=Fi.Undefined,this._last=Fi.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Fi.Undefined}clear(){let e=this._first;for(;e!==Fi.Undefined;){let t=e.next;e.prev=Fi.Undefined,e.next=Fi.Undefined,e=t}this._first=Fi.Undefined,this._last=Fi.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Fi(e);if(this._first===Fi.Undefined)this._first=i,this._last=i;else if(t){let o=this._last;this._last=i,i.prev=o,o.next=i}else{let o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Fi.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Fi.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Fi.Undefined&&e.next!==Fi.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Fi.Undefined&&e.next===Fi.Undefined?(this._first=Fi.Undefined,this._last=Fi.Undefined):e.next===Fi.Undefined?(this._last=this._last.prev,this._last.next=Fi.Undefined):e.prev===Fi.Undefined&&(this._first=this._first.next,this._first.prev=Fi.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Fi.Undefined;)yield e.element,e=e.next}};var bre=ei.performance&&typeof ei.performance.now=="function",or=class{constructor(e){this._highResolution=bre&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new or(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ei.performance.now():Date.now()}};var ye;(function(r){r.None=()=>H.None;function e(w){return(S,D=null,I)=>{let A=!1,O;return O=w(N=>{if(!A)return O?O.dispose():A=!0,S.call(D,N)},null,I),A&&O.dispose(),O}}r.once=e;function t(w,S){return l((D,I=null,A)=>w(O=>D.call(I,S(O)),null,A))}r.map=t;function i(w,S){return l((D,I=null,A)=>w(O=>{S(O),D.call(I,O)},null,A))}r.forEach=i;function n(w,S){return l((D,I=null,A)=>w(O=>S(O)&&D.call(I,O),null,A))}r.filter=n;function o(w){return w}r.signal=o;function s(...w){return(S,D=null,I)=>Os(...w.map(A=>A(O=>S.call(D,O),null,I)))}r.any=s;function a(w,S,D){let I=D;return t(w,A=>(I=S(I,A),I))}r.reduce=a;function l(w){let S,D=new M({onFirstListenerAdd(){S=w(D.fire,D)},onLastListenerRemove(){S.dispose()}});return D.event}function c(w,S,D=100,I=!1,A){let O,N,F,Y=0,K=new M({leakWarningThreshold:A,onFirstListenerAdd(){O=w(ee=>{Y++,N=S(N,ee),I&&!F&&(K.fire(N),N=void 0),clearTimeout(F),F=setTimeout(()=>{let ie=N;N=void 0,F=void 0,(!I||Y>1)&&K.fire(ie),Y=0},D)})},onLastListenerRemove(){O.dispose()}});return K.event}r.debounce=c;function d(w,S=(D,I)=>D===I){let D=!0,I;return n(w,A=>{let O=D||!S(A,I);return D=!1,I=A,O})}r.latch=d;function h(w,S){return[r.filter(w,S),r.filter(w,D=>!S(D))]}r.split=h;function u(w,S=!1,D=[]){let I=D.slice(),A=w(F=>{I?I.push(F):N.fire(F)}),O=()=>{I&&I.forEach(F=>N.fire(F)),I=null},N=new M({onFirstListenerAdd(){A||(A=w(F=>N.fire(F)))},onFirstListenerDidAdd(){I&&(S?setTimeout(O):O())},onLastListenerRemove(){A&&A.dispose(),A=null}});return N.event}r.buffer=u;class m{constructor(S){this.event=S}map(S){return new m(t(this.event,S))}forEach(S){return new m(i(this.event,S))}filter(S){return new m(n(this.event,S))}reduce(S,D){return new m(a(this.event,S,D))}latch(){return new m(d(this.event))}debounce(S,D=100,I=!1,A){return new m(c(this.event,S,D,I,A))}on(S,D,I){return this.event(S,D,I)}once(S,D,I){return e(this.event)(S,D,I)}}function p(w){return new m(w)}r.chain=p;function _(w,S,D=I=>I){let I=(...F)=>N.fire(D(...F)),A=()=>w.on(S,I),O=()=>w.removeListener(S,I),N=new M({onFirstListenerAdd:A,onLastListenerRemove:O});return N.event}r.fromNodeEventEmitter=_;function v(w,S,D=I=>I){let I=(...F)=>N.fire(D(...F)),A=()=>w.addEventListener(S,I),O=()=>w.removeEventListener(S,I),N=new M({onFirstListenerAdd:A,onLastListenerRemove:O});return N.event}r.fromDOMEventEmitter=v;function C(w){return new Promise(S=>e(w)(S))}r.toPromise=C})(ye||(ye={}));var Qv=class{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${Qv._idPool++}`}start(e){this._stopWatch=new or(!0),this._listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};Qv._idPool=0;var G5=-1,X5=class{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=G5;if(typeof this.customThreshold=="number"&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);let i=new Error().stack.split(`
`).slice(3).join(`
`),n=this._stacks.get(i)||0;if(this._stacks.set(i,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=t*.5;let o,s=0;for(let[a,l]of this._stacks)(!o||s<l)&&(o=a,s=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${s}):`),console.warn(o)}return()=>{let o=this._stacks.get(i)||0;this._stacks.set(i,o-1)}}},M=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=G5>0?new X5(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=((t=this._options)===null||t===void 0?void 0:t._profName)?new Qv(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,i)=>{var n;this._listeners||(this._listeners=new yn);let o=this._listeners.isEmpty();o&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);let s=this._listeners.push(t?[e,t]:e);o&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let a=(n=this._leakageMon)===null||n===void 0?void 0:n.check(this._listeners.size),l=Re(()=>{a&&a(),this._disposed||(s(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return i instanceof G?i.add(l):Array.isArray(i)&&i.push(l),l}),this._event}fire(e){var t,i;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new yn);for(let n of this._listeners)this._deliveryQueue.push([n,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){let[n,o]=this._deliveryQueue.shift();try{typeof n=="function"?n.call(void 0,o):n[0].call(n[1],o)}catch(s){we(s)}}(i=this._perfMon)===null||i===void 0||i.stop()}}dispose(){var e,t,i,n,o;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(n=(i=this._options)===null||i===void 0?void 0:i.onLastListenerRemove)===null||n===void 0||n.call(i),(o=this._leakageMon)===null||o===void 0||o.dispose())}},Am=class extends M{constructor(e){super(e);this._isPaused=0,this._eventQueue=new yn,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}},SO=class extends Am{constructor(e){var t;super(e);this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},jm=class{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(o=>{let s=this.buffers[this.buffers.length-1];s?s.push(()=>t.call(i,o)):t.call(i,o)},void 0,n)}bufferEvents(e){let t=[];this.buffers.push(t);let i=e();return this.buffers.pop(),t.forEach(n=>n()),i}},Q0=class{constructor(){this.listening=!1,this.inputEvent=ye.None,this.inputEventListener=H.None,this.emitter=new M({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};var Q5=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),Me;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof Jv?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ye.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Q5})})(Me||(Me={}));var Jv=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Q5:(this._emitter||(this._emitter=new M),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Di=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Jv),this._token}cancel(){this._token?this._token instanceof Jv&&this._token.cancel():this._token=Me.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Jv&&this._token.dispose():this._token=Me.None}};var J0=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},e1=new J0,xO=new J0,EO=new J0,DO=new Array(230),vre={},wre=[],yre=Object.create(null),Cre=Object.create(null),t1=[],LO=[];for(let r=0;r<=193;r++)t1[r]=-1;for(let r=0;r<=126;r++)LO[r]=-1;(function(){let r="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[0,1,1,"Hyper",0,r,0,r,r,r],[0,1,2,"Super",0,r,0,r,r,r],[0,1,3,"Fn",0,r,0,r,r,r],[0,1,4,"FnLock",0,r,0,r,r,r],[0,1,5,"Suspend",0,r,0,r,r,r],[0,1,6,"Resume",0,r,0,r,r,r],[0,1,7,"Turbo",0,r,0,r,r,r],[0,1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[0,1,9,"WakeUp",0,r,0,r,r,r],[31,0,10,"KeyA",31,"A",65,"VK_A",r,r],[32,0,11,"KeyB",32,"B",66,"VK_B",r,r],[33,0,12,"KeyC",33,"C",67,"VK_C",r,r],[34,0,13,"KeyD",34,"D",68,"VK_D",r,r],[35,0,14,"KeyE",35,"E",69,"VK_E",r,r],[36,0,15,"KeyF",36,"F",70,"VK_F",r,r],[37,0,16,"KeyG",37,"G",71,"VK_G",r,r],[38,0,17,"KeyH",38,"H",72,"VK_H",r,r],[39,0,18,"KeyI",39,"I",73,"VK_I",r,r],[40,0,19,"KeyJ",40,"J",74,"VK_J",r,r],[41,0,20,"KeyK",41,"K",75,"VK_K",r,r],[42,0,21,"KeyL",42,"L",76,"VK_L",r,r],[43,0,22,"KeyM",43,"M",77,"VK_M",r,r],[44,0,23,"KeyN",44,"N",78,"VK_N",r,r],[45,0,24,"KeyO",45,"O",79,"VK_O",r,r],[46,0,25,"KeyP",46,"P",80,"VK_P",r,r],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[48,0,27,"KeyR",48,"R",82,"VK_R",r,r],[49,0,28,"KeyS",49,"S",83,"VK_S",r,r],[50,0,29,"KeyT",50,"T",84,"VK_T",r,r],[51,0,30,"KeyU",51,"U",85,"VK_U",r,r],[52,0,31,"KeyV",52,"V",86,"VK_V",r,r],[53,0,32,"KeyW",53,"W",87,"VK_W",r,r],[54,0,33,"KeyX",54,"X",88,"VK_X",r,r],[55,0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[22,0,36,"Digit1",22,"1",49,"VK_1",r,r],[23,0,37,"Digit2",23,"2",50,"VK_2",r,r],[24,0,38,"Digit3",24,"3",51,"VK_3",r,r],[25,0,39,"Digit4",25,"4",52,"VK_4",r,r],[26,0,40,"Digit5",26,"5",53,"VK_5",r,r],[27,0,41,"Digit6",27,"6",54,"VK_6",r,r],[28,0,42,"Digit7",28,"7",55,"VK_7",r,r],[29,0,43,"Digit8",29,"8",56,"VK_8",r,r],[30,0,44,"Digit9",30,"9",57,"VK_9",r,r],[21,0,45,"Digit0",21,"0",48,"VK_0",r,r],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[10,1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,r,0,r,r,r],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[59,1,64,"F1",59,"F1",112,"VK_F1",r,r],[60,1,65,"F2",60,"F2",113,"VK_F2",r,r],[61,1,66,"F3",61,"F3",114,"VK_F3",r,r],[62,1,67,"F4",62,"F4",115,"VK_F4",r,r],[63,1,68,"F5",63,"F5",116,"VK_F5",r,r],[64,1,69,"F6",64,"F6",117,"VK_F6",r,r],[65,1,70,"F7",65,"F7",118,"VK_F7",r,r],[66,1,71,"F8",66,"F8",119,"VK_F8",r,r],[67,1,72,"F9",67,"F9",120,"VK_F9",r,r],[68,1,73,"F10",68,"F10",121,"VK_F10",r,r],[69,1,74,"F11",69,"F11",122,"VK_F11",r,r],[70,1,75,"F12",70,"F12",123,"VK_F12",r,r],[0,1,76,"PrintScreen",0,r,0,r,r,r],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",r,r],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[14,1,80,"Home",14,"Home",36,"VK_HOME",r,r],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[13,1,83,"End",13,"End",35,"VK_END",r,r],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",r,r],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",r,r],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",r,r],[3,1,94,"NumpadEnter",3,r,0,r,r,r],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",r,r],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",r,r],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",r,r],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",r,r],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",r,r],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",r,r],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",r,r],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",r,r],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",r,r],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",r,r],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",r,r],[58,1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[0,1,108,"Power",0,r,0,r,r,r],[0,1,109,"NumpadEqual",0,r,0,r,r,r],[71,1,110,"F13",71,"F13",124,"VK_F13",r,r],[72,1,111,"F14",72,"F14",125,"VK_F14",r,r],[73,1,112,"F15",73,"F15",126,"VK_F15",r,r],[74,1,113,"F16",74,"F16",127,"VK_F16",r,r],[75,1,114,"F17",75,"F17",128,"VK_F17",r,r],[76,1,115,"F18",76,"F18",129,"VK_F18",r,r],[77,1,116,"F19",77,"F19",130,"VK_F19",r,r],[0,1,117,"F20",0,r,0,"VK_F20",r,r],[0,1,118,"F21",0,r,0,"VK_F21",r,r],[0,1,119,"F22",0,r,0,"VK_F22",r,r],[0,1,120,"F23",0,r,0,"VK_F23",r,r],[0,1,121,"F24",0,r,0,"VK_F24",r,r],[0,1,122,"Open",0,r,0,r,r,r],[0,1,123,"Help",0,r,0,r,r,r],[0,1,124,"Select",0,r,0,r,r,r],[0,1,125,"Again",0,r,0,r,r,r],[0,1,126,"Undo",0,r,0,r,r,r],[0,1,127,"Cut",0,r,0,r,r,r],[0,1,128,"Copy",0,r,0,r,r,r],[0,1,129,"Paste",0,r,0,r,r,r],[0,1,130,"Find",0,r,0,r,r,r],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",r,r],[0,1,136,"KanaMode",0,r,0,r,r,r],[0,0,137,"IntlYen",0,r,0,r,r,r],[0,1,138,"Convert",0,r,0,r,r,r],[0,1,139,"NonConvert",0,r,0,r,r,r],[0,1,140,"Lang1",0,r,0,r,r,r],[0,1,141,"Lang2",0,r,0,r,r,r],[0,1,142,"Lang3",0,r,0,r,r,r],[0,1,143,"Lang4",0,r,0,r,r,r],[0,1,144,"Lang5",0,r,0,r,r,r],[0,1,145,"Abort",0,r,0,r,r,r],[0,1,146,"Props",0,r,0,r,r,r],[0,1,147,"NumpadParenLeft",0,r,0,r,r,r],[0,1,148,"NumpadParenRight",0,r,0,r,r,r],[0,1,149,"NumpadBackspace",0,r,0,r,r,r],[0,1,150,"NumpadMemoryStore",0,r,0,r,r,r],[0,1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[0,1,152,"NumpadMemoryClear",0,r,0,r,r,r],[0,1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[0,1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[0,1,155,"NumpadClear",0,r,0,r,r,r],[0,1,156,"NumpadClearEntry",0,r,0,r,r,r],[5,1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[4,1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[6,1,0,r,6,"Alt",18,"VK_MENU",r,r],[57,1,0,r,57,"Meta",0,"VK_COMMAND",r,r],[5,1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[4,1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[6,1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[57,1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[5,1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[4,1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[6,1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[57,1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[0,1,165,"BrightnessUp",0,r,0,r,r,r],[0,1,166,"BrightnessDown",0,r,0,r,r,r],[0,1,167,"MediaPlay",0,r,0,r,r,r],[0,1,168,"MediaRecord",0,r,0,r,r,r],[0,1,169,"MediaFastForward",0,r,0,r,r,r],[0,1,170,"MediaRewind",0,r,0,r,r,r],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",r,r],[0,1,174,"Eject",0,r,0,r,r,r],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[0,1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[0,1,180,"SelectTask",0,r,0,r,r,r],[0,1,181,"LaunchScreenSaver",0,r,0,r,r,r],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[0,1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[0,1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[0,1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[0,1,189,"ZoomToggle",0,r,0,r,r,r],[0,1,190,"MailReply",0,r,0,r,r,r],[0,1,191,"MailForward",0,r,0,r,r,r],[0,1,192,"MailSend",0,r,0,r,r,r],[109,1,0,r,109,"KeyInComposition",229,r,r,r],[111,1,0,r,111,"ABNT_C2",194,"VK_ABNT_C2",r,r],[91,1,0,r,91,"OEM_8",223,"VK_OEM_8",r,r],[0,1,0,r,0,r,0,"VK_CLEAR",r,r],[0,1,0,r,0,r,0,"VK_KANA",r,r],[0,1,0,r,0,r,0,"VK_HANGUL",r,r],[0,1,0,r,0,r,0,"VK_JUNJA",r,r],[0,1,0,r,0,r,0,"VK_FINAL",r,r],[0,1,0,r,0,r,0,"VK_HANJA",r,r],[0,1,0,r,0,r,0,"VK_KANJI",r,r],[0,1,0,r,0,r,0,"VK_CONVERT",r,r],[0,1,0,r,0,r,0,"VK_NONCONVERT",r,r],[0,1,0,r,0,r,0,"VK_ACCEPT",r,r],[0,1,0,r,0,r,0,"VK_MODECHANGE",r,r],[0,1,0,r,0,r,0,"VK_SELECT",r,r],[0,1,0,r,0,r,0,"VK_PRINT",r,r],[0,1,0,r,0,r,0,"VK_EXECUTE",r,r],[0,1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[0,1,0,r,0,r,0,"VK_HELP",r,r],[0,1,0,r,0,r,0,"VK_APPS",r,r],[0,1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[0,1,0,r,0,r,0,"VK_PACKET",r,r],[0,1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[0,1,0,r,0,r,0,"VK_ATTN",r,r],[0,1,0,r,0,r,0,"VK_CRSEL",r,r],[0,1,0,r,0,r,0,"VK_EXSEL",r,r],[0,1,0,r,0,r,0,"VK_EREOF",r,r],[0,1,0,r,0,r,0,"VK_PLAY",r,r],[0,1,0,r,0,r,0,"VK_ZOOM",r,r],[0,1,0,r,0,r,0,"VK_NONAME",r,r],[0,1,0,r,0,r,0,"VK_PA1",r,r],[0,1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]],t=[],i=[];for(let n of e){let[o,s,a,l,c,d,h,u,m,p]=n;if(i[a]||(i[a]=!0,wre[a]=l,yre[l]=a,Cre[l.toLowerCase()]=a,s&&(t1[a]=c,c!==0&&c!==3&&c!==5&&c!==4&&c!==6&&c!==57&&(LO[c]=a))),!t[c]){if(t[c]=!0,!d)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);e1.define(c,d),xO.define(c,m||d),EO.define(c,p||m||d)}h&&(DO[h]=c),u&&(vre[u]=c)}LO[3]=46})();var ad;(function(r){function e(a){return e1.keyCodeToStr(a)}r.toString=e;function t(a){return e1.strToKeyCode(a)}r.fromString=t;function i(a){return xO.keyCodeToStr(a)}r.toUserSettingsUS=i;function n(a){return EO.keyCodeToStr(a)}r.toUserSettingsGeneral=n;function o(a){return xO.strToKeyCode(a)||EO.strToKeyCode(a)}r.fromUserSettings=o;function s(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return e1.keyCodeToStr(a)}r.toElectronAccelerator=s})(ad||(ad={}));function wi(r,e){let t=(e&65535)<<16>>>0;return(r|t)>>>0}var vp;if(typeof ei.vscode!="undefined"&&typeof ei.vscode.process!="undefined"){let r=ei.vscode.process;vp={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()},nextTick(e){return Gv(e)}}}else typeof process!="undefined"?vp={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()},nextTick(r){return process.nextTick(r)}}:vp={get platform(){return bi?"win32":We?"darwin":"linux"},get arch(){},nextTick(r){return Gv(r)},get env(){return{}},cwd(){return"/"}};var i1=vp.cwd,J5=vp.env,$h=vp.platform;var Sre=65,xre=97,Ere=90,Dre=122,Kh=46,Er=47,ss=92,qh=58,Lre=63,kO=class extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${n} of type ${t}`;s+=`. Received type ${typeof i}`;super(s);this.code="ERR_INVALID_ARG_TYPE"}};function On(r,e){if(typeof r!="string")throw new kO(e,"string",r)}function Pt(r){return r===Er||r===ss}function IO(r){return r===Er}function Yh(r){return r>=Sre&&r<=Ere||r>=xre&&r<=Dre}function n1(r,e,t,i){let n="",o=0,s=-1,a=0,l=0;for(let c=0;c<=r.length;++c){if(c<r.length)l=r.charCodeAt(c);else{if(i(l))break;l=Er}if(i(l)){if(!(s===c-1||a===1))if(a===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==Kh||n.charCodeAt(n.length-2)!==Kh){if(n.length>2){let d=n.lastIndexOf(t);d===-1?(n="",o=0):(n=n.slice(0,d),o=n.length-1-n.lastIndexOf(t)),s=c,a=0;continue}else if(n.length!==0){n="",o=0,s=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",o=2)}else n.length>0?n+=`${t}${r.slice(s+1,c)}`:n=r.slice(s+1,c),o=c-s-1;s=c,a=0}else l===Kh&&a!==-1?++a:a=-1}return n}function eW(r,e){if(e===null||typeof e!="object")throw new kO("pathObject","Object",e);let t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${r}${i}`:i}var ho={resolve(...r){let e="",t="",i=!1;for(let n=r.length-1;n>=-1;n--){let o;if(n>=0){if(o=r[n],On(o,"path"),o.length===0)continue}else e.length===0?o=i1():(o=J5[`=${e}`]||i1(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===ss)&&(o=`${e}\\`));let s=o.length,a=0,l="",c=!1,d=o.charCodeAt(0);if(s===1)Pt(d)&&(a=1,c=!0);else if(Pt(d))if(c=!0,Pt(o.charCodeAt(1))){let h=2,u=h;for(;h<s&&!Pt(o.charCodeAt(h));)h++;if(h<s&&h!==u){let m=o.slice(u,h);for(u=h;h<s&&Pt(o.charCodeAt(h));)h++;if(h<s&&h!==u){for(u=h;h<s&&!Pt(o.charCodeAt(h));)h++;(h===s||h!==u)&&(l=`\\\\${m}\\${o.slice(u,h)}`,a=h)}}}else a=1;else Yh(d)&&o.charCodeAt(1)===qh&&(l=o.slice(0,2),a=2,s>2&&Pt(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=n1(t,!i,"\\",Pt),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){On(r,"path");let e=r.length;if(e===0)return".";let t=0,i,n=!1,o=r.charCodeAt(0);if(e===1)return IO(o)?"\\":r;if(Pt(o))if(n=!0,Pt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Pt(r.charCodeAt(a));)a++;if(a<e&&a!==l){let c=r.slice(l,a);for(l=a;a<e&&Pt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Pt(r.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${r.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${r.slice(l,a)}`,t=a)}}}else t=1;else Yh(o)&&r.charCodeAt(1)===qh&&(i=r.slice(0,2),t=2,e>2&&Pt(r.charCodeAt(2))&&(n=!0,t=3));let s=t<e?n1(r.slice(t),!n,"\\",Pt):"";return s.length===0&&!n&&(s="."),s.length>0&&Pt(r.charCodeAt(e-1))&&(s+="\\"),i===void 0?n?`\\${s}`:s:n?`${i}\\${s}`:`${i}${s}`},isAbsolute(r){On(r,"path");let e=r.length;if(e===0)return!1;let t=r.charCodeAt(0);return Pt(t)||e>2&&Yh(t)&&r.charCodeAt(1)===qh&&Pt(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let o=0;o<r.length;++o){let s=r[o];On(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&Pt(t.charCodeAt(0))){++n;let o=t.length;o>1&&Pt(t.charCodeAt(1))&&(++n,o>2&&(Pt(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&Pt(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return ho.normalize(e)},relative(r,e){if(On(r,"from"),On(e,"to"),r===e)return"";let t=ho.resolve(r),i=ho.resolve(e);if(t===i||(r=t.toLowerCase(),e=i.toLowerCase(),r===e))return"";let n=0;for(;n<r.length&&r.charCodeAt(n)===ss;)n++;let o=r.length;for(;o-1>n&&r.charCodeAt(o-1)===ss;)o--;let s=o-n,a=0;for(;a<e.length&&e.charCodeAt(a)===ss;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ss;)l--;let c=l-a,d=s<c?s:c,h=-1,u=0;for(;u<d;u++){let p=r.charCodeAt(n+u);if(p!==e.charCodeAt(a+u))break;p===ss&&(h=u)}if(u!==d){if(h===-1)return i}else{if(c>d){if(e.charCodeAt(a+u)===ss)return i.slice(a+u+1);if(u===2)return i.slice(a+u)}s>d&&(r.charCodeAt(n+u)===ss?h=u:u===2&&(h=3)),h===-1&&(h=0)}let m="";for(u=n+h+1;u<=o;++u)(u===o||r.charCodeAt(u)===ss)&&(m+=m.length===0?"..":"\\..");return a+=h,m.length>0?`${m}${i.slice(a,l)}`:(i.charCodeAt(a)===ss&&++a,i.slice(a,l))},toNamespacedPath(r){if(typeof r!="string")return r;if(r.length===0)return"";let e=ho.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===ss){if(e.charCodeAt(1)===ss){let t=e.charCodeAt(2);if(t!==Lre&&t!==Kh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Yh(e.charCodeAt(0))&&e.charCodeAt(1)===qh&&e.charCodeAt(2)===ss)return`\\\\?\\${e}`;return r},dirname(r){On(r,"path");let e=r.length;if(e===0)return".";let t=-1,i=0,n=r.charCodeAt(0);if(e===1)return Pt(n)?r:".";if(Pt(n)){if(t=i=1,Pt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Pt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Pt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Pt(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=i=a+1)}}}}else Yh(n)&&r.charCodeAt(1)===qh&&(t=e>2&&Pt(r.charCodeAt(2))?3:2,i=t);let o=-1,s=!0;for(let a=e-1;a>=i;--a)if(Pt(r.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return r.slice(0,o)},basename(r,e){e!==void 0&&On(e,"ext"),On(r,"path");let t=0,i=-1,n=!0,o;if(r.length>=2&&Yh(r.charCodeAt(0))&&r.charCodeAt(1)===qh&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=t;--o){let l=r.charCodeAt(o);if(Pt(l)){if(!n){t=o+1;break}}else a===-1&&(n=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s==-1&&(i=o):(s=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(o=r.length-1;o>=t;--o)if(Pt(r.charCodeAt(o))){if(!n){t=o+1;break}}else i===-1&&(n=!1,i=o+1);return i===-1?"":r.slice(t,i)},extname(r){On(r,"path");let e=0,t=-1,i=0,n=-1,o=!0,s=0;r.length>=2&&r.charCodeAt(1)===qh&&Yh(r.charCodeAt(0))&&(e=i=2);for(let a=r.length-1;a>=e;--a){let l=r.charCodeAt(a);if(Pt(l)){if(!o){i=a+1;break}continue}n===-1&&(o=!1,n=a+1),l===Kh?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===i+1?"":r.slice(t,n)},format:eW.bind(null,"\\"),parse(r){On(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.length,i=0,n=r.charCodeAt(0);if(t===1)return Pt(n)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Pt(n)){if(i=1,Pt(r.charCodeAt(1))){let h=2,u=h;for(;h<t&&!Pt(r.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&Pt(r.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&!Pt(r.charCodeAt(h));)h++;h===t?i=h:h!==u&&(i=h+1)}}}}else if(Yh(n)&&r.charCodeAt(1)===qh){if(t<=2)return e.root=e.dir=r,e;if(i=2,Pt(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;i=3}}i>0&&(e.root=r.slice(0,i));let o=-1,s=i,a=-1,l=!0,c=r.length-1,d=0;for(;c>=i;--c){if(n=r.charCodeAt(c),Pt(n)){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===Kh?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===s+1?e.base=e.name=r.slice(s,a):(e.name=r.slice(s,o),e.base=r.slice(s,a),e.ext=r.slice(o,a))),s>0&&s!==i?e.dir=r.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},zi={resolve(...r){let e="",t=!1;for(let i=r.length-1;i>=-1&&!t;i--){let n=i>=0?r[i]:i1();On(n,"path"),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===Er)}return e=n1(e,!t,"/",IO),t?`/${e}`:e.length>0?e:"."},normalize(r){if(On(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Er,t=r.charCodeAt(r.length-1)===Er;return r=n1(r,!e,"/",IO),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return On(r,"path"),r.length>0&&r.charCodeAt(0)===Er},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let i=r[t];On(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":zi.normalize(e)},relative(r,e){if(On(r,"from"),On(e,"to"),r===e||(r=zi.resolve(r),e=zi.resolve(e),r===e))return"";let t=1,i=r.length,n=i-t,o=1,s=e.length-o,a=n<s?n:s,l=-1,c=0;for(;c<a;c++){let h=r.charCodeAt(t+c);if(h!==e.charCodeAt(o+c))break;h===Er&&(l=c)}if(c===a)if(s>a){if(e.charCodeAt(o+c)===Er)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else n>a&&(r.charCodeAt(t+c)===Er?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||r.charCodeAt(c)===Er)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(r){return r},dirname(r){if(On(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Er,t=-1,i=!0;for(let n=r.length-1;n>=1;--n)if(r.charCodeAt(n)===Er){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&On(e,"ext"),On(r,"path");let t=0,i=-1,n=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===Er){if(!n){t=o+1;break}}else a===-1&&(n=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s==-1&&(i=o):(s=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===Er){if(!n){t=o+1;break}}else i===-1&&(n=!1,i=o+1);return i===-1?"":r.slice(t,i)},extname(r){On(r,"path");let e=-1,t=0,i=-1,n=!0,o=0;for(let s=r.length-1;s>=0;--s){let a=r.charCodeAt(s);if(a===Er){if(!n){t=s+1;break}continue}i===-1&&(n=!1,i=s+1),a===Kh?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===t+1?"":r.slice(e,i)},format:eW.bind(null,"/"),parse(r){On(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.charCodeAt(0)===Er,i;t?(e.root="/",i=1):i=0;let n=-1,o=0,s=-1,a=!0,l=r.length-1,c=0;for(;l>=i;--l){let d=r.charCodeAt(l);if(d===Er){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),d===Kh?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(s!==-1){let d=o===0&&t?1:o;n===-1||c===0||c===1&&n===s-1&&n===o+1?e.base=e.name=r.slice(d,s):(e.name=r.slice(d,n),e.base=r.slice(d,s),e.ext=r.slice(n,s))}return o>0?e.dir=r.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};zi.win32=ho.win32=ho;zi.posix=ho.posix=zi;var wp=$h==="win32"?ho.normalize:zi.normalize,tW=$h==="win32"?ho.resolve:zi.resolve,iW=$h==="win32"?ho.relative:zi.relative,r1=$h==="win32"?ho.dirname:zi.dirname,$l=$h==="win32"?ho.basename:zi.basename,nW=$h==="win32"?ho.extname:zi.extname,yp=$h==="win32"?ho.sep:zi.sep;var kre=/^\w[\w\d+.-]*$/,Ire=/^\//,Ore=/^\/\//;function rW(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!kre.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!Ire.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Ore.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function Tre(r,e){return!r&&!e?"file":r}function Nre(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==Xa&&(e=Xa+e):e=Xa;break}return e}var $i="",Xa="/",Rre=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,ve=class{constructor(e,t,i,n,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||$i,this.authority=e.authority||$i,this.path=e.path||$i,this.query=e.query||$i,this.fragment=e.fragment||$i):(this.scheme=Tre(e,s),this.authority=t||$i,this.path=Nre(this.scheme,i||$i),this.query=n||$i,this.fragment=o||$i,rW(this,s))}static isUri(e){return e instanceof ve?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return ew(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=$i),i===void 0?i=this.authority:i===null&&(i=$i),n===void 0?n=this.path:n===null&&(n=$i),o===void 0?o=this.query:o===null&&(o=$i),s===void 0?s=this.fragment:s===null&&(s=$i),t===this.scheme&&i===this.authority&&n===this.path&&o===this.query&&s===this.fragment?this:new Mm(t,i,n,o,s)}static parse(e,t=!1){let i=Rre.exec(e);return i?new Mm(i[2]||$i,o1(i[4]||$i),o1(i[5]||$i),o1(i[7]||$i),o1(i[9]||$i),t):new Mm($i,$i,$i,$i,$i)}static file(e){let t=$i;if(bi&&(e=e.replace(/\\/g,Xa)),e[0]===Xa&&e[1]===Xa){let i=e.indexOf(Xa,2);i===-1?(t=e.substring(2),e=Xa):(t=e.substring(2,i),e=e.substring(i)||Xa)}return new Mm("file",t,e,$i,$i)}static from(e){let t=new Mm(e.scheme,e.authority,e.path,e.query,e.fragment);return rW(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return bi&&e.scheme==="file"?i=ve.file(ho.join(ew(e,!0),...t)).path:i=zi.join(e.path,...t),e.with({path:i})}toString(e=!1){return OO(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof ve)return e;{let t=new Mm(e);return t._formatted=e.external,t._fsPath=e._sep===oW?e.fsPath:null,t}}else return e}},oW=bi?1:void 0,Mm=class extends ve{constructor(){super(...arguments);this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=ew(this,!1)),this._fsPath}toString(e=!1){return e?OO(this,!0):(this._formatted||(this._formatted=OO(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=oW),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},sW={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function aW(r,e){let t,i=-1;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)i!==-1&&(t+=encodeURIComponent(r.substring(i,n)),i=-1),t!==void 0&&(t+=r.charAt(n));else{t===void 0&&(t=r.substr(0,n));let s=sW[o];s!==void 0?(i!==-1&&(t+=encodeURIComponent(r.substring(i,n)),i=-1),t+=s):i===-1&&(i=n)}}return i!==-1&&(t+=encodeURIComponent(r.substring(i))),t!==void 0?t:r}function Pre(r){let e;for(let t=0;t<r.length;t++){let i=r.charCodeAt(t);i===35||i===63?(e===void 0&&(e=r.substr(0,t)),e+=sW[i]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function ew(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,bi&&(t=t.replace(/\//g,"\\")),t}function OO(r,e){let t=e?Pre:aW,i="",{scheme:n,authority:o,path:s,query:a,fragment:l}=r;if(n&&(i+=n,i+=":"),(o||n==="file")&&(i+=Xa,i+=Xa),o){let c=o.indexOf("@");if(c!==-1){let d=o.substr(0,c);o=o.substr(c+1),c=d.indexOf(":"),c===-1?i+=t(d,!1):(i+=t(d.substr(0,c),!1),i+=":",i+=t(d.substr(c+1),!1)),i+="@"}o=o.toLowerCase(),c=o.indexOf(":"),c===-1?i+=t(o,!1):(i+=t(o.substr(0,c),!1),i+=o.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let c=s.charCodeAt(1);c>=65&&c<=90&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let c=s.charCodeAt(0);c>=65&&c<=90&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}i+=t(s,!0)}return a&&(i+="?",i+=t(a,!1)),l&&(i+="#",i+=e?l:aW(l,!1)),i}function lW(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+lW(r.substr(3)):r}}var cW=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function o1(r){return r.match(cW)?r.replace(cW,e=>lW(e)):r}var V=class{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new V(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return V.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return V.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return V.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){let o=e.column|0,s=t.column|0;return o-s}return i-n}clone(){return new V(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new V(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};var L=class{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return L.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return L.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return L.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return L.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return L.plusRange(this,e)}static plusRange(e,t){let i,n,o,s;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new L(i,n,o,s)}intersectRanges(e){return L.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),o>c?(o=c,s=d):o===c&&(s=Math.min(s,d)),i>o||i===o&&n>s?null:new L(i,n,o,s)}equalsRange(e){return L.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return L.getEndPosition(this)}static getEndPosition(e){return new V(e.endLineNumber,e.endColumn)}getStartPosition(){return L.getStartPosition(this)}static getStartPosition(e){return new V(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new L(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new L(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return L.collapseToStart(this)}static collapseToStart(e){return new L(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new L(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){let h=e.endColumn|0,u=t.endColumn|0;return h-u}return c-d}return a-l}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}};var le=class extends L{constructor(e,t,i,n){super(e,t,i,n);this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return le.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new le(this.startLineNumber,this.startColumn,e,t):new le(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new V(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new le(e,t,this.endLineNumber,this.endColumn):new le(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new le(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new le(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,o){return o===0?new le(e,t,i,n):new le(i,n,e,t)}};var ld=class{constructor(e,t,i){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=i}toString(){return"("+this.offset+", "+this.type+")"}},Fm=class{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}},Zh=class{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}};var s1;(function(r){r[r.Unknown=0]="Unknown",r[r.Disabled=1]="Disabled",r[r.Enabled=2]="Enabled"})(s1||(s1={}));var a1;(function(r){r[r.KeepWhitespace=1]="KeepWhitespace",r[r.InsertAsSnippet=4]="InsertAsSnippet"})(a1||(a1={}));var l1;(function(r){r[r.Method=0]="Method",r[r.Function=1]="Function",r[r.Constructor=2]="Constructor",r[r.Field=3]="Field",r[r.Variable=4]="Variable",r[r.Class=5]="Class",r[r.Struct=6]="Struct",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Event=10]="Event",r[r.Operator=11]="Operator",r[r.Unit=12]="Unit",r[r.Value=13]="Value",r[r.Constant=14]="Constant",r[r.Enum=15]="Enum",r[r.EnumMember=16]="EnumMember",r[r.Keyword=17]="Keyword",r[r.Text=18]="Text",r[r.Color=19]="Color",r[r.File=20]="File",r[r.Reference=21]="Reference",r[r.Customcolor=22]="Customcolor",r[r.Folder=23]="Folder",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue",r[r.Snippet=27]="Snippet"})(l1||(l1={}));var c1;(function(r){r[r.Deprecated=1]="Deprecated"})(c1||(c1={}));var d1;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(d1||(d1={}));var h1;(function(r){r[r.EXACT=0]="EXACT",r[r.ABOVE=1]="ABOVE",r[r.BELOW=2]="BELOW"})(h1||(h1={}));var u1;(function(r){r[r.NotSet=0]="NotSet",r[r.ContentFlush=1]="ContentFlush",r[r.RecoverFromMarkers=2]="RecoverFromMarkers",r[r.Explicit=3]="Explicit",r[r.Paste=4]="Paste",r[r.Undo=5]="Undo",r[r.Redo=6]="Redo"})(u1||(u1={}));var m1;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(m1||(m1={}));var f1;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(f1||(f1={}));var g1;(function(r){r[r.None=0]="None",r[r.Keep=1]="Keep",r[r.Brackets=2]="Brackets",r[r.Advanced=3]="Advanced",r[r.Full=4]="Full"})(g1||(g1={}));var p1;(function(r){r[r.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",r[r.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",r[r.accessibilitySupport=2]="accessibilitySupport",r[r.accessibilityPageSize=3]="accessibilityPageSize",r[r.ariaLabel=4]="ariaLabel",r[r.autoClosingBrackets=5]="autoClosingBrackets",r[r.autoClosingDelete=6]="autoClosingDelete",r[r.autoClosingOvertype=7]="autoClosingOvertype",r[r.autoClosingQuotes=8]="autoClosingQuotes",r[r.autoIndent=9]="autoIndent",r[r.automaticLayout=10]="automaticLayout",r[r.autoSurround=11]="autoSurround",r[r.bracketPairColorization=12]="bracketPairColorization",r[r.guides=13]="guides",r[r.codeLens=14]="codeLens",r[r.codeLensFontFamily=15]="codeLensFontFamily",r[r.codeLensFontSize=16]="codeLensFontSize",r[r.colorDecorators=17]="colorDecorators",r[r.columnSelection=18]="columnSelection",r[r.comments=19]="comments",r[r.contextmenu=20]="contextmenu",r[r.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",r[r.cursorBlinking=22]="cursorBlinking",r[r.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",r[r.cursorStyle=24]="cursorStyle",r[r.cursorSurroundingLines=25]="cursorSurroundingLines",r[r.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",r[r.cursorWidth=27]="cursorWidth",r[r.disableLayerHinting=28]="disableLayerHinting",r[r.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",r[r.domReadOnly=30]="domReadOnly",r[r.dragAndDrop=31]="dragAndDrop",r[r.emptySelectionClipboard=32]="emptySelectionClipboard",r[r.extraEditorClassName=33]="extraEditorClassName",r[r.fastScrollSensitivity=34]="fastScrollSensitivity",r[r.find=35]="find",r[r.fixedOverflowWidgets=36]="fixedOverflowWidgets",r[r.folding=37]="folding",r[r.foldingStrategy=38]="foldingStrategy",r[r.foldingHighlight=39]="foldingHighlight",r[r.foldingImportsByDefault=40]="foldingImportsByDefault",r[r.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",r[r.fontFamily=42]="fontFamily",r[r.fontInfo=43]="fontInfo",r[r.fontLigatures=44]="fontLigatures",r[r.fontSize=45]="fontSize",r[r.fontWeight=46]="fontWeight",r[r.formatOnPaste=47]="formatOnPaste",r[r.formatOnType=48]="formatOnType",r[r.glyphMargin=49]="glyphMargin",r[r.gotoLocation=50]="gotoLocation",r[r.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",r[r.hover=52]="hover",r[r.inDiffEditor=53]="inDiffEditor",r[r.inlineSuggest=54]="inlineSuggest",r[r.letterSpacing=55]="letterSpacing",r[r.lightbulb=56]="lightbulb",r[r.lineDecorationsWidth=57]="lineDecorationsWidth",r[r.lineHeight=58]="lineHeight",r[r.lineNumbers=59]="lineNumbers",r[r.lineNumbersMinChars=60]="lineNumbersMinChars",r[r.linkedEditing=61]="linkedEditing",r[r.links=62]="links",r[r.matchBrackets=63]="matchBrackets",r[r.minimap=64]="minimap",r[r.mouseStyle=65]="mouseStyle",r[r.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",r[r.mouseWheelZoom=67]="mouseWheelZoom",r[r.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",r[r.multiCursorModifier=69]="multiCursorModifier",r[r.multiCursorPaste=70]="multiCursorPaste",r[r.occurrencesHighlight=71]="occurrencesHighlight",r[r.overviewRulerBorder=72]="overviewRulerBorder",r[r.overviewRulerLanes=73]="overviewRulerLanes",r[r.padding=74]="padding",r[r.parameterHints=75]="parameterHints",r[r.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",r[r.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",r[r.quickSuggestions=78]="quickSuggestions",r[r.quickSuggestionsDelay=79]="quickSuggestionsDelay",r[r.readOnly=80]="readOnly",r[r.renameOnType=81]="renameOnType",r[r.renderControlCharacters=82]="renderControlCharacters",r[r.renderFinalNewline=83]="renderFinalNewline",r[r.renderLineHighlight=84]="renderLineHighlight",r[r.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",r[r.renderValidationDecorations=86]="renderValidationDecorations",r[r.renderWhitespace=87]="renderWhitespace",r[r.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",r[r.roundedSelection=89]="roundedSelection",r[r.rulers=90]="rulers",r[r.scrollbar=91]="scrollbar",r[r.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",r[r.scrollBeyondLastLine=93]="scrollBeyondLastLine",r[r.scrollPredominantAxis=94]="scrollPredominantAxis",r[r.selectionClipboard=95]="selectionClipboard",r[r.selectionHighlight=96]="selectionHighlight",r[r.selectOnLineNumbers=97]="selectOnLineNumbers",r[r.showFoldingControls=98]="showFoldingControls",r[r.showUnused=99]="showUnused",r[r.snippetSuggestions=100]="snippetSuggestions",r[r.smartSelect=101]="smartSelect",r[r.smoothScrolling=102]="smoothScrolling",r[r.stickyTabStops=103]="stickyTabStops",r[r.stopRenderingLineAfter=104]="stopRenderingLineAfter",r[r.suggest=105]="suggest",r[r.suggestFontSize=106]="suggestFontSize",r[r.suggestLineHeight=107]="suggestLineHeight",r[r.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",r[r.suggestSelection=109]="suggestSelection",r[r.tabCompletion=110]="tabCompletion",r[r.tabIndex=111]="tabIndex",r[r.unusualLineTerminators=112]="unusualLineTerminators",r[r.useShadowDOM=113]="useShadowDOM",r[r.useTabStops=114]="useTabStops",r[r.wordSeparators=115]="wordSeparators",r[r.wordWrap=116]="wordWrap",r[r.wordWrapBreakAfterCharacters=117]="wordWrapBreakAfterCharacters",r[r.wordWrapBreakBeforeCharacters=118]="wordWrapBreakBeforeCharacters",r[r.wordWrapColumn=119]="wordWrapColumn",r[r.wordWrapOverride1=120]="wordWrapOverride1",r[r.wordWrapOverride2=121]="wordWrapOverride2",r[r.wrappingIndent=122]="wrappingIndent",r[r.wrappingStrategy=123]="wrappingStrategy",r[r.showDeprecated=124]="showDeprecated",r[r.inlayHints=125]="inlayHints",r[r.editorClassName=126]="editorClassName",r[r.pixelRatio=127]="pixelRatio",r[r.tabFocusMode=128]="tabFocusMode",r[r.layoutInfo=129]="layoutInfo",r[r.wrappingInfo=130]="wrappingInfo"})(p1||(p1={}));var _1;(function(r){r[r.TextDefined=0]="TextDefined",r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(_1||(_1={}));var b1;(function(r){r[r.LF=0]="LF",r[r.CRLF=1]="CRLF"})(b1||(b1={}));var v1;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(v1||(v1={}));var w1;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(w1||(w1={}));var y1;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(y1||(y1={}));var C1;(function(r){r[r.DependsOnKbLayout=-1]="DependsOnKbLayout",r[r.Unknown=0]="Unknown",r[r.Backspace=1]="Backspace",r[r.Tab=2]="Tab",r[r.Enter=3]="Enter",r[r.Shift=4]="Shift",r[r.Ctrl=5]="Ctrl",r[r.Alt=6]="Alt",r[r.PauseBreak=7]="PauseBreak",r[r.CapsLock=8]="CapsLock",r[r.Escape=9]="Escape",r[r.Space=10]="Space",r[r.PageUp=11]="PageUp",r[r.PageDown=12]="PageDown",r[r.End=13]="End",r[r.Home=14]="Home",r[r.LeftArrow=15]="LeftArrow",r[r.UpArrow=16]="UpArrow",r[r.RightArrow=17]="RightArrow",r[r.DownArrow=18]="DownArrow",r[r.Insert=19]="Insert",r[r.Delete=20]="Delete",r[r.Digit0=21]="Digit0",r[r.Digit1=22]="Digit1",r[r.Digit2=23]="Digit2",r[r.Digit3=24]="Digit3",r[r.Digit4=25]="Digit4",r[r.Digit5=26]="Digit5",r[r.Digit6=27]="Digit6",r[r.Digit7=28]="Digit7",r[r.Digit8=29]="Digit8",r[r.Digit9=30]="Digit9",r[r.KeyA=31]="KeyA",r[r.KeyB=32]="KeyB",r[r.KeyC=33]="KeyC",r[r.KeyD=34]="KeyD",r[r.KeyE=35]="KeyE",r[r.KeyF=36]="KeyF",r[r.KeyG=37]="KeyG",r[r.KeyH=38]="KeyH",r[r.KeyI=39]="KeyI",r[r.KeyJ=40]="KeyJ",r[r.KeyK=41]="KeyK",r[r.KeyL=42]="KeyL",r[r.KeyM=43]="KeyM",r[r.KeyN=44]="KeyN",r[r.KeyO=45]="KeyO",r[r.KeyP=46]="KeyP",r[r.KeyQ=47]="KeyQ",r[r.KeyR=48]="KeyR",r[r.KeyS=49]="KeyS",r[r.KeyT=50]="KeyT",r[r.KeyU=51]="KeyU",r[r.KeyV=52]="KeyV",r[r.KeyW=53]="KeyW",r[r.KeyX=54]="KeyX",r[r.KeyY=55]="KeyY",r[r.KeyZ=56]="KeyZ",r[r.Meta=57]="Meta",r[r.ContextMenu=58]="ContextMenu",r[r.F1=59]="F1",r[r.F2=60]="F2",r[r.F3=61]="F3",r[r.F4=62]="F4",r[r.F5=63]="F5",r[r.F6=64]="F6",r[r.F7=65]="F7",r[r.F8=66]="F8",r[r.F9=67]="F9",r[r.F10=68]="F10",r[r.F11=69]="F11",r[r.F12=70]="F12",r[r.F13=71]="F13",r[r.F14=72]="F14",r[r.F15=73]="F15",r[r.F16=74]="F16",r[r.F17=75]="F17",r[r.F18=76]="F18",r[r.F19=77]="F19",r[r.NumLock=78]="NumLock",r[r.ScrollLock=79]="ScrollLock",r[r.Semicolon=80]="Semicolon",r[r.Equal=81]="Equal",r[r.Comma=82]="Comma",r[r.Minus=83]="Minus",r[r.Period=84]="Period",r[r.Slash=85]="Slash",r[r.Backquote=86]="Backquote",r[r.BracketLeft=87]="BracketLeft",r[r.Backslash=88]="Backslash",r[r.BracketRight=89]="BracketRight",r[r.Quote=90]="Quote",r[r.OEM_8=91]="OEM_8",r[r.IntlBackslash=92]="IntlBackslash",r[r.Numpad0=93]="Numpad0",r[r.Numpad1=94]="Numpad1",r[r.Numpad2=95]="Numpad2",r[r.Numpad3=96]="Numpad3",r[r.Numpad4=97]="Numpad4",r[r.Numpad5=98]="Numpad5",r[r.Numpad6=99]="Numpad6",r[r.Numpad7=100]="Numpad7",r[r.Numpad8=101]="Numpad8",r[r.Numpad9=102]="Numpad9",r[r.NumpadMultiply=103]="NumpadMultiply",r[r.NumpadAdd=104]="NumpadAdd",r[r.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",r[r.NumpadSubtract=106]="NumpadSubtract",r[r.NumpadDecimal=107]="NumpadDecimal",r[r.NumpadDivide=108]="NumpadDivide",r[r.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",r[r.ABNT_C1=110]="ABNT_C1",r[r.ABNT_C2=111]="ABNT_C2",r[r.AudioVolumeMute=112]="AudioVolumeMute",r[r.AudioVolumeUp=113]="AudioVolumeUp",r[r.AudioVolumeDown=114]="AudioVolumeDown",r[r.BrowserSearch=115]="BrowserSearch",r[r.BrowserHome=116]="BrowserHome",r[r.BrowserBack=117]="BrowserBack",r[r.BrowserForward=118]="BrowserForward",r[r.MediaTrackNext=119]="MediaTrackNext",r[r.MediaTrackPrevious=120]="MediaTrackPrevious",r[r.MediaStop=121]="MediaStop",r[r.MediaPlayPause=122]="MediaPlayPause",r[r.LaunchMediaPlayer=123]="LaunchMediaPlayer",r[r.LaunchMail=124]="LaunchMail",r[r.LaunchApp2=125]="LaunchApp2",r[r.MAX_VALUE=126]="MAX_VALUE"})(C1||(C1={}));var S1;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(S1||(S1={}));var x1;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(x1||(x1={}));var E1;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(E1||(E1={}));var D1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.TEXTAREA=1]="TEXTAREA",r[r.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",r[r.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",r[r.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",r[r.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",r[r.CONTENT_TEXT=6]="CONTENT_TEXT",r[r.CONTENT_EMPTY=7]="CONTENT_EMPTY",r[r.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",r[r.CONTENT_WIDGET=9]="CONTENT_WIDGET",r[r.OVERVIEW_RULER=10]="OVERVIEW_RULER",r[r.SCROLLBAR=11]="SCROLLBAR",r[r.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",r[r.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(D1||(D1={}));var L1;(function(r){r[r.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",r[r.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",r[r.TOP_CENTER=2]="TOP_CENTER"})(L1||(L1={}));var k1;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(k1||(k1={}));var I1;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval",r[r.Custom=4]="Custom"})(I1||(I1={}));var O1;(function(r){r[r.None=0]="None",r[r.Text=1]="Text",r[r.Blocks=2]="Blocks"})(O1||(O1={}));var T1;(function(r){r[r.Smooth=0]="Smooth",r[r.Immediate=1]="Immediate"})(T1||(T1={}));var N1;(function(r){r[r.Auto=1]="Auto",r[r.Hidden=2]="Hidden",r[r.Visible=3]="Visible"})(N1||(N1={}));var R1;(function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"})(R1||(R1={}));var P1;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(P1||(P1={}));var A1;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(A1||(A1={}));var j1;(function(r){r[r.Deprecated=1]="Deprecated"})(j1||(j1={}));var M1;(function(r){r[r.Hidden=0]="Hidden",r[r.Blink=1]="Blink",r[r.Smooth=2]="Smooth",r[r.Phase=3]="Phase",r[r.Expand=4]="Expand",r[r.Solid=5]="Solid"})(M1||(M1={}));var F1;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(F1||(F1={}));var B1;(function(r){r[r.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",r[r.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",r[r.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",r[r.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(B1||(B1={}));var W1;(function(r){r[r.None=0]="None",r[r.Same=1]="Same",r[r.Indent=2]="Indent",r[r.DeepIndent=3]="DeepIndent"})(W1||(W1={}));var Cp=class{static chord(e,t){return wi(e,t)}};Cp.CtrlCmd=2048;Cp.Shift=1024;Cp.Alt=512;Cp.WinCtrl=256;function U1(){return{editor:void 0,languages:void 0,CancellationTokenSource:Di,Emitter:M,KeyCode:C1,KeyMod:Cp,Position:V,Range:L,Selection:le,SelectionDirection:R1,MarkerSeverity:S1,MarkerTag:x1,Uri:ve,Token:ld}}var ha;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(ha||(ha={}));var Ue=Ie("instantiationService");function dW(r,e,t,i){e[ha.DI_TARGET]===e?e[ha.DI_DEPENDENCIES].push({id:r,index:t,optional:i}):(e[ha.DI_DEPENDENCIES]=[{id:r,index:t,optional:i}],e[ha.DI_TARGET]=e)}function Ie(r){if(ha.serviceIds.has(r))return ha.serviceIds.get(r);let e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");dW(e,t,n,!1)};return e.toString=()=>r,ha.serviceIds.set(r,e),e}function hW(r){return function(e,t,i){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");dW(r,e,i,!0)}}var it=Ie("codeEditorService");var Gh=class{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new M,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}};Gh.INSTANCE=new Gh;function V1(){return Gh.INSTANCE.getZoomLevel()}function uW(){return Gh.INSTANCE.getTimeSinceLastZoomLevelChanged()}function z1(r){return Gh.INSTANCE.onDidChangeZoomLevel(r)}function mW(){return Gh.INSTANCE.getZoomFactor()}function Sp(){return Gh.INSTANCE.getPixelRatio()}var tw=navigator.userAgent,Hi=tw.indexOf("Firefox")>=0,Qa=tw.indexOf("AppleWebKit")>=0,iw=tw.indexOf("Chrome")>=0,Gn=!iw&&tw.indexOf("Safari")>=0,fW=!iw&&!Gn&&Qa,Bm=tw.indexOf("Android")>=0,H1=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;var Wm={clipboard:{writeText:so||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:so||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>so||H1?0:navigator.keyboard||Gn?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function nw(r,e){if(r===0)return null;let t=(r&65535)>>>0,i=(r&4294901760)>>>16;return i!==0?new xp([TO(t,e),TO(i,e)]):new xp([TO(t,e)])}function TO(r,e){let t=!!(r&2048),i=!!(r&256),n=e===2?i:t,o=!!(r&1024),s=!!(r&512),a=e===2?t:i,l=r&255;return new ua(n,o,s,a,l)}var ua=class{constructor(e,t,i,n,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new xp([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},xp=class{constructor(e){if(e.length===0)throw Vr("parts");this.parts=e}};var NO=class{constructor(e,t,i,n,o,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=o,this.keyAriaLabel=s}},RO=class{};function Are(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return ad.fromString(t)}let e=r.keyCode;if(e===3)return 7;if(Hi){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(We&&e===224)return 57}else if(Qa){if(e===91)return 57;if(We&&e===93)return 57;if(!We&&e===92)return 57}return DO[e]||0}var jre=We?256:2048,Mre=512,Fre=1024,Bre=We?2048:256,kt=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=Are(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=jre),this.altKey&&(t|=Mre),this.shiftKey&&(t|=Fre),this.metaKey&&(t|=Bre),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new ua(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var PO=!1,Ep=null;function Wre(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return PO=!0,null}catch{return PO=!0,null}return r.parent}var Dp=class{static getSameOriginWindowChain(){if(!Ep){Ep=[];let e=window,t;do t=Wre(e),t?Ep.push({window:e,iframeElement:e.frameElement||null}):Ep.push({window:e,iframeElement:null}),e=t;while(e)}return Ep.slice(0)}static hasDifferentOriginAncestor(){return Ep||this.getSameOriginWindowChain(),PO}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0,o=this.getSameOriginWindowChain();for(let s of o){if(i+=s.window.scrollY,n+=s.window.scrollX,s.window===t||!s.iframeElement)break;let a=s.iframeElement.getBoundingClientRect();i+=a.top,n+=a.left}return{top:i,left:n}}};var Tn=class{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=Dp.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Ja=class{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){let n=e,o=e;if(typeof n.wheelDeltaY!="undefined")this.deltaY=n.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS!="undefined"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){let s=e;s.deltaMode===s.DOM_DELTA_LINE?Hi&&!We?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof n.wheelDeltaX!="undefined")Gn&&bi?this.deltaX=-(n.wheelDeltaX/120):this.deltaX=n.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS!="undefined"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let s=e;s.deltaMode===s.DOM_DELTA_LINE?Hi&&!We?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}};var gW=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function pW(r){return!!r&&typeof r.then=="function"}function At(r){let e=new Di,t=r(e.token),i=new Promise((n,o)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),o(Hl())});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),n(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(n,o){return i.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}function Lp(r,e,t){return Promise.race([r,new Promise(i=>e.onCancellationRequested(()=>i(t)))])}var _W=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{this.queuedPromise=null;let i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}},zr=class{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,n)=>{this.doResolve=i,this.doReject=n}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(Hl()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}},AO=class{constructor(e){this.delayer=new zr(e),this.throttler=new _W}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}};function ma(r,e){return e?new Promise((t,i)=>{let n=setTimeout(()=>{o.dispose(),t()},r),o=e.onCancellationRequested(()=>{clearTimeout(n),o.dispose(),i(Hl())})}):At(t=>ma(r,t))}function fa(r,e=0){let t=setTimeout(r,e);return Re(()=>clearTimeout(t))}function $1(r,e=i=>!!i,t=null){let i=0,n=r.length,o=()=>{if(i>=n)return Promise.resolve(t);let s=r[i++];return Promise.resolve(s()).then(l=>e(l)?Promise.resolve(l):o())};return o()}var li=class{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Kl=class{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}},dt=class{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}},rw;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?rw=r=>{let e=setTimeout(()=>{let i=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))}),t=!1;return{dispose(){t||(t=!0,clearTimeout(e))}}}:rw=(r,e)=>{let t=requestIdleCallback(r,typeof e=="number"?{timeout:e}:void 0),i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();var el=class{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=rw(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},K1;(function(r){function e(i){return gW(this,void 0,void 0,function*(){let n,o=yield Promise.all(i.map(s=>s.then(a=>a,a=>{n||(n=a)})));if(typeof n!="undefined")throw n;return o})}r.settled=e;function t(i){return new Promise((n,o)=>gW(this,void 0,void 0,function*(){try{yield i(n,o)}catch(s){o(s)}}))}r.withAsyncBody=t})(K1||(K1={}));var Xe;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.userData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebook="vscode-notebook",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractive="vscode-interactive",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp"})(Xe||(Xe={}));var bW=class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);let t=e.authority,i=this._hosts[t];i&&i.indexOf(":")!==-1&&(i=`[${i}]`);let n=this._ports[t],o=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&tkn=${encodeURIComponent(o)}`),ve.from({scheme:Ya?this._preferredWebSchema:Xe.vscodeRemoteResource,authority:`${i}:${n}`,path:"/vscode-remote-resource",query:s})}},jO=new bW,kp=class{asBrowserUri(e,t){let i=this.toUri(e,t);return i.scheme===Xe.vscodeRemote?jO.rewrite(i):i.scheme===Xe.file&&(so||typeof ei.importScripts=="function"&&ei.origin===`${Xe.vscodeFileResource}://${kp.FALLBACK_AUTHORITY}`)?i.with({scheme:Xe.vscodeFileResource,authority:i.authority||kp.FALLBACK_AUTHORITY,query:null,fragment:null}):i}toUri(e,t){return ve.isUri(e)?e:ve.parse(t.toUrl(e))}};kp.FALLBACK_AUTHORITY="vscode-app";var q1=new kp;function Li(r){for(;r.firstChild;)r.firstChild.remove()}function Ip(r){var e;return(e=r==null?void 0:r.isConnected)!==null&&e!==void 0?e:!1}var vW=class{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function J(r,e,t,i){return new vW(r,e,t,i)}function wW(r){return function(e){return r(new Tn(e))}}function Ure(r){return function(e){return r(new kt(e))}}var Zt=function(e,t,i,n){let o=i;return t==="click"||t==="mousedown"?o=wW(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=Ure(i)),J(e,t,o,n)},yW=function(e,t,i){let n=wW(t);return Y1(e,n,i)};function Y1(r,e,t){return J(r,To&&Wm.pointerEvents?De.POINTER_DOWN:De.MOUSE_DOWN,e,t)}function MO(r,e,t){return J(r,To&&Wm.pointerEvents?De.POINTER_UP:De.MOUSE_UP,e,t)}function Op(r,e){return J(r,"mouseout",t=>{let i=t.relatedTarget;for(;i&&i!==r;)i=i.parentNode;i!==r&&e(t)})}function CW(r,e){return J(r,"pointerout",t=>{let i=t.relatedTarget;for(;i&&i!==r;)i=i.parentNode;i!==r&&e(t)})}var FO=null;function Vre(r){if(!FO){let e=t=>setTimeout(()=>t(new Date().getTime()),0);FO=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return FO.call(self,r)}var BO,Ro,Z1=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){we(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let r=[],e=null,t=!1,i=!1,n=()=>{for(t=!1,e=r,r=[],i=!0;e.length>0;)e.sort(Z1.sort),e.shift().execute();i=!1};Ro=(o,s=0)=>{let a=new Z1(o,s);return r.push(a),t||(t=!0,Vre(n)),a},BO=(o,s)=>{if(i){let a=new Z1(o,s);return e.push(a),a}else return Ro(o,s)}})();var zre=8,Hre=function(r,e){return e},SW=class extends H{constructor(e,t,i,n=Hre,o=zre){super();let s=null,a=0,l=this._register(new li),c=()=>{a=new Date().getTime(),i(s),s=null};this._register(J(e,t,d=>{s=n(s,d);let h=new Date().getTime()-a;h>=o?(l.cancel(),c()):l.setIfNotSet(c,o-h)}))}};function ow(r,e,t,i,n){return new SW(r,e,t,i,n)}function G1(r){return document.defaultView.getComputedStyle(r,null)}function Xh(r){if(r!==document.body)return new Wt(r.clientWidth,r.clientHeight);if(To&&window.visualViewport)return new Wt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Wt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Wt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Wt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}var Bi=class{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){let n=G1(e),o="0";return n&&(n.getPropertyValue?o=n.getPropertyValue(t):o=n.getAttribute(i)),Bi.convertToPixels(e,o)}static getBorderLeftWidth(e){return Bi.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Bi.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Bi.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Bi.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Bi.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Bi.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Bi.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Bi.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Bi.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Bi.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Bi.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Bi.getDimension(e,"margin-bottom","marginBottom")}},Wt=class{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Wt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Wt?e:new Wt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function X1(r){let e=r.offsetParent,t=r.offsetTop,i=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==document.body&&r!==document.documentElement;){t-=r.scrollTop;let n=DW(r)?null:G1(r);n&&(i-=n.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(i+=Bi.getBorderLeftWidth(r),t+=Bi.getBorderTopWidth(r),t+=r.offsetTop,i+=r.offsetLeft,e=r.offsetParent)}return{left:i,top:t}}function xW(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function ci(r){let e=r.getBoundingClientRect();return{left:e.left+tl.scrollX,top:e.top+tl.scrollY,width:e.width,height:e.height}}var tl=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Po(r){let e=Bi.getMarginLeft(r)+Bi.getMarginRight(r);return r.offsetWidth+e}function Q1(r){let e=Bi.getBorderLeftWidth(r)+Bi.getBorderRightWidth(r),t=Bi.getPaddingLeft(r)+Bi.getPaddingRight(r);return r.offsetWidth-e-t}function EW(r){let e=Bi.getBorderTopWidth(r)+Bi.getBorderBottomWidth(r),t=Bi.getPaddingTop(r)+Bi.getPaddingBottom(r);return r.offsetHeight-e-t}function sw(r){let e=Bi.getMarginTop(r)+Bi.getMarginBottom(r);return r.offsetHeight+e}function Ts(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function WO(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function UO(r,e,t){return!!WO(r,e,t)}function DW(r){return r&&!!r.host&&!!r.mode}function Qh(r){return!!ga(r)}function ga(r){for(;r.parentNode;){if(r===document.body)return null;r=r.parentNode}return DW(r)?r:null}function Jh(){let r=document.activeElement;for(;r==null?void 0:r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function un(r=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",r.appendChild(e),e}var VO=null;function LW(){return VO||(VO=un()),VO}function $re(r){var e,t;return((e=r==null?void 0:r.sheet)===null||e===void 0?void 0:e.rules)?r.sheet.rules:((t=r==null?void 0:r.sheet)===null||t===void 0?void 0:t.cssRules)?r.sheet.cssRules:[]}function aw(r,e,t=LW()){!t||!e||t.sheet.insertRule(r+"{"+e+"}",0)}function Tp(r,e=LW()){if(!e)return;let t=$re(e),i=[];for(let n=0;n<t.length;n++)t[n].selectorText.indexOf(r)!==-1&&i.push(n);for(let n=i.length-1;n>=0;n--)e.sheet.deleteRule(i[n])}function J1(r){return typeof HTMLElement=="object"?r instanceof HTMLElement:r&&typeof r=="object"&&r.nodeType===1&&typeof r.nodeName=="string"}var De={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Qa?"webkitAnimationStart":"animationstart",ANIMATION_END:Qa?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Qa?"webkitAnimationIteration":"animationiteration"},St={stop:function(r,e){r.preventDefault?r.preventDefault():r.returnValue=!1,e&&(r.stopPropagation?r.stopPropagation():r.cancelBubble=!0)}};function kW(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function IW(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}var OW=class extends H{constructor(e){super();this._onDidFocus=this._register(new M),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new M),this.onDidBlur=this._onDidBlur.event;let t=Ts(document.activeElement,e),i=!1,n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(i=!0,window.setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Ts(document.activeElement,e)!==t&&(t?o():n())},this._register(J(e,De.FOCUS,n,!0)),this._register(J(e,De.BLUR,o,!0))}};function il(r){return new OW(r)}function X(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function TW(r,e){return r.insertBefore(e,r.firstChild),e}function pa(r,...e){r.innerText="",X(r,...e)}var Kre=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/,lw;(function(r){r.HTML="http://www.w3.org/1999/xhtml",r.SVG="http://www.w3.org/2000/svg"})(lw||(lw={}));function NW(r,e,t,...i){let n=Kre.exec(e);if(!n)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let o=n[1]||"div",s;return r!==lw.HTML?s=document.createElementNS(r,o):s=document.createElement(o),n[3]&&(s.id=n[3]),n[4]&&(s.className=n[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{let l=t[a];typeof l!="undefined"&&(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...i),s}function oe(r,e,...t){return NW(lw.HTML,r,e,...t)}oe.SVG=function(r,e,...t){return NW(lw.SVG,r,e,...t)};function Wn(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function Nn(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function RW(r){return Array.prototype.slice.call(document.getElementsByTagName(r),0)}function zO(r){let e=window.devicePixelRatio*r;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function ex(r){window.open(r,"_blank","noopener")}function PW(r){let e=()=>{r(),t=Ro(e)},t=Ro(e);return Re(()=>t.dispose())}jO.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Ns(r){return r?`url('${q1.asBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function HO(r){return`'${r.replace(/'/g,"%27")}'`}var ql=class extends M{constructor(){super();this._subscriptions=new G,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(J(window,"keydown",e=>{if(e.defaultPrevented)return;let t=new kt(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(J(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(J(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(J(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(J(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(J(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ql.instance||(ql.instance=new ql),ql.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};function AW(r,e){let t=window.matchMedia(r);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function tx(r){return!r||typeof r!="string"?!0:r.trim().length===0}var qre=/{(\d+)}/g;function Dr(r,...e){return e.length===0?r:r.replace(qre,function(t,i){let n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function Np(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Xn(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ix(r,e){if(!r||!e)return r;let t=e.length;if(t===0||r.length===0)return r;let i=0;for(;r.indexOf(e,i)===i;)i=i+t;return r.substring(i)}function jW(r,e){if(!r||!e)return r;let t=e.length,i=r.length;if(t===0||i===0)return r;let n=i,o=-1;for(;o=r.lastIndexOf(e,n-1),!(o===-1||o+t!==n);){if(o===0)return"";n=o}return r.substring(0,n)}function MW(r){return r.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function nx(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Xn(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(r,i)}function FW(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function rx(r){return(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")}function sr(r){return r.split(/\r\n|\r|\n/)}function Wi(r){for(let e=0,t=r.length;e<t;e++){let i=r.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Lt(r,e=0,t=r.length){for(let i=e;i<t;i++){let n=r.charCodeAt(i);if(n!==32&&n!==9)return r.substring(e,i)}return r.substring(e,t)}function Lr(r,e=r.length-1){for(let t=e;t>=0;t--){let i=r.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function eu(r,e){return r<e?-1:r>e?1:0}function ox(r,e,t=0,i=r.length,n=0,o=e.length){for(;t<i&&n<o;t++,n++){let l=r.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}let s=i-t,a=o-n;return s<a?-1:s>a?1:0}function cw(r,e){return Rp(r,e,0,r.length,0,e.length)}function Rp(r,e,t=0,i=r.length,n=0,o=e.length){for(;t<i&&n<o;t++,n++){let l=r.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return ox(r.toLowerCase(),e.toLowerCase(),t,i,n,o);Yl(l)&&(l-=32),Yl(c)&&(c-=32);let d=l-c;if(d!==0)return d}let s=i-t,a=o-n;return s<a?-1:s>a?1:0}function Yl(r){return r>=97&&r<=122}function Rs(r){return r>=65&&r<=90}function Um(r,e){return r.length===e.length&&Rp(r,e)===0}function Pp(r,e){let t=e.length;return e.length>r.length?!1:Rp(r,e,0,t)===0}function nl(r,e){let t,i=Math.min(r.length,e.length);for(t=0;t<i;t++)if(r.charCodeAt(t)!==e.charCodeAt(t))return t;return i}function Vm(r,e){let t,i=Math.min(r.length,e.length),n=r.length-1,o=e.length-1;for(t=0;t<i;t++)if(r.charCodeAt(n-t)!==e.charCodeAt(o-t))return t;return i}function ki(r){return 55296<=r&&r<=56319}function cd(r){return 56320<=r&&r<=57343}function sx(r,e){return(r-55296<<10)+(e-56320)+65536}function rl(r,e,t){let i=r.charCodeAt(t);if(ki(i)&&t+1<e){let n=r.charCodeAt(t+1);if(cd(n))return sx(i,n)}return i}function Ap(r,e){let t=r.charCodeAt(e-1);if(cd(t)&&e>1){let i=r.charCodeAt(e-2);if(ki(i))return sx(i,t)}return t}function zm(r,e){let t=Zl.getInstance(),i=e,n=r.length,o=rl(r,n,e);e+=o>=65536?2:1;let s=t.getGraphemeBreakType(o);for(;e<n;){let a=rl(r,n,e),l=t.getGraphemeBreakType(a);if(Fp(s,l))break;e+=a>=65536?2:1,s=l}return e-i}function BW(r,e){let t=Zl.getInstance(),i=e,n=Ap(r,e);e-=n>=65536?2:1;let o=t.getGraphemeBreakType(n);for(;e>0;){let s=Ap(r,e),a=t.getGraphemeBreakType(s);if(Fp(a,o))break;e-=s>=65536?2:1,o=a}return i-e}var Yre=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function tu(r){return Yre.test(r)}var Zre=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function WW(r){return Zre.test(r)}var Gre=/^[\t\n\r\x20-\x7E]*$/;function jp(r){return Gre.test(r)}var $O=/[\u2028\u2029]/;function ax(r){return $O.test(r)}function UW(r){for(let e=0,t=r.length;e<t;e++)if(uo(r.charCodeAt(e)))return!0;return!1}function uo(r){return r=+r,r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function Hm(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129003||r>=129280&&r<=129535||r>=129648&&r<=129750}var VW=String.fromCharCode(65279);function Mp(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function zW(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function lx(r){let e=90-65+1;return r=r%(2*e),r<e?String.fromCharCode(97+r):String.fromCharCode(65+r-e)}function $m(r){return Zl.getInstance().getGraphemeBreakType(r)}function Fp(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}var Zl=class{constructor(){this._data=Xre()}static getInstance(){return Zl._INSTANCE||(Zl._INSTANCE=new Zl),Zl._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,i=t.length/3,n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}};Zl._INSTANCE=null;function Xre(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function HW(r,e){if(r===0)return 0;let t=Qre(r,e);if(t!==void 0)return t;let i=Ap(e,r);return r-=cx(i),r}function Qre(r,e){let t=Ap(e,r);for(r-=cx(t);Jre(t)||t===65039||t===8419;){if(r===0)return;t=Ap(e,r),r-=cx(t)}if(!!Hm(t)){if(r>=0){let i=Ap(e,r);i===8205&&(r-=cx(i))}return r}}function cx(r){return r>=65536?2:1}function Jre(r){return 127995<=r&&r<=127999}var $W,KW,qW=class{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){let t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}},YW=class{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?ox(e,this._value,0,e.length,this._from,this._to):Rp(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},ZW=class{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){let t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?ox(e,this._value,0,e.length,this._from,this._to):Rp(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},GW=class{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ZW(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return cw(e,this._value.scheme);if(this._states[this._stateIdx]===2)return cw(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return eu(e,this._value.query);if(this._states[this._stateIdx]===5)return eu(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}},dw=class{constructor(){this.height=1}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}},Gl=class{constructor(e){this._iter=e}static forUris(e=()=>!1){return new Gl(new GW(e))}static forStrings(){return new Gl(new qW)}static forConfigKeys(){return new Gl(new YW)}clear(){this._root=void 0}set(e,t){let i=this._iter.reset(e),n;this._root||(this._root=new dw,this._root.segment=i.value());let o=[];for(n=this._root;;){let a=i.cmp(n.segment);if(a>0)n.left||(n.left=new dw,n.left.segment=i.value()),o.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new dw,n.right.segment=i.value()),o.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new dw,n.mid.segment=i.value()),o.push([0,n]),n=n.mid;else break}let s=n.value;n.value=t,n.key=e;for(let a=o.length-1;a>=0;a--){let l=o[a][1];l.updateHeight();let c=l.balanceFactor();if(c<-1||c>1){let d=o[a][0],h=o[a+1][0];if(d===1&&h===1)o[a][1]=l.rotateLeft();else if(d===-1&&h===-1)o[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){let t=this._iter.reset(e),i=this._root;for(;i;){let n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){let t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;let n=this._iter.reset(e),o=[],s=this._root;for(;s;){let a=n.cmp(s.segment);if(a>0)o.push([-1,s]),s=s.left;else if(a<0)o.push([1,s]),s=s.right;else if(n.hasNext())n.next(),o.push([0,s]),s=s.mid;else break}if(!!s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){let a=this._min(s.right),{key:l,value:c,segment:d}=a;this._delete(a.key,!1),s.key=l,s.value=c,s.segment=d}else{let a=(i=s.left)!==null&&i!==void 0?i:s.right;if(o.length>0){let[l,c]=o[o.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){let l=o[a][1];l.updateHeight();let c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=o[a+1][1]=o[a+1][1].rotateRight()),o[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=o[a+1][1]=o[a+1][1].rotateLeft()),o[a][1]=l.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t=this._iter.reset(e),i=this._root,n;for(;i;){let o=t.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){let t=this._iter.reset(e),i=this._root;for(;i;){let n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(let[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}},XW=class{constructor(e,t){this.uri=e,this.value=t}},rn=class{constructor(e,t){this[$W]="ResourceMap",e instanceof rn?(this.map=new Map(e.map),this.toKey=t??rn.defaultToKey):(this.map=new Map,this.toKey=e??rn.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new XW(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t!="undefined"&&(e=e.bind(t));for(let[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[($W=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};rn.defaultToKey=r=>r.toString();var QW=class{constructor(){this[KW]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){let i=this._map.get(e);if(!!i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._state,n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}values(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}entries(){let e=this,t=this._state,i=this._head,n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){let o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return n}[(KW=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(let[t,i]of e)this.set(t,i)}},Ao=class extends QW{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};var JW=typeof Buffer!="undefined",KO,Km=class{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return JW&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new Km(e)}toString(){return JW?this.buffer.toString():(KO||(KO=new TextDecoder),KO.decode(this.buffer))}};function eU(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function tU(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function Ps(r,e){return r[e]*Math.pow(2,24)+r[e+1]*Math.pow(2,16)+r[e+2]*Math.pow(2,8)+r[e+3]}function As(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function qO(r,e){return r[e]}function YO(r,e,t){r[t]=e}function hw(r){let e=JSON.parse(r);return e=ZO(e),e}function ZO(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return ve.revive(r);case 2:return new RegExp(r.source,r.flags)}if(r instanceof Km||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=ZO(r[t],e+1);else for(let t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=ZO(r[t],e+1))}return r}function eoe(r){return r.replace(/[\\/]/g,zi.sep)}function iU(r){return r.indexOf("/")===-1&&(r=eoe(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function nU(r,e,t,i=yp){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!Pp(r,e))return!1;if(e.length===r.length)return!0;let o=e.length;return e.charAt(e.length-1)===i&&o--,r.charAt(o)===i}return e.charAt(e.length-1)!==i&&(e+=i),r.indexOf(e)===0}function toe(r){return r>=65&&r<=90||r>=97&&r<=122}function rU(r){let e=wp(r);return bi?r.length>3?!1:GO(e)&&(r.length===2||e.charCodeAt(2)===92):e===zi.sep}function GO(r){return bi?toe(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function uw(r){return ew(r,!0)}var oU=class{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:eu(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return ve.joinPath(e,...t)}basenameOrAuthority(e){return ar(e)||e.authority}basename(e){return zi.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Xe.file?t=ve.file(r1(uw(e))).path:(t=zi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Xe.file?t=ve.file(wp(uw(e))).path:t=zi.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===Xe.file){let i=ve.file(tW(uw(e),t));return e.with({authority:i.authority,path:i.path})}return t=iU(t),e.with({path:zi.resolve(e.path,t)})}},Hr=new oU(()=>!1),dx=Hr.isEqual.bind(Hr),hx=Hr.basenameOrAuthority.bind(Hr),ar=Hr.basename.bind(Hr),Bp=Hr.dirname.bind(Hr),sU=Hr.joinPath.bind(Hr),aU=Hr.normalizePath.bind(Hr),XO=Hr.resolvePath.bind(Hr),Xl;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){let i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(s=>{let[a,l]=s.split(":");a&&l&&i.set(a,l)});let o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(r.META_DATA_MIME,o),i}r.parseMetaData=e})(Xl||(Xl={}));function ux(r){return Array.isArray(r)}function mo(r){return typeof r=="string"}function mn(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function _a(r){return typeof r=="number"&&!isNaN(r)}function mx(r){return r===!0||r===!1}function Rn(r){return typeof r=="undefined"}function lU(r){return!lr(r)}function lr(r){return Rn(r)||r===null}function xt(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function mw(r){if(lr(r))throw new Error("Assertion Failed: argument is undefined or null");return r}function qm(r){return typeof r=="function"}function cU(r,e){let t=Math.min(r.length,e.length);for(let i=0;i<t;i++)ioe(r[i],e[i])}function ioe(r,e){if(mo(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(qm(e)){try{if(r instanceof e)return}catch{}if(!lr(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function noe(r){let e=[],t=Object.getPrototypeOf(r);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function Wp(r){let e=[];for(let t of noe(r))typeof r[t]=="function"&&e.push(t);return e}function dU(r,e){let t=n=>function(){let o=Array.prototype.slice.call(arguments,0);return e(n,o)},i={};for(let n of r)i[n]=t(n);return i}function ol(r){return r===null?void 0:r}function hU(r,e="Unreachable"){throw new Error(e)}var jt=Ie("commandService"),Ke=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new M,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.description){let s=[];for(let l of r.description.args)s.push(l.constraint);let a=r.handler;r.handler=function(l,...c){return cU(c,s),a(l,...c)}}let{id:t}=r,i=this._commands.get(t);i||(i=new yn,this._commands.set(t,i));let n=i.unshift(r),o=Re(()=>{n();let s=this._commands.get(t);(s==null?void 0:s.isEmpty())&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(r,e){return Ke.registerCommand(r,(t,...i)=>t.get(jt).executeCommand(e,...i))}getCommand(r){let e=this._commands.get(r);if(!(!e||e.isEmpty()))return ot.first(e)}getCommands(){let r=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&r.set(e,t)}return r}};Ke.registerCommand("noop",()=>{});var fw;(function(r){r[r.API=0]="API",r[r.USER=1]="USER"})(fw||(fw={}));var uU=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},cr=Ie("openerService"),mU=Object.freeze({_serviceBrand:void 0,registerOpener(){return H.None},registerValidator(){return H.None},registerExternalUriResolver(){return H.None},setDefaultExternalOpener(){},registerExternalOpener(){return H.None},open(){return uU(this,void 0,void 0,function*(){return!1})},resolveExternalUri(r){return uU(this,void 0,void 0,function*(){return{resolved:r,dispose(){}}})}});function Ym(r,e){return ve.isUri(r)?Um(r.scheme,e):Pp(r,e+":")}var QO=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},fx=function(r,e){return function(t,i){e(t,i,r)}},Zm=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},JO=class{constructor(e){this._commandService=e}open(e,t){return Zm(this,void 0,void 0,function*(){if(!Ym(e,Xe.command))return!1;if(!(t==null?void 0:t.allowCommands))return!0;typeof e=="string"&&(e=ve.parse(e));let i=[];try{i=hw(decodeURIComponent(e.query))}catch{try{i=hw(e.query)}catch{}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0})}};JO=QO([fx(0,jt)],JO);var eT=class{constructor(e){this._editorService=e}open(e,t){return Zm(this,void 0,void 0,function*(){typeof e=="string"&&(e=ve.parse(e));let i,n=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return n&&(i={startLineNumber:parseInt(n[1]),startColumn:n[2]?parseInt(n[2]):1},e=e.with({fragment:""})),e.scheme===Xe.file&&(e=aU(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,context:(t==null?void 0:t.fromUserGesture)?fw.USER:fw.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};eT=QO([fx(0,it)],eT);var gx=class{constructor(e,t){this._openers=new yn,this._validators=new yn,this._resolvers=new yn,this._resolvedUriTargets=new rn(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new yn,this._defaultExternalOpener={openExternal:i=>Zm(this,void 0,void 0,function*(){return Ym(i,Xe.http)||Ym(i,Xe.https)?ex(i):window.location.href=i,!0})},this._openers.push({open:(i,n)=>Zm(this,void 0,void 0,function*(){return(n==null?void 0:n.openExternal)||Ym(i,Xe.mailto)||Ym(i,Xe.http)||Ym(i,Xe.https)?(yield this._doOpenExternal(i,n),!0):!1})}),this._openers.push(new JO(t)),this._openers.push(new eT(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var i;return Zm(this,void 0,void 0,function*(){let n=typeof e=="string"?ve.parse(e):e,o=(i=this._resolvedUriTargets.get(n))!==null&&i!==void 0?i:e;for(let s of this._validators)if(!(yield s.shouldOpen(o)))return!1;for(let s of this._openers)if(yield s.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Zm(this,void 0,void 0,function*(){for(let i of this._resolvers)try{let n=yield i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Zm(this,void 0,void 0,function*(){let i=typeof e=="string"?ve.parse(e):e,n;try{n=(yield this.resolveExternalUri(i,t)).resolved}catch{n=i}let o;if(typeof e=="string"&&i.toString()===n.toString()?o=e:o=encodeURI(n.toString(!0)),t==null?void 0:t.allowContributedOpeners){let s=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(let a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:i,preferredOpenerId:s},Me.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:i},Me.None)})}dispose(){this._validators.clear()}};gx=QO([fx(0,it),fx(1,jt)],gx);function Up(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function sl(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;let e=Array.isArray(r)?[]:{};return Object.keys(r).forEach(t=>{r[t]&&typeof r[t]=="object"?e[t]=sl(r[t]):e[t]=r[t]}),e}function fU(r){if(!r||typeof r!="object")return r;let e=[r];for(;e.length>0;){let t=e.shift();Object.freeze(t);for(let i in t)if(gU.call(t,i)){let n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&e.push(n)}}return r}var gU=Object.prototype.hasOwnProperty;function pU(r,e){return tT(r,e,new Set)}function tT(r,e,t){if(lr(r))return r;let i=e(r);if(typeof i!="undefined")return i;if(ux(r)){let n=[];for(let o of r)n.push(tT(o,e,t));return n}if(mn(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);let n={};for(let o in r)gU.call(r,o)&&(n[o]=tT(r[o],e,t));return t.delete(r),n}return r}function Un(r,e,t=!0){return mn(r)?(mn(e)&&Object.keys(e).forEach(i=>{i in r?t&&(mn(r[i])&&mn(e[i])?Un(r[i],e[i],t):r[i]=e[i]):r[i]=e[i]}),r):e}function $r(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!$r(r[t],e[t]))return!1}else{let n=[];for(i in r)n.push(i);n.sort();let o=[];for(i in e)o.push(i);if(o.sort(),!$r(n,o))return!1;for(t=0;t<n.length;t++)if(!$r(r[n[t]],e[n[t]]))return!1}return!0}function al(r,e,t){let i=e(r);return typeof i=="undefined"?t:i}var roe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},iT=class extends H{constructor(e,t={}){super();this._onDidUpdate=this._register(new M),this._editor=e,this._options=Un(t,roe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(i=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(i=>{this.revealFirst=!0})),this._init()}_init(){!!this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(i=>{this.ranges.push({rhs:!0,range:new L(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new L(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,i)=>L.compareRangesUsingStarts(t.range,i.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,i=this._editor.getPosition();if(!i){this.nextIdx=0;return}for(let n=0,o=this.ranges.length;n<o&&!t;n++){let s=this.ranges[n].range;i.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=n+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Up(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let n=i.range.getStartPosition();this._editor.setPosition(n),this._editor.revealRangeInCenter(i.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}};var js=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new M,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var ooe=We?1.5:1.35,nT=8,Ql=class{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,i,n){let o=e.get(42),s=e.get(46),a=e.get(45),l=e.get(44),c=e.get(58),d=e.get(55);return Ql._create(o,s,a,l,c,d,t,i,n)}static _create(e,t,i,n,o,s,a,l,c){o===0?o=ooe*i:o<nT&&(o=o*i),o=Math.round(o),o<nT&&(o=nT);let d=1+(c?0:js.getZoomLevel()*.1);return i*=d,o*=d,new Ql({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,lineHeight:o,letterSpacing:s})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){let t=Ql._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},soe=1,Vp=class extends Ql{constructor(e,t){super(e);this._editorStylingBrand=void 0,this.version=soe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};function _U(r){return r&&typeof r.id=="string"}var iu={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Qn;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(Qn||(Qn={}));var kr;(function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"})(kr||(kr={}));var Gm=class{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&$r(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},dd=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},hd;(function(r){r[r.Disabled=0]="Disabled",r[r.EnabledForActive=1]="EnabledForActive",r[r.Enabled=2]="Enabled"})(hd||(hd={}));var Jl=class{constructor(e,t,i){this.visibleColumn=e,this.className=t,this.horizontalLine=i}},zp=class{constructor(e,t){this.top=e,this.endColumn=t}},gw=class{constructor(e,t,i,n,o,s){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=o,this._isTracked=s}},rT=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}};function Hp(r){return pw(r,0)}function pw(r,e){switch(typeof r){case"object":return r===null?ud(349,e):Array.isArray(r)?loe(r,e):coe(r,e);case"string":return px(r,e);case"boolean":return aoe(r,e);case"number":return ud(r,e);case"undefined":return ud(937,e);default:return ud(617,e)}}function ud(r,e){return(e<<5)-e+r|0}function aoe(r,e){return ud(r?433:863,e)}function px(r,e){e=ud(149417,e);for(let t=0,i=r.length;t<i;t++)e=ud(r.charCodeAt(t),e);return e}function loe(r,e){return e=ud(104579,e),r.reduce((t,i)=>pw(i,t),e)}function coe(r,e){return e=ud(181387,e),Object.keys(r).sort().reduce((t,i)=>(t=px(i,t),pw(r[i],t)),e)}function oT(r,e,t=32){let i=t-e,n=~((1<<i)-1);return(r<<e|(n&r)>>>i)>>>0}function bU(r,e=0,t=r.byteLength,i=0){for(let n=0;n<t;n++)r[e+n]=i}function doe(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function _w(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):doe((r>>>0).toString(16),e/4)}var $p=class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let i=this._buff,n=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(ki(s))if(a+1<t){let c=e.charCodeAt(a+1);cd(c)?(a++,l=sx(s,c)):l=65533}else{o=s;break}else cd(s)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),_w(this._h0)+_w(this._h1)+_w(this._h2)+_w(this._h3)+_w(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,bU(this._buff,this._buffLen),this._buffLen>56&&(this._step(),bU(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=$p._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,oT(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let i=this._h0,n=this._h1,o=this._h2,s=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=n&o|~n&s,c=1518500249):h<40?(l=n^o^s,c=1859775393):h<60?(l=n&o|n&s|o&s,c=2400959708):(l=n^o^s,c=3395469782),d=oT(i,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=s,s=o,o=oT(n,30),n=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};$p._bigBlock32=new DataView(new ArrayBuffer(320));function fo(r,e,t){return Math.min(Math.max(r,e),t)}var sT=class{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}};var aT="**",vU="/",_x="[/\\\\]",bx="[^/\\\\]",hoe=/\//g;function wU(r){switch(r){case 0:return"";case 1:return`${bx}*?`;default:return`(?:${_x}|${bx}+${_x}|${_x}${bx}+)*?`}}function yU(r,e){if(!r)return[];let t=[],i=!1,n=!1,o="";for(let s of r){switch(s){case e:if(!i&&!n){t.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}o+=s}return o&&t.push(o),t}function CU(r){if(!r)return"";let e="",t=yU(r,vU);if(t.every(i=>i===aT))e=".*";else{let i=!1;t.forEach((n,o)=>{if(n===aT){i||(e+=wU(2),i=!0);return}let s=!1,a="",l=!1,c="";for(let d of n){if(d!=="}"&&s){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===vU?h="":h=Xn(d),c+=h;continue}switch(d){case"{":s=!0;continue;case"[":l=!0;continue;case"}":e+=`(?:${yU(a,",").map(m=>CU(m)).join("|")})`,s=!1,a="";break;case"]":e+="["+c+"]",l=!1,c="";break;case"?":e+=bx;continue;case"*":e+=wU(1);continue;default:e+=Xn(d)}}o<t.length-1&&(t[o+1]!==aT||o+2<t.length)&&(e+=_x),i=!1})}return e}var uoe=/^\*\*\/\*\.[\w\.-]+$/,moe=/^\*\*\/([\w\.-]+)\/?$/,foe=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,goe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,poe=/^\*\*((\/[\w\.-]+)+)\/?$/,_oe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,SU=new Ao(1e4),xU=function(){return!1},ec=function(){return null};function lT(r,e){if(!r)return ec;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();let i=`${t}_${!!e.trimForExclusions}`,n=SU.get(i);if(n)return EU(n,r);let o;if(uoe.test(t)){let s=t.substr(4);n=function(a,l){return typeof a=="string"&&a.endsWith(s)?t:null}}else(o=moe.exec(cT(t,e)))?n=boe(o[1],t):(e.trimForExclusions?goe:foe).test(t)?n=voe(t,e):(o=poe.exec(cT(t,e)))?n=DU(o[1].substr(1),t,!0):(o=_oe.exec(cT(t,e)))?n=DU(o[1],t,!1):n=woe(t);return SU.set(i,n),EU(n,r)}function EU(r,e){return typeof e=="string"?r:function(t,i){return nU(t,e.base)?r(iW(e.base,t),i):null}}function cT(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function boe(r,e){let t=`/${r}`,i=`\\${r}`,n=function(s,a){return typeof s!="string"?null:a?a===r?e:null:s===r||s.endsWith(t)||s.endsWith(i)?e:null},o=[r];return n.basenames=o,n.patterns=[e],n.allBasenames=o,n}function voe(r,e){let t=kU(r.slice(1,-1).split(",").map(a=>lT(a,e)).filter(a=>a!==ec),r),i=t.length;if(!i)return ec;if(i===1)return t[0];let n=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return r;return null},o=t.find(a=>!!a.allBasenames);o&&(n.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(n.allPaths=s),n}function DU(r,e,t){let i=yp===zi.sep,n=i?r:r.replace(hoe,yp),o=yp+n,s=zi.sep+r,a=t?function(l,c){return typeof l=="string"&&(l===n||l.endsWith(o)||!i&&(l===r||l.endsWith(s)))?e:null}:function(l,c){return typeof l=="string"&&(l===n||!i&&l===r)?e:null};return a.allPaths=[(t?"*/":"./")+r],a}function woe(r){try{let e=new RegExp(`^${CU(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return ec}}function LU(r,e,t){return!r||typeof e!="string"?!1:dT(r)(e,void 0,t)}function dT(r,e={}){if(!r)return xU;if(typeof r=="string"||yoe(r)){let t=lT(r,e);if(t===ec)return xU;let i=function(n,o){return!!t(n,o)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return Coe(r,e)}function yoe(r){let e=r;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function Coe(r,e){let t=kU(Object.getOwnPropertyNames(r).map(a=>Soe(a,r[a],e)).filter(a=>a!==ec)),i=t.length;if(!i)return ec;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];let a=function(d,h){for(let u=0,m=t.length;u<m;u++){let p=t[u](d,h);if(p)return p}return null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);let c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}let n=function(a,l,c){let d;for(let h=0,u=t.length;h<u;h++){let m=t[h];m.requiresSiblings&&c&&(l||(l=$l(a)),d||(d=l.substr(0,l.length-nW(a).length)));let p=m(a,l,d,c);if(p)return p}return null},o=t.find(a=>!!a.allBasenames);o&&(n.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(n.allPaths=s),n}function Soe(r,e,t){if(e===!1)return ec;let i=lT(r,t);if(i===ec)return ec;if(typeof e=="boolean")return i;if(e){let n=e.when;if(typeof n=="string"){let o=(s,a,l,c)=>{if(!c||!i(s,a))return null;let d=n.replace("$(basename)",l),h=c(d);return pW(h)?h.then(u=>u?r:null):h?r:null};return o.requiresSiblings=!0,o}}return i}function kU(r,e){let t=r.filter(a=>!!a.basenames);if(t.length<2)return r;let i=t.reduce((a,l)=>{let c=l.basenames;return c?a.concat(c):a},[]),n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{let c=l.patterns;return c?a.concat(c):a},[]);let o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){let h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}let c=i.indexOf(l);return c!==-1?n[c]:null};o.basenames=i,o.patterns=n,o.allBasenames=i;let s=r.filter(a=>!a.basenames);return s.push(o),s}function hT(r,e,t,i){if(Array.isArray(r)){let n=0;for(let o of r){let s=hT(o,e,t,i);if(s===10)return s;s>n&&(n=s)}return n}else{if(typeof r=="string")return i?r==="*"?5:r===t?10:0:0;if(r){let{language:n,pattern:o,scheme:s,hasAccessToAllModels:a}=r;if(!i&&!a)return 0;let l=0;if(s)if(s===e.scheme)l=10;else if(s==="*")l=5;else return 0;if(n)if(n===t)l=10;else if(n==="*")l=Math.max(l,5);else return 0;if(o){let c;if(typeof o=="string"?c=o:c=Object.assign(Object.assign({},o),{base:wp(o.base)}),c===e.fsPath||LU(c,e.fsPath))l=10;else return 0}return l}else return 0}}var Gt=Ie("modelService");function IU(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}function OU(r){return typeof r=="string"?!1:Array.isArray(r)?r.every(OU):!!r.exclusive}var Ui=class{constructor(){this._clock=0,this._entries=[],this._onDidChange=new M}get onDidChange(){return this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Re(()=>{if(i){let n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);let t=[];for(let i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){let t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){let t=[],i,n;return this._orderedForEach(e,o=>{i&&n===o._score?i.push(o.provider):(n=o._score,i=[o.provider],t.push(i))}),t}_orderedForEach(e,t){if(!!e){this._updateScores(e);for(let i of this._entries)i._score>0&&t(i)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let i of this._entries)if(i._score=hT(i.selector,e.uri,e.getLanguageId(),IU(e)),OU(i.selector)&&i._score>0){for(let n of this._entries)n._score=0;i._score=1e3;break}this._entries.sort(Ui._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}},TU=new WeakMap,xoe=0;function Eoe(r){let e=TU.get(r);return e===void 0&&(e=++xoe,TU.set(r,e)),e}var nu=class{constructor(e,t,i=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=i,this._cache=new Ao(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>pw(Eoe(i),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){let t=this._key(e),i=this._cache.get(t);return this._clamp(i==null?void 0:i.value)}update(e,t){let i=this._key(e),n=this._cache.get(i);return n||(n=new sT,this._cache.set(i,n)),n.update(t),this.get(e)}};var uT=class{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Re(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let i=null,n=!1;return this._promises.set(e,t.then(o=>{this._promises.delete(e),!(n||!o)&&(i=this.register(e,o))})),Re(()=>{n=!0,i&&i.dispose()})}getPromise(e){let t=this.get(e);if(t)return Promise.resolve(t);let i=this._promises.get(e);return i?i.then(n=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};var NU=class{constructor(){this._icons=new Map,this._onDidRegister=new M}add(e){let t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}},RU=new NU,Kp=RU;function Kr(r,e){return new ge(r,e)}function PU(r){return r?r.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}var ge=class{constructor(e,t,i){this.id=e,this.definition=t,this.description=i,RU.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}},Vn;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9\\-]+",r.iconModifierExpression="~[A-Za-z]+";let e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(o){if(o instanceof ge)return["codicon","codicon-"+o.id];let s=e.exec(o.id);if(!s)return t(ge.error);let[,a,l]=s,c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}r.asClassNameArray=t;function i(o){return t(o).join(" ")}r.asClassName=i;function n(o){return"."+t(o).join(".")}r.asCSSSelector=n})(Vn||(Vn={}));(function(r){r.add=new r("add",{fontCharacter:"\\ea60"}),r.plus=new r("plus",r.add.definition),r.gistNew=new r("gist-new",r.add.definition),r.repoCreate=new r("repo-create",r.add.definition),r.lightbulb=new r("lightbulb",{fontCharacter:"\\ea61"}),r.lightBulb=new r("light-bulb",{fontCharacter:"\\ea61"}),r.repo=new r("repo",{fontCharacter:"\\ea62"}),r.repoDelete=new r("repo-delete",{fontCharacter:"\\ea62"}),r.gistFork=new r("gist-fork",{fontCharacter:"\\ea63"}),r.repoForked=new r("repo-forked",{fontCharacter:"\\ea63"}),r.gitPullRequest=new r("git-pull-request",{fontCharacter:"\\ea64"}),r.gitPullRequestAbandoned=new r("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),r.recordKeys=new r("record-keys",{fontCharacter:"\\ea65"}),r.keyboard=new r("keyboard",{fontCharacter:"\\ea65"}),r.tag=new r("tag",{fontCharacter:"\\ea66"}),r.tagAdd=new r("tag-add",{fontCharacter:"\\ea66"}),r.tagRemove=new r("tag-remove",{fontCharacter:"\\ea66"}),r.person=new r("person",{fontCharacter:"\\ea67"}),r.personFollow=new r("person-follow",{fontCharacter:"\\ea67"}),r.personOutline=new r("person-outline",{fontCharacter:"\\ea67"}),r.personFilled=new r("person-filled",{fontCharacter:"\\ea67"}),r.gitBranch=new r("git-branch",{fontCharacter:"\\ea68"}),r.gitBranchCreate=new r("git-branch-create",{fontCharacter:"\\ea68"}),r.gitBranchDelete=new r("git-branch-delete",{fontCharacter:"\\ea68"}),r.sourceControl=new r("source-control",{fontCharacter:"\\ea68"}),r.mirror=new r("mirror",{fontCharacter:"\\ea69"}),r.mirrorPublic=new r("mirror-public",{fontCharacter:"\\ea69"}),r.star=new r("star",{fontCharacter:"\\ea6a"}),r.starAdd=new r("star-add",{fontCharacter:"\\ea6a"}),r.starDelete=new r("star-delete",{fontCharacter:"\\ea6a"}),r.starEmpty=new r("star-empty",{fontCharacter:"\\ea6a"}),r.comment=new r("comment",{fontCharacter:"\\ea6b"}),r.commentAdd=new r("comment-add",{fontCharacter:"\\ea6b"}),r.alert=new r("alert",{fontCharacter:"\\ea6c"}),r.warning=new r("warning",{fontCharacter:"\\ea6c"}),r.search=new r("search",{fontCharacter:"\\ea6d"}),r.searchSave=new r("search-save",{fontCharacter:"\\ea6d"}),r.logOut=new r("log-out",{fontCharacter:"\\ea6e"}),r.signOut=new r("sign-out",{fontCharacter:"\\ea6e"}),r.logIn=new r("log-in",{fontCharacter:"\\ea6f"}),r.signIn=new r("sign-in",{fontCharacter:"\\ea6f"}),r.eye=new r("eye",{fontCharacter:"\\ea70"}),r.eyeUnwatch=new r("eye-unwatch",{fontCharacter:"\\ea70"}),r.eyeWatch=new r("eye-watch",{fontCharacter:"\\ea70"}),r.circleFilled=new r("circle-filled",{fontCharacter:"\\ea71"}),r.primitiveDot=new r("primitive-dot",{fontCharacter:"\\ea71"}),r.closeDirty=new r("close-dirty",{fontCharacter:"\\ea71"}),r.debugBreakpoint=new r("debug-breakpoint",{fontCharacter:"\\ea71"}),r.debugBreakpointDisabled=new r("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),r.debugHint=new r("debug-hint",{fontCharacter:"\\ea71"}),r.primitiveSquare=new r("primitive-square",{fontCharacter:"\\ea72"}),r.edit=new r("edit",{fontCharacter:"\\ea73"}),r.pencil=new r("pencil",{fontCharacter:"\\ea73"}),r.info=new r("info",{fontCharacter:"\\ea74"}),r.issueOpened=new r("issue-opened",{fontCharacter:"\\ea74"}),r.gistPrivate=new r("gist-private",{fontCharacter:"\\ea75"}),r.gitForkPrivate=new r("git-fork-private",{fontCharacter:"\\ea75"}),r.lock=new r("lock",{fontCharacter:"\\ea75"}),r.mirrorPrivate=new r("mirror-private",{fontCharacter:"\\ea75"}),r.close=new r("close",{fontCharacter:"\\ea76"}),r.removeClose=new r("remove-close",{fontCharacter:"\\ea76"}),r.x=new r("x",{fontCharacter:"\\ea76"}),r.repoSync=new r("repo-sync",{fontCharacter:"\\ea77"}),r.sync=new r("sync",{fontCharacter:"\\ea77"}),r.clone=new r("clone",{fontCharacter:"\\ea78"}),r.desktopDownload=new r("desktop-download",{fontCharacter:"\\ea78"}),r.beaker=new r("beaker",{fontCharacter:"\\ea79"}),r.microscope=new r("microscope",{fontCharacter:"\\ea79"}),r.vm=new r("vm",{fontCharacter:"\\ea7a"}),r.deviceDesktop=new r("device-desktop",{fontCharacter:"\\ea7a"}),r.file=new r("file",{fontCharacter:"\\ea7b"}),r.fileText=new r("file-text",{fontCharacter:"\\ea7b"}),r.more=new r("more",{fontCharacter:"\\ea7c"}),r.ellipsis=new r("ellipsis",{fontCharacter:"\\ea7c"}),r.kebabHorizontal=new r("kebab-horizontal",{fontCharacter:"\\ea7c"}),r.mailReply=new r("mail-reply",{fontCharacter:"\\ea7d"}),r.reply=new r("reply",{fontCharacter:"\\ea7d"}),r.organization=new r("organization",{fontCharacter:"\\ea7e"}),r.organizationFilled=new r("organization-filled",{fontCharacter:"\\ea7e"}),r.organizationOutline=new r("organization-outline",{fontCharacter:"\\ea7e"}),r.newFile=new r("new-file",{fontCharacter:"\\ea7f"}),r.fileAdd=new r("file-add",{fontCharacter:"\\ea7f"}),r.newFolder=new r("new-folder",{fontCharacter:"\\ea80"}),r.fileDirectoryCreate=new r("file-directory-create",{fontCharacter:"\\ea80"}),r.trash=new r("trash",{fontCharacter:"\\ea81"}),r.trashcan=new r("trashcan",{fontCharacter:"\\ea81"}),r.history=new r("history",{fontCharacter:"\\ea82"}),r.clock=new r("clock",{fontCharacter:"\\ea82"}),r.folder=new r("folder",{fontCharacter:"\\ea83"}),r.fileDirectory=new r("file-directory",{fontCharacter:"\\ea83"}),r.symbolFolder=new r("symbol-folder",{fontCharacter:"\\ea83"}),r.logoGithub=new r("logo-github",{fontCharacter:"\\ea84"}),r.markGithub=new r("mark-github",{fontCharacter:"\\ea84"}),r.github=new r("github",{fontCharacter:"\\ea84"}),r.terminal=new r("terminal",{fontCharacter:"\\ea85"}),r.console=new r("console",{fontCharacter:"\\ea85"}),r.repl=new r("repl",{fontCharacter:"\\ea85"}),r.zap=new r("zap",{fontCharacter:"\\ea86"}),r.symbolEvent=new r("symbol-event",{fontCharacter:"\\ea86"}),r.error=new r("error",{fontCharacter:"\\ea87"}),r.stop=new r("stop",{fontCharacter:"\\ea87"}),r.variable=new r("variable",{fontCharacter:"\\ea88"}),r.symbolVariable=new r("symbol-variable",{fontCharacter:"\\ea88"}),r.array=new r("array",{fontCharacter:"\\ea8a"}),r.symbolArray=new r("symbol-array",{fontCharacter:"\\ea8a"}),r.symbolModule=new r("symbol-module",{fontCharacter:"\\ea8b"}),r.symbolPackage=new r("symbol-package",{fontCharacter:"\\ea8b"}),r.symbolNamespace=new r("symbol-namespace",{fontCharacter:"\\ea8b"}),r.symbolObject=new r("symbol-object",{fontCharacter:"\\ea8b"}),r.symbolMethod=new r("symbol-method",{fontCharacter:"\\ea8c"}),r.symbolFunction=new r("symbol-function",{fontCharacter:"\\ea8c"}),r.symbolConstructor=new r("symbol-constructor",{fontCharacter:"\\ea8c"}),r.symbolBoolean=new r("symbol-boolean",{fontCharacter:"\\ea8f"}),r.symbolNull=new r("symbol-null",{fontCharacter:"\\ea8f"}),r.symbolNumeric=new r("symbol-numeric",{fontCharacter:"\\ea90"}),r.symbolNumber=new r("symbol-number",{fontCharacter:"\\ea90"}),r.symbolStructure=new r("symbol-structure",{fontCharacter:"\\ea91"}),r.symbolStruct=new r("symbol-struct",{fontCharacter:"\\ea91"}),r.symbolParameter=new r("symbol-parameter",{fontCharacter:"\\ea92"}),r.symbolTypeParameter=new r("symbol-type-parameter",{fontCharacter:"\\ea92"}),r.symbolKey=new r("symbol-key",{fontCharacter:"\\ea93"}),r.symbolText=new r("symbol-text",{fontCharacter:"\\ea93"}),r.symbolReference=new r("symbol-reference",{fontCharacter:"\\ea94"}),r.goToFile=new r("go-to-file",{fontCharacter:"\\ea94"}),r.symbolEnum=new r("symbol-enum",{fontCharacter:"\\ea95"}),r.symbolValue=new r("symbol-value",{fontCharacter:"\\ea95"}),r.symbolRuler=new r("symbol-ruler",{fontCharacter:"\\ea96"}),r.symbolUnit=new r("symbol-unit",{fontCharacter:"\\ea96"}),r.activateBreakpoints=new r("activate-breakpoints",{fontCharacter:"\\ea97"}),r.archive=new r("archive",{fontCharacter:"\\ea98"}),r.arrowBoth=new r("arrow-both",{fontCharacter:"\\ea99"}),r.arrowDown=new r("arrow-down",{fontCharacter:"\\ea9a"}),r.arrowLeft=new r("arrow-left",{fontCharacter:"\\ea9b"}),r.arrowRight=new r("arrow-right",{fontCharacter:"\\ea9c"}),r.arrowSmallDown=new r("arrow-small-down",{fontCharacter:"\\ea9d"}),r.arrowSmallLeft=new r("arrow-small-left",{fontCharacter:"\\ea9e"}),r.arrowSmallRight=new r("arrow-small-right",{fontCharacter:"\\ea9f"}),r.arrowSmallUp=new r("arrow-small-up",{fontCharacter:"\\eaa0"}),r.arrowUp=new r("arrow-up",{fontCharacter:"\\eaa1"}),r.bell=new r("bell",{fontCharacter:"\\eaa2"}),r.bold=new r("bold",{fontCharacter:"\\eaa3"}),r.book=new r("book",{fontCharacter:"\\eaa4"}),r.bookmark=new r("bookmark",{fontCharacter:"\\eaa5"}),r.debugBreakpointConditionalUnverified=new r("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),r.debugBreakpointConditional=new r("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),r.debugBreakpointConditionalDisabled=new r("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),r.debugBreakpointDataUnverified=new r("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),r.debugBreakpointData=new r("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),r.debugBreakpointDataDisabled=new r("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),r.debugBreakpointLogUnverified=new r("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),r.debugBreakpointLog=new r("debug-breakpoint-log",{fontCharacter:"\\eaab"}),r.debugBreakpointLogDisabled=new r("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),r.briefcase=new r("briefcase",{fontCharacter:"\\eaac"}),r.broadcast=new r("broadcast",{fontCharacter:"\\eaad"}),r.browser=new r("browser",{fontCharacter:"\\eaae"}),r.bug=new r("bug",{fontCharacter:"\\eaaf"}),r.calendar=new r("calendar",{fontCharacter:"\\eab0"}),r.caseSensitive=new r("case-sensitive",{fontCharacter:"\\eab1"}),r.check=new r("check",{fontCharacter:"\\eab2"}),r.checklist=new r("checklist",{fontCharacter:"\\eab3"}),r.chevronDown=new r("chevron-down",{fontCharacter:"\\eab4"}),r.dropDownButton=new r("drop-down-button",r.chevronDown.definition),r.chevronLeft=new r("chevron-left",{fontCharacter:"\\eab5"}),r.chevronRight=new r("chevron-right",{fontCharacter:"\\eab6"}),r.chevronUp=new r("chevron-up",{fontCharacter:"\\eab7"}),r.chromeClose=new r("chrome-close",{fontCharacter:"\\eab8"}),r.chromeMaximize=new r("chrome-maximize",{fontCharacter:"\\eab9"}),r.chromeMinimize=new r("chrome-minimize",{fontCharacter:"\\eaba"}),r.chromeRestore=new r("chrome-restore",{fontCharacter:"\\eabb"}),r.circleOutline=new r("circle-outline",{fontCharacter:"\\eabc"}),r.debugBreakpointUnverified=new r("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),r.circleSlash=new r("circle-slash",{fontCharacter:"\\eabd"}),r.circuitBoard=new r("circuit-board",{fontCharacter:"\\eabe"}),r.clearAll=new r("clear-all",{fontCharacter:"\\eabf"}),r.clippy=new r("clippy",{fontCharacter:"\\eac0"}),r.closeAll=new r("close-all",{fontCharacter:"\\eac1"}),r.cloudDownload=new r("cloud-download",{fontCharacter:"\\eac2"}),r.cloudUpload=new r("cloud-upload",{fontCharacter:"\\eac3"}),r.code=new r("code",{fontCharacter:"\\eac4"}),r.collapseAll=new r("collapse-all",{fontCharacter:"\\eac5"}),r.colorMode=new r("color-mode",{fontCharacter:"\\eac6"}),r.commentDiscussion=new r("comment-discussion",{fontCharacter:"\\eac7"}),r.compareChanges=new r("compare-changes",{fontCharacter:"\\eafd"}),r.creditCard=new r("credit-card",{fontCharacter:"\\eac9"}),r.dash=new r("dash",{fontCharacter:"\\eacc"}),r.dashboard=new r("dashboard",{fontCharacter:"\\eacd"}),r.database=new r("database",{fontCharacter:"\\eace"}),r.debugContinue=new r("debug-continue",{fontCharacter:"\\eacf"}),r.debugDisconnect=new r("debug-disconnect",{fontCharacter:"\\ead0"}),r.debugPause=new r("debug-pause",{fontCharacter:"\\ead1"}),r.debugRestart=new r("debug-restart",{fontCharacter:"\\ead2"}),r.debugStart=new r("debug-start",{fontCharacter:"\\ead3"}),r.debugStepInto=new r("debug-step-into",{fontCharacter:"\\ead4"}),r.debugStepOut=new r("debug-step-out",{fontCharacter:"\\ead5"}),r.debugStepOver=new r("debug-step-over",{fontCharacter:"\\ead6"}),r.debugStop=new r("debug-stop",{fontCharacter:"\\ead7"}),r.debug=new r("debug",{fontCharacter:"\\ead8"}),r.deviceCameraVideo=new r("device-camera-video",{fontCharacter:"\\ead9"}),r.deviceCamera=new r("device-camera",{fontCharacter:"\\eada"}),r.deviceMobile=new r("device-mobile",{fontCharacter:"\\eadb"}),r.diffAdded=new r("diff-added",{fontCharacter:"\\eadc"}),r.diffIgnored=new r("diff-ignored",{fontCharacter:"\\eadd"}),r.diffModified=new r("diff-modified",{fontCharacter:"\\eade"}),r.diffRemoved=new r("diff-removed",{fontCharacter:"\\eadf"}),r.diffRenamed=new r("diff-renamed",{fontCharacter:"\\eae0"}),r.diff=new r("diff",{fontCharacter:"\\eae1"}),r.discard=new r("discard",{fontCharacter:"\\eae2"}),r.editorLayout=new r("editor-layout",{fontCharacter:"\\eae3"}),r.emptyWindow=new r("empty-window",{fontCharacter:"\\eae4"}),r.exclude=new r("exclude",{fontCharacter:"\\eae5"}),r.extensions=new r("extensions",{fontCharacter:"\\eae6"}),r.eyeClosed=new r("eye-closed",{fontCharacter:"\\eae7"}),r.fileBinary=new r("file-binary",{fontCharacter:"\\eae8"}),r.fileCode=new r("file-code",{fontCharacter:"\\eae9"}),r.fileMedia=new r("file-media",{fontCharacter:"\\eaea"}),r.filePdf=new r("file-pdf",{fontCharacter:"\\eaeb"}),r.fileSubmodule=new r("file-submodule",{fontCharacter:"\\eaec"}),r.fileSymlinkDirectory=new r("file-symlink-directory",{fontCharacter:"\\eaed"}),r.fileSymlinkFile=new r("file-symlink-file",{fontCharacter:"\\eaee"}),r.fileZip=new r("file-zip",{fontCharacter:"\\eaef"}),r.files=new r("files",{fontCharacter:"\\eaf0"}),r.filter=new r("filter",{fontCharacter:"\\eaf1"}),r.flame=new r("flame",{fontCharacter:"\\eaf2"}),r.foldDown=new r("fold-down",{fontCharacter:"\\eaf3"}),r.foldUp=new r("fold-up",{fontCharacter:"\\eaf4"}),r.fold=new r("fold",{fontCharacter:"\\eaf5"}),r.folderActive=new r("folder-active",{fontCharacter:"\\eaf6"}),r.folderOpened=new r("folder-opened",{fontCharacter:"\\eaf7"}),r.gear=new r("gear",{fontCharacter:"\\eaf8"}),r.gift=new r("gift",{fontCharacter:"\\eaf9"}),r.gistSecret=new r("gist-secret",{fontCharacter:"\\eafa"}),r.gist=new r("gist",{fontCharacter:"\\eafb"}),r.gitCommit=new r("git-commit",{fontCharacter:"\\eafc"}),r.gitCompare=new r("git-compare",{fontCharacter:"\\eafd"}),r.gitMerge=new r("git-merge",{fontCharacter:"\\eafe"}),r.githubAction=new r("github-action",{fontCharacter:"\\eaff"}),r.githubAlt=new r("github-alt",{fontCharacter:"\\eb00"}),r.globe=new r("globe",{fontCharacter:"\\eb01"}),r.grabber=new r("grabber",{fontCharacter:"\\eb02"}),r.graph=new r("graph",{fontCharacter:"\\eb03"}),r.gripper=new r("gripper",{fontCharacter:"\\eb04"}),r.heart=new r("heart",{fontCharacter:"\\eb05"}),r.home=new r("home",{fontCharacter:"\\eb06"}),r.horizontalRule=new r("horizontal-rule",{fontCharacter:"\\eb07"}),r.hubot=new r("hubot",{fontCharacter:"\\eb08"}),r.inbox=new r("inbox",{fontCharacter:"\\eb09"}),r.issueClosed=new r("issue-closed",{fontCharacter:"\\eba4"}),r.issueReopened=new r("issue-reopened",{fontCharacter:"\\eb0b"}),r.issues=new r("issues",{fontCharacter:"\\eb0c"}),r.italic=new r("italic",{fontCharacter:"\\eb0d"}),r.jersey=new r("jersey",{fontCharacter:"\\eb0e"}),r.json=new r("json",{fontCharacter:"\\eb0f"}),r.kebabVertical=new r("kebab-vertical",{fontCharacter:"\\eb10"}),r.key=new r("key",{fontCharacter:"\\eb11"}),r.law=new r("law",{fontCharacter:"\\eb12"}),r.lightbulbAutofix=new r("lightbulb-autofix",{fontCharacter:"\\eb13"}),r.linkExternal=new r("link-external",{fontCharacter:"\\eb14"}),r.link=new r("link",{fontCharacter:"\\eb15"}),r.listOrdered=new r("list-ordered",{fontCharacter:"\\eb16"}),r.listUnordered=new r("list-unordered",{fontCharacter:"\\eb17"}),r.liveShare=new r("live-share",{fontCharacter:"\\eb18"}),r.loading=new r("loading",{fontCharacter:"\\eb19"}),r.location=new r("location",{fontCharacter:"\\eb1a"}),r.mailRead=new r("mail-read",{fontCharacter:"\\eb1b"}),r.mail=new r("mail",{fontCharacter:"\\eb1c"}),r.markdown=new r("markdown",{fontCharacter:"\\eb1d"}),r.megaphone=new r("megaphone",{fontCharacter:"\\eb1e"}),r.mention=new r("mention",{fontCharacter:"\\eb1f"}),r.milestone=new r("milestone",{fontCharacter:"\\eb20"}),r.mortarBoard=new r("mortar-board",{fontCharacter:"\\eb21"}),r.move=new r("move",{fontCharacter:"\\eb22"}),r.multipleWindows=new r("multiple-windows",{fontCharacter:"\\eb23"}),r.mute=new r("mute",{fontCharacter:"\\eb24"}),r.noNewline=new r("no-newline",{fontCharacter:"\\eb25"}),r.note=new r("note",{fontCharacter:"\\eb26"}),r.octoface=new r("octoface",{fontCharacter:"\\eb27"}),r.openPreview=new r("open-preview",{fontCharacter:"\\eb28"}),r.package_=new r("package",{fontCharacter:"\\eb29"}),r.paintcan=new r("paintcan",{fontCharacter:"\\eb2a"}),r.pin=new r("pin",{fontCharacter:"\\eb2b"}),r.play=new r("play",{fontCharacter:"\\eb2c"}),r.run=new r("run",{fontCharacter:"\\eb2c"}),r.plug=new r("plug",{fontCharacter:"\\eb2d"}),r.preserveCase=new r("preserve-case",{fontCharacter:"\\eb2e"}),r.preview=new r("preview",{fontCharacter:"\\eb2f"}),r.project=new r("project",{fontCharacter:"\\eb30"}),r.pulse=new r("pulse",{fontCharacter:"\\eb31"}),r.question=new r("question",{fontCharacter:"\\eb32"}),r.quote=new r("quote",{fontCharacter:"\\eb33"}),r.radioTower=new r("radio-tower",{fontCharacter:"\\eb34"}),r.reactions=new r("reactions",{fontCharacter:"\\eb35"}),r.references=new r("references",{fontCharacter:"\\eb36"}),r.refresh=new r("refresh",{fontCharacter:"\\eb37"}),r.regex=new r("regex",{fontCharacter:"\\eb38"}),r.remoteExplorer=new r("remote-explorer",{fontCharacter:"\\eb39"}),r.remote=new r("remote",{fontCharacter:"\\eb3a"}),r.remove=new r("remove",{fontCharacter:"\\eb3b"}),r.replaceAll=new r("replace-all",{fontCharacter:"\\eb3c"}),r.replace=new r("replace",{fontCharacter:"\\eb3d"}),r.repoClone=new r("repo-clone",{fontCharacter:"\\eb3e"}),r.repoForcePush=new r("repo-force-push",{fontCharacter:"\\eb3f"}),r.repoPull=new r("repo-pull",{fontCharacter:"\\eb40"}),r.repoPush=new r("repo-push",{fontCharacter:"\\eb41"}),r.report=new r("report",{fontCharacter:"\\eb42"}),r.requestChanges=new r("request-changes",{fontCharacter:"\\eb43"}),r.rocket=new r("rocket",{fontCharacter:"\\eb44"}),r.rootFolderOpened=new r("root-folder-opened",{fontCharacter:"\\eb45"}),r.rootFolder=new r("root-folder",{fontCharacter:"\\eb46"}),r.rss=new r("rss",{fontCharacter:"\\eb47"}),r.ruby=new r("ruby",{fontCharacter:"\\eb48"}),r.saveAll=new r("save-all",{fontCharacter:"\\eb49"}),r.saveAs=new r("save-as",{fontCharacter:"\\eb4a"}),r.save=new r("save",{fontCharacter:"\\eb4b"}),r.screenFull=new r("screen-full",{fontCharacter:"\\eb4c"}),r.screenNormal=new r("screen-normal",{fontCharacter:"\\eb4d"}),r.searchStop=new r("search-stop",{fontCharacter:"\\eb4e"}),r.server=new r("server",{fontCharacter:"\\eb50"}),r.settingsGear=new r("settings-gear",{fontCharacter:"\\eb51"}),r.settings=new r("settings",{fontCharacter:"\\eb52"}),r.shield=new r("shield",{fontCharacter:"\\eb53"}),r.smiley=new r("smiley",{fontCharacter:"\\eb54"}),r.sortPrecedence=new r("sort-precedence",{fontCharacter:"\\eb55"}),r.splitHorizontal=new r("split-horizontal",{fontCharacter:"\\eb56"}),r.splitVertical=new r("split-vertical",{fontCharacter:"\\eb57"}),r.squirrel=new r("squirrel",{fontCharacter:"\\eb58"}),r.starFull=new r("star-full",{fontCharacter:"\\eb59"}),r.starHalf=new r("star-half",{fontCharacter:"\\eb5a"}),r.symbolClass=new r("symbol-class",{fontCharacter:"\\eb5b"}),r.symbolColor=new r("symbol-color",{fontCharacter:"\\eb5c"}),r.symbolConstant=new r("symbol-constant",{fontCharacter:"\\eb5d"}),r.symbolEnumMember=new r("symbol-enum-member",{fontCharacter:"\\eb5e"}),r.symbolField=new r("symbol-field",{fontCharacter:"\\eb5f"}),r.symbolFile=new r("symbol-file",{fontCharacter:"\\eb60"}),r.symbolInterface=new r("symbol-interface",{fontCharacter:"\\eb61"}),r.symbolKeyword=new r("symbol-keyword",{fontCharacter:"\\eb62"}),r.symbolMisc=new r("symbol-misc",{fontCharacter:"\\eb63"}),r.symbolOperator=new r("symbol-operator",{fontCharacter:"\\eb64"}),r.symbolProperty=new r("symbol-property",{fontCharacter:"\\eb65"}),r.wrench=new r("wrench",{fontCharacter:"\\eb65"}),r.wrenchSubaction=new r("wrench-subaction",{fontCharacter:"\\eb65"}),r.symbolSnippet=new r("symbol-snippet",{fontCharacter:"\\eb66"}),r.tasklist=new r("tasklist",{fontCharacter:"\\eb67"}),r.telescope=new r("telescope",{fontCharacter:"\\eb68"}),r.textSize=new r("text-size",{fontCharacter:"\\eb69"}),r.threeBars=new r("three-bars",{fontCharacter:"\\eb6a"}),r.thumbsdown=new r("thumbsdown",{fontCharacter:"\\eb6b"}),r.thumbsup=new r("thumbsup",{fontCharacter:"\\eb6c"}),r.tools=new r("tools",{fontCharacter:"\\eb6d"}),r.triangleDown=new r("triangle-down",{fontCharacter:"\\eb6e"}),r.triangleLeft=new r("triangle-left",{fontCharacter:"\\eb6f"}),r.triangleRight=new r("triangle-right",{fontCharacter:"\\eb70"}),r.triangleUp=new r("triangle-up",{fontCharacter:"\\eb71"}),r.twitter=new r("twitter",{fontCharacter:"\\eb72"}),r.unfold=new r("unfold",{fontCharacter:"\\eb73"}),r.unlock=new r("unlock",{fontCharacter:"\\eb74"}),r.unmute=new r("unmute",{fontCharacter:"\\eb75"}),r.unverified=new r("unverified",{fontCharacter:"\\eb76"}),r.verified=new r("verified",{fontCharacter:"\\eb77"}),r.versions=new r("versions",{fontCharacter:"\\eb78"}),r.vmActive=new r("vm-active",{fontCharacter:"\\eb79"}),r.vmOutline=new r("vm-outline",{fontCharacter:"\\eb7a"}),r.vmRunning=new r("vm-running",{fontCharacter:"\\eb7b"}),r.watch=new r("watch",{fontCharacter:"\\eb7c"}),r.whitespace=new r("whitespace",{fontCharacter:"\\eb7d"}),r.wholeWord=new r("whole-word",{fontCharacter:"\\eb7e"}),r.window=new r("window",{fontCharacter:"\\eb7f"}),r.wordWrap=new r("word-wrap",{fontCharacter:"\\eb80"}),r.zoomIn=new r("zoom-in",{fontCharacter:"\\eb81"}),r.zoomOut=new r("zoom-out",{fontCharacter:"\\eb82"}),r.listFilter=new r("list-filter",{fontCharacter:"\\eb83"}),r.listFlat=new r("list-flat",{fontCharacter:"\\eb84"}),r.listSelection=new r("list-selection",{fontCharacter:"\\eb85"}),r.selection=new r("selection",{fontCharacter:"\\eb85"}),r.listTree=new r("list-tree",{fontCharacter:"\\eb86"}),r.debugBreakpointFunctionUnverified=new r("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),r.debugBreakpointFunction=new r("debug-breakpoint-function",{fontCharacter:"\\eb88"}),r.debugBreakpointFunctionDisabled=new r("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),r.debugStackframeActive=new r("debug-stackframe-active",{fontCharacter:"\\eb89"}),r.debugStackframeDot=new r("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),r.debugStackframe=new r("debug-stackframe",{fontCharacter:"\\eb8b"}),r.debugStackframeFocused=new r("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),r.debugBreakpointUnsupported=new r("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),r.symbolString=new r("symbol-string",{fontCharacter:"\\eb8d"}),r.debugReverseContinue=new r("debug-reverse-continue",{fontCharacter:"\\eb8e"}),r.debugStepBack=new r("debug-step-back",{fontCharacter:"\\eb8f"}),r.debugRestartFrame=new r("debug-restart-frame",{fontCharacter:"\\eb90"}),r.callIncoming=new r("call-incoming",{fontCharacter:"\\eb92"}),r.callOutgoing=new r("call-outgoing",{fontCharacter:"\\eb93"}),r.menu=new r("menu",{fontCharacter:"\\eb94"}),r.expandAll=new r("expand-all",{fontCharacter:"\\eb95"}),r.feedback=new r("feedback",{fontCharacter:"\\eb96"}),r.groupByRefType=new r("group-by-ref-type",{fontCharacter:"\\eb97"}),r.ungroupByRefType=new r("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),r.account=new r("account",{fontCharacter:"\\eb99"}),r.bellDot=new r("bell-dot",{fontCharacter:"\\eb9a"}),r.debugConsole=new r("debug-console",{fontCharacter:"\\eb9b"}),r.library=new r("library",{fontCharacter:"\\eb9c"}),r.output=new r("output",{fontCharacter:"\\eb9d"}),r.runAll=new r("run-all",{fontCharacter:"\\eb9e"}),r.syncIgnored=new r("sync-ignored",{fontCharacter:"\\eb9f"}),r.pinned=new r("pinned",{fontCharacter:"\\eba0"}),r.githubInverted=new r("github-inverted",{fontCharacter:"\\eba1"}),r.debugAlt=new r("debug-alt",{fontCharacter:"\\eb91"}),r.serverProcess=new r("server-process",{fontCharacter:"\\eba2"}),r.serverEnvironment=new r("server-environment",{fontCharacter:"\\eba3"}),r.pass=new r("pass",{fontCharacter:"\\eba4"}),r.stopCircle=new r("stop-circle",{fontCharacter:"\\eba5"}),r.playCircle=new r("play-circle",{fontCharacter:"\\eba6"}),r.record=new r("record",{fontCharacter:"\\eba7"}),r.debugAltSmall=new r("debug-alt-small",{fontCharacter:"\\eba8"}),r.vmConnect=new r("vm-connect",{fontCharacter:"\\eba9"}),r.cloud=new r("cloud",{fontCharacter:"\\ebaa"}),r.merge=new r("merge",{fontCharacter:"\\ebab"}),r.exportIcon=new r("export",{fontCharacter:"\\ebac"}),r.graphLeft=new r("graph-left",{fontCharacter:"\\ebad"}),r.magnet=new r("magnet",{fontCharacter:"\\ebae"}),r.notebook=new r("notebook",{fontCharacter:"\\ebaf"}),r.redo=new r("redo",{fontCharacter:"\\ebb0"}),r.checkAll=new r("check-all",{fontCharacter:"\\ebb1"}),r.pinnedDirty=new r("pinned-dirty",{fontCharacter:"\\ebb2"}),r.passFilled=new r("pass-filled",{fontCharacter:"\\ebb3"}),r.circleLargeFilled=new r("circle-large-filled",{fontCharacter:"\\ebb4"}),r.circleLargeOutline=new r("circle-large-outline",{fontCharacter:"\\ebb5"}),r.combine=new r("combine",{fontCharacter:"\\ebb6"}),r.gather=new r("gather",{fontCharacter:"\\ebb6"}),r.table=new r("table",{fontCharacter:"\\ebb7"}),r.variableGroup=new r("variable-group",{fontCharacter:"\\ebb8"}),r.typeHierarchy=new r("type-hierarchy",{fontCharacter:"\\ebb9"}),r.typeHierarchySub=new r("type-hierarchy-sub",{fontCharacter:"\\ebba"}),r.typeHierarchySuper=new r("type-hierarchy-super",{fontCharacter:"\\ebbb"}),r.gitPullRequestCreate=new r("git-pull-request-create",{fontCharacter:"\\ebbc"}),r.runAbove=new r("run-above",{fontCharacter:"\\ebbd"}),r.runBelow=new r("run-below",{fontCharacter:"\\ebbe"}),r.notebookTemplate=new r("notebook-template",{fontCharacter:"\\ebbf"}),r.debugRerun=new r("debug-rerun",{fontCharacter:"\\ebc0"}),r.workspaceTrusted=new r("workspace-trusted",{fontCharacter:"\\ebc1"}),r.workspaceUntrusted=new r("workspace-untrusted",{fontCharacter:"\\ebc2"}),r.workspaceUnspecified=new r("workspace-unspecified",{fontCharacter:"\\ebc3"}),r.terminalCmd=new r("terminal-cmd",{fontCharacter:"\\ebc4"}),r.terminalDebian=new r("terminal-debian",{fontCharacter:"\\ebc5"}),r.terminalLinux=new r("terminal-linux",{fontCharacter:"\\ebc6"}),r.terminalPowershell=new r("terminal-powershell",{fontCharacter:"\\ebc7"}),r.terminalTmux=new r("terminal-tmux",{fontCharacter:"\\ebc8"}),r.terminalUbuntu=new r("terminal-ubuntu",{fontCharacter:"\\ebc9"}),r.terminalBash=new r("terminal-bash",{fontCharacter:"\\ebca"}),r.arrowSwap=new r("arrow-swap",{fontCharacter:"\\ebcb"}),r.copy=new r("copy",{fontCharacter:"\\ebcc"}),r.personAdd=new r("person-add",{fontCharacter:"\\ebcd"}),r.filterFilled=new r("filter-filled",{fontCharacter:"\\ebce"}),r.wand=new r("wand",{fontCharacter:"\\ebcf"}),r.debugLineByLine=new r("debug-line-by-line",{fontCharacter:"\\ebd0"}),r.inspect=new r("inspect",{fontCharacter:"\\ebd1"}),r.layers=new r("layers",{fontCharacter:"\\ebd2"}),r.layersDot=new r("layers-dot",{fontCharacter:"\\ebd3"}),r.layersActive=new r("layers-active",{fontCharacter:"\\ebd4"}),r.compass=new r("compass",{fontCharacter:"\\ebd5"}),r.compassDot=new r("compass-dot",{fontCharacter:"\\ebd6"}),r.compassActive=new r("compass-active",{fontCharacter:"\\ebd7"}),r.azure=new r("azure",{fontCharacter:"\\ebd8"}),r.issueDraft=new r("issue-draft",{fontCharacter:"\\ebd9"}),r.gitPullRequestClosed=new r("git-pull-request-closed",{fontCharacter:"\\ebda"}),r.gitPullRequestDraft=new r("git-pull-request-draft",{fontCharacter:"\\ebdb"}),r.debugAll=new r("debug-all",{fontCharacter:"\\ebdc"}),r.debugCoverage=new r("debug-coverage",{fontCharacter:"\\ebdd"}),r.runErrors=new r("run-errors",{fontCharacter:"\\ebde"}),r.folderLibrary=new r("folder-library",{fontCharacter:"\\ebdf"}),r.debugContinueSmall=new r("debug-continue-small",{fontCharacter:"\\ebe0"}),r.beakerStop=new r("beaker-stop",{fontCharacter:"\\ebe1"}),r.graphLine=new r("graph-line",{fontCharacter:"\\ebe2"}),r.graphScatter=new r("graph-scatter",{fontCharacter:"\\ebe3"}),r.pieChart=new r("pie-chart",{fontCharacter:"\\ebe4"}),r.bracket=new r("bracket",r.json.definition),r.bracketDot=new r("bracket-dot",{fontCharacter:"\\ebe5"}),r.bracketError=new r("bracket-error",{fontCharacter:"\\ebe6"}),r.lockSmall=new r("lock-small",{fontCharacter:"\\ebe7"}),r.azureDevops=new r("azure-devops",{fontCharacter:"\\ebe8"}),r.verifiedFilled=new r("verified-filled",{fontCharacter:"\\ebe9"})})(ge||(ge={}));var dr=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let t=this.getForeground(e),i="mtk"+t,n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),i}static getInlineStyleFromMetadata(e,t){let i=this.getForeground(e),n=this.getFontStyle(e),o=`color: ${t[i]};`;return n&1&&(o+="font-style: italic;"),n&2&&(o+="font-weight: bold;"),n&4&&(o+="text-decoration: underline;"),o}},AU=function(){let r=Object.create(null);return r[0]="symbol-method",r[1]="symbol-function",r[2]="symbol-constructor",r[3]="symbol-field",r[4]="symbol-variable",r[5]="symbol-class",r[6]="symbol-struct",r[7]="symbol-interface",r[8]="symbol-module",r[9]="symbol-property",r[10]="symbol-event",r[11]="symbol-operator",r[12]="symbol-unit",r[13]="symbol-value",r[14]="symbol-constant",r[15]="symbol-enum",r[16]="symbol-enum-member",r[17]="symbol-keyword",r[27]="symbol-snippet",r[18]="symbol-text",r[19]="symbol-color",r[20]="symbol-file",r[21]="symbol-reference",r[22]="symbol-customcolor",r[23]="symbol-folder",r[24]="symbol-type-parameter",r[25]="account",r[26]="issues",function(e){let t=r[e],i=t&&Kp.get(t);return i||(console.info("No codicon found for CompletionItemKind "+e),i=ge.symbolProperty),i.classNames}}(),mT=function(){let r=Object.create(null);return r.method=0,r.function=1,r.constructor=2,r.field=3,r.variable=4,r.class=5,r.struct=6,r.interface=7,r.module=8,r.property=9,r.event=10,r.operator=11,r.unit=12,r.value=13,r.constant=14,r.enum=15,r["enum-member"]=16,r.enumMember=16,r.keyword=17,r.snippet=27,r.text=18,r.color=19,r.file=20,r.reference=21,r.customcolor=22,r.folder=23,r["type-parameter"]=24,r.typeParameter=24,r.account=25,r.issue=26,function(e,t){let i=r[e];return typeof i=="undefined"&&!t&&(i=9),i}}(),go;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(go||(go={}));var Ms;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(Ms||(Ms={}));var qp;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(qp||(qp={}));function jU(r){return r&&ve.isUri(r.uri)&&L.isIRange(r.range)&&(L.isIRange(r.originSelectionRange)||L.isIRange(r.targetSelectionRange))}var MU;(function(r){let e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);let t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function i(s){return e.get(s)}r.fromString=i;function n(s){return t.get(s)}r.toString=n;function o(s,a){let l=t.get(s),c=l&&Kp.get("symbol-"+l);return c||(console.info("No codicon found for SymbolKind "+s),c=ge.symbolProperty),`${a?"inline":"block"} ${c.classNames}`}r.toCssClassName=o})(MU||(MU={}));var as=class{constructor(e){this.value=e}};as.Comment=new as("comment");as.Imports=new as("imports");as.Region=new as("region");var bw;(function(r){r[r.Other=0]="Other",r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(bw||(bw={}));var Xm=new Ui,Qm=new Ui,po=new Ui,vw=new Ui,ll=new Ui,md=new Ui,cl=new Ui,tc=new Ui,Yp=new Ui,fd=new Ui,Jm=new Ui,ef=new Ui,tf=new Ui,Fs=new Ui,dl=new Ui,jo=new Ui,ru=new Ui,Mo=new Ui,nf=new Ui,gd=new Ui,pd=new Ui,Zp=new Ui,ww=new Ui,_d=new Ui,rf=new Ui,ti=new uT;var FU=class{clone(){return this}equals(e){return this===e}},of=new FU,ba="vs.editor.nullMode";function BU(r,e,t,i){return new Fm([new ld(i,"",r)],t)}function vx(r,e,t,i){let n=new Uint32Array(2);return n[0]=i,n[1]=(r<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new Zh(n,t===null?of:t)}var Doe="editorWorkerService",Jn=Ie(Doe);var ui=Ie("modeService");var fn=Ie("textModelService");var Loe="$initialize",WU=!1;function yw(r){!Ya||(WU||(WU=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}var UU=class{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.method=i,this.args=n,this.type=0}},fT=class{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}},VU=class{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=n,this.type=2}},zU=class{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}},HU=class{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}},$U=class{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){let i=String(++this._lastSentReq);return new Promise((n,o)=>{this._pendingReplies[i]={resolve:n,reject:o},this._send(new UU(this._workerId,i,e,t))})}listen(e,t){let i=null,n=new M({onFirstListenerAdd:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,n),this._send(new VU(this._workerId,i,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(i),this._send(new HU(this._workerId,i)),i=null}});return n.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(n=>{this._send(new fT(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=vO(n.detail)),this._send(new fT(this._workerId,t,void 0,vO(n)))})}_handleSubscribeEventMessage(e){let t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(n=>{this._send(new zU(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},gT=class extends H{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{n&&n(c)})),this._protocol=new $U({sendMessage:(c,d)=>{this._worker.postMessage(c,d)},handleMessage:(c,d)=>{if(typeof i[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(i[c].apply(i,d))}catch(h){return Promise.reject(h)}},handleEvent:(c,d)=>{if(qU(c)){let h=i[c].call(i,d);if(typeof h!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return h}if(KU(c)){let h=i[c];if(typeof h!="function")throw new Error(`Missing event ${c} on main thread host.`);return h}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof ei.require!="undefined"&&typeof ei.require.getConfig=="function"?o=ei.require.getConfig():typeof ei.requirejs!="undefined"&&(o=ei.requirejs.s.contexts._.config);let s=Wp(i);this._onModuleLoaded=this._protocol.sendMessage(Loe,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,s]);let a=(c,d)=>this._request(c,d),l=(c,d)=>this._protocol.listen(c,d);this._lazyProxy=new Promise((c,d)=>{n=d,this._onModuleLoaded.then(h=>{c(koe(h,a,l))},h=>{d(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,n)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,n)},n)})}_onError(e,t){console.error(e),console.info(t)}};function KU(r){return r[0]==="o"&&r[1]==="n"&&Rs(r.charCodeAt(2))}function qU(r){return/^onDynamic/.test(r)&&Rs(r.charCodeAt(9))}function koe(r,e,t){let i=s=>function(){let a=Array.prototype.slice.call(arguments,0);return e(s,a)},n=s=>function(a){return t(s,a)},o={};for(let s of r){if(qU(s)){o[s]=n(s);continue}if(KU(s)){o[s]=t(s,void 0);continue}o[s]=i(s)}return o}var pT,YU=(pT=window.trustedTypes)===null||pT===void 0?void 0:pT.createPolicy("defaultWorkerFactory",{createScriptURL:r=>r});function Ioe(r,e){if(ei.MonacoEnvironment){if(typeof ei.MonacoEnvironment.getWorker=="function")return ei.MonacoEnvironment.getWorker(r,e);if(typeof ei.MonacoEnvironment.getWorkerUrl=="function"){let t=ei.MonacoEnvironment.getWorkerUrl(r,e);return new Worker(YU?YU.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Ooe(r){return typeof r.then=="function"}var ZU=class{constructor(e,t,i,n,o){this.id=t;let s=Ioe("workerMain.js",i);Ooe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){n(l.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(i=>i.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}},Gp=class{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){let n=++Gp.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new ZU(e,n,this._label||"anonymous"+n,t,o=>{yw(o),this._webWorkerFailedBeforeError=o,i(o)})}};Gp.LAST_WORKER_ID=0;var Ii;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(Ii||(Ii={}));var Cw=class{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)==0}},_T=class{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)Sw(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Sw(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Sw(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Sw(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Sw(this.autoClosingPairsCloseSingleChar,t.close,t)}};function Sw(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}function xw(r,e){let t=r.getCount(),i=r.findTokenIndexAtOffset(e),n=r.getLanguageId(i),o=i;for(;o+1<t&&r.getLanguageId(o+1)===n;)o++;let s=i;for(;s>0&&r.getLanguageId(s-1)===n;)s--;return new GU(r,n,s,o+1,r.getStartOffset(s),r.getEndOffset(o))}var GU=class{constructor(e,t,i,n,o,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=o,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}};function va(r){return(r&7)!=0}var ou=class{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Cw(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Cw({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=XU(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=XU(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Cw({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:ou.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,i){if(t.getTokenCount()===0)return!0;let n=t.findTokenIndexAtOffset(i-2),o=t.getStandardTokenType(n);return e.isOK(o)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}};ou.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function XU(r){return r.filter(([e,t])=>e!==""&&t!=="")}var bT;function QU(){return bT||(bT=new TextDecoder("UTF-16LE")),bT}var vT;function Toe(){return vT||(vT=new TextDecoder("UTF-16BE")),vT}var wT;function yT(){return wT||(wT=K0()?QU():Toe()),wT}var CT=typeof TextDecoder!="undefined",wa,wx;CT?(wa=r=>new e3(r),wx=Noe):(wa=r=>new t3,wx=JU);function Noe(r,e,t){let i=new Uint16Array(r.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?JU(r,e,t):QU().decode(i)}function JU(r,e,t){let i=[],n=0;for(let o=0;o<t;o++){let s=eU(r,e);e+=2,i[n++]=String.fromCharCode(s)}return i.join("")}var e3=class{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return yT().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){let t=this._capacity-this._bufferLength;t<=1&&(t===0||ki(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}},t3=class{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}};var Ew=class{constructor(e,t,i,n,o,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=o,this.reversedRegex=s,this._openSet=Ew._toSet(this.open),this._closeSet=Ew._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let i of e)t.add(i);return t}};function Roe(r){let e=r.length;r=r.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let i=(s,a)=>{let[l,c]=s,[d,h]=a;return l===d||l===h||c===d||c===h},n=(s,a)=>{let l=Math.min(s,a),c=Math.max(s,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let s=0;s<e;s++){let a=r[s];for(let l=s+1;l<e;l++){let c=r[l];i(a,c)&&n(t[s],t[l])}}let o=[];for(let s=0;s<e;s++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===s){let[d,h]=r[c];a.push(d),l.push(h)}a.length>0&&o.push({open:a,close:l})}return o}var ST=class{constructor(e,t){this._richEditBracketsBrand=void 0;let i=Roe(t);this.brackets=i.map((n,o)=>new Ew(e,o,n.open,n.close,Poe(n.open,n.close,i,o),Aoe(n.open,n.close,i,o))),this.forwardRegex=joe(this.brackets),this.reversedRegex=Moe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let n of this.brackets){for(let o of n.open)this.textIsBracket[o]=n,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(let o of n.close)this.textIsBracket[o]=n,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}};function i3(r,e,t,i){for(let n=0,o=e.length;n<o;n++){if(n===t)continue;let s=e[n];for(let a of s.open)a.indexOf(r)>=0&&i.push(a);for(let a of s.close)a.indexOf(r)>=0&&i.push(a)}}function n3(r,e){return r.length-e.length}function yx(r){if(r.length<=1)return r;let e=[],t=new Set;for(let i of r)t.has(i)||(e.push(i),t.add(i));return e}function Poe(r,e,t,i){let n=[];n=n.concat(r),n=n.concat(e);for(let o=0,s=n.length;o<s;o++)i3(n[o],t,i,n);return n=yx(n),n.sort(n3),n.reverse(),Cx(n)}function Aoe(r,e,t,i){let n=[];n=n.concat(r),n=n.concat(e);for(let o=0,s=n.length;o<s;o++)i3(n[o],t,i,n);return n=yx(n),n.sort(n3),n.reverse(),Cx(n.map(xT))}function joe(r){let e=[];for(let t of r){for(let i of t.open)e.push(i);for(let i of t.close)e.push(i)}return e=yx(e),Cx(e)}function Moe(r){let e=[];for(let t of r){for(let i of t.open)e.push(i);for(let i of t.close)e.push(i)}return e=yx(e),Cx(e.map(xT))}function Foe(r){let e=/^[\w ]+$/.test(r);return r=Xn(r),e?`\\b${r}\\b`:r}function Cx(r){let e=`(${r.map(Foe).join(")|(")})`;return nx(e,!0)}var xT=function(){function r(i){if(CT){let n=new Uint16Array(i.length),o=0;for(let s=i.length-1;s>=0;s--)n[o++]=i.charCodeAt(s);return yT().decode(n)}else{let n=[],o=0;for(let s=i.length-1;s>=0;s--)n[o++]=i.charAt(s);return n.join("")}}let e=null,t=null;return function(n){return e!==n&&(e=n,t=r(e)),t}}(),Fo=class{static _findPrevBracketInText(e,t,i,n){let o=i.match(e);if(!o)return null;let s=i.length-(o.index||0),a=o[0].length,l=n+s;return new L(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,o){let a=xT(i).substring(i.length-o,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){let o=i.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let l=n+s;return new L(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,o){let s=i.substring(n,o);return this.findNextBracketInText(e,t,s,n)}};var ET=class{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let i of t.close){let n=i.charAt(i.length-1);e.push(n)}return e=e.filter((t,i,n)=>n.indexOf(t)===i),e}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let n=t.findTokenIndexAtOffset(i-1);if(va(t.getStandardTokenType(n)))return null;let o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,i-1)+e,a=Fo.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}};function Sx(r){return r.global&&(r.lastIndex=0),!0}var DT=class{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Sx(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Sx(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Sx(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Sx(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var su=class{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let i=su._createOpenBracketRegExp(t[0]),n=su._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:Ii.IndentOutdent}}if(e>=2&&i.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(i))return{indentAction:Ii.Indent}}return null}static _createOpenBracketRegExp(e){let t=Xn(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",su._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Xn(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,su._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return we(t),null}}};var r3=class{constructor(){this.data=new Map}add(e,t){Up(mo(e)),Up(mn(t)),Up(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}},ii=new r3;var sf={JSONContribution:"base.contributions.json"};function Boe(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}var o3=class{constructor(){this._onDidChangeSchema=new M,this.schemasById={}}registerSchema(e,t){this.schemasById[Boe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}},Woe=new o3;ii.add(sf.JSONContribution,Woe);var ya={Configuration:"base.contributions.configuration"},s3={properties:{},patternProperties:{}},a3={properties:{},patternProperties:{}},l3={properties:{},patternProperties:{}},c3={properties:{},patternProperties:{}},d3={properties:{},patternProperties:{}},LT={properties:{},patternProperties:{}},kT="vscode://schemas/settings/resourceLanguage",h3=ii.as(sf.JSONContribution),u3=class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new M,this._onDidUpdateConfiguration=new M,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:g("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},h3.registerSchema(kT,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let i=this.doRegisterConfigurations(e,t);h3.registerSchema(kT,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){let i=[];return e.forEach(n=>{i.push(...this.validateAndRegisterProperties(n,t,n.extensionInfo)),this.configurationContributors.push(n),this.registerJSONConfiguration(n)}),i}validateAndRegisterProperties(e,t=!0,i,n=3){var o;n=lr(e.scope)?n:e.scope;let s=[],a=e.properties;if(a)for(let c in a){if(t&&zoe(c)){delete a[c];continue}let d=a[c];if(this.updatePropertyDefaultValue(c,d),xx.test(c)?d.scope=void 0:(d.scope=lr(d.scope)?n:d.scope,d.restricted=lr(d.restricted)?!!((o=i==null?void 0:i.restrictedConfigurations)===null||o===void 0?void 0:o.includes(c)):d.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c];!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),s.push(c)}let l=e.allOf;if(l)for(let c of l)s.push(...this.validateAndRegisterProperties(c,t,i,n));return s}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){let t=i=>{let n=i.properties;if(n)for(let s in n)this.updateSchema(s,n[s]);let o=i.allOf;o&&o.forEach(t)};t(e)}updateSchema(e,t){switch(s3.properties[e]=t,t.scope){case 1:a3.properties[e]=t;break;case 2:l3.properties[e]=t;break;case 6:c3.properties[e]=t;break;case 3:d3.properties[e]=t;break;case 4:LT.properties[e]=t;break;case 5:LT.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,i={type:"object",description:g("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:g("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:kT};this.updatePropertyDefaultValue(t,i),s3.properties[t]=i,a3.properties[t]=i,l3.properties[t]=i,c3.properties[t]=i,d3.properties[t]=i,LT.properties[t]=i}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let i=this.defaultValues[e];Rn(i)&&(i=t.default),Rn(i)&&(i=Voe(t.type)),t.default=i}},Uoe="\\[.*\\]$",xx=new RegExp(Uoe);function m3(r){return r.substring(1,r.length-1)}function Voe(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var f3=new u3;ii.add(ya.Configuration,f3);function zoe(r){return r.trim()?xx.test(r)?g("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):f3.getConfigurationProperties()[r]!==void 0?g("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):null:g("config.property.empty","Cannot register an empty property")}var Mt=Ie("configurationService");function IT(r,e){let t=Object.create(null);for(let i in r)Ex(t,i,r[i],e);return t}function Ex(r,e,t,i){let n=e.split("."),o=n.pop(),s=r;for(let a=0;a<n.length;a++){let l=n[a],c=s[l];switch(typeof c){case"undefined":c=s[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}s=c}if(typeof s=="object"&&s!==null)try{s[o]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(s)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(s)}`)}function g3(r,e){let t=e.split(".");p3(r,t)}function p3(r,e){let t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){let i=r[t];typeof i=="object"&&!Array.isArray(i)&&(p3(i,e),Object.keys(i).length===0&&delete r[t])}}function _3(r,e,t){function i(s,a){let l=s;for(let c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}let n=e.split("."),o=i(r,n);return typeof o=="undefined"?t:o}function b3(){let r=ii.as(ya.Configuration).getConfigurationProperties();return Object.keys(r)}function v3(){let r=Object.create(null),e=ii.as(ya.Configuration).getConfigurationProperties();for(let t in e){let i=e[t].default;Ex(r,t,i,n=>console.error(`Conflict in default settings: ${n}`))}return r}var hl=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}};var w3=[];function _o(r,e,t){e instanceof hl||(e=new hl(e,[],t)),w3.push([r,e])}function y3(){return w3}var Hoe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},C3=function(r,e){return function(t,i){e(t,i,r)}},Dx=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},bd=Ie("languageConfigurationService"),Dw=class extends H{constructor(e,t){super();this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new M),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let i=new Set(Object.values(OT));this._register(this.configurationService.onDidChangeConfiguration(n=>{let o=n.change.keys.some(a=>i.has(a)),s=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>this.modeService.validateLanguageId(a));if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new Dx(void 0));else for(let a of s)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new Dx(a)))})),this._register(st.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new Dx(n.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=$oe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};Dw=Hoe([C3(0,Mt),C3(1,ui)],Dw);function $oe(r,e,t){let i=st.getLanguageConfiguration(r);if(!i){let a=t.validateLanguageId(r);if(!a)throw new Error("Unexpected languageId");i=new Xp(a,{})}let n=Koe(i.languageId,e),o=D3([i.underlyingConfig,n]);return new Xp(i.languageId,o)}var OT={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Koe(r,e){let t=e.getValue(OT.brackets,{overrideIdentifier:r}),i=e.getValue(OT.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:S3(t),colorizedBracketPairs:S3(i)}}function S3(r){if(!!Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}var TT=class{constructor(e){this.languageId=e}},x3=class{constructor(){this._entries=new Map,this._onDidChange=new M,this.onDidChange=this._onDidChange.event}register(e,t,i=0){let n=this._entries.get(e);n||(n=new E3(e),this._entries.set(e,n));let o=n.register(t,i);return this._onDidChange.fire(new TT(e)),Re(()=>{o.dispose(),this._onDidChange.fire(new TT(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){let t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,i){let n=xw(t,i-1),o=this._getElectricCharacterSupport(n.languageId);return o?o.onElectricCharacter(e,n,i-n.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){let t=this._getCharacterPairSupport(e);return new _T(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():ou.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,i){let n=xw(t,i-1);return ou.shouldAutoClosePair(e,n,i-n.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return t?fp(t.wordDefinition||null):fp(null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,i){let n=e.getLanguageIdAtPosition(t,0);if(t>1){let o,s=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==n)return s;let a=e.getLineContent(o);if(i.shouldIgnore(a)||/^\s+$/.test(a)||a===""){s=o;continue}return o}}return-1}getInheritIndentForLine(e,t,i,n=!0){if(e<4)return null;let o=this.getIndentRulesSupport(t.getLanguageId());if(!o)return null;if(i<=1)return{indentation:"",action:null};let s=this.getPrecedingValidLine(t,i,o);if(s<0)return null;if(s<1)return{indentation:"",action:null};let a=t.getLineContent(s);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:Lt(a),action:Ii.Indent,line:s};if(o.shouldDecrease(a))return{indentation:Lt(a),action:null,line:s};{if(s===1)return{indentation:Lt(t.getLineContent(s)),action:null,line:s};let l=s-1,c=o.getIndentMetadata(t.getLineContent(l));if(!(c&(1|2))&&c&4){let d=0;for(let h=l-1;h>0;h--)if(!o.shouldIndentNextLine(t.getLineContent(h))){d=h;break}return{indentation:Lt(t.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:Lt(t.getLineContent(s)),action:null,line:s};for(let d=s;d>0;d--){let h=t.getLineContent(d);if(o.shouldIncrease(h))return{indentation:Lt(h),action:Ii.Indent,line:d};if(o.shouldIndentNextLine(h)){let u=0;for(let m=d-1;m>0;m--)if(!o.shouldIndentNextLine(t.getLineContent(d))){u=m;break}return{indentation:Lt(t.getLineContent(u+1)),action:null,line:u+1}}else if(o.shouldDecrease(h))return{indentation:Lt(h),action:null,line:d}}return{indentation:Lt(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,i,n,o){if(e<4)return null;let s=this.getLanguageConfiguration(i);if(!s)return null;let a=this.getIndentRulesSupport(i);if(!a)return null;let l=this.getInheritIndentForLine(e,t,n),c=t.getLineContent(n);if(l){let d=l.line;if(d!==void 0){let h=s.onEnter(e,"",t.getLineContent(d),"");if(h){let u=Lt(t.getLineContent(d));return h.removeText&&(u=u.substring(0,u.length-h.removeText)),h.indentAction===Ii.Indent||h.indentAction===Ii.IndentOutdent?u=o.shiftIndent(u):h.indentAction===Ii.Outdent&&(u=o.unshiftIndent(u)),a.shouldDecrease(c)&&(u=o.unshiftIndent(u)),h.appendText&&(u+=h.appendText),Lt(u)}}return a.shouldDecrease(c)?l.action===Ii.Indent?l.indentation:o.unshiftIndent(l.indentation):l.action===Ii.Indent?o.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,i,n){if(e<4)return null;t.forceTokenization(i.startLineNumber);let o=t.getLineTokens(i.startLineNumber),s=xw(o,i.startColumn-1),a=s.getLineContent(),l=!1,c;s.firstCharOffset>0&&o.getLanguageId(0)!==s.languageId?(l=!0,c=a.substr(0,i.startColumn-1-s.firstCharOffset)):c=o.getLineContent().substring(0,i.startColumn-1);let d;i.isEmpty()?d=a.substr(i.startColumn-1-s.firstCharOffset):d=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset);let h=this.getIndentRulesSupport(s.languageId);if(!h)return null;let u=c,m=Lt(c),p={getLineTokens:w=>t.getLineTokens(w),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(w,S)=>t.getLanguageIdAtPosition(w,S),getLineContent:w=>w===i.startLineNumber?u:t.getLineContent(w)},_=Lt(o.getLineContent()),v=this.getInheritIndentForLine(e,p,i.startLineNumber+1);if(!v){let w=l?_:m;return{beforeEnter:w,afterEnter:w}}let C=l?_:v.indentation;return v.action===Ii.Indent&&(C=n.shiftIndent(C)),h.shouldDecrease(d)&&(C=n.unshiftIndent(C)),{beforeEnter:l?_:m,afterEnter:C}}getIndentActionForType(e,t,i,n,o){if(e<4)return null;let s=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn);if(s.firstCharOffset)return null;let a=this.getIndentRulesSupport(s.languageId);if(!a)return null;let l=s.getLineContent(),c=l.substr(0,i.startColumn-1-s.firstCharOffset),d;if(i.isEmpty()?d=l.substr(i.startColumn-1-s.firstCharOffset):d=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+n+d)){let h=this.getInheritIndentForLine(e,t,i.startLineNumber,!1);if(!h)return null;let u=h.indentation;return h.action!==Ii.Indent&&(u=o.unshiftIndent(u)),u}return null}getIndentMetadata(e,t){let i=this.getIndentRulesSupport(e.getLanguageId());return!i||t<1||t>e.getLineCount()?null:i.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,i){let n=this.getScopedLineTokens(t,i.startLineNumber,i.startColumn),o=this.getLanguageConfiguration(n.languageId);if(!o)return null;let s=n.getLineContent(),a=s.substr(0,i.startColumn-1-n.firstCharOffset),l;i.isEmpty()?l=s.substr(i.startColumn-1-n.firstCharOffset):l=this.getScopedLineTokens(t,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-n.firstCharOffset);let c="";if(i.startLineNumber>1&&n.firstCharOffset===0){let _=this.getScopedLineTokens(t,i.startLineNumber-1);_.languageId===n.languageId&&(c=_.getLineContent())}let d=o.onEnter(e,c,a,l);if(!d)return null;let h=d.indentAction,u=d.appendText,m=d.removeText||0;u?h===Ii.Indent&&(u="	"+u):h===Ii.Indent||h===Ii.IndentOutdent?u="	":u="";let p=this.getIndentationAtPosition(t,i.startLineNumber,i.startColumn);return m&&(p=p.substring(0,p.length-m)),{indentAction:h,appendText:u,removeText:m,indentation:p}}getIndentationAtPosition(e,t,i){let n=e.getLineContent(t),o=Lt(n);return o.length>i-1&&(o=o.substring(0,i-1)),o}getScopedLineTokens(e,t,i){e.forceTokenization(t);let n=e.getLineTokens(t),o=typeof i=="undefined"?e.getLineMaxColumn(t)-1:i-1;return xw(n,o)}},st=new x3,E3=class{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){let i=new NT(e,t,++this._order);return this._entries.push(i),this._resolved=null,Re(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new Xp(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(NT.cmp),D3(this._entries.map(e=>e.configuration)))}};function D3(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var NT=class{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},Xp=class{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new su(this.underlyingConfig):null,this.comments=Xp._handleComments(this.underlyingConfig),this.characterPair=new ou(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||_O,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new DT(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return fp(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new ST(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new ET(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}static _handleComments(e){let t=e.comments;if(!t)return null;let i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){let[n,o]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=o}return i}};_o(bd,Dw);var ic=class{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var RT=class{constructor(e){this.source=e}getElements(){let e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}};function L3(r,e,t){return new ls(new RT(r),new RT(e)).ComputeDiff(t).changes}var af=class{static Assert(e,t){if(!e)throw new Error(t)}},lf=class{static Copy(e,t,i,n,o){for(let s=0;s<o;s++)i[n+s]=e[t+s]}static Copy2(e,t,i,n,o){for(let s=0;s<o;s++)i[n+s]=e[t+s]}},PT=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ic(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},ls=class{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;let[n,o,s]=ls._getElements(e),[a,l,c]=ls._getElements(t);this._hasStrings=s&&c,this._originalStringElements=n,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(ls._isStringArray(t)){let i=new Int32Array(t.length);for(let n=0,o=t.length;n<o;n++)i[n]=px(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let i=ls._getStrictElement(this._originalSequence,e),n=ls._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,o){let s=[!1],a=this.ComputeDiffRecursive(e,t,i,n,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,i,n,o){for(o[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let h;return i<=n?(af.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new ic(e,0,i,n-i+1)]):e<=t?(af.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),h=[new ic(e,t-e+1,i,0)]):(af.Assert(e===t+1,"originalStart should only be one more than originalEnd"),af.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,s,a,o),c=s[0],d=a[0];if(l!==null)return l;if(!o[0]){let h=this.ComputeDiffRecursive(e,c,i,d,o),u=[];return o[0]?u=[new ic(c+1,t-(c+1)+1,d+1,n-(d+1)+1)]:u=this.ComputeDiffRecursive(c+1,t,d+1,n,o),this.ConcatenateChanges(h,u)}return[new ic(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_,v,C,w){let S=null,D=null,I=new PT,A=t,O=i,N=m[0]-v[0]-n,F=-1073741824,Y=this.m_forwardHistory.length-1;do{let K=N+e;K===A||K<O&&c[K-1]<c[K+1]?(h=c[K+1],p=h-N-n,h<F&&I.MarkNextChange(),F=h,I.AddModifiedElement(h+1,p),N=K+1-e):(h=c[K-1]+1,p=h-N-n,h<F&&I.MarkNextChange(),F=h-1,I.AddOriginalElement(h,p+1),N=K-1-e),Y>=0&&(c=this.m_forwardHistory[Y],e=c[0],A=1,O=c.length-1)}while(--Y>=-1);if(S=I.getReverseChanges(),w[0]){let K=m[0]+1,ee=v[0]+1;if(S!==null&&S.length>0){let ie=S[S.length-1];K=Math.max(K,ie.getOriginalEnd()),ee=Math.max(ee,ie.getModifiedEnd())}D=[new ic(K,u-K+1,ee,_-ee+1)]}else{I=new PT,A=s,O=a,N=m[0]-v[0]-l,F=1073741824,Y=C?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let K=N+o;K===A||K<O&&d[K-1]>=d[K+1]?(h=d[K+1]-1,p=h-N-l,h>F&&I.MarkNextChange(),F=h+1,I.AddOriginalElement(h+1,p+1),N=K+1-o):(h=d[K-1],p=h-N-l,h>F&&I.MarkNextChange(),F=h,I.AddModifiedElement(h+1,p+1),N=K-1-o),Y>=0&&(d=this.m_reverseHistory[Y],o=d[0],A=1,O=d.length-1)}while(--Y>=-1);D=I.getChanges()}return this.ConcatenateChanges(S,D)}ComputeRecursionPoint(e,t,i,n,o,s,a){let l=0,c=0,d=0,h=0,u=0,m=0;e--,i--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let p=t-e+(n-i),_=p+1,v=new Int32Array(_),C=new Int32Array(_),w=n-i,S=t-e,D=e-i,I=t-n,O=(S-w)%2==0;v[w]=e,C[S]=t,a[0]=!1;for(let N=1;N<=p/2+1;N++){let F=0,Y=0;d=this.ClipDiagonalBound(w-N,N,w,_),h=this.ClipDiagonalBound(w+N,N,w,_);for(let ee=d;ee<=h;ee+=2){ee===d||ee<h&&v[ee-1]<v[ee+1]?l=v[ee+1]:l=v[ee-1]+1,c=l-(ee-w)-D;let ie=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(v[ee]=l,l+c>F+Y&&(F=l,Y=c),!O&&Math.abs(ee-S)<=N-1&&l>=C[ee])return o[0]=l,s[0]=c,ie<=C[ee]&&1447>0&&N<=1447+1?this.WALKTRACE(w,d,h,D,S,u,m,I,v,C,l,t,o,c,n,s,O,a):null}let K=(F-e+(Y-i)-N)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(F,K))return a[0]=!0,o[0]=F,s[0]=Y,K>0&&1447>0&&N<=1447+1?this.WALKTRACE(w,d,h,D,S,u,m,I,v,C,l,t,o,c,n,s,O,a):(e++,i++,[new ic(e,t-e+1,i,n-i+1)]);u=this.ClipDiagonalBound(S-N,N,S,_),m=this.ClipDiagonalBound(S+N,N,S,_);for(let ee=u;ee<=m;ee+=2){ee===u||ee<m&&C[ee-1]>=C[ee+1]?l=C[ee+1]-1:l=C[ee-1],c=l-(ee-S)-I;let ie=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(C[ee]=l,O&&Math.abs(ee-w)<=N&&l<=v[ee])return o[0]=l,s[0]=c,ie>=v[ee]&&1447>0&&N<=1447+1?this.WALKTRACE(w,d,h,D,S,u,m,I,v,C,l,t,o,c,n,s,O,a):null}if(N<=1447){let ee=new Int32Array(h-d+2);ee[0]=w-d+1,lf.Copy2(v,d,ee,1,h-d+1),this.m_forwardHistory.push(ee),ee=new Int32Array(m-u+2),ee[0]=S-u+1,lf.Copy2(C,u,ee,1,m-u+1),this.m_reverseHistory.push(ee)}}return this.WALKTRACE(w,d,h,D,S,u,m,I,v,C,l,t,o,c,n,s,O,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){let c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let i=e[t],n=0,o=0;if(t>0){let h=e[t-1];n=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}let s=i.originalLength>0,a=i.modifiedLength>0,l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let h=1;;h++){let u=i.originalStart-h,m=i.modifiedStart-h;if(u<n||m<o||s&&!this.OriginalElementsAreEqual(u,u+i.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+i.modifiedLength))break;let _=(u===n&&m===o?5:0)+this._boundaryScore(u,i.originalLength,m,i.modifiedLength);_>c&&(c=_,l=h)}i.originalStart-=l,i.modifiedStart-=l;let d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){let n=e[t-1],o=e[t],s=o.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=n.modifiedStart,h=o.modifiedStart+o.modifiedLength,u=h-d;if(s<5&&c<20&&u<20){let m=this._findBetterContiguousSequence(a,c,d,u,s);if(m){let[p,_]=m;(p!==n.originalStart+n.originalLength||_!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=p-n.originalStart,n.modifiedLength=_-n.modifiedStart,o.originalStart=p+s,o.modifiedStart=_+s,o.originalLength=l-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,o){if(t<o||n<o)return null;let s=e+t-o+1,a=i+n-o+1,l=0,c=0,d=0;for(let h=e;h<s;h++)for(let u=i;u<a;u++){let m=this._contiguousSequenceScore(h,u,o);m>0&&m>l&&(l=m,c=h,d=u)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;n+=this._originalStringElements[e+o].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){let o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(i,n)?1:0;return o+s}ConcatenateChanges(e,t){let i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){let n=new Array(e.length+t.length-1);return lf.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],lf.Copy(t,1,n,e.length,t.length-1),n}else{let n=new Array(e.length+t.length);return lf.Copy(e,0,n,0,e.length),lf.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(af.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),af.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let n=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new ic(n,o,s,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;let o=i,s=n-i-1,a=t%2==0;if(e<0){let l=o%2==0;return a===l?0:1}else{let l=s%2==0;return a===l?n-1:n-2}}};var qoe=3;function k3(r,e,t,i){return new ls(r,e,t).ComputeDiff(i)}var AT=class{constructor(e){let t=[],i=[];for(let n=0,o=e.length;n<o;n++)t[n]=MT(e[n],1),i[n]=FT(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){let e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){let n=[],o=[],s=[],a=0;for(let l=t;l<=i;l++){let c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let u=d;u<h;u++)n[a]=c.charCodeAt(u-1),o[a]=l+1,s[a]=u,a++}return new I3(n,o,s)}},I3=class{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}},Qp=class{constructor(e,t,i,n,o,s,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=o,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){let n,o,s,a,l,c,d,h;return e.originalLength===0?(n=0,o=0,s=0,a=0):(n=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,c=0,d=0,h=0):(l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=i.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new Qp(n,o,s,a,l,c,d,h)}};function Yoe(r){if(r.length<=1)return r;let e=[r[0]],t=e[0];for(let i=1,n=r.length;i<n;i++){let o=r[i],s=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(s,a)<qoe?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}var Jp=class{constructor(e,t,i,n,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=o}static createFromDiffResult(e,t,i,n,o,s,a){let l,c,d,h,u;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=n.getStartLineNumber(t.modifiedStart)-1,h=0):(d=n.getStartLineNumber(t.modifiedStart),h=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){let m=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1),_=k3(m,p,o,!0).changes;a&&(_=Yoe(_)),u=[];for(let v=0,C=_.length;v<C;v++)u.push(Qp.createFromDiffChange(_[v],m,p))}return new Jp(l,c,d,h,u)}},jT=class{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new AT(e),this.modified=new AT(t),this.continueLineDiff=O3(i.maxComputationTime),this.continueCharDiff=O3(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};let e=k3(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){let a=[];for(let l=0,c=t.length;l<c;l++)a.push(Jp.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}let n=[],o=0,s=0;for(let a=-1,l=t.length;a<l;a++){let c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&s<h;){let u=this.originalLines[o],m=this.modifiedLines[s];if(u!==m){{let p=MT(u,1),_=MT(m,1);for(;p>1&&_>1;){let v=u.charCodeAt(p-2),C=m.charCodeAt(_-2);if(v!==C)break;p--,_--}(p>1||_>1)&&this._pushTrimWhitespaceCharChange(n,o+1,1,p,s+1,1,_)}{let p=FT(u,1),_=FT(m,1),v=u.length+1,C=m.length+1;for(;p<v&&_<C;){let w=u.charCodeAt(p-1),S=u.charCodeAt(_-1);if(w!==S)break;p++,_++}(p<v||_<C)&&this._pushTrimWhitespaceCharChange(n,o+1,p,v,s+1,_,C)}}o++,s++}c&&(n.push(Jp.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,s+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,o,s,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,o,s,a))return;let l;this.shouldComputeCharChanges&&(l=[new Qp(t,i,t,n,o,s,o,a)]),e.push(new Jp(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,o,s,a){let l=e.length;if(l===0)return!1;let c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Qp(t,i,t,n,o,s,o,a)),!0):!1}};function MT(r,e){let t=Wi(r);return t===-1?e:t+1}function FT(r,e){let t=Lr(r);return t===-1?e:t+2}function O3(r){if(r===0)return()=>!0;let e=Date.now();return()=>Date.now()-e<r}function cf(r){return r<0?0:r>255?255:r|0}function df(r){return r<0?0:r>4294967295?4294967295:r|0}var Lx=class{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},BT=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=df(e);let i=this.values,n=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(i.length+o),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=df(e),t=df(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=df(e),t=df(t);let i=this.values,n=this.prefixSum;if(e>=i.length)return!1;let o=i.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=df(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,o=0,s=0;for(;t<=i;)if(n=t+(i-t)/2|0,o=this.prefixSum[n],s=o-this.values[n],e<s)i=n-1;else if(e>=o)t=n+1;else break;return new Lx(n,e-s)}};var WT=class{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);let t=e.changes;for(let i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new V(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new BT(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let i=sr(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);let n=new Uint32Array(i.length-1);for(let o=1;o<i.length;o++)this._lines.splice(e.lineNumber+o-1,0,i[o]),n[o-1]=i[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}};var nc=class{constructor(e){let t=cf(e);this._defaultValue=t,this._asciiMap=nc._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let i=0;i<256;i++)t[i]=e;return t}set(e,t){let i=cf(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}},rc=class{constructor(){this._actual=new nc(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}};var T3=class{constructor(e,t,i){let n=new Uint8Array(e*t);for(let o=0,s=e*t;o<s;o++)n[o]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}},N3=class{constructor(e){let t=0,i=0;for(let o=0,s=e.length;o<s;o++){let[a,l,c]=e[o];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;let n=new T3(i,t,0);for(let o=0,s=e.length;o<s;o++){let[a,l,c]=e[o];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}},UT=null;function Zoe(){return UT===null&&(UT=new N3([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),UT}var Lw=null;function Goe(){if(Lw===null){Lw=new nc(0);let r=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<r.length;t++)Lw.set(r.charCodeAt(t),1);let e=".,;";for(let t=0;t<e.length;t++)Lw.set(e.charCodeAt(t),2)}return Lw}var kw=class{static _createLink(e,t,i,n,o){let s=o-1;do{let a=t.charCodeAt(s);if(e.get(a)!==2)break;s--}while(s>n);if(n>0){let a=t.charCodeAt(n-1),l=t.charCodeAt(s);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&s--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:s+2},url:t.substring(n,s+1)}}static computeLinks(e,t=Zoe()){let i=Goe(),n=[];for(let o=1,s=e.getLineCount();o<=s;o++){let a=e.getLineContent(o),l=a.length,c=0,d=0,h=0,u=1,m=!1,p=!1,_=!1,v=!1;for(;c<l;){let C=!1,w=a.charCodeAt(c);if(u===13){let S;switch(w){case 40:m=!0,S=0;break;case 41:S=m?0:1;break;case 91:_=!0,p=!0,S=0;break;case 93:_=!1,S=p?0:1;break;case 123:v=!0,S=0;break;case 125:S=v?0:1;break;case 39:S=h===34||h===96?0:1;break;case 34:S=h===39||h===96?0:1;break;case 96:S=h===39||h===34?0:1;break;case 42:S=h===42?1:0;break;case 124:S=h===124?1:0;break;case 32:S=_?0:1;break;default:S=i.get(w)}S===1&&(n.push(kw._createLink(i,a,o,d,c)),C=!0)}else if(u===12){let S;w===91?(p=!0,S=0):S=i.get(w),S===1?C=!0:u=13}else u=t.nextState(u,w),u===0&&(C=!0);C&&(u=1,m=!1,p=!1,v=!1,d=c+1,h=w),c++}u===13&&n.push(kw._createLink(i,a,o,d,l))}return n}};function R3(r){return!r||typeof r.getLineCount!="function"||typeof r.getLineContent!="function"?[]:kw.computeLinks(r)}var Iw=class{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,o){if(e&&t){let s=this.doNavigateValueSet(t,o);if(s)return{range:e,value:s}}if(i&&n){let s=this.doNavigateValueSet(n,o);if(s)return{range:i,value:s}}return null}doNavigateValueSet(e,t){let i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){let i=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),n=Number(e),o=parseFloat(e);return!isNaN(n)&&!isNaN(o)&&n===o?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let o=0,s=e.length;n===null&&o<s;o++)n=this.valueSetReplace(e[o],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}};Iw.INSTANCE=new Iw;var e_=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},P3=class extends WT{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let i=gp(e.column,fp(t),this._lines[e.lineNumber-1],0);return i?new L(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){let t=this._lines,i=this._wordenize.bind(this),n=0,o="",s=0,a=[];return{*[Symbol.iterator](){for(;;)if(s<a.length){let l=o.substring(a[s].start,a[s].end);s+=1,yield l}else if(n<t.length)o=t[n],a=i(o,e),s=0,n+=1;else break}}}getLineWords(e,t){let i=this._lines[e-1],n=this._wordenize(i,t),o=[];for(let s of n)o.push({word:i.substring(s.start,s.end),startColumn:s.start+1,endColumn:s.end+1});return o}_wordenize(e,t){let i=[],n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let s=i+1;s<n;s++)o.push(this._lines[s]);return o.push(this._lines[n].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){let t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!V.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{let o=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>o&&(i=o,n=!0)}return n?{lineNumber:t,column:i}:e}},vd=class{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new P3(ve.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeDiff(e,t,i,n){return e_(this,void 0,void 0,function*(){let o=this._getModel(e),s=this._getModel(t);if(!o||!s)return null;let a=o.getLinesContent(),l=s.getLinesContent(),d=new jT(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:i,shouldMakePrettyDiff:!0,maxComputationTime:n}).computeDiff(),h=d.changes.length>0?!1:this._modelsAreIdentical(o,s);return{quitEarly:d.quitEarly,identical:h,changes:d.changes}})}_modelsAreIdentical(e,t){let i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let o=1;o<=i;o++){let s=e.getLineContent(o),a=t.getLineContent(o);if(s!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return e_(this,void 0,void 0,function*(){let i=this._getModel(e);if(!i)return t;let n=[],o;t=t.slice(0).sort((s,a)=>{if(s.range&&a.range)return L.compareRangesUsingStarts(s.range,a.range);let l=s.range?0:1,c=a.range?0:1;return l-c});for(let{range:s,text:a,eol:l}of t){if(typeof l=="number"&&(o=l),L.isEmpty(s)&&!a)continue;let c=i.getValueInRange(s);if(a=a.replace(/\r\n|\n|\r/g,i.eol),c===a)continue;if(Math.max(a.length,c.length)>vd._diffLimit){n.push({range:s,text:a});continue}let d=L3(c,a,!1),h=i.offsetAt(L.lift(s).getStartPosition());for(let u of d){let m=i.positionAt(h+u.originalStart),p=i.positionAt(h+u.originalStart+u.originalLength),_={text:a.substr(u.modifiedStart,u.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:p.lineNumber,endColumn:p.column}};i.getValueInRange(_.range)!==_.text&&n.push(_)}}return typeof o=="number"&&n.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),n})}computeLinks(e){return e_(this,void 0,void 0,function*(){let t=this._getModel(e);return t?R3(t):null})}textualSuggest(e,t,i,n){return e_(this,void 0,void 0,function*(){let o=new or(!0),s=new RegExp(i,n),a=new Set;e:for(let l of e){let c=this._getModel(l);if(!!c){for(let d of c.words(s))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>vd._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,i,n){return e_(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return Object.create(null);let s=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let c=o.getLineWords(l,s);for(let d of c){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,i,n,o){return e_(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return null;let a=new RegExp(n,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=s.getValueInRange(t),c=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;let d=s.getValueInRange(c);return Iw.INSTANCE.navigateValueSet(t,l,c,d,i)})}loadForeignModule(e,t,i){let s={host:dU(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(Wp(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}};vd._diffLimit=1e5;vd._suggestionsLimit=1e4;typeof importScripts=="function"&&(ei.monaco=U1());var t_=Ie("textResourceConfigurationService"),kx=Ie("textResourcePropertiesService");function cs(r,e=0){return r[r.length-(1+e)]}function A3(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function zn(r,e,t=(i,n)=>i===n){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let i=0,n=r.length;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function i_(r,e,t){let i=0,n=r.length-1;for(;i<=n;){let o=(i+n)/2|0,s=t(r[o],e);if(s<0)i=o+1;else if(s>0)n=o-1;else return o}return-(i+1)}function Ix(r,e){let t=0,i=r.length;if(i===0)return 0;for(;t<i;){let n=Math.floor((t+i)/2);e(r[n])?i=n:t=n+1}return t}function Ox(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");let i=e[Math.floor(e.length*Math.random())],n=[],o=[],s=[];for(let a of e){let l=t(a,i);l<0?n.push(a):l>0?o.push(a):s.push(a)}return r<n.length?Ox(r,n,t):r<n.length+s.length?s[0]:Ox(r-(n.length+s.length),o,t)}function VT(r,e){let t=[],i;for(let n of r.slice(0).sort(e))!i||e(i[0],n)!==0?(i=[n],t.push(i)):i.push(n);return t}function Ca(r){return r.filter(e=>!!e)}function Tx(r){return!Array.isArray(r)||r.length===0}function Ji(r){return Array.isArray(r)&&r.length>0}function hf(r,e=t=>t){let t=new Set;return r.filter(i=>{let n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function j3(r,e){let t=Xoe(r,e);if(t!==-1)return r[t]}function Xoe(r,e){for(let t=r.length-1;t>=0;t--){let i=r[t];if(e(i))return t}return-1}function Ow(r,e){return r.length>0?r[0]:e}function n_(r){return[].concat(...r)}function Pn(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);let i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function au(r,e,t){let i=r.slice(0,e),n=r.slice(e);return i.concat(t,n)}function Nx(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function Tw(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function r_(r){return Array.isArray(r)?r:[r]}function Qoe(r,e,t){let i=M3(r,e),n=r.length,o=t.length;r.length=n+o;for(let s=n-1;s>=i;s--)r[s+o]=r[s];for(let s=0;s<o;s++)r[s+i]=t[s]}function zT(r,e,t,i){let n=M3(r,e),o=r.splice(n,t);return Qoe(r,n,i),o}function M3(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}var wd=class{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){return this.items[this.firstIdx]}};var hr=Ie("logService"),Sa;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.Off=6]="Off"})(Sa||(Sa={}));var F3=Sa.Info,B3=class extends H{constructor(){super(...arguments);this.level=F3,this._onDidChangeLogLevel=this._register(new M)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}},HT=class extends B3{constructor(e=F3){super();this.setLevel(e)}trace(e,...t){this.getLevel()<=Sa.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Sa.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Sa.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Sa.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}},$T=class extends H{constructor(e){super();this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}};var Joe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},KT=function(r,e){return function(t,i){e(t,i,r)}},qT=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},W3=60*1e3,U3=5*60*1e3;function o_(r,e){let t=r.getModel(e);return!(!t||t.isTooLargeForSyncing())}var Rx=class extends H{constructor(e,t,i){super();this._modelService=e,this._workerManager=this._register(new z3(this._modelService)),this._logService=i,this._register(gd.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(n,o)=>o_(this._modelService,n.uri)?this._workerManager.withWorker().then(s=>s.computeLinks(n.uri)).then(s=>s&&{links:s}):Promise.resolve({links:[]})})),this._register(po.register("*",new V3(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,i,n){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,i,n))}computeMoreMinimalEdits(e,t){if(Ji(t)){if(!o_(this._modelService,e))return Promise.resolve(t);let i=or.create(!0),n=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return n.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([n,ma(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return o_(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(n=>n.navigateValueSet(e,t,i))}canComputeWordRanges(e){return o_(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}};Rx=Joe([KT(0,Gt),KT(1,t_),KT(2,hr)],Rx);var V3=class{constructor(e,t,i){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}provideCompletionItems(e,t){return qT(this,void 0,void 0,function*(){let i=this._configurationService.getValue(e.uri,t,"editor");if(!i.wordBasedSuggestions)return;let n=[];if(i.wordBasedSuggestionsMode==="currentDocument")o_(this._modelService,e.uri)&&n.push(e.uri);else for(let h of this._modelService.getModels())!o_(this._modelService,h.uri)||(h===e?n.unshift(h.uri):(i.wordBasedSuggestionsMode==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&n.push(h.uri));if(n.length===0)return;let o=st.getWordDefinition(e.getLanguageId()),s=e.getWordAtPosition(t),a=s?new L(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):L.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(n,s==null?void 0:s.word,o);if(!!d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}})}},z3=class extends H{constructor(e){super();this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Kl).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(U3/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>U3&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Ax(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}},H3=class extends H{constructor(e,t,i){super();if(this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){let n=new Kl;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(W3/2)),this._register(n)}}dispose(){for(let e in this._syncedModels)Ge(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(let i of e){let n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>W3&&t.push(i);for(let i of t)this._stopModelSync(i)}_beginModelSync(e,t){let i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;let n=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});let o=new G;o.add(i.onDidChangeContent(s=>{this._proxy.acceptModelChanged(n.toString(),s)})),o.add(i.onWillDispose(()=>{this._stopModelSync(n)})),o.add(Re(()=>{this._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=o}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Ge(t)}},YT=class{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}},Px=class{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}},Ax=class extends H{constructor(e,t,i){super();this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new Gp(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new gT(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Px(this)))}catch(e){yw(e),this._worker=new YT(new vd(new Px(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(yw(e),this._worker=new YT(new vd(new Px(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new H3(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return qT(this,void 0,void 0,function*(){return this._disposed?Promise.reject(Hl()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))})}computeDiff(e,t,i,n){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),i,n))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(i=>i.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,i){return qT(this,void 0,void 0,function*(){let n=yield this._withSyncedResources(e),o=i.source,s=rx(i);return n.textualSuggest(e.map(a=>a.toString()),t,o,s)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{let n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);let o=st.getWordDefinition(n.getLanguageId()),s=o.source,a=rx(o);return i.computeWordRanges(e.toString(),t,s,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(n=>{let o=this._modelService.getModel(e);if(!o)return null;let s=st.getWordDefinition(o.getLanguageId()),a=s.source,l=rx(s);return n.navigateValueSet(e.toString(),t,i,a,l)})}dispose(){super.dispose(),this._disposed=!0}};function $3(r,e){return new K3(r,e)}var K3=class extends Ax{constructor(e,t){super(e,t.keepIdleModels||!1,t.label);this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{let t=this._foreignModuleHost?Wp(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;let n=(a,l)=>e.fmr(a,l),o=(a,l)=>function(){let c=Array.prototype.slice.call(arguments,0);return l(a,c)},s={};for(let a of i)s[a]=o(a,n);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}};var Vi=class{constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}static createEmpty(e,t){let i=Vi.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new Vi(n,e,t)}equals(e){return e instanceof Vi?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let n=t<<1,o=n+(i<<1);for(let s=n;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],i=dr.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return dr.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return dr.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return dr.getClassNameFromMetadata(t)}getInlineStyle(e,t){let i=this._tokens[(e<<1)+1];return dr.getInlineStyleFromMetadata(i,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Vi.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new jx(this,e,t,i)}static convertToEndOffset(e,t){let n=(e.length>>>1)-1;for(let o=0;o<n;o++)e[o<<1]=e[o+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){let o=i+Math.floor((n-i)/2),s=e[o<<1];if(s===t)return o+1;s<t?i=o+1:s>t&&(n=o)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="",o=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(s,a);let c=this._tokens[(t<<1)+1];o.push(n.length,c),t++,s=a}else if(l){if(l.offset>s){n+=this._text.substring(s,l.offset);let c=this._tokens[(t<<1)+1];o.push(n.length,c),s=l.offset}n+=l.text,o.push(n.length,l.tokenMetadata),i++}else break}return new Vi(new Uint32Array(o),n,this._languageIdCodec)}};Vi.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;var jx=class{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=i);o++)this._tokensCount++}equals(e){return e instanceof jx?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}};var ur=class{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){let i=e.length,n=t.length;if(i!==n)return!1;for(let o=0;o<i;o++)if(!ur._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;let n=t+1,o=i+1,s=i-t,a=[],l=0;for(let c of e)c.endColumn<=n||c.startColumn>=o||(a[l++]=new ur(Math.max(1,c.startColumn-n+1),Math.min(s+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];let o=[],s=0;for(let a=0,l=e.length;a<l;a++){let c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;let h=d.startLineNumber===t?d.startColumn:i,u=d.endLineNumber===t?d.endColumn:n;o[s++]=new ur(h,u,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){let i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;let i=ur._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}},ZT=class{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}},Nw=class{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new ZT(t,this.stopOffsets[n],this.classNames.join(" "),Nw._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new ZT(t,e-1,this.classNames.join(" "),Nw._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}},GT=class{static normalize(e,t){if(t.length===0)return[];let i=[],n=new Nw,o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s],c=l.startColumn,d=l.endColumn,h=l.className,u=l.type===1?2:l.type===2?4:0;if(c>1){let _=e.charCodeAt(c-2);ki(_)&&c--}if(d>1){let _=e.charCodeAt(d-2);ki(_)&&d--}let m=c-1,p=d-2;o=n.consumeLowerThan(m,o,i),n.count===0&&(o=m),n.insert(p,h,u)}return n.consumeLowerThan(1073741824,o,i),i}};var Cn=class{constructor(e,t,i){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=i}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}},XT=class{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}},Bs=class{constructor(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_,v,C,w,S){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ur.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=u,this.stopRenderingLineAfter=_,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=C,this.fontLigatures=w,this.selectionsOnLine=S&&S.sort((A,O)=>A.startOffset<O.startOffset?-1:1);let D=Math.abs(p-u),I=Math.abs(m-u);D<I?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ur.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}},Rw=class{constructor(e,t){this.partIndex=e,this.charIndex=t}},ul=class{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,i,n){let o=(t<<16|i<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=n+i}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){let t=this.charOffsetToPartData(e-1),i=ul.getPartIndex(t),n=ul.getCharIndex(t);return new Rw(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;let n=(e<<16|i<<0)>>>0,o=0,s=this.length-1;for(;o+1<s;){let _=o+s>>>1,v=this._data[_];if(v===n)return _;v>n?s=_:o=_}if(o===s)return o;let a=this._data[o],l=this._data[s];if(a===n)return o;if(l===n)return s;let c=ul.getPartIndex(a),d=ul.getCharIndex(a),h=ul.getPartIndex(l),u;c!==h?u=t:u=ul.getCharIndex(l);let m=i-d,p=u-i;return m<=p?o:s}},Mx=class{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}};function uf(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,i=0,n=0;for(let s of r.lineDecorations)(s.type===1||s.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(s.className),e.appendASCIIString('"></span>'),s.type===1&&(n|=1,t++),s.type===2&&(n|=2,i++));e.appendASCIIString("</span>");let o=new ul(1,t+i);return o.setColumnInfo(1,t,0,0),new Mx(o,!1,n)}return e.appendASCIIString("<span><span></span></span>"),new Mx(new ul(0,0),!1,0)}return sse(ese(r),e)}var q3=class{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}};function s_(r){let e=wa(1e4),t=uf(r,e);return new q3(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}var Y3=class{constructor(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=o,this.parts=s,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=u,this.renderSpaceCharCode=m,this.renderWhitespace=p,this.renderControlCharacters=_}};function ese(r){let e=r.lineContent,t,i;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,i=r.stopRenderingLineAfter):(t=!1,i=e.length);let n=tse(r.lineTokens,r.fauxIndentLength,i);(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&!!r.selectionsOnLine||r.renderWhitespace===3)&&(n=rse(r,e,i,n));let o=0;if(r.lineDecorations.length>0){for(let s=0,a=r.lineDecorations.length;s<a;s++){let l=r.lineDecorations[s];l.type===3||l.type===1?o|=1:l.type===2&&(o|=2)}n=ose(e,i,n,r.lineDecorations)}return r.containsRTL||(n=ise(e,n,!r.isBasicASCII||r.fontLigatures)),r.renderControlCharacters&&!r.isBasicASCII&&(n=nse(e,n)),new Y3(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,i,t,n,o,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function tse(r,e,t){let i=[],n=0;e>0&&(i[n++]=new Cn(e,"",0));for(let o=0,s=r.getCount();o<s;o++){let a=r.getEndOffset(o);if(a<=e)continue;let l=r.getClassName(o);if(a>=t){i[n++]=new Cn(t,l,0);break}i[n++]=new Cn(a,l,0)}return i}function ise(r,e,t){let i=0,n=[],o=0;if(t)for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.endIndex;if(i+50<c){let d=l.type,h=l.metadata,u=-1,m=i;for(let p=i;p<c;p++)r.charCodeAt(p)===32&&(u=p),u!==-1&&p-m>=50&&(n[o++]=new Cn(u+1,d,h),m=u+1,u=-1);m!==c&&(n[o++]=new Cn(c,d,h))}else n[o++]=l;i=c}else for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.endIndex,d=c-i;if(d>50){let h=l.type,u=l.metadata,m=Math.ceil(d/50);for(let p=1;p<m;p++){let _=i+p*50;n[o++]=new Cn(_,h,u)}n[o++]=new Cn(c,h,u)}else n[o++]=l;i=c}return n}function Z3(r){return r<32?r!==9:r===127||r>=8234&&r<=8238||r>=8294&&r<=8297||r>=8206&&r<=8207||r===1564}function nse(r,e){let t=[],i=new Cn(0,"",0),n=0;for(let o of e){let s=o.endIndex;for(;n<s;n++){let a=r.charCodeAt(n);Z3(a)&&(n>i.endIndex&&(i=new Cn(n,o.type,o.metadata),t.push(i)),i=new Cn(n+1,"mtkcontrol",o.metadata),t.push(i))}n>i.endIndex&&(i=new Cn(s,o.type,o.metadata),t.push(i))}return t}function rse(r,e,t,i){let n=r.continuesWithWrappedLine,o=r.fauxIndentLength,s=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,c=r.selectionsOnLine,d=r.renderWhitespace===1,h=r.renderWhitespace===3,u=r.renderSpaceWidth!==r.spaceWidth,m=[],p=0,_=0,v=i[_].type,C=i[_].endIndex,w=i.length,S=!1,D=Wi(e),I;D===-1?(S=!0,D=t,I=t):I=Lr(e);let A=!1,O=0,N=c&&c[O],F=a%s;for(let K=o;K<t;K++){let ee=e.charCodeAt(K);N&&K>=N.endOffset&&(O++,N=c&&c[O]);let ie;if(K<D||K>I)ie=!0;else if(ee===9)ie=!0;else if(ee===32)if(d)if(A)ie=!0;else{let Ee=K+1<t?e.charCodeAt(K+1):0;ie=Ee===32||Ee===9}else ie=!0;else ie=!1;if(ie&&c&&(ie=!!N&&N.startOffset<=K&&N.endOffset>K),ie&&h&&(ie=S||K>I),A){if(!ie||!l&&F>=s){if(u){let Ee=p>0?m[p-1].endIndex:o;for(let Le=Ee+1;Le<=K;Le++)m[p++]=new Cn(Le,"mtkw",1)}else m[p++]=new Cn(K,"mtkw",1);F=F%s}}else(K===C||ie&&K>o)&&(m[p++]=new Cn(K,v,0),F=F%s);for(ee===9?F=s:uo(ee)?F+=2:F++,A=ie;K===C&&(_++,_<w);)v=i[_].type,C=i[_].endIndex}let Y=!1;if(A)if(n&&d){let K=t>0?e.charCodeAt(t-1):0,ee=t>1?e.charCodeAt(t-2):0;K===32&&ee!==32&&ee!==9||(Y=!0)}else Y=!0;if(Y)if(u){let K=p>0?m[p-1].endIndex:o;for(let ee=K+1;ee<=t;ee++)m[p++]=new Cn(ee,"mtkw",1)}else m[p++]=new Cn(t,"mtkw",1);else m[p++]=new Cn(t,v,0);return m}function ose(r,e,t,i){i.sort(ur.compare);let n=GT.normalize(r,i),o=n.length,s=0,a=[],l=0,c=0;for(let h=0,u=t.length;h<u;h++){let m=t[h],p=m.endIndex,_=m.type,v=m.metadata;for(;s<o&&n[s].startOffset<p;){let C=n[s];if(C.startOffset>c&&(c=C.startOffset,a[l++]=new Cn(c,_,v)),C.endOffset+1<=p)c=C.endOffset+1,a[l++]=new Cn(c,_+" "+C.className,v|C.metadata),s++;else{c=p,a[l++]=new Cn(c,_+" "+C.className,v|C.metadata);break}}p>c&&(c=p,a[l++]=new Cn(c,_,v))}let d=t[t.length-1].endIndex;if(s<o&&n[s].startOffset===d)for(;s<o&&n[s].startOffset===d;){let h=n[s];a[l++]=new Cn(c,h.className,h.metadata),s++}return a}function sse(r,e){let t=r.fontIsMonospace,i=r.canUseHalfwidthRightwardsArrow,n=r.containsForeignElements,o=r.lineContent,s=r.len,a=r.isOverflowing,l=r.parts,c=r.fauxIndentLength,d=r.tabSize,h=r.startVisibleColumn,u=r.containsRTL,m=r.spaceWidth,p=r.renderSpaceCharCode,_=r.renderWhitespace,v=r.renderControlCharacters,C=new ul(s+1,l.length),w=!1,S=0,D=h,I=0,A=0,O=0,N=0;u?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let F=0,Y=l.length;F<Y;F++){N+=O;let K=l[F],ee=K.endIndex,ie=K.type,Ee=_!==0&&K.isWhitespace(),Le=Ee&&!t&&(ie==="mtkw"||!n),Te=S===ee&&K.isPseudoAfter();if(I=0,e.appendASCIIString('<span class="'),e.appendASCIIString(Le?"mtkz":ie),e.appendASCII(34),Ee){let Ne=0;{let Fe=S,ue=D;for(;Fe<ee;Fe++){let Xt=(o.charCodeAt(Fe)===9?d-ue%d:1)|0;Ne+=Xt,Fe>=c&&(ue+=Xt)}}for(Le&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(m*Ne)),e.appendASCIIString('px"')),e.appendASCII(62);S<ee;S++){C.setColumnInfo(S+1,F-A,I,N),A=0;let Fe=o.charCodeAt(S),ue;if(Fe===9){ue=d-D%d|0,!i||ue>1?e.write1(8594):e.write1(65515);for(let ni=2;ni<=ue;ni++)e.write1(160)}else ue=1,e.write1(p);I+=ue,S>=c&&(D+=ue)}O=Ne}else{let Ne=0;for(e.appendASCII(62);S<ee;S++){C.setColumnInfo(S+1,F-A,I,N),A=0;let Fe=o.charCodeAt(S),ue=1,ni=1;switch(Fe){case 9:ue=d-D%d,ni=ue;for(let Xt=1;Xt<=ue;Xt++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:v?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:uo(Fe)&&ni++,v&&Fe<32?e.write1(9216+Fe):v&&Fe===127?e.write1(9249):v&&Z3(Fe)?(e.appendASCIIString("[U+"),e.appendASCIIString(ase(Fe)),e.appendASCIIString("]"),ue=8):e.write1(Fe)}I+=ue,Ne+=ue,S>=c&&(D+=ni)}O=Ne}Te?A++:A=0,S>=s&&!w&&K.isPseudoAfter()&&(w=!0,C.setColumnInfo(S+1,F,I,N)),e.appendASCIIString("</span>")}return w||C.setColumnInfo(s+1,l.length-1,I,N),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new Mx(C,u,n)}function ase(r){return r.toString(16).toUpperCase().padStart(4,"0")}var Fx=class{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}},G3=class{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){let i=this.outputLineIndex>0?t:0;return new V(e+this.outputLineIndex,i+this.outputOffset+1)}},lu=class{constructor(e,t,i,n,o){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=i,this.injectionOffsets=n,this.injectionOptions=o}getInputOffsetOfOutputPosition(e,t){let i=0;if(e===0?i=t:i=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&i>this.injectionOffsets[n];n++)i<this.injectionOffsets[n]+this.injectionOptions[n].content.length?i=this.injectionOffsets[n]:i-=this.injectionOptions[n].content.length;return i}getOutputPositionOfInputOffset(e,t=2){let i=0;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return e+=i,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let i=0,n=this.breakOffsets.length-1,o=0,s=0;for(;i<=n;){o=i+(n-i)/2|0;let a=this.breakOffsets[o];if(s=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=s)n=o-1;else if(e>a)i=o+1;else break;else if(e<s)n=o-1;else if(e>=a)i=o+1;else break}return new G3(o,e-s)}outputPositionToOffsetInUnwrappedLine(e,t){let i=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(i-=this.wrappedTextIndentLength),i}normalizeOffsetAroundInjections(e,t){let i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2)return e===i.offsetInUnwrappedLine+i.length?i.offsetInUnwrappedLine+i.length:i.offsetInUnwrappedLine;if(t===1){let s=i.offsetInUnwrappedLine+i.length,a=i.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)s+=this.injectionOptions[a+1].content.length,a++;return s}let n=i.offsetInUnwrappedLine,o=i.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)n-=this.injectionOptions[o-1].content.length,o++;return n}getInjectedText(e,t){let i=this.outputPositionToOffsetInUnwrappedLine(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let o=0;o<t.length;o++){let s=i[o].content.length,a=t[o]+n,l=t[o]+n+s;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInUnwrappedLine:a,length:s};n+=s}}}};var QT=class{constructor(e,t){this.tabSize=e,this.data=t}},Pw=class{constructor(e,t,i,n,o,s,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=o,this.tokens=s,this.inlineDecorations=a}},mr=class{constructor(e,t,i,n,o,s,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=mr.isBasicASCII(i,s),this.containsRTL=mr.containsRTL(i,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?jp(e):!0}static containsRTL(e,t,i){return!t&&i?tu(e):!1}},cu=class{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}},JT=class{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new cu(new L(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}},Aw=class{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}},jw=class{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}};function lse(r){return Array.isArray(r)}function X3(r){return!lse(r)}function eN(r){return typeof r=="string"}function tN(r){return!eN(r)}function mf(r){return!r}function oc(r,e){return r.ignoreCase&&e?e.toLowerCase():e}function iN(r){return r.replace(/[&<>'"_]/g,"-")}function Q3(r,e){console.log(`${r.languageId}: ${e}`)}function oi(r,e){return new Error(`${r.languageId}: ${e}`)}function sc(r,e,t,i,n){let o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,s=null;return e.replace(o,function(a,l,c,d,h,u,m,p,_){return mf(c)?mf(d)?!mf(h)&&h<i.length?oc(r,i[h]):!mf(m)&&r&&typeof r[m]=="string"?r[m]:(s===null&&(s=n.split("."),s.unshift(n)),!mf(u)&&u<s.length?oc(r,s[u]):""):oc(r,t):"$"})}function Mw(r,e){let t=e;for(;t&&t.length>0;){let i=r.tokenizer[t];if(i)return i;let n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function J3(r,e){let t=e;for(;t&&t.length>0;){if(r.stateNames[t])return!0;let n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var eV=5,a_=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new ff(e,t);let i=ff.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new ff(e,t),this._entries[i]=n,n)}};a_._INSTANCE=new a_(eV);var ff=class{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return ff._equals(this,e)}push(e){return a_.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return a_.create(this.parent,e)}},l_=class{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new l_(this.languageId,this.state)}},yd=class{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new c_(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new c_(e,t);let i=ff.getStackElementId(e),n=this._entries[i];return n||(n=new c_(e,null),this._entries[i]=n,n)}};yd._INSTANCE=new yd(eV);var c_=class{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:yd.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof c_)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}},tV=class{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new ld(e,t,this._languageId)))}nestedModeTokenize(e,t,i,n){let o=i.languageId,s=i.state,a=ti.get(o);if(!a)return this.enterMode(n,o),this.emit(n,""),s;let l=a.tokenize(e,t,s,n);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new Fm(this._tokens,e)}},Fw=class{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let i=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){let n=e!==null?e.length:0,o=t.length,s=i!==null?i.length:0;if(n===0&&o===0&&s===0)return new Uint32Array(0);if(n===0&&o===0)return i;if(o===0&&s===0)return e;let a=new Uint32Array(n+o+s);e!==null&&a.set(e);for(let l=0;l<o;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+o),a}nestedModeTokenize(e,t,i,n){let o=i.languageId,s=i.state,a=ti.get(o);if(!a)return this.enterMode(n,o),this.emit(n,""),s;let l=a.tokenize2(e,t,s,n);return this._prependTokens=Fw._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new Zh(Fw._merge(this._prependTokens,this._tokens,null),e)}},d_=class{constructor(e,t,i,n){this._modeService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=ti.onDidChange(s=>{if(o)return;let a=!1;for(let l=0,c=s.changedLanguages.length;l<c;l++){let d=s.changedLanguages[l];if(this._embeddedModes[d]){a=!0;break}}a&&(o=!0,ti.fire([this._languageId]),o=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){let i=ti.get(t);if(i){if(i instanceof d_){let o=i.getLoadStatus();o.loaded===!1&&e.push(o.promise)}continue}let n=ti.getPromise(t);n&&e.push(n)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=a_.create(null,this._lexer.start);return yd.create(e,null)}tokenize(e,t,i,n){let o=new tV,s=this._tokenize(e,t,i,n,o);return o.finalize(s)}tokenize2(e,t,i,n){let o=new Fw(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,n,o);return o.finalize(s)}_tokenize(e,t,i,n,o){return i.embeddedModeData?this._nestedTokenize(e,t,i,n,o):this._myTokenize(e,t,i,n,o)}_findLeavingNestedModeOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=Mw(this._lexer,t.stack.state),!i))throw oi(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,o=!1;for(let s of i){if(!tN(s.action)||s.action.nextEmbedded!=="@pop")continue;o=!0;let a=s.regex,l=s.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}let c=e.search(a);c===-1||c!==0&&s.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!o)throw oi(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,o){let s=this._findLeavingNestedModeOffset(e,i);if(s===-1){let c=o.nestedModeTokenize(e,t,i.embeddedModeData,n);return yd.create(i.stack,new l_(i.embeddedModeData.languageId,c))}let a=e.substring(0,s);a.length>0&&o.nestedModeTokenize(a,!1,i.embeddedModeData,n);let l=e.substring(s);return this._myTokenize(l,t,i,n+s,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,o){o.enterMode(n,this._languageId);let s=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length,c=i.embeddedModeData,d=i.stack,h=0,u=null,m=!0;for(;m||h<l;){let p=h,_=d.depth,v=u?u.groups.length:0,C=d.state,w=null,S=null,D=null,I=null,A=null;if(u){w=u.matches;let F=u.groups.shift();S=F.matched,D=F.action,I=u.rule,u.groups.length===0&&(u=null)}else{if(!m&&h>=l)break;m=!1;let F=this._lexer.tokenizer[C];if(!F&&(F=Mw(this._lexer,C),!F))throw oi(this._lexer,"tokenizer state is not defined: "+C);let Y=a.substr(h);for(let K of F)if((h===0||!K.matchOnlyAtLineStart)&&(w=Y.match(K.regex),w)){S=w[0],D=K.action;break}}if(w||(w=[""],S=""),D||(h<l&&(w=[a.charAt(h)],S=w[0]),D=this._lexer.defaultToken),S===null)break;for(h+=S.length;X3(D)&&tN(D)&&D.test;)D=D.test(S,w,C,h===l);let O=null;if(typeof D=="string"||Array.isArray(D))O=D;else if(D.group)O=D.group;else if(D.token!==null&&D.token!==void 0){if(D.tokenSubst?O=sc(this._lexer,D.token,S,w,C):O=D.token,D.nextEmbedded)if(D.nextEmbedded==="@pop"){if(!c)throw oi(this._lexer,"cannot pop embedded mode if not inside one");c=null}else{if(c)throw oi(this._lexer,"cannot enter embedded mode from within an embedded mode");A=sc(this._lexer,D.nextEmbedded,S,w,C)}if(D.goBack&&(h=Math.max(0,h-D.goBack)),D.switchTo&&typeof D.switchTo=="string"){let F=sc(this._lexer,D.switchTo,S,w,C);if(F[0]==="@"&&(F=F.substr(1)),Mw(this._lexer,F))d=d.switchTo(F);else throw oi(this._lexer,"trying to switch to a state '"+F+"' that is undefined in rule: "+this._safeRuleName(I))}else{if(D.transform&&typeof D.transform=="function")throw oi(this._lexer,"action.transform not supported");if(D.next)if(D.next==="@push"){if(d.depth>=this._lexer.maxStack)throw oi(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(C)}else if(D.next==="@pop"){if(d.depth<=1)throw oi(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(I));d=d.pop()}else if(D.next==="@popall")d=d.popall();else{let F=sc(this._lexer,D.next,S,w,C);if(F[0]==="@"&&(F=F.substr(1)),Mw(this._lexer,F))d=d.push(F);else throw oi(this._lexer,"trying to set a next state '"+F+"' that is undefined in rule: "+this._safeRuleName(I))}}D.log&&typeof D.log=="string"&&Q3(this._lexer,this._lexer.languageId+": "+sc(this._lexer,D.log,S,w,C))}if(O===null)throw oi(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(I));let N=F=>{let Y=this._modeService.getModeIdForLanguageName(F);Y&&(F=Y);let K=this._getNestedEmbeddedModeData(F);if(h<l){let ee=e.substr(h);return this._nestedTokenize(ee,t,yd.create(d,K),n+h,o)}else return yd.create(d,K)};if(Array.isArray(O)){if(u&&u.groups.length>0)throw oi(this._lexer,"groups cannot be nested: "+this._safeRuleName(I));if(w.length!==O.length+1)throw oi(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(I));let F=0;for(let Y=1;Y<w.length;Y++)F+=w[Y].length;if(F!==S.length)throw oi(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(I));u={rule:I,matches:w,groups:[]};for(let Y=0;Y<O.length;Y++)u.groups[Y]={action:O[Y],matched:w[Y+1]};h-=S.length;continue}else{if(O==="@rematch"&&(h-=S.length,S="",w=null,O="",A!==null))return N(A);if(S.length===0){if(l===0||_!==d.depth||C!==d.state||(u?u.groups.length:0)!==v)continue;throw oi(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(I))}let F=null;if(eN(O)&&O.indexOf("@brackets")===0){let Y=O.substr("@brackets".length),K=cse(this._lexer,S);if(!K)throw oi(this._lexer,"@brackets token returned but no bracket defined as: "+S);F=iN(K.token+Y)}else{let Y=O===""?"":O+this._lexer.tokenPostfix;F=iN(Y)}p<s&&o.emit(p+n,F)}if(A!==null)return N(A)}return yd.create(d,c)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let i=ti.get(t);if(i)return new l_(t,i.getInitialState())}return new l_(t||ba,of)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;let t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}};function cse(r,e){if(!e)return null;e=oc(r,e);let t=r.brackets;for(let i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}function iV(r,e,t,i){return new d_(r,e,t,i)}var nN,rN=(nN=window.trustedTypes)===null||nN===void 0?void 0:nN.createPolicy("standaloneColorizer",{createHTML:r=>r}),Bw=class{static colorizeElement(e,t,i,n){n=n||{};let o=n.theme||"vs",s=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(o);let a=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+o;let l=c=>{var d;let h=(d=rN==null?void 0:rN.createHTML(c))!==null&&d!==void 0?d:c;i.innerHTML=h};return this.colorize(t,a||"",s,n).then(l,c=>console.error(c))}static colorize(e,t,i,n){let o=e.languageIdCodec,s=4;n&&typeof n.tabSize=="number"&&(s=n.tabSize),Mp(t)&&(t=t.substr(1));let a=sr(t),l=e.getModeId(i);if(!l)return Promise.resolve(nV(a,s,o));e.triggerMode(l);let c=ti.get(l);if(c)return oN(a,s,c,o);let d=ti.getPromise(l);return d?new Promise((h,u)=>{d.then(m=>{oN(a,s,m,o).then(h,u)},u)}):new Promise((h,u)=>{let m=null,p=null,_=()=>{m&&(m.dispose(),m=null),p&&(p.dispose(),p=null);let v=ti.get(l);if(v){oN(a,s,v,o).then(h,u);return}h(nV(a,s,o))};p=new li,p.cancelAndSet(_,500),m=ti.onDidChange(v=>{v.changedLanguages.indexOf(l)>=0&&_()})})}static colorizeLine(e,t,i,n,o=4){let s=mr.isBasicASCII(e,t),a=mr.containsRTL(e,s,i);return s_(new Bs(!1,!0,e,!1,s,a,0,n,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){let n=e.getLineContent(t);e.forceTokenization(t);let s=e.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,i)}};function oN(r,e,t,i){return new Promise((n,o)=>{let s=()=>{let a=dse(r,e,t,i);if(t instanceof d_){let l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(s,o);return}}n(a)};s()})}function nV(r,e,t){let i=[],n=(0<<11|1<<14|2<<23)>>>0,o=new Uint32Array(2);o[0]=0,o[1]=n;for(let s=0,a=r.length;s<a;s++){let l=r[s];o[0]=l.length;let c=new Vi(o,l,t),d=mr.isBasicASCII(l,!0),h=mr.containsRTL(l,d,!0),u=s_(new Bs(!1,!0,l,!1,d,h,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(u.html),i.push("<br/>")}return i.join("")}function dse(r,e,t,i){let n=[],o=t.getInitialState();for(let s=0,a=r.length;s<a;s++){let l=r[s],c=t.tokenize2(l,!0,o,0);Vi.convertToEndOffset(c.tokens,l.length);let d=new Vi(c.tokens,l,i),h=mr.isBasicASCII(l,!0),u=mr.containsRTL(l,h,!0),m=s_(new Bs(!1,!0,l,!1,h,u,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(m.html),n.push("<br/>"),o=c.endState}return n.join("")}var Ww;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(Ww||(Ww={}));(function(r){let e="error",t="warning",i="warn",n="info",o="ignore";function s(l){return l?Um(e,l)?r.Error:Um(t,l)||Um(i,l)?r.Warning:Um(n,l)?r.Info:r.Ignore:r.Ignore}r.fromValue=s;function a(l){switch(l){case r.Error:return e;case r.Warning:return t;case r.Info:return n;default:return o}}r.toString=a})(Ww||(Ww={}));var mi=Ww;function xa(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===iu.ICodeEditor:!1}var h_=Ie("IWorkspaceEditService");function hse(r){return mn(r)&&(Boolean(r.newUri)||Boolean(r.oldUri))}function use(r){return mn(r)&&ve.isUri(r.resource)&&mn(r.edit)}var gf=class{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(use(t))return new Bx(t.resource,t.edit,t.modelVersionId,t.metadata);if(hse(t))return new rV(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}},Bx=class extends gf{constructor(e,t,i,n){super(n);this.resource=e,this.textEdit=t,this.versionId=i}},rV=class extends gf{constructor(e,t,i,n){super(n);this.oldResource=e,this.newResource=t,this.options=i}};var mse=Object.prototype.hasOwnProperty;function oV(r,e){for(let t in r)if(mse.call(r,t)&&e({key:t,value:r[t]},function(){delete r[t]})===!1)return}var sN=class{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){let i=this.map.get(e);!i||(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){let i=this.map.get(e);!i||i.forEach(t)}};var Uw=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new M,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(r){this._tabFocus!==r&&(this._tabFocus=r,this._onDidChangeTabFocus.fire(this._tabFocus))}},sV=Object.hasOwnProperty,aV=class{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},lV=class{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}},ac=class{static readOptions(e){let t=e,i=new lV;for(let n of Pm){let o=n.name==="_never_"?void 0:t[n.name];i._write(n.id,o)}return i}static validateOptions(e){let t=new bO;for(let i of Pm)t._write(i.id,i.validate(e._read(i.id)));return t}static computeOptions(e,t){let i=new aV;for(let n of Pm)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?zn(e,t):!1;for(let i in e)if(!ac._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){let i=[],n=!1;for(let o of Pm){let s=!ac._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=s,s&&(n=!0)}return n?new Xv(i):null}};function fse(r){let e=r.wordWrap;e===!0?r.wordWrap="on":e===!1&&(r.wordWrap="off");let t=r.lineNumbers;t===!0?r.lineNumbers="on":t===!1&&(r.lineNumbers="off"),r.autoClosingBrackets===!1&&(r.autoClosingBrackets="never",r.autoClosingQuotes="never",r.autoSurround="never"),r.cursorBlinking==="visible"&&(r.cursorBlinking="solid");let o=r.renderWhitespace;o===!0?r.renderWhitespace="boundary":o===!1&&(r.renderWhitespace="none");let s=r.renderLineHighlight;s===!0?r.renderLineHighlight="line":s===!1&&(r.renderLineHighlight="none");let a=r.acceptSuggestionOnEnter;a===!0?r.acceptSuggestionOnEnter="on":a===!1&&(r.acceptSuggestionOnEnter="off");let l=r.tabCompletion;l===!1?r.tabCompletion="off":l===!0&&(r.tabCompletion="onlySnippets");let c=r.suggest;if(c&&typeof c.filteredTypes=="object"&&c.filteredTypes){let v={};v.method="showMethods",v.function="showFunctions",v.constructor="showConstructors",v.deprecated="showDeprecated",v.field="showFields",v.variable="showVariables",v.class="showClasses",v.struct="showStructs",v.interface="showInterfaces",v.module="showModules",v.property="showProperties",v.event="showEvents",v.operator="showOperators",v.unit="showUnits",v.value="showValues",v.constant="showConstants",v.enum="showEnums",v.enumMember="showEnumMembers",v.keyword="showKeywords",v.text="showWords",v.color="showColors",v.file="showFiles",v.reference="showReferences",v.folder="showFolders",v.typeParameter="showTypeParameters",v.snippet="showSnippets",oV(v,C=>{let w=c.filteredTypes[C.key];w===!1&&(c[C.value]=w)})}let d=r.hover;d===!0?r.hover={enabled:!0}:d===!1&&(r.hover={enabled:!1});let h=r.parameterHints;h===!0?r.parameterHints={enabled:!0}:h===!1&&(r.parameterHints={enabled:!1});let u=r.autoIndent;u===!0?r.autoIndent="full":u===!1&&(r.autoIndent="advanced");let m=r.matchBrackets;m===!0?r.matchBrackets="always":m===!1&&(r.matchBrackets="never");let{renderIndentGuides:p,highlightActiveIndentGuide:_}=r;r.guides||(r.guides={}),p!==void 0&&(r.guides.indentation=!!p),_!==void 0&&(r.guides.highlightActiveIndentation=!!_)}function cV(r){let e=sl(r);return fse(e),e}var u_=class extends H{constructor(e,t){super();this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new M),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new q0,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=cV(t),this._readOptions=ac.readOptions(this._rawOptions),this._validatedOptions=ac.validateOptions(this._readOptions),this._register(js.onDidChangeZoomLevel(i=>this._recomputeOptions())),this._register(Uw.onDidChangeTabFocus(i=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){let e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{let i=ac.checkEquals(e,t);if(i===null)return;this.options=t,this._onDidChangeFast.fire(i),this._onDidChange.fire(i)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){let e=this._getEnvConfiguration(),t=Ql.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Uw.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return ac.computeOptions(this._validatedOptions,i)}static _subsetEquals(e,t){for(let i in t)if(sV.call(t,i)){let n=t[i],o=e[i];if(o===n)continue;if(Array.isArray(o)&&Array.isArray(n)){if(!zn(o,n))return!1;continue}if(o&&typeof o=="object"&&n&&typeof n=="object"){if(!this._subsetEquals(o,n))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e=="undefined")return;let t=cV(e);u_._subsetEquals(this._rawOptions,t)||(this._rawOptions=Un(this._rawOptions,t||{}),this._readOptions=ac.readOptions(this._rawOptions),this._validatedOptions=ac.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){let t=u_._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}},gse=Object.freeze({id:"editor",order:5,type:"object",title:g("editorConfigurationTitle","Editor"),scope:5}),pse=ii.as(ya.Configuration),Wx=Object.assign(Object.assign({},gse),{properties:{"editor.tabSize":{type:"number",default:Bn.tabSize,minimum:1,markdownDescription:g("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Bn.insertSpaces,markdownDescription:g("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Bn.detectIndentation,markdownDescription:g("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Bn.trimAutoWhitespace,description:g("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Bn.largeFileOptimizations,description:g("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:g("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[g("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),g("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),g("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:g("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[g("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),g("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),g("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:g("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:g("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:g("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:g("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:g("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:g("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:g("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:g("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:g("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:g("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:g("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:g("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:g("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:g("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:g("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[g("wordWrap.off","Lines will never wrap."),g("wordWrap.on","Lines will wrap at the viewport width."),g("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function _se(r){return typeof r.type!="undefined"||typeof r.anyOf!="undefined"}for(let r of Pm){let e=r.schema;if(typeof e!="undefined")if(_se(e))Wx.properties[`editor.${r.name}`]=e;else for(let t in e)sV.call(e,t)&&(Wx.properties[t]=e[t])}var Ux=null;function dV(){return Ux===null&&(Ux=Object.create(null),Object.keys(Wx.properties).forEach(r=>{Ux[r]=!0})),Ux}function hV(r){return dV()[`editor.${r}`]||!1}function uV(r){return dV()[`diffEditor.${r}`]||!1}pse.registerConfiguration(Wx);var Ut=class{static insert(e,t){return{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}};var Bo=class{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?_3(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){let t=sl(this.contents),i=sl(this.overrides),n=[...this.keys];for(let o of e){this.mergeContents(t,o.contents);for(let s of o.overrides){let[a]=i.filter(l=>zn(l.identifiers,s.identifiers));a?this.mergeContents(a.contents,s.contents):i.push(sl(s))}for(let s of o.keys)n.indexOf(s)===-1&&n.push(s)}return new Bo(t,n,i)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){let t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let i={};for(let n of hf([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[n],s=t[n];s&&(typeof o=="object"&&typeof s=="object"?(o=sl(o),this.mergeContents(o,s)):o=s),i[n]=o}return new Bo(i,this.keys,this.overrides)}mergeContents(e,t){for(let i of Object.keys(t)){if(i in e&&mn(e[i])&&mn(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=sl(t[i])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?fU(e):e}getContentsForOverrideIdentifer(e){for(let t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),Ex(this.contents,e,t,i=>{throw new Error(i)})}removeValue(e){this.removeKey(e)&&g3(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)e.indexOf(this.keys[i])===0&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}},aN=class extends Bo{constructor(){let e=v3(),t=b3(),i=[];for(let n of Object.keys(e))xx.test(n)&&i.push({identifiers:[m3(n).trim()],keys:Object.keys(e[n]),contents:IT(e[n],o=>console.error(`Conflict in default settings file: ${o}`))});super(e,t,i)}},m_=class{constructor(e,t,i=new Bo,n=new Bo,o=new rn,s=new Bo,a=new rn,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=n,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new rn,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new Bo,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){let n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);let o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){let i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{let{contents:i,overrides:n,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:o}]),e},[])}}static parse(e){let t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.user),n=this.parseConfigurationModel(e.workspace),o=e.folders.reduce((s,a)=>(s.set(ve.revive(a[0]),this.parseConfigurationModel(a[1])),s),new rn);return new m_(t,i,new Bo,n,o,new Bo,new rn,!1)}static parseConfigurationModel(e){return new Bo(e.contents,e.keys,e.overrides).freeze()}},lN=class{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._previousConfiguration=void 0;let o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>o.add(l))),this.affectedKeys=[...o.values()];let s=new Bo;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=m_.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){let n=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!$r(n,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let i=IT({[t]:!0},()=>{}),n;for(;typeof i=="object"&&(n=Object.keys(i)[0]);){if(e=e[n],!e)return!1;i=i[n]}return!0}};var bse=/^(cursor|delete)/,cN=class extends H{constructor(e,t,i,n,o){super();this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=o,this._onDidUpdateKeybindings=this._register(new M),this._currentChord=null,this._currentChordChecker=new Kl,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=pf.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new li,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ye.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){let i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(!!i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){let i=this.resolveKeyboardEvent(e);if(i.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;let[n]=i.getDispatchParts();if(n===null)return null;let o=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,s,n)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(g("first.chord","({0}) was pressed. Waiting for second key of chord...",t));let i=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-i>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){let i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchParts();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=pf.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=pf.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[o]=i.getParts();return this._ignoreSingleModifiers=new pf(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,s=null;if(i){let[d]=e.getSingleModifierDispatchParts();o=d,s=d}else[o]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;let a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,s,o);return this._logService.trace("KeybindingService#dispatch",l,c==null?void 0:c.commandId),c&&c.enterChord?(n=!0,this._enterChordMode(o,l),n):(this._currentChord&&(!c||!c.commandId)&&(this._notificationService.status(g("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),n=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(n=!0),typeof c.commandArgs=="undefined"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d)),bse.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),n)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}},pf=class{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};pf.EMPTY=new pf(null);var Vx=m5||"",fr=new Map;fr.set("false",!1);fr.set("true",!0);fr.set("isMac",We);fr.set("isLinux",ji);fr.set("isWindows",bi);fr.set("isWeb",Ya);fr.set("isMacNative",We&&!Ya);fr.set("isEdge",Vx.indexOf("Edg/")>=0);fr.set("isFirefox",Vx.indexOf("Firefox")>=0);fr.set("isChrome",Vx.indexOf("Chrome")>=0);fr.set("isSafari",Vx.indexOf("Safari")>=0);var vse=Object.prototype.hasOwnProperty,fe=class{static has(e){return Cd.create(e)}static equals(e,t){return _f.create(e,t)}static regex(e,t){return qw.create(e,t)}static not(e){return du.create(e)}static and(...e){return Sd.create(e,null)}static or(...e){return lc.create(e,null,!0)}static deserialize(e,t=!1){if(!!e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let i=e.split("||");return lc.create(i.map(n=>this._deserializeAndExpression(n,t)),null,!0)}static _deserializeAndExpression(e,t){let i=e.split("&&");return Sd.create(i.map(n=>this._deserializeOne(n,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let i=e.split("!=");return Vw.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("==")>=0){let i=e.split("==");return _f.create(i[0].trim(),this._deserializeValue(i[1],t))}if(e.indexOf("=~")>=0){let i=e.split("=~");return qw.create(i[0].trim(),this._deserializeRegexValue(i[1],t))}if(e.indexOf(" in ")>=0){let i=e.split(" in ");return zx.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){let i=e.split(">=");return Hw.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){let i=e.split(">");return zw.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){let i=e.split("<=");return Kw.create(i[0].trim(),i[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){let i=e.split("<");return $w.create(i[0].trim(),i[1].trim())}return/^\!\s*/.test(e)?du.create(e.substr(1).trim()):Cd.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let i=/^'([^']*)'$/.exec(e);return i?i[1].trim():e}static _deserializeRegexValue(e,t){if(tx(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let i=e.indexOf("/"),n=e.lastIndexOf("/");if(i===n||i<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let o=e.slice(i+1,n),s=e[n+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}};function mV(r,e){let t=r?r.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function f_(r,e){return r.cmp(e)}var Wo=class{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ds.INSTANCE}};Wo.INSTANCE=new Wo;var ds=class{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Wo.INSTANCE}};ds.INSTANCE=new ds;var Cd=class{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){let i=fr.get(e);return typeof i=="boolean"?i?ds.INSTANCE:Wo.INSTANCE:new Cd(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:pV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=fr.get(this.key);return typeof e=="boolean"?e?ds.INSTANCE:Wo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=du.create(this.key,this)),this.negated}},_f=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}static create(e,t,i=null){if(typeof t=="boolean")return t?Cd.create(e,i):du.create(e,i);let n=fr.get(e);return typeof n=="boolean"?t===(n?"true":"false")?ds.INSTANCE:Wo.INSTANCE:new _f(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=fr.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?ds.INSTANCE:Wo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Vw.create(this.key,this.value,this)),this.negated}},zx=class{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new zx(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.indexOf(i)>=0:typeof i=="string"&&typeof t=="object"&&t!==null?vse.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Hx.create(this)),this.negated}},Hx=class{constructor(e){this._actual=e,this.type=11}static create(e){return new Hx(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}},Vw=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}static create(e,t,i=null){if(typeof t=="boolean")return t?du.create(e,i):Cd.create(e,i);let n=fr.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Wo.INSTANCE:ds.INSTANCE:new Vw(e,t,i)}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=fr.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Wo.INSTANCE:ds.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_f.create(this.key,this.value,this)),this.negated}},du=class{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){let i=fr.get(e);return typeof i=="boolean"?i?Wo.INSTANCE:ds.INSTANCE:new du(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:pV(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=fr.get(this.key);return typeof e=="boolean"?e?Wo.INSTANCE:ds.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Cd.create(this.key,this)),this.negated}};function $x(r,e){if(typeof r=="string"){let t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Wo.INSTANCE}var zw=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}static create(e,t,i=null){return $x(t,n=>new zw(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Kw.create(this.key,this.value,this)),this.negated}},Hw=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}static create(e,t,i=null){return $x(t,n=>new Hw(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=$w.create(this.key,this.value,this)),this.negated}},$w=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}static create(e,t,i=null){return $x(t,n=>new $w(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Hw.create(this.key,this.value,this)),this.negated}},Kw=class{constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}static create(e,t,i=null){return $x(t,n=>new Kw(e,n,i))}cmp(e){return e.type!==this.type?this.type-e.type:bf(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=zw.create(this.key,this.value,this)),this.negated}},qw=class{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new qw(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Kx.create(this)),this.negated}},Kx=class{constructor(e){this._actual=e,this.type=8}static create(e){return new Kx(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}};function fV(r){let e=null;for(let t=0,i=r.length;t<i;t++){let n=r[t].substituteConstants();if(r[t]!==n&&e===null){e=[];for(let o=0;o<t;o++)e[o]=r[o]}e!==null&&(e[t]=n)}return e===null?r:e}var Sd=class{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Sd._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let n=f_(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=fV(this.expr);return e===this.expr?this:Sd.create(e,this.negated)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){let i=[],n=!1;for(let o of e)if(!!o){if(o.type===1){n=!0;continue}if(o.type===0)return Wo.INSTANCE;if(o.type===6){i.push(...o.expr);continue}i.push(o)}if(i.length===0&&n)return ds.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(f_);for(let o=1;o<i.length;o++)i[o-1].equals(i[o])&&(i.splice(o,1),o--);if(i.length===1)return i[0];for(;i.length>1;){let o=i[i.length-1];if(o.type!==9)break;i.pop();let s=i.pop(),a=i.length===0,l=lc.create(o.expr.map(c=>Sd.create([c,s],null)),null,a);l&&(i.push(l),i.sort(f_))}return i.length===1?i[0]:new Sd(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=lc.create(e,this,!0)}return this.negated}},lc=class{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,i){return lc._normalizeArr(e,t,i)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){let n=f_(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=fV(this.expr);return e===this.expr?this:lc.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(!!l){if(l.type===0){o=!0;continue}if(l.type===1)return ds.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&o)return Wo.INSTANCE;n.sort(f_)}if(n.length!==0){if(n.length===1)return n[0];for(let s=1;s<n.length;s++)n[s-1].equals(n[s])&&(n.splice(s,1),s--);if(n.length===1)return n[0];if(i){for(let s=0;s<n.length;s++)for(let a=s+1;a<n.length;a++)dN(n[s],n[a])&&(n.splice(a,1),a--);if(n.length===1)return n[0]}return new lc(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),i=e.shift(),n=[];for(let s of qx(t))for(let a of qx(i))n.push(Sd.create([s,a],null));let o=e.length===0;e.unshift(lc.create(n,null,o))}this.negated=e[0]}return this.negated}},_e=class extends Cd{constructor(e,t,i){super(e,null);this._defaultValue=t,typeof i=="object"?_e._info.push(Object.assign(Object.assign({},i),{key:e})):i!==!0&&_e._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}static all(){return _e._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return _f.create(this.key,e)}};_e._info=[];var be=Ie("contextKeyService"),gV="setContext";function pV(r,e){return r<e?-1:r>e?1:0}function bf(r,e,t,i){return r<t?-1:r>t?1:e<i?-1:e>i?1:0}function dN(r,e){if(e.type===6&&r.type!==9&&r.type!==6){for(let n of e.expr)if(r.equals(n))return!0}let t=r.negate(),i=qx(t).concat(qx(e));i.sort(f_);for(let n=0;n<i.length;n++){let s=i[n].negate();for(let a=n+1;a<i.length;a++){let l=i[a];if(s.equals(l))return!0}}return!1}function qx(r){return r.type===9?r.expr:[r]}var xd=class{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let n=0,o=e.length;n<o;n++){let s=e[n].command;s&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=xd.combine(e,t);for(let n=0,o=this._keybindings.length;n<o;n++){let s=this._keybindings[n];s.keypressParts.length!==0&&(s.when&&s.when.type===0||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(e,t,i,n,o){return!(e.command!==n||t&&e.keypressParts[0]!==t||i&&e.keypressParts[1]!==i||o&&(!e.when||!mV(o,e.when)))}static combine(e,t){e=e.slice(0);let i=[];for(let n of t){if(!n.command||n.command.length===0||n.command.charAt(0)!=="-"){i.push(n);continue}let o=n.command.substr(1),s=n.keypressParts[0],a=n.keypressParts[1],l=n.when;for(let c=e.length-1;c>=0;c--)this._isTargetedForRemoval(e[c],s,a,o,l)&&e.splice(c,1)}return e.concat(i)}_addKeyPress(e,t){let i=this._map.get(e);if(typeof i=="undefined"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){let o=i[n];if(o.command===t.command)continue;let s=o.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&o.keypressParts[1]!==t.keypressParts[1]||xd.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t=="undefined"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(typeof t!="undefined"){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:dN(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){let i=this._lookupMap.get(e);if(typeof i=="undefined"||i.length===0)return null;if(i.length===1)return i[0];for(let n=i.length-1;n>=0;n--){let o=i[n];if(t.contextMatchesRules(o.when))return o}return i[i.length-1]}resolve(e,t,i){this._log(`| Resolving ${i}${t?` chorded from ${t}`:""}`);let n=null;if(t!==null){let s=this._map.get(t);if(typeof s=="undefined")return this._log("\\ No keybinding entries."),null;n=[];for(let a=0,l=s.length;a<l;a++){let c=s[a];c.keypressParts[1]===i&&n.push(c)}}else{let s=this._map.get(i);if(typeof s=="undefined")return this._log("\\ No keybinding entries."),null;n=s}let o=this._findCommand(e,n);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${n.length} keybinding entries, matched chord, when: ${_V(o.when)}, source: ${bV(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${n.length} keybinding entries, matched ${o.command}, when: ${_V(o.when)}, source: ${bV(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${n.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){let n=t[i];if(!!xd.contextMatchesRules(e,n.when))return n}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}};function _V(r){return r?`${r.serialize()}`:"no when condition"}function bV(r){return r.extensionId?r.isBuiltinExtension?`built-in extension ${r.extensionId}`:`user extension ${r.extensionId}`:r.isDefault?"built-in":"user"}var Yw=class{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Wr===1){if(e&&e.win)return e.win}else if(Wr===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=Yw.bindToCurrentPlatform(e);if(t&&t.primary){let i=nw(t.primary,Wr);i&&this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let i=0,n=t.secondary.length;i<n;i++){let o=t.secondary[i],s=nw(o,Wr);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-i-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Ke.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Yw._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,i,n,o,s){Wr===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:i,when:s,weight1:n,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(yse)),this._cachedMergedKeybindings.slice(0)}},on=new Yw,wse={EditorModes:"platform.keybindingsRegistry"};ii.add(wse.EditorModes,on);function yse(r,e){return r.weight1!==e.weight1?r.weight1-e.weight1:r.command<e.command?-1:r.command>e.command?1:r.weight2-e.weight2}var Yx=class{constructor(e,t,i,n,o,s,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?Zx(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=Zx(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}};function Zx(r){let e=[];for(let t=0,i=r.length;t<i;t++){let n=r[t];if(!n)return e;e.push(n)}return e}var Gx=class{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=i(a);if(l===null)return null;n[o]=Cse(a,l,this.modifierLabels[e])}return n.join(" ")}},g_=new Gx({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:g({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:g({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:g({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:g({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),vV=new Gx({ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:g({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:g({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:g({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:g({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),wV=new Gx({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function Cse(r,e,t){if(e===null)return"";let i=[];return r.ctrlKey&&i.push(t.ctrlKey),r.shiftKey&&i.push(t.shiftKey),r.altKey&&i.push(t.altKey),r.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}var hN=class extends RO{constructor(e,t){super();if(t.length===0)throw Vr("parts");this._os=e,this._parts=t}getLabel(){return g_.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return vV.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:wV.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new NO(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}};var vf=class extends hN{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return ad.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ad.toString(e.keyCode)}_getElectronAccelerator(e){return ad.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return vf.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ad.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){let t=t1[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof ua)return e;let t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new ua(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){let i=Zx(e.map(n=>this._resolveSimpleUserBinding(n)));return i.length>0?[new vf(new xp(i),t)]:[]}};var Vt=Ie("notificationService"),uN=class{};var Xx=Ie("contextService");var mN=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};var yV;(function(r){r.noSelection=g("noSelection","No selection"),r.singleSelectionRange=g("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),r.singleSelection=g("singleSelection","Line {0}, Column {1}"),r.multiSelectionRange=g("multiSelectionRange","{0} selections ({1} characters selected)"),r.multiSelection=g("multiSelection","{0} selections"),r.emergencyConfOn=g("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),r.openingDocs=g("openingDocs","Now opening the Editor Accessibility documentation page."),r.readonlyDiffEditor=g("readonlyDiffEditor"," in a read-only pane of a diff editor."),r.editableDiffEditor=g("editableDiffEditor"," in a pane of a diff editor."),r.readonlyEditor=g("readonlyEditor"," in a read-only code editor"),r.editableEditor=g("editableEditor"," in a code editor"),r.changeConfigToOnMac=g("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),r.changeConfigToOnWinLinux=g("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),r.auto_on=g("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),r.auto_off=g("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),r.tabFocusModeOnMsg=g("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),r.tabFocusModeOnMsgNoKb=g("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),r.tabFocusModeOffMsg=g("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),r.tabFocusModeOffMsgNoKb=g("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),r.openDocMac=g("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),r.openDocWinLinux=g("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),r.outroMsg=g("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),r.showAccessibilityHelpAction=g("showAccessibilityHelpAction","Show Accessibility Help")})(yV||(yV={}));var CV;(function(r){r.inspectTokensAction=g("inspectTokens","Developer: Inspect Tokens")})(CV||(CV={}));var SV;(function(r){r.gotoLineActionLabel=g("gotoLineActionLabel","Go to Line/Column...")})(SV||(SV={}));var xV;(function(r){r.helpQuickAccessActionLabel=g("helpQuickAccess","Show all Quick Access Providers")})(xV||(xV={}));var EV;(function(r){r.quickCommandActionLabel=g("quickCommandActionLabel","Command Palette"),r.quickCommandHelp=g("quickCommandActionHelp","Show And Run Commands")})(EV||(EV={}));var DV;(function(r){r.quickOutlineActionLabel=g("quickOutlineActionLabel","Go to Symbol..."),r.quickOutlineByCategoryActionLabel=g("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(DV||(DV={}));var Zw;(function(r){r.editorViewAccessibleLabel=g("editorViewAccessibleLabel","Editor content"),r.accessibilityHelpMessage=g("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(Zw||(Zw={}));var LV;(function(r){r.toggleHighContrast=g("toggleHighContrast","Toggle High Contrast Theme")})(LV||(LV={}));var Qx;(function(r){r.bulkEditServiceSummary=g("bulkEditServiceSummary","Made {0} edits in {1} files")})(Qx||(Qx={}));var kV=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},IV=function(r,e){return function(t,i){e(t,i,r)}},OV=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},TV=class{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new M}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}};function Sse(r,e,t){return xa(r)?e(r):t(r)}var Jx=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=Sse(this.editor,i=>this.findModel(i,e),i=>this.findModel(i.getOriginalEditor(),e)||this.findModel(i.getModifiedEditor(),e))),t?Promise.resolve(new CO(new TV(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let i=this.modelService.getModel(t);return i&&i.uri.toString()!==t.toString()?null:i}};Jx=kV([IV(0,Gt)],Jx);var p_=class{show(){return p_.NULL_PROGRESS_RUNNER}showWhile(e,t){return OV(this,void 0,void 0,function*(){yield e})}};p_.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};var fN=class{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,i,n){return Promise.resolve({choice:0})}},__=class{info(e){return this.notify({severity:mi.Info,message:e})}warn(e){return this.notify({severity:mi.Warning,message:e})}error(e){return this.notify({severity:mi.Error,message:e})}notify(e){switch(e.severity){case mi.Error:console.error(e.message);break;case mi.Warning:console.warn(e.message);break;default:console.log(e.message);break}return __.NO_OP}status(e,t){return H.None}};__.NO_OP=new uN;var gN=class{constructor(e){this._onWillExecuteCommand=new M,this._onDidExecuteCommand=new M,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){let i=Ke.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});let n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}},Gw=class extends cN{constructor(e,t,i,n,o,s){super(e,t,i,n,o);this._cachedResolver=null,this._dynamicKeybindings=[],this._register(J(s,De.KEY_DOWN,a=>{let l=new kt(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(J(window,De.KEY_UP,a=>{let l=new kt(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,i,n){let o=nw(t,Wr),s=new G;return o&&(this._dynamicKeybindings.push({keybinding:o.parts,command:e,when:n,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(Re(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),s.add(Ke.registerCommand(e,i)),this.updateResolver({source:1}),s}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){let e=this._toNormalizedKeybindingItems(on.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new xd(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let i=[],n=0;for(let o of e){let s=o.when||void 0,a=o.keybinding;if(!a)i[n++]=new Yx(void 0,o.command,o.commandArgs,s,t,null,!1);else{let l=vf.resolveUserBinding(a,Wr);for(let c of l)i[n++]=new Yx(c,o.command,o.commandArgs,s,t,null,!1)}}return i}resolveKeyboardEvent(e){let t=new ua(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new vf(t,Wr)}};function NV(r){return r&&typeof r=="object"&&(!r.overrideIdentifier||typeof r.overrideIdentifier=="string")&&(!r.resource||r.resource instanceof ve)}var eE=class{constructor(){this._onDidChangeConfiguration=new M,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new m_(new aN,new Bo)}getValue(e,t){let i=typeof e=="string"?e:void 0,n=NV(e)?e:NV(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){let t={data:this._configuration.toData()},i=[];for(let n of e){let[o,s]=n;this.getValue(o)!==s&&(this._configuration.updateValue(o,s),i.push(o))}if(i.length>0){let n=new lN({keys:i,overrides:[]},t,this._configuration);n.source=7,n.sourceConfig=null,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}},pN=class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new M,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(i,n)=>t.affectsConfiguration(n)})})}getValue(e,t,i){let o=(V.isIPosition(t)?t:null)?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0;return typeof o=="undefined"?this.configurationService.getValue():this.configurationService.getValue(o)}},tE=class{constructor(e){this.configurationService=e}getEOL(e,t){let i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:ji||We?`
`:`\r
`}};tE=kV([IV(0,Mt)],tE);var _N=class{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}},b_=class{constructor(){let e=ve.from({scheme:b_.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new mN({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}};b_.SCHEME="inmemory";function Xw(r,e,t){if(!e||!(r instanceof eE))return;let i=[];Object.keys(e).forEach(n=>{hV(n)&&i.push([`editor.${n}`,e[n]]),t&&uV(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&r.updateValues(i)}var bN=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return OV(this,void 0,void 0,function*(){let i=new Map;for(let s of e){if(!(s instanceof Bx))throw new Error("bad edit - only text edits are supported");let a=this._modelService.getModel(s.resource);if(!a)throw new Error("bad edit - model not found");if(typeof s.versionId=="number"&&a.getVersionId()!==s.versionId)throw new Error("bad state - model changed in the meantime");let l=i.get(a);l||(l=[],i.set(a,l)),l.push(Ut.replaceMove(L.lift(s.textEdit.range),s.textEdit.text))}let n=0,o=0;for(let[s,a]of i)s.pushStackElement(),s.pushEditOperations([],a,()=>[]),s.pushStackElement(),o+=1,n+=a.length;return{ariaSummary:Dr(Qx.bulkEditServiceSummary,n,o)}})}},vN=class{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}},wN=class{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=ye.None}get dimension(){return this._dimension||(this._dimension=Xh(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}};var RV=2e4,wf,iE,yN,nE,CN;function PV(r){wf=document.createElement("div"),wf.className="monaco-aria-container";let e=()=>{let i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),wf.appendChild(i),i};iE=e(),yN=e();let t=()=>{let i=document.createElement("div");return i.className="monaco-status",i.setAttribute("role","complementary"),i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),wf.appendChild(i),i};nE=t(),CN=t(),r.appendChild(wf)}function Oi(r){!wf||(iE.textContent!==r?(Li(yN),rE(iE,r)):(Li(iE),rE(yN,r)))}function yf(r){!wf||(We?Oi(r):nE.textContent!==r?(Li(CN),rE(nE,r)):(Li(nE),rE(CN,r)))}function rE(r,e){Li(r),e.length>RV&&(e=e.substr(0,RV)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var v_=Ie("markerDecorationsService");var oE=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},er=class extends H{constructor(e,t="",i="",n=!0,o){super();this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return oE(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}},Ea=class extends H{constructor(){super(...arguments);this._onBeforeRun=this._register(new M),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new M),this.onDidRun=this._onDidRun.event}run(e,t){return oE(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let i;try{yield this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})})}runAction(e,t){return oE(this,void 0,void 0,function*(){yield e.run(t)})}},gr=class extends er{constructor(e){super(gr.ID,e,e?"separator text":"separator");this.checked=!1,this.enabled=!1}};gr.ID="vs.actions.separator";var Ed=class{constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=n,this._actions=i}get actions(){return this._actions}dispose(){}run(){return oE(this,void 0,void 0,function*(){})}},w_=class extends er{constructor(){super(w_.ID,g("submenu.empty","(empty)"),void 0,!1)}};w_.ID="vs.actions.empty";var qr;(function(r){r.DARK="dark",r.LIGHT="light",r.HIGH_CONTRAST="hc"})(qr||(qr={}));var ht=Ie("themeService"),SN;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(SN||(SN={}));function yi(r){return{id:r}}var Tt;(function(r){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color=="undefined"||SN.isThemeColor(a.color))}r.isThemeIcon=e;let t=new RegExp(`^\\$\\((${Vn.iconNameExpression}(?:${Vn.iconModifierExpression})?)\\)$`);function i(a){let l=t.exec(a);if(!l)return;let[,c]=l;return{id:c}}r.fromString=i;function n(a,l){let c=a.id,d=c.lastIndexOf("~");return d!==-1&&(c=c.substring(0,d)),l&&(c=`${c}~${l}`),{id:c}}r.modify=n;function o(a,l){var c,d;return a.id===l.id&&((c=a.color)===null||c===void 0?void 0:c.id)===((d=l.color)===null||d===void 0?void 0:d.id)}r.isEqual=o;function s(a,l){return{id:a.id,color:l?yi(l):void 0}}r.asThemeIcon=s,r.asClassNameArray=Vn.asClassNameArray,r.asClassName=Vn.asClassName,r.asCSSSelector=Vn.asCSSSelector})(Tt||(Tt={}));function Cf(r){switch(r){case qr.DARK:return"vs-dark";case qr.HIGH_CONTRAST:return"hc-black";default:return"vs"}}var xN={ThemingContribution:"base.contributions.theming"},AV=class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new M}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Re(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}},jV=new AV;ii.add(xN.ThemingContribution,jV);function Be(r){return jV.onColorThemeChange(r)}var EN=class extends H{constructor(e){super();this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}};var xse=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},MV=function(r,e){return function(t,i){e(t,i,r)}};function y_(r){return r.command!==void 0}var Ce=class{constructor(e){this.id=Ce._idPool++,this._debugName=e}};Ce._idPool=0;Ce.CommandPalette=new Ce("CommandPalette");Ce.EditorContext=new Ce("EditorContext");Ce.SimpleEditorContext=new Ce("SimpleEditorContext");Ce.EditorContextCopy=new Ce("EditorContextCopy");Ce.EditorContextPeek=new Ce("EditorContextPeek");Ce.MenubarEditMenu=new Ce("MenubarEditMenu");Ce.MenubarCopy=new Ce("MenubarCopy");Ce.MenubarGoMenu=new Ce("MenubarGoMenu");Ce.MenubarSelectionMenu=new Ce("MenubarSelectionMenu");Ce.InlineCompletionsActions=new Ce("InlineCompletionsActions");var hs=Ie("menuService"),tr=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new M,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:r=>r===Ce.CommandPalette}}addCommand(r){return this.addCommands(ot.single(r))}addCommands(r){for(let e of r)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Re(()=>{let e=!1;for(let t of r)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(r){return this._commands.get(r)}getCommands(){let r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){return this.appendMenuItems(ot.single({id:r,item:e}))}appendMenuItems(r){let e=new Set,t=new yn;for(let{id:i,item:n}of r){let o=this._menuItems.get(i);o||(o=new yn,this._menuItems.set(i,o)),t.push(o.push(n)),e.add(i)}return this._onDidChangeMenu.fire(e),Re(()=>{if(t.size>0){for(let i of t)i();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===Ce.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){let e=new Set;for(let t of r)y_(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||r.push({command:t})})}},Sf=class extends Ed{constructor(e,t,i,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu");this.item=e,this._menuService=t,this._contextKeyService=i,this._options=n}get actions(){let e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),i=t.getActions(this._options);t.dispose();for(let[,n]of i)n.length>0&&(e.push(...n),e.push(new gr));return e.length&&e.pop(),e}},Da=class FV{constructor(e,t,i,n,o){var s,a;if(this._commandService=o,this.id=e.id,this.label=(i==null?void 0:i.renderShortTitle)&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(s=e.tooltip)===null||s===void 0?void 0:s.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||n.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){let l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=n.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new FV(t,void 0,i,n,o):void 0,this._options=i,Tt.isThemeIcon(e.icon)&&(this.class=Vn.asClassName(e.icon))}dispose(){}run(...e){var t,i;let n=[];return((t=this._options)===null||t===void 0?void 0:t.arg)&&(n=[...n,this._options.arg]),((i=this._options)===null||i===void 0?void 0:i.shouldForwardArgs)&&(n=[...n,...e]),this._commandService.executeCommand(this.id,...n)}};Da=xse([MV(3,be),MV(4,jt)],Da);var ml=Ie("telemetryService");var C_=class{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let i=t.kbExpr;this.precondition&&(i?i=fe.and(i,this.precondition):i=this.precondition);let n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};on.registerKeybindingRule(n)}}Ke.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){tr.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},hu=class extends C_{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t,i){return this._implementations.push({priority:e,name:t,implementation:i}),this._implementations.sort((n,o)=>o.priority-n.priority),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n].implementation===i){this._implementations.splice(n,1);return}}}}runCommand(e,t){let i=e.get(hr);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let n of this._implementations){let o=n.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${n.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}},DN=class extends C_{constructor(e,t){super(t);this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}},fi=class extends C_{static bindToContribution(e){return class extends fi{constructor(i){super(i);this._callback=i.handler}runEditorCommand(i,n,o){e(n)&&this._callback(e(n),o)}}}runCommand(e,t){let i=e.get(it),n=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(!!n)return n.invokeWithinContext(o=>{if(!!o.get(be).contextMatchesRules(ol(this.precondition)))return this.runEditorCommand(o,n,t)})}},pe=class extends fi{constructor(e){super(pe.convertOptions(e));this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(n){return n.menuId||(n.menuId=Ce.EditorContext),n.title||(n.title=e.label),n.when=fe.and(e.precondition,n.when),n}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(ml).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}},sE=class extends pe{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,n)=>n[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(let n of this._implementations){let o=n[1](e,t,i);if(o)return typeof o=="boolean"?void 0:o}}};function Uo(r,e){Ke.registerCommand(r,function(t,...i){let[n,o]=i;xt(ve.isUri(n)),xt(V.isIPosition(o));let s=t.get(Gt).getModel(n);if(s){let a=V.lift(o);return e(s,a,...i.slice(2))}return t.get(fn).createModelReference(n).then(a=>new Promise((l,c)=>{try{let d=e(a.object.textEditorModel,V.lift(o),i.slice(2));l(d)}catch(d){c(d)}}).finally(()=>{a.dispose()}))})}function BV(r,e){Ke.registerCommand(r,function(t,...i){let[n]=i;xt(ve.isUri(n));let o=t.get(Gt).getModel(n);return o?e(o,...i.slice(1)):t.get(fn).createModelReference(n).then(s=>new Promise((a,l)=>{try{let c=e(s.object.textEditorModel,i.slice(1));a(c)}catch(c){l(c)}}).finally(()=>{s.dispose()}))})}function ce(r){return us.INSTANCE.registerEditorCommand(r),r}function ae(r){let e=new r;return us.INSTANCE.registerEditorAction(e),e}function LN(r){return us.INSTANCE.registerEditorAction(r),r}function aE(r){us.INSTANCE.registerEditorAction(r)}function He(r,e){us.INSTANCE.registerEditorContribution(r,e)}var uu;(function(r){function e(s){return us.INSTANCE.getEditorCommand(s)}r.getEditorCommand=e;function t(){return us.INSTANCE.getEditorActions()}r.getEditorActions=t;function i(){return us.INSTANCE.getEditorContributions()}r.getEditorContributions=i;function n(s){return us.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}r.getSomeEditorContributions=n;function o(){return us.INSTANCE.getDiffEditorContributions()}r.getDiffEditorContributions=o})(uu||(uu={}));var Ese={EditorCommonContributions:"editor.contributions"},us=class{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};us.INSTANCE=new us;ii.add(Ese.EditorCommonContributions,us.INSTANCE);function Qw(r){return r.register(),r}var Jw=Qw(new hu({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2048|56},menuOpts:[{menuId:Ce.MenubarEditMenu,group:"1_do",title:g({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Ce.CommandPalette,group:"",title:g("undo","Undo"),order:1}]}));Qw(new DN(Jw,{id:"default:undo",precondition:void 0}));var ey=Qw(new hu({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2048|55,secondary:[2048|1024|56],mac:{primary:2048|1024|56}},menuOpts:[{menuId:Ce.MenubarEditMenu,group:"1_do",title:g({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Ce.CommandPalette,group:"",title:g("redo","Redo"),order:1}]}));Qw(new DN(ey,{id:"default:redo",precondition:void 0}));var WV=Qw(new hu({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2048|31},menuOpts:[{menuId:Ce.MenubarSelectionMenu,group:"1_basic",title:g({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Ce.CommandPalette,group:"",title:g("selectAll","Select All"),order:1}]}));var Dse=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Lse=function(r,e){return function(t,i){e(t,i,r)}},ty=class{constructor(e,t){}dispose(){}};ty.ID="editor.contrib.markerDecorations";ty=Dse([Lse(1,v_)],ty);He(ty.ID,ty);var kN=class{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},lE=class{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let e=this._bareFontInfo.getMassagedFontFamily(Gn?Qi.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";let i=document.createElement("div");i.style.fontFamily=e,i.style.fontWeight=this._bareFontInfo.fontWeight,i.style.fontSize=this._bareFontInfo.fontSize+"px",i.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,i.style.lineHeight=this._bareFontInfo.lineHeight+"px",i.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(i);let n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight="bold",n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);let o=document.createElement("div");o.style.fontFamily=e,o.style.fontWeight=this._bareFontInfo.fontWeight,o.style.fontSize=this._bareFontInfo.fontSize+"px",o.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,o.style.lineHeight=this._bareFontInfo.lineHeight+"px",o.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",o.style.fontStyle="italic",t.appendChild(o);let s=[];for(let a of this._requests){let l;a.type===0&&(l=i),a.type===2&&(l=n),a.type===1&&(l=o),l.appendChild(document.createElement("br"));let c=document.createElement("span");lE._render(c,a),l.appendChild(c),s.push(c)}this._container=t,this._testElements=s}static _render(e,t){if(t.chr===" "){let i="\xA0";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}};function UV(r,e){new lE(r,e).read()}var iy=class extends H{constructor(e,t,i){super();this.referenceDomElement=e,this.changeCallback=i,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver!="undefined"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this.referenceDomElement&&(i=this.referenceDomElement.clientWidth,n=this.referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this.width!==i||this.height!==n)&&(this.width=i,this.height=n,e&&this.changeCallback())}};var IN=class{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}};function VV(){mu.INSTANCE.clearCache()}var mu=class extends H{constructor(){super();this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,this._cache=new IN,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new IN,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){let e=this._cache.getValues(),t=!1;for(let i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=mu._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new Vp({zoomLevel:V1(),pixelRatio:Sp(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,i,n){let o=new kN(e,t);return i.push(o),n&&n.push(o),o}static _actualReadConfiguration(e){let t=[],i=[],n=this.createRequest("n",0,t,i),o=this.createRequest("\uFF4D",0,t,null),s=this.createRequest(" ",0,t,i),a=this.createRequest("0",0,t,i),l=this.createRequest("1",0,t,i),c=this.createRequest("2",0,t,i),d=this.createRequest("3",0,t,i),h=this.createRequest("4",0,t,i),u=this.createRequest("5",0,t,i),m=this.createRequest("6",0,t,i),p=this.createRequest("7",0,t,i),_=this.createRequest("8",0,t,i),v=this.createRequest("9",0,t,i),C=this.createRequest("\u2192",0,t,i),w=this.createRequest("\uFFEB",0,t,null),S=this.createRequest("\xB7",0,t,i),D=this.createRequest(String.fromCharCode(11825),0,t,null),I="|/-_ilm%";for(let K=0,ee=I.length;K<ee;K++)this.createRequest(I.charAt(K),0,t,i),this.createRequest(I.charAt(K),1,t,i),this.createRequest(I.charAt(K),2,t,i);UV(e,t);let A=Math.max(a.width,l.width,c.width,d.width,h.width,u.width,m.width,p.width,_.width,v.width),O=e.fontFeatureSettings===Zn.OFF,N=i[0].width;for(let K=1,ee=i.length;O&&K<ee;K++){let ie=N-i[K].width;if(ie<-.001||ie>.001){O=!1;break}}let F=!0;O&&w.width!==N&&(F=!1),w.width>C.width&&(F=!1);let Y=uW()>2e3;return new Vp({zoomLevel:V1(),pixelRatio:Sp(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:O,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:F,spaceWidth:s.width,middotWidth:S.width,wsmiddotWidth:D.width,maxDigitWidth:A},Y)}};mu.INSTANCE=new mu;var Ti=class extends u_{constructor(e,t,i=null,n){super(e,t);this.accessibilityService=n,this._elementSizeObserver=this._register(new iy(i,t.dimension,()=>this._recomputeOptions())),this._register(mu.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(z1(o=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(Gn?Qi.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(Gn?Qi.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Gn&&!fW&&(e+="no-user-select "),Gn&&(e+="no-minimap-shadow "),We&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Ti._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Qa||Hi,pixelRatio:Sp(),zoomLevel:V1(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return mu.INSTANCE.readConfiguration(e)}};var cE=class{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function tt(r){return new cE(r)}function Ni(r,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");let o=`$memoize$${e}`;t[i]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,s)}),this[o]}}var kse=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Ft;(function(r){r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"})(Ft||(Ft={}));var yt=class extends H{constructor(){super();this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(J(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(J(document,"touchend",e=>this.onTouchEnd(e))),this._register(J(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return yt.isTouchDevice()?(yt.INSTANCE||(yt.INSTANCE=new yt),yt.INSTANCE.targets.push(e),{dispose:()=>{yt.INSTANCE.targets=yt.INSTANCE.targets.filter(t=>t!==e)}}):H.None}static ignoreTarget(e){return yt.isTouchDevice()?(yt.INSTANCE||(yt.INSTANCE=new yt),yt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{yt.INSTANCE.ignoreTargets=yt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):H.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){let o=e.targetTouches.item(i);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(Ft.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),i=Object.keys(this.activeTouches).length;for(let n=0,o=e.changedTouches.length;n<o;n++){let s=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],l=Date.now()-a.initialTimeStamp;if(l<yt.HOLD_DELAY&&Math.abs(a.initialPageX-cs(a.rollingPageX))<30&&Math.abs(a.initialPageY-cs(a.rollingPageY))<30){let c=this.newGestureEvent(Ft.Tap,a.initialTarget);c.pageX=cs(a.rollingPageX),c.pageY=cs(a.rollingPageY),this.dispatchEvent(c)}else if(l>=yt.HOLD_DELAY&&Math.abs(a.initialPageX-cs(a.rollingPageX))<30&&Math.abs(a.initialPageY-cs(a.rollingPageY))<30){let c=this.newGestureEvent(Ft.Contextmenu,a.initialTarget);c.pageX=cs(a.rollingPageX),c.pageY=cs(a.rollingPageY),this.dispatchEvent(c)}else if(i===1){let c=cs(a.rollingPageX),d=cs(a.rollingPageY),h=cs(a.rollingTimestamps)-a.rollingTimestamps[0],u=c-a.rollingPageX[0],m=d-a.rollingPageY[0],p=this.targets.filter(_=>a.initialTarget instanceof Node&&_.contains(a.initialTarget));this.inertia(p,t,Math.abs(u)/h,u>0?1:-1,c,Math.abs(m)/h,m>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(Ft.End,a.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Ft.Tap){let t=new Date().getTime(),i=0;t-this._lastSetTapCountTime>yt.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===Ft.Change||e.type===Ft.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,i,n,o,s,a,l){this.handle=Ro(()=>{let c=Date.now(),d=c-t,h=0,u=0,m=!0;i+=yt.SCROLL_FRICTION*d,s+=yt.SCROLL_FRICTION*d,i>0&&(m=!1,h=n*i*d),s>0&&(m=!1,u=a*s*d);let p=this.newGestureEvent(Ft.Change);p.translationX=h,p.translationY=u,e.forEach(_=>_.dispatchEvent(p)),m||this.inertia(e,c,i,n,o+h,s,a,l+u)})}onTouchMove(e){let t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){let o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(Ft.Change,s.initialTarget);a.translationX=o.pageX-cs(s.rollingPageX),a.translationY=o.pageY-cs(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};yt.SCROLL_FRICTION=-.005;yt.HOLD_DELAY=700;yt.CLEAR_TAP_COUNT_TIME=400;kse([Ni],yt,"isTouchDevice",null);function fl(r,e){let t=new Tn(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}var ms=class{constructor(){this._hooks=new G,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,i,n,o){if(this.isMonitoring())return;this._mouseMoveEventMerger=i,this._mouseMoveCallback=n,this._onStopCallback=o;let s=Dp.getSameOriginWindowChain(),a=To?"pointermove":"mousemove",l="mouseup",c=s.map(h=>h.window.document),d=ga(e);d&&c.unshift(d);for(let h of c)this._hooks.add(ow(h,a,u=>{if(u.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(u)},(u,m)=>this._mouseMoveEventMerger(u,m))),this._hooks.add(J(h,l,u=>this.stopMonitoring(!0)));if(Dp.hasDifferentOriginAncestor()){let h=s[s.length-1];this._hooks.add(J(h.window.document,"mouseout",u=>{new Tn(u).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(J(h.window.document,"mouseover",u=>{new Tn(u).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(J(h.window.document.body,"mouseleave",u=>{this.stopMonitoring(!0)}))}}};var ny=class{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new dE(this.x-tl.scrollX,this.y-tl.scrollY)}},dE=class{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new ny(this.clientX+tl.scrollX,this.clientY+tl.scrollY)}},zV=class{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}};function ON(r){let e=ci(r);return new zV(e.left,e.top,e.width,e.height)}var Dd=class extends Tn{constructor(e,t){super(e);this._editorMouseEventBrand=void 0,this.pos=new ny(this.posx,this.posy),this.editorPos=ON(t)}},TN=class{constructor(e){this._editorViewDomNode=e}_create(e){return new Dd(e,this._editorViewDomNode)}onContextMenu(e,t){return J(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return J(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return J(e,"mousedown",i=>{t(this._create(i))})}onMouseLeave(e,t){return Op(e,i=>{t(this._create(i))})}onMouseMoveThrottled(e,t,i,n){return ow(e,"mousemove",t,(s,a)=>i(s,this._create(a)),n)}},NN=class{constructor(e){this._editorViewDomNode=e}_create(e){return new Dd(e,this._editorViewDomNode)}onPointerUp(e,t){return J(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return J(e,"pointerdown",i=>{t(this._create(i))})}onPointerLeave(e,t){return CW(e,i=>{t(this._create(i))})}onPointerMoveThrottled(e,t,i,n){return ow(e,"pointermove",t,(s,a)=>i(s,this._create(a)),n)}},RN=class extends H{constructor(e){super();this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new ms),this._keydownListener=null}startMonitoring(e,t,i,n,o){this._keydownListener=Zt(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);let s=(a,l)=>i(a,new Dd(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,s,n,a=>{this._keydownListener.dispose(),o(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}};var gl=class extends H{constructor(){super();this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){let o=e[i];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}};var Ki=class extends gl{constructor(e){super();this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}},pr=class{static write(e,t){e instanceof cE,e.setAttribute("data-mprt",String(t))}static read(e){let t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let i=[],n=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;let o=new Uint8Array(n);for(let s=0;s<n;s++)o[s]=i[n-s-1];return o}};var HV=class{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}},PN=class extends HV{constructor(e,t,i){super(e,t);this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}},AN=class{constructor(e,t,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i}},xf=class{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){let t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){let o=e[i];t[i]=new xf(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}},Ld=class{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}},jN=class{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}},MN=class{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}};var ry=class{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,o){let s=this._createRange();try{return s.setStart(e,t),s.setEnd(i,n),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Ld.compare);let t=[],i=0,n=e[0];for(let o=1,s=e.length;o<s;o++){let a=e[o];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;let i=[];for(let n=0,o=e.length;n<o;n++){let s=e[n];i[n]=new Ld(Math.max(0,s.left-t),s.width)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,i,n,o,s,a){let l=0,c=e.children.length-1;if(l>c)return null;if(t=Math.min(c,Math.max(l,t)),n=Math.min(c,Math.max(l,n)),t===n&&i===o&&i===0&&!e.children[t].firstChild){let m=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(m,s)}t!==n&&n>0&&o===0&&(n--,o=1073741824);let d=e.children[t].firstChild,h=e.children[n].firstChild;if((!d||!h)&&(!d&&i===0&&t>0&&(d=e.children[t-1].firstChild,i=1073741824),!h&&o===0&&n>0&&(h=e.children[n-1].firstChild,o=1073741824)),!d||!h)return null;i=Math.min(d.textContent.length,Math.max(0,i)),o=Math.min(h.textContent.length,Math.max(0,o));let u=this._readClientRects(d,i,h,o,a);return this._createHorizontalRangesFromClientRects(u,s)}};var Ise=function(){return so?!0:!(ji||Hi||Gn)}(),S_=!0,hE=class{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}},uE=class{constructor(e,t){this.themeType=t;let i=e.options,n=i.get(43);this.renderWhitespace=i.get(87),this.renderControlCharacters=i.get(82),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(29),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(58),this.stopRenderingLineAfter=i.get(104),this.fontLigatures=i.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}},Ws=class{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=tt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===qr.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let o=i.getViewLineRenderingData(e),s=this._options,a=ur.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn),l=null;if(s.themeType===qr.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){let u=i.selections;for(let m of u){if(m.endLineNumber<e||m.startLineNumber>e)continue;let p=m.startLineNumber===e?m.startColumn:o.minColumn,_=m.endLineNumber===e?m.endColumn:o.maxColumn;p<_&&(s.themeType===qr.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new ur(p,_,"inline-selected-text",0)):(l||(l=[]),l.push(new XT(p-1,_-1))))}}let c=new Bs(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==Zn.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;n.appendASCIIString('<div style="top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;height:"),n.appendASCIIString(String(this._options.lineHeight)),n.appendASCIIString('px;" class="'),n.appendASCIIString(Ws.CLASS_NAME),n.appendASCIIString('">');let d=uf(c,n);n.appendASCIIString("</div>");let h=null;return S_&&Ise&&o.isBasicASCII&&s.useMonospaceOptimizations&&d.containsForeignElements===0&&o.content.length<300&&c.lineTokens.getCount()<100&&(h=new oy(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),h||(h=KV(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof oy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof oy?this._renderedViewLine.monospaceAssumptionsAreValid():S_}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof oy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=t|0,i=i|0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));let o=this._renderedViewLine.input.stopRenderingLineAfter|0,s=!1;o!==-1&&t>o+1&&i>o+1&&(s=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&i>o+1&&(i=o+1);let a=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return a&&a.length>0?new MN(s,a):null}getColumnOfNodeOffset(e,t,i){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,i):1}};Ws.CLASS_NAME="view-line";var oy=class{constructor(e,t,i){this.domNode=e,this.input=t,this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return S_;let e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),S_=!1),S_}toSlowRenderedLine(){return KV(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){let o=this._getCharPosition(t),s=this._getCharPosition(i);return[new Ld(o,s-o)]}_getCharPosition(e){let t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,i){let n=t.textContent.length,o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new Rw(o,i),n)}},FN=class{constructor(e,t,i,n,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let o=this._readPixelOffset(this.domNode,e,t,n);if(o===-1)return null;let s=this._readPixelOffset(this.domNode,e,i,n);return s===-1?null:[new Ld(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,o){if(i===n){let s=this._readPixelOffset(e,t,i,o);return s===-1?null:[new Ld(s,0)]}else return this._readRawVisibleRangesForRange(e,i,n,o)}_readPixelOffset(e,t,i,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();let o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){let o=this._pixelOffsetCache[i];if(o!==-1)return o;let s=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=s,s}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){let l=ry.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n.clientRectDeltaLeft,n.endNode);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();let o=this._characterMapping.getDomPosition(i),s=ry.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,n.clientRectDeltaLeft,n.endNode);if(!s||s.length===0)return-1;let a=s[0].left;if(this.input.isBasicASCII){let l=this._characterMapping.getAbsoluteOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(t===1&&i===this._characterMapping.length)return[new Ld(0,this.getWidth())];let o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(i);return ry.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,n.clientRectDeltaLeft,n.endNode)}getColumnOfNodeOffset(e,t,i){let n=t.textContent.length,o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new Rw(o,i),n)}},$V=class extends FN{_readVisibleRangesForRange(e,t,i,n,o){let s=super._readVisibleRangesForRange(e,t,i,n,o);if(!s||s.length===0||i===n||i===1&&n===this._characterMapping.length)return s;if(!this.input.containsRTL){let a=this._readPixelOffset(e,t,n,o);if(a!==-1){let l=s[s.length-1];l.left<a&&(l.width=a-l.left)}}return s}},KV=function(){return Qa?Ose:Tse}();function Ose(r,e,t,i,n){return new $V(r,e,t,i,n)}function Tse(r,e,t,i,n){return new FN(r,e,t,i,n)}function mE(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var Sn=class{constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${mE(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${mE(this.oldText)}")`:`(replace@${this.oldPosition} "${mE(this.oldText)}" with "${mE(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){let n=t.length;As(e,n,i),i+=4;for(let o=0;o<n;o++)tU(e,t.charCodeAt(o),i),i+=2;return i}static _readString(e,t){let i=Ps(e,t);return t+=4,wx(e,t,i)}writeSize(){return 4+4+Sn._writeStringSize(this.oldText)+Sn._writeStringSize(this.newText)}write(e,t){return As(e,this.oldPosition,t),t+=4,As(e,this.newPosition,t),t+=4,t=Sn._writeString(e,this.oldText,t),t=Sn._writeString(e,this.newText,t),t}static read(e,t,i){let n=Ps(e,t);t+=4;let o=Ps(e,t);t+=4;let s=Sn._readString(e,t);t+=Sn._writeStringSize(s);let a=Sn._readString(e,t);return t+=Sn._writeStringSize(a),i.push(new Sn(n,s,o,a)),t}};function qV(r,e){return r===null||r.length===0?e:new pl(r,e).compress()}var pl=class{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){let[c,d]=pl._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=d;continue}if(i.newPosition<n.oldPosition){let[c,d]=pl._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){let[c,d]=pl._splitPrev(i,n.oldLength);a=c,l=n,i=d,n=this._getCurr(++t)}else{let[c,d]=pl._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=d}this._result[this._resultLen++]=new Sn(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let o=pl._merge(this._result);return pl._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=pl._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=pl._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Sn(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Sn(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let i=e.newText.substr(0,t),n=e.newText.substr(t);return[new Sn(e.oldPosition,e.oldText,e.newPosition,i),new Sn(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){let i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new Sn(e.oldPosition,i,e.newPosition,e.newText),new Sn(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],i=0,n=e[0];for(let o=1;o<e.length;o++){let s=e[o];n.oldEnd===s.oldPosition?n=new Sn(n.oldPosition,n.oldText+s.oldText,n.newPosition,n.newText+s.newText):(t[i++]=n,n=s)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],i=0;for(let n=0;n<e.length;n++){let o=e[n];o.oldText!==o.newText&&(t[i++]=o)}return t}};function x_(r){return r.toString()}var xn=class{constructor(e,t,i,n,o,s,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=o,this.afterCursorState=s,this.changes=a}static create(e,t){let i=e.getAlternativeVersionId(),n=WN(e);return new xn(i,i,n,n,t,t,[])}append(e,t,i,n,o){t.length>0&&(this.changes=qV(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(As(e,t?t.length:0,i),i+=4,t)for(let n of t)As(e,n.selectionStartLineNumber,i),i+=4,As(e,n.selectionStartColumn,i),i+=4,As(e,n.positionLineNumber,i),i+=4,As(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){let n=Ps(e,t);t+=4;for(let o=0;o<n;o++){let s=Ps(e,t);t+=4;let a=Ps(e,t);t+=4;let l=Ps(e,t);t+=4;let c=Ps(e,t);t+=4,i.push(new le(s,a,l,c))}return t}serialize(){let e=4+4+1+1+xn._writeSelectionsSize(this.beforeCursorState)+xn._writeSelectionsSize(this.afterCursorState)+4;for(let n of this.changes)e+=n.writeSize();let t=new Uint8Array(e),i=0;As(t,this.beforeVersionId,i),i+=4,As(t,this.afterVersionId,i),i+=4,YO(t,this.beforeEOL,i),i+=1,YO(t,this.afterEOL,i),i+=1,i=xn._writeSelections(t,this.beforeCursorState,i),i=xn._writeSelections(t,this.afterCursorState,i),As(t,this.changes.length,i),i+=4;for(let n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){let t=new Uint8Array(e),i=0,n=Ps(t,i);i+=4;let o=Ps(t,i);i+=4;let s=qO(t,i);i+=1;let a=qO(t,i);i+=1;let l=[];i=xn._readSelections(t,i,l);let c=[];i=xn._readSelections(t,i,c);let d=Ps(t,i);i+=4;let h=[];for(let u=0;u<d;u++)i=Sn.read(t,i,h);return new xn(n,o,s,a,l,c,h)}},BN=class{constructor(e,t){this.model=e,this._data=xn.create(e,t)}get type(){return 0}get resource(){return ve.isUri(this.model)?this.model:this.model.uri}get label(){return g("edit","Typing")}toString(){return(this._data instanceof xn?this._data:xn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(ve.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof xn}append(e,t,i,n,o){this._data instanceof xn&&this._data.append(e,t,i,n,o)}close(){this._data instanceof xn&&(this._data=this._data.serialize())}open(){this._data instanceof xn||(this._data=xn.deserialize(this._data))}undo(){if(ve.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof xn&&(this._data=this._data.serialize());let e=xn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(ve.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof xn&&(this._data=this._data.serialize());let e=xn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof xn&&(this._data=this._data.serialize()),this._data.byteLength+168}},YV=class{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(let i of this._editStackElementsArr){let n=x_(i.resource);this._editStackElementsMap.set(n,i)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){let t=x_(e);return this._editStackElementsMap.has(t)}setModel(e){let t=x_(ve.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=x_(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,o){let s=x_(e.uri);this._editStackElementsMap.get(s).append(e,t,i,n,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=x_(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${ar(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function WN(r){return r.getEOL()===`
`?0:1}function cc(r){return r?r instanceof BN||r instanceof YV:!1}var sy=class{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);cc(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);cc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){let t=this._undoRedoService.getLastElement(this._model.uri);if(cc(t)&&t.canAppend(this._model))return t;let i=new BN(this._model,e);return this._undoRedoService.pushElement(i),i}pushEOL(e){let t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],WN(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i){let n=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),s=sy._computeCursorState(i,o),a=o.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),n.append(this._model,a.map(l=>l.textChange),WN(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return we(i),null}}};var ZV=class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};function Nse(r,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<i;o++){let u=r.charCodeAt(o),m=t.charCodeAt(o);if(u!==m)break}let s=0,a=0;for(let u=o;u<e;u++)r.charCodeAt(u)===32?s++:a++;let l=0,c=0;for(let u=o;u<i;u++)t.charCodeAt(u)===32?l++:c++;if(s>0&&a>0||l>0&&c>0)return;let d=Math.abs(a-c),h=Math.abs(s-l);if(d===0){n.spacesDiff=h,h>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(n.looksLikeAlignment=!0);return}if(h%d==0){n.spacesDiff=h/d;return}}function UN(r,e,t){let i=Math.min(r.getLineCount(),1e4),n=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new ZV;for(let p=1;p<=i;p++){let _=r.getLineLength(p),v=r.getLineContent(p),C=_<=65536,w=!1,S=0,D=0,I=0;for(let O=0,N=_;O<N;O++){let F=C?v.charCodeAt(O):r.getLineCharCode(p,O);if(F===9)I++;else if(F===32)D++;else{w=!0,S=O;break}}if(!w||(I>0?n++:D>1&&o++,Nse(s,a,v,S,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;let A=h.spacesDiff;A<=c&&d[A]++,s=v,a=S}let u=t;n!==o&&(u=n<o);let m=e;if(u){let p=u?0:.1*i;l.forEach(_=>{let v=d[_];v>p&&(p=v,m=_)}),m===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(m=2)}return{insertSpaces:u,tabSize:m}}function bo(r){return(r.metadata&1)>>>0}function gi(r,e){r.metadata=r.metadata&254|e<<0}function ir(r){return(r.metadata&2)>>>1==1}function di(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function GV(r){return(r.metadata&4)>>>2==1}function XV(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function Rse(r){return(r.metadata&24)>>>3}function QV(r,e){r.metadata=r.metadata&231|e<<3}function Pse(r){return(r.metadata&32)>>>5==1}function JV(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}var fE=class{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,gi(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,XV(this,!1),QV(this,1),JV(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,di(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;let t=this.options.className;XV(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),QV(this,this.options.stickiness),JV(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},lt=new fE(null,0,0);lt.parent=lt;lt.left=lt;lt.right=lt;gi(lt,0);var ay=class{constructor(){this.root=lt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,o){return this.root===lt?[]:Vse(this,e,t,i,n,o)}search(e,t,i){return this.root===lt?[]:Use(this,e,t,i)}collectNodesFromOwner(e){return Bse(this,e)}collectNodesPostOrder(){return Wse(this)}insert(e){ez(this,e),this._normalizeDeltaIfNecessary()}delete(e){tz(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let i=e,n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;let o=i.start+n,s=i.end+n;i.setCachedOffsets(o,s,t)}acceptReplace(e,t,i,n){let o=Mse(this,e,e+t);for(let s=0,a=o.length;s<a;s++){let l=o[s];tz(this,l)}this._normalizeDeltaIfNecessary(),Fse(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){let l=o[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,jse(l,e,e+t,i,n),l.maxEnd=l.end,ez(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,Ase(this))}};function Ase(r){let e=r.root,t=0;for(;e!==lt;){if(e.left!==lt&&!ir(e.left)){e=e.left;continue}if(e.right!==lt&&!ir(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,kd(e),di(e,!0),di(e.left,!1),di(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}di(r.root,!1)}function E_(r,e,t,i){return r<t?!0:r>t||i===1?!1:i===2?!0:e}function jse(r,e,t,i,n){let o=Rse(r),s=o===0||o===2,a=o===1||o===2,l=t-e,c=i,d=Math.min(l,c),h=r.start,u=!1,m=r.end,p=!1;e<=h&&m<=t&&Pse(r)&&(r.start=e,u=!0,r.end=e,p=!0);{let v=n?1:l>0?2:0;!u&&E_(h,s,e,v)&&(u=!0),!p&&E_(m,a,e,v)&&(p=!0)}if(d>0&&!n){let v=l>c?2:0;!u&&E_(h,s,e+d,v)&&(u=!0),!p&&E_(m,a,e+d,v)&&(p=!0)}{let v=n?1:0;!u&&E_(h,s,t,v)&&(r.start=e+c,u=!0),!p&&E_(m,a,t,v)&&(r.end=e+c,p=!0)}let _=c-l;u||(r.start=Math.max(0,h+_)),p||(r.end=Math.max(0,m+_)),r.start>r.end&&(r.end=r.start)}function Mse(r,e,t){let i=r.root,n=0,o=0,s=0,a=0,l=[],c=0;for(;i!==lt;){if(ir(i)){di(i.left,!1),di(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!ir(i.left)){if(o=n+i.maxEnd,o<e){di(i,!0);continue}if(i.left!==lt){i=i.left;continue}}if(s=n+i.start,s>t){di(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(s,a,0),l[c++]=i),di(i,!0),i.right!==lt&&!ir(i.right)){n+=i.delta,i=i.right;continue}}return di(r.root,!1),l}function Fse(r,e,t,i){let n=r.root,o=0,s=0,a=0,l=i-(t-e);for(;n!==lt;){if(ir(n)){di(n.left,!1),di(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),kd(n),n=n.parent;continue}if(!ir(n.left)){if(s=o+n.maxEnd,s<e){di(n,!0);continue}if(n.left!==lt){n=n.left;continue}}if(a=o+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0),di(n,!0);continue}if(di(n,!0),n.right!==lt&&!ir(n.right)){o+=n.delta,n=n.right;continue}}di(r.root,!1)}function Bse(r,e){let t=r.root,i=[],n=0;for(;t!==lt;){if(ir(t)){di(t.left,!1),di(t.right,!1),t=t.parent;continue}if(t.left!==lt&&!ir(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),di(t,!0),t.right!==lt&&!ir(t.right)){t=t.right;continue}}return di(r.root,!1),i}function Wse(r){let e=r.root,t=[],i=0;for(;e!==lt;){if(ir(e)){di(e.left,!1),di(e.right,!1),e=e.parent;continue}if(e.left!==lt&&!ir(e.left)){e=e.left;continue}if(e.right!==lt&&!ir(e.right)){e=e.right;continue}t[i++]=e,di(e,!0)}return di(r.root,!1),t}function Use(r,e,t,i){let n=r.root,o=0,s=0,a=0,l=[],c=0;for(;n!==lt;){if(ir(n)){di(n.left,!1),di(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),n=n.parent;continue}if(n.left!==lt&&!ir(n.left)){n=n.left;continue}s=o+n.start,a=o+n.end,n.setCachedOffsets(s,a,i);let d=!0;if(e&&n.ownerId&&n.ownerId!==e&&(d=!1),t&&GV(n)&&(d=!1),d&&(l[c++]=n),di(n,!0),n.right!==lt&&!ir(n.right)){o+=n.delta,n=n.right;continue}}return di(r.root,!1),l}function Vse(r,e,t,i,n,o){let s=r.root,a=0,l=0,c=0,d=0,h=[],u=0;for(;s!==lt;){if(ir(s)){di(s.left,!1),di(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!ir(s.left)){if(l=a+s.maxEnd,l<e){di(s,!0);continue}if(s.left!==lt){s=s.left;continue}}if(c=a+s.start,c>t){di(s,!0);continue}if(d=a+s.end,d>=e){s.setCachedOffsets(c,d,o);let m=!0;i&&s.ownerId&&s.ownerId!==i&&(m=!1),n&&GV(s)&&(m=!1),m&&(h[u++]=s)}if(di(s,!0),s.right!==lt&&!ir(s.right)){a+=s.delta,s=s.right;continue}}return di(r.root,!1),h}function ez(r,e){if(r.root===lt)return e.parent=lt,e.left=lt,e.right=lt,gi(e,0),r.root=e,r.root;zse(r,e),fu(e.parent);let t=e;for(;t!==r.root&&bo(t.parent)===1;)if(t.parent===t.parent.parent.left){let i=t.parent.parent.right;bo(i)===1?(gi(t.parent,0),gi(i,0),gi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,ly(r,t)),gi(t.parent,0),gi(t.parent.parent,1),cy(r,t.parent.parent))}else{let i=t.parent.parent.left;bo(i)===1?(gi(t.parent,0),gi(i,0),gi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,cy(r,t)),gi(t.parent,0),gi(t.parent.parent,1),ly(r,t.parent.parent))}return gi(r.root,0),e}function zse(r,e){let t=0,i=r.root,n=e.start,o=e.end;for(;;)if($se(n,o,i.start+t,i.end+t)<0)if(i.left===lt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===lt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=lt,e.right=lt,gi(e,1)}function tz(r,e){let t,i;if(e.left===lt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===lt?(t=e.left,i=e):(i=Hse(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0)),i===r.root){r.root=t,gi(t,0),e.detach(),VN(),kd(t),r.root.parent=lt;return}let n=bo(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,gi(i,bo(e)),e===r.root?r.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==lt&&(i.left.parent=i),i.right!==lt&&(i.right.parent=i)),e.detach(),n){fu(t.parent),i!==e&&(fu(i),fu(i.parent)),VN();return}fu(t),fu(t.parent),i!==e&&(fu(i),fu(i.parent));let o;for(;t!==r.root&&bo(t)===0;)t===t.parent.left?(o=t.parent.right,bo(o)===1&&(gi(o,0),gi(t.parent,1),ly(r,t.parent),o=t.parent.right),bo(o.left)===0&&bo(o.right)===0?(gi(o,1),t=t.parent):(bo(o.right)===0&&(gi(o.left,0),gi(o,1),cy(r,o),o=t.parent.right),gi(o,bo(t.parent)),gi(t.parent,0),gi(o.right,0),ly(r,t.parent),t=r.root)):(o=t.parent.left,bo(o)===1&&(gi(o,0),gi(t.parent,1),cy(r,t.parent),o=t.parent.left),bo(o.left)===0&&bo(o.right)===0?(gi(o,1),t=t.parent):(bo(o.left)===0&&(gi(o.right,0),gi(o,1),ly(r,o),o=t.parent.left),gi(o,bo(t.parent)),gi(t.parent,0),gi(o.left,0),cy(r,t.parent),t=r.root));gi(t,0),VN()}function Hse(r){for(;r.left!==lt;)r=r.left;return r}function VN(){lt.parent=lt,lt.delta=0,lt.start=0,lt.end=0}function ly(r,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==lt&&(t.left.parent=e),t.parent=e.parent,e.parent===lt?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,kd(e),kd(t)}function cy(r,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==lt&&(t.right.parent=e),t.parent=e.parent,e.parent===lt?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,kd(e),kd(t)}function iz(r){let e=r.end;if(r.left!==lt){let t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==lt){let t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function kd(r){r.maxEnd=iz(r)}function fu(r){for(;r!==lt;){let e=iz(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function $se(r,e,t,i){return r===t?e-i:r-t}var dy=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Ye)return gE(this.right);let e=this;for(;e.parent!==Ye&&e.parent.left!==e;)e=e.parent;return e.parent===Ye?Ye:e.parent}prev(){if(this.left!==Ye)return zN(this.left);let e=this;for(;e.parent!==Ye&&e.parent.right!==e;)e=e.parent;return e.parent===Ye?Ye:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},Ye=new dy(null,0);Ye.parent=Ye;Ye.left=Ye;Ye.right=Ye;Ye.color=0;function gE(r){for(;r.left!==Ye;)r=r.left;return r}function zN(r){for(;r.right!==Ye;)r=r.right;return r}function HN(r){return r===Ye?0:r.size_left+r.piece.length+HN(r.right)}function $N(r){return r===Ye?0:r.lf_left+r.piece.lineFeedCnt+$N(r.right)}function KN(){Ye.parent=Ye}function hy(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Ye&&(t.left.parent=e),t.parent=e.parent,e.parent===Ye?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function uy(r,e){let t=e.left;e.left=t.right,t.right!==Ye&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Ye?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function my(r,e){let t,i;if(e.left===Ye?(i=e,t=i.right):e.right===Ye?(i=e,t=i.left):(i=gE(e.right),t=i.right),i===r.root){r.root=t,t.color=0,e.detach(),KN(),r.root.parent=Ye;return}let n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,fy(r,t)):(i.parent===e?t.parent=i:t.parent=i.parent,fy(r,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===r.root?r.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Ye&&(i.left.parent=i),i.right!==Ye&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,fy(r,i)),e.detach(),t.parent.left===t){let s=HN(t),a=$N(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,dc(r,t.parent,l,c)}}if(fy(r,t.parent),n){KN();return}let o;for(;t!==r.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,hy(r,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,uy(r,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,hy(r,t.parent),t=r.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,uy(r,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,hy(r,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,uy(r,t.parent),t=r.root));t.color=0,KN()}function qN(r,e){for(fy(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,hy(r,e)),e.parent.color=0,e.parent.parent.color=1,uy(r,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,uy(r,e)),e.parent.color=0,e.parent.parent.color=1,hy(r,e.parent.parent))}r.root.color=0}function dc(r,e,t,i){for(;e!==r.root&&e!==Ye;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function fy(r,e){let t=0,i=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=HN(e.left)-e.size_left,i=$N(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==r.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}var nz=class extends nc{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}};function Kse(r){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=r(t)),e[t])}var Ir=Kse(r=>new nz(r));var qse=999,hc=class{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Yse(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=nx(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new rz(t,this.wordSeparators?Ir(this.wordSeparators):null,i?this.searchString:null)}};function Yse(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++)if(r.charCodeAt(e)===92){if(e++,e>=t)break;let n=r.charCodeAt(e);if(n===110||n===114||n===87)return!0}return!1}var rz=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}};function gu(r,e,t){if(!t)return new dd(r,null);let i=[];for(let n=0,o=e.length;n<o;n++)i[n]=e[n];return new dd(r,i)}var YN=class{constructor(e){let t=[],i=0;for(let n=0,o=e.length;n<o;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){let o=i+((n-i)/2>>0);t[o]>=e?n=o-1:t[o+1]>=e?(i=o,n=o):i=o+1}return i+1}},D_=class{static findMatches(e,t,i,n,o){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,i,new Ef(s.wordSeparators,s.regex),n,o):this._doFindMatchesLineByLine(e,i,s,n,o):[]}static _getMultilineMatchRange(e,t,i,n,o,s){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(n){let m=n.findLineFeedCountBeforeOffset(o+s.length)-l;c=a+s.length+m}else c=a+s.length;let d=e.getPositionAt(a),h=e.getPositionAt(c);return new L(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,i,n,o){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new YN(a):null,c=[],d=0,h;for(i.reset(0);h=i.next(a);)if(c[d++]=gu(this._getMultilineMatchRange(e,s,a,l,h.index,h[0]),h,n),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,o){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,s,n,o),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,s,n,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,s,n,o);if(a<o){let c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,s,n,o)}return s}static _findMatchesInLine(e,t,i,n,o,s,a,l){let c=e.wordSeparators;if(!a&&e.simpleSearch){let u=e.simpleSearch,m=u.length,p=t.length,_=-m;for(;(_=t.indexOf(u,_+m))!==-1;)if((!c||pE(c,t,p,_,m))&&(s[o++]=new dd(new L(i,_+1+n,i,_+1+m+n),null),o>=l))return o;return o}let d=new Ef(e.wordSeparators,e.regex),h;d.reset(0);do if(h=d.next(t),h&&(s[o++]=gu(new L(i,h.index+1+n,i,h.index+1+h[0].length+n),h,a),o>=l))return o;while(h);return o}static findNextMatch(e,t,i,n){let o=t.parseSearchRequest();if(!o)return null;let s=new Ef(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,s,n):this._doFindNextMatchLineByLine(e,i,s,n)}static _doFindNextMatchMultiline(e,t,i,n){let o=new V(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new L(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new YN(l):null;i.reset(t.column-1);let d=i.next(l);return d?gu(this._getMultilineMatchRange(e,s,l,c,d.index,d[0]),d,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new V(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(i,a,s,t.column,n);if(l)return l;for(let c=1;c<=o;c++){let d=(s+c-1)%o,h=e.getLineContent(d+1),u=this._findFirstMatchInLine(i,h,d+1,1,n);if(u)return u}return null}static _findFirstMatchInLine(e,t,i,n,o){e.reset(n-1);let s=e.next(t);return s?gu(new L(i,s.index+1,i,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,i,n){let o=t.parseSearchRequest();if(!o)return null;let s=new Ef(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,s,n):this._doFindPreviousMatchLineByLine(e,i,s,n)}static _doFindPreviousMatchMultiline(e,t,i,n){let o=this._doFindMatchesMultiline(e,new L(1,1,t.lineNumber,t.column),i,n,10*qse);if(o.length>0)return o[o.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new V(s,e.getLineMaxColumn(s)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,s,n);if(l)return l;for(let c=1;c<=o;c++){let d=(o+s-c-1)%o,h=e.getLineContent(d+1),u=this._findLastMatchInLine(i,h,d+1,n);if(u)return u}return null}static _findLastMatchInLine(e,t,i,n){let o=null,s;for(e.reset(0);s=e.next(t);)o=gu(new L(i,s.index+1,i,s.index+1+s[0].length),s,n);return o}};function Zse(r,e,t,i,n){if(i===0)return!0;let o=e.charCodeAt(i-1);if(r.get(o)!==0||o===13||o===10)return!0;if(n>0){let s=e.charCodeAt(i);if(r.get(s)!==0)return!0}return!1}function Gse(r,e,t,i,n){if(i+n===t)return!0;let o=e.charCodeAt(i+n);if(r.get(o)!==0||o===13||o===10)return!0;if(n>0){let s=e.charCodeAt(i+n-1);if(r.get(s)!==0)return!0}return!1}function pE(r,e,t,i,n){return Zse(r,e,t,i,n)&&Gse(r,e,t,i,n)}var Ef=class{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;let n=i.index,o=i[0].length;if(n===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){rl(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=o,!this._wordSeparators||pE(this._wordSeparators,e,t,n,o))return i}while(i);return null}};var Id=65535;function oz(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}var sz=class{constructor(e,t,i,n,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=o}};function uc(r,e=!0){let t=[0],i=1;for(let n=0,o=r.length;n<o;n++){let s=r.charCodeAt(n);s===13?n+1<o&&r.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:s===10&&(t[i++]=n+1)}return e?oz(t):t}function az(r,e){r.length=0,r[0]=0;let t=1,i=0,n=0,o=0,s=!0;for(let l=0,c=e.length;l<c;l++){let d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,r[t++]=l+2,l++):(i++,r[t++]=l+1):d===10?(n++,r[t++]=l+1):s&&d!==9&&(d<32||d>126)&&(s=!1)}let a=new sz(oz(r),i,n,o,s);return r.length=0,a}var vo=class{constructor(e,t,i,n,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=o}},Od=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},lz=class{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Ye&&e.iterate(e.root,i=>(i!==Ye&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},cz=class{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,i=this._cache;for(let n=0;n<i.length;n++){let o=i[n];if(o.node.parent===null||o.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){let n=[];for(let o of i)o!==null&&n.push(o);this._cache=n}}},ZN=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Od("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Ye,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=uc(e[o].buffer));let a=new vo(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),n=this.rbInsertRight(n,a)}this._searchCache=new cz(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Id,i=t-Math.floor(t/3),n=i*2,o="",s=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),d=c.length;if(s<=i||s+d<n)return o+=c,s+=d,!0;let h=o.replace(/\r\n|\r|\n/g,e);return a.push(new Od(h,uc(h))),o=c,s=d,!0}),s>0){let l=o.replace(/\r\n|\r|\n/g,e);a.push(new Od(l,uc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new lz(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==Ye;)if(n.left!==Ye&&n.lf_left+1>=e)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt+1>=e)return i+=n.size_left,i+=this.getAccumulatedValue(n,e-n.lf_left-2)+t-1;e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0,n=e;for(;t!==Ye;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(i+1,1),a=n-s;return new V(i+1,a+1)}return new V(i+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===Ye){let o=this.getOffsetAt(i+1,1),s=n-e-o;return new V(i+1,s+1)}else t=t.right;return new V(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node,n=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start),s=n.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==Ye;){let a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,i.piece.length);i=i.next()}return s}getLinesContent(){let e=[],t=0,i="",n=!1;return this.iterate(this.root,o=>{if(o===Ye)return!0;let s=o.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,c=this._buffers[s.bufferIndex].lineStarts,d=s.start.line,h=s.end.line,u=c[d]+s.start.column;if(n&&(l.charCodeAt(u)===10&&(u++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(u+a-1)===13?(n=!0,i+=l.substr(u,a-1)):i+=l.substr(u,a),!0;i+=this._EOLNormalized?l.substring(u,Math.max(u,c[d+1]-this._EOLLength)):l.substring(u,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let m=d+1;m<h;m++)i=this._EOLNormalized?l.substring(c[m],c[m+1]-this._EOLLength):l.substring(c[m],c[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[h]+s.end.column-1)===13?(n=!0,s.end.column===0?t--:i=l.substr(c[h],s.end.column-1)):i=l.substr(c[h],s.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{let t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){let i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,o,s,a,l,c,d,h){let u=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,o),_=this.offsetInBuffer(e.piece.bufferIndex,s),v,C={line:0,column:0},w,S;t._wordSeparators?(w=u.buffer.substring(p,_),S=D=>D+p,t.reset(0)):(w=u.buffer,S=D=>D,t.reset(p));do if(v=t.next(w),v){if(S(v.index)>=_)return d;this.positionInBuffer(e,S(v.index)-m,C);let D=this.getLineFeedCnt(e.piece.bufferIndex,o,C),I=C.line===o.line?C.column-o.column+n:C.column+1,A=I+v[0].length;if(h[d++]=gu(new L(i+D,I,i+D,A),v,l),S(v.index)+v[0].length>=_||d>=c)return d}while(v);return d}findMatchesLineByLine(e,t,i,n){let o=[],s=0,a=new Ef(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder),h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,i,n,s,o),o;let u=e.startLineNumber,m=l.node;for(;m!==c.node;){let _=this.getLineFeedCnt(m.piece.bufferIndex,d,m.piece.end);if(_>=1){let C=this._buffers[m.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),S=C[d.line+_],D=u===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,u,D,d,this.positionInBuffer(m,S-w),t,i,n,s,o),s>=n)return o;u+=_}let v=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){let C=this.getLineContent(u).substring(v,e.endColumn-1);return s=this._findMatchesInLine(t,a,C,e.endLineNumber,v,s,o,i,n),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(u).substr(v),u,v,s,o,i,n),s>=n)return o;u++,l=this.nodeAt2(u,1),m=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(u===e.endLineNumber){let _=u===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(u).substring(_,e.endColumn-1);return s=this._findMatchesInLine(t,a,v,e.endLineNumber,_,s,o,i,n),o}let p=u===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(c.node,a,u,p,d,h,t,i,n,s,o),o}_findMatchesInLine(e,t,i,n,o,s,a,l,c){let d=e.wordSeparators;if(!l&&e.simpleSearch){let u=e.simpleSearch,m=u.length,p=i.length,_=-m;for(;(_=i.indexOf(u,_+m))!==-1;)if((!d||pE(d,i,p,_,m))&&(a[s++]=new dd(new L(n,_+1+o,n,_+1+m+o),null),s>=c))return s;return s}let h;t.reset(0);do if(h=t.next(i),h&&(a[s++]=gu(new L(n,h.index+1+o,n,h.index+1+h[0].length+o),h,l),s>=c))return s;while(h);return s}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Ye){let{node:n,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,o);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Id){this.appendToNode(n,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(s+n.piece.length>e){let d=[],h=new vo(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,o)===10){let _={line:h.start.line+1,column:0};h=new vo(h.bufferIndex,_,h.end,this.getLineFeedCnt(h.bufferIndex,_,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,o-1)===13){let _=this.positionInBuffer(n,o-1);this.deleteNodeTail(n,_),t="\r"+t,n.piece.length===0&&d.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);let u=this.createNewPieces(t);h.length>0&&this.rbInsertRight(n,h);let m=n;for(let p=0;p<u.length;p++)m=this.rbInsertRight(m,u[p]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,n)}else{let n=this.createNewPieces(t),o=this.rbInsertLeft(null,n[0]);for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Ye)return;let i=this.nodeAt(e),n=this.nodeAt(e+t),o=i.node,s=n.node;if(o===s){let u=this.positionInBuffer(o,i.remainder),m=this.positionInBuffer(o,n.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){let p=o.next();my(this,o),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(o,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,u),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,u,m),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let c=this.positionInBuffer(s,n.remainder);this.deleteNodeHead(s,c),s.piece.length===0&&a.push(s);let d=o.next();for(let u=d;u!==Ye&&u!==s;u=u.next())a.push(u);let h=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new vo(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,dc(this,t,-1,-1),t.piece.length===0&&i.push(t)}let n=this.createNewPieces(e),o=this.rbInsertLeft(t,n[n.length-1]);for(let s=n.length-2;s>=0;s--)o=this.rbInsertLeft(o,n[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]),o=n;for(let s=1;s<i.length;s++)o=this.rbInsertRight(o,i[s]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){let n=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,l=s[n.start.line]+n.start.column+t,c=n.start.line,d=n.end.line,h=0,u=0,m=0;for(;c<=d&&(h=c+(d-c)/2|0,m=s[h],h!==d);)if(u=s[h+1],l<m)d=h-1;else if(l>=u)c=h+1;else break;return i?(i.line=h,i.column=l-m,null):{line:h,column:l-m}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;let n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;let o=n[i.line+1],s=n[i.line]+i.column;if(o>s+1)return i.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)my(this,e[t])}createNewPieces(e){if(e.length>Id){let d=[];for(;e.length>Id;){let u=e.charCodeAt(Id-1),m;u===13||u>=55296&&u<=56319?(m=e.substring(0,Id-1),e=e.substring(Id-1)):(m=e.substring(0,Id),e=e.substring(Id));let p=uc(m);d.push(new vo(this._buffers.length,{line:0,column:0},{line:p.length-1,column:m.length-p[p.length-1]},p.length-1,m.length)),this._buffers.push(new Od(m,p))}let h=uc(e);return d.push(new vo(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new Od(e,h)),d}let t=this._buffers[0].buffer.length,i=uc(e,!1),n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}let o=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],l={line:s,column:a},c=new vo(0,n,l,this.getLineFeedCnt(0,n,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="",o=this._searchCache.get2(e);if(o){i=o.node;let s=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+s,l+i.piece.length);else{let c=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return a.substring(l+s,l+c-t)}}else{let s=0,a=e;for(;i!==Ye;)if(i.left!==Ye&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(h+l,h+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==Ye;){let s=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=s.substring(l,l+a-t),n}else{let a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=s.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==Ye;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){let i=e.piece,n=this.positionInBuffer(e,t),o=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;let i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[o]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){let i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),s=t,a=this.offsetInBuffer(i.bufferIndex,s),l=this.getLineFeedCnt(i.bufferIndex,i.start,s),c=l-n,d=a-o,h=i.length+d;e.piece=new vo(i.bufferIndex,i.start,s,l,h),dc(this,e,d,c)}deleteNodeHead(e,t){let i=e.piece,n=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),s=t,a=this.getLineFeedCnt(i.bufferIndex,s,i.end),l=this.offsetInBuffer(i.bufferIndex,s),c=a-n,d=o-l,h=i.length+d;e.piece=new vo(i.bufferIndex,s,i.end,a,h),dc(this,e,d,c)}shrinkNode(e,t,i){let n=e.piece,o=n.start,s=n.end,a=n.length,l=n.lineFeedCnt,c=t,d=this.getLineFeedCnt(n.bufferIndex,n.start,c),h=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,o);e.piece=new vo(n.bufferIndex,n.start,c,d,h),dc(this,e,h-a,d-l);let u=new vo(n.bufferIndex,i,s,this.getLineFeedCnt(n.bufferIndex,i,s),this.offsetInBuffer(n.bufferIndex,s)-this.offsetInBuffer(n.bufferIndex,i)),m=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let o=uc(t,!1);for(let m=0;m<o.length;m++)o[m]+=n;if(i){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),u=h-d;e.piece=new vo(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,dc(this,e,t.length,u)}nodeAt(e){let t=this.root,i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==Ye;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==Ye;)if(i.left!==Ye&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(i,e-i.lf_left-2),s=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(o+t-1,s),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:n};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==Ye;){if(i.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(i,0),s=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(i.piece.length>=t-1){let o=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:o}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Ye||e.piece.lineFeedCnt===0)return!1;let t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,o=i[n]+t.start.column;return n===i.length-1||i[n+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Ye||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let i=[],n=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new vo(e.piece.bufferIndex,e.piece.start,o,a,s),dc(this,e,-1,-1),e.piece.length===0&&i.push(e);let l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new vo(t.piece.bufferIndex,l,t.piece.end,d,c),dc(this,t,-1,-1),t.piece.length===0&&i.push(t);let h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let u=0;u<i.length;u++)my(this,i[u])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)my(this,i);else{let n=i.piece,o={line:n.start.line+1,column:0},s=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,o,n.end);i.piece=new vo(n.bufferIndex,o,n.end,a,s),dc(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Ye)return t(Ye);let i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Ye)return"";let t=this._buffers[e.piece.bufferIndex],i,n=e.piece,o=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return i=t.buffer.substring(o,s),i}getPieceContent(e){let t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){let i=new dy(t,1);if(i.left=Ye,i.right=Ye,i.parent=Ye,i.size_left=0,i.lf_left=0,this.root===Ye)this.root=i,i.color=0;else if(e.right===Ye)e.right=i,i.parent=e;else{let o=gE(e.right);o.left=i,i.parent=o}return qN(this,i),i}rbInsertLeft(e,t){let i=new dy(t,1);if(i.left=Ye,i.right=Ye,i.parent=Ye,i.size_left=0,i.lf_left=0,this.root===Ye)this.root=i,i.color=0;else if(e.left===Ye)e.left=i,i.parent=e;else{let n=zN(e.left);n.right=i,i.parent=n}return qN(this,i),i}};function Td(r){let e=0,t=0,i=0,n=0;for(let o=0,s=r.length;o<s;o++){let a=r.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&r.charCodeAt(o+1)===10?(n|=2,o++):n|=3,i=o+1):a===10&&(n|=1,e===0&&(t=o),e++,i=o+1)}return e===0&&(t=r.length),[e,t,r.length-i,n]}function dz(r){return(r<<0|0<<8|0<<11|1<<14|2<<23)>>>0}var Nd=new Uint32Array(0).buffer,gy=class{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){let i=this.tokens[this.tokens.length-1];if(i.startLineNumber+i.tokens.length-1+1===e){i.tokens.push(t);return}}this.tokens.push(new hz(e,[t]))}},L_=class{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){let e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){let e=this._getTokenCount();if(e===0)return null;let t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new L(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){let n=t+Math.floor((i-t)/2),o=this._getDeltaLine(n);if(o<e)t=n+1;else if(o>e)i=n-1;else{let s=n;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let a=n;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new GN(this._tokens.subarray(4*s,4*a+4))}}return this._getDeltaLine(t)===e?new GN(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){let o=this._tokens,s=this._tokenCount,a=0,l=!1,c=0;for(let d=0;d<s;d++){let h=4*d,u=o[h],m=o[h+1],p=o[h+2],_=o[h+3];if((u>e||u===e&&p>=t)&&(u<i||u===i&&m<=n))l=!0;else{if(a===0&&(c=u),l){let v=4*a;o[v]=u-c,o[v+1]=m,o[v+2]=p,o[v+3]=_}a++}}return this._tokenCount=a,c}split(e,t,i,n){let o=this._tokens,s=this._tokenCount,a=[],l=[],c=a,d=0,h=0;for(let u=0;u<s;u++){let m=4*u,p=o[m],_=o[m+1],v=o[m+2],C=o[m+3];if(p>e||p===e&&v>=t){if(p<i||p===i&&_<=n)continue;c!==l&&(c=l,d=0,h=p)}c[d++]=p-h,c[d++]=_,c[d++]=v,c[d++]=C}return[new L_(new Uint32Array(a)),new L_(new Uint32Array(l)),h]}acceptDeleteRange(e,t,i,n,o){let s=this._tokens,a=this._tokenCount,l=n-t,c=0,d=!1;for(let h=0;h<a;h++){let u=4*h,m=s[u],p=s[u+1],_=s[u+2],v=s[u+3];if(m<t||m===t&&_<=i){c++;continue}else if(m===t&&p<i)m===n&&_>o?_-=o-i:_=i;else if(m===t&&p===i)if(m===n&&_>o)_-=o-i;else{d=!0;continue}else if(m<n||m===n&&p<o)if(m===n&&_>o)m===t?(p=i,_=p+(_-o)):(p=0,_=p+(_-o));else{d=!0;continue}else if(m>n){if(l===0&&!d){c=a;break}m-=l}else if(m===n&&p>=o)e&&m===0&&(p+=e,_+=e),m-=l,p-=o-i,_-=o-i;else throw new Error("Not possible!");let C=4*c;s[C]=m,s[C+1]=p,s[C+2]=_,s[C+3]=v,c++}this._tokenCount=c}acceptInsertText(e,t,i,n,o,s){let a=i===0&&n===1&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){let h=4*d,u=l[h],m=l[h+1],p=l[h+2];if(!(u<e||u===e&&p<t)){if(u===e&&p===t)if(a)p+=1;else continue;else if(u===e&&m<t&&t<p)i===0?p+=n:p=t;else{if(u===e&&m===t&&a)continue;if(u===e)if(u+=i,i===0)m+=n,p+=n;else{let _=p-m;m=o+(m-t),p=m+_}else u+=i}l[h]=u,l[h+1]=m,l[h+2]=p}}}},GN=class{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}},k_=class{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){let e=this.tokens.getRange();return e&&new L(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){let t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){let t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber,[n,o,s]=this.tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new k_(this.startLineNumber,n),new k_(this.startLineNumber+s,o)]}applyEdit(e,t){let[i,n,o]=Td(t);this.acceptEdit(e,i,n,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,o){this._acceptDeleteRange(e),this._acceptInsertText(new V(e.startLineNumber,e.startColumn),t,i,n,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this.startLineNumber,i=e.endLineNumber-this.startLineNumber;if(i<0){let o=i-t;this.startLineNumber-=o;return}let n=this.tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){let o=-t;this.startLineNumber-=o,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,o){if(t===0&&i===0)return;let s=e.lineNumber-this.startLineNumber;if(s<0){this.startLineNumber+=t;return}let a=this.tokens.getMaxDeltaLine();s>=a+1||this.tokens.acceptInsertText(s,e.column-1,t,i,n,o)}},hz=class{constructor(e,t){this.startLineNumber=e,this.tokens=t}};function Rd(r){return r instanceof Uint32Array?r:new Uint32Array(r)}var py=class{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){let o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;i=e.plusRange(o).plusRange(s)}let n=null;for(let o=0,s=this._pieces.length;o<s;o++){let a=this._pieces[o];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:o};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:o};continue}let[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,s++,n=n||{index:o})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=au(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSemanticTokens(e,t){let i=this._pieces;if(i.length===0)return t;let n=py._findFirstPieceWithLine(i,e),o=i[n].getLineTokens(e);if(!o)return t;let s=t.getCount(),a=o.getCount(),l=0,c=[],d=0,h=0,u=(m,p)=>{m!==h&&(h=m,c[d++]=m,c[d++]=p)};for(let m=0;m<a;m++){let p=o.getStartCharacter(m),_=o.getEndCharacter(m),v=o.getMetadata(m),C=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?8372224:0)|(v&16?4286578688:0))>>>0,w=~C>>>0;for(;l<s&&t.getEndOffset(l)<=p;)u(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<p&&u(p,t.getMetadata(l));l<s&&t.getEndOffset(l)<_;)u(t.getEndOffset(l),t.getMetadata(l)&w|v&C),l++;if(l<s)u(_,t.getMetadata(l)&w|v&C),t.getEndOffset(l)===_&&l++;else{let S=Math.min(Math.max(0,l-1),s-1);u(_,t.getMetadata(S)&w|v&C)}}for(;l<s;)u(t.getEndOffset(l),t.getMetadata(l)),l++;return new Vi(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let o=i+Math.floor((n-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)n=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,n,o){for(let s of this._pieces)s.acceptEdit(e,t,i,n,o)}},Vo=class{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==Nd)return new Vi(Rd(n),i,this._languageIdCodec);let o=new Uint32Array(2);return o[0]=i.length,o[1]=dz(this._languageIdCodec.encodeLanguageId(e)),new Vi(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){let n=i?Rd(i):null;if(t===0){let o=!1;if(n&&n.length>1&&(o=dr.getLanguageId(n[1])!==e),!o)return Nd}if(!n||n.length===0){let o=new Uint32Array(2);return o[0]=t,o[1]=dz(e),o.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=au(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,o){let s=Vo._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,o?!Vo._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let i=Rd(e),n=Rd(t);if(i.length!==n.length)return!1;for(let o=0,s=i.length;o<s;o++)if(i[o]!==n[o])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new V(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Vo._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Vo._deleteEnding(this._lineTokens[t],e.startColumn-1);let i=e.endLineNumber-1,n=null;i<this._len&&(n=Vo._deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=Vo._append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;let n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=Vo._insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=Vo._deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=Vo._insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Nd?e:Vo._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Nd)return e;let i=Rd(e),n=i[i.length-2];return Vo._delete(e,t,n)}static _delete(e,t,i){if(e===null||e===Nd||t===i)return e;let n=Rd(e),o=n.length>>>1;if(t===0&&n[n.length-2]===i)return Nd;let s=Vi.findIndexInTokensArray(n,t),a=s>0?n[s-1<<1]:0,l=n[s<<1];if(i<l){let m=i-t;for(let p=s;p<o;p++)n[p<<1]-=m;return e}let c,d;a!==t?(n[s<<1]=t,c=s+1<<1,d=t):(c=s<<1,d=a);let h=i-t;for(let m=s+1;m<o;m++){let p=n[m<<1]-h;p>d&&(n[c++]=p,n[c++]=n[(m<<1)+1],d=p)}if(c===n.length)return e;let u=new Uint32Array(c);return u.set(n.subarray(0,c),0),u.buffer}static _append(e,t){if(t===Nd)return e;if(e===Nd)return t;if(e===null)return e;if(t===null)return null;let i=Rd(e),n=Rd(t),o=n.length>>>1,s=new Uint32Array(i.length+n.length);s.set(i,0);let a=i.length,l=i[i.length-2];for(let c=0;c<o;c++)s[a++]=n[c<<1]+l,s[a++]=n[(c<<1)+1];return s.buffer}static _insert(e,t,i){if(e===null||e===Nd)return e;let n=Rd(e),o=n.length>>>1,s=Vi.findIndexInTokensArray(n,t);s>0&&n[s-1<<1]===t&&s--;for(let a=s;a<o;a++)n[a<<1]+=i;return e}};var Pd=class extends H{constructor(e,t,i,n,o,s,a){super();this._onDidChangeContent=this._register(new M),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._pieceTree=new ZN(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let i=e+t,n=this.getPositionAt(e),o=this.getPositionAt(i);return new L(n.lineNumber,n.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let i=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-i}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0,n=e.startLineNumber,o=e.endLineNumber;for(let s=n;s<=o;s++){let a=this.getLineContent(s),l=s===n?e.startColumn-1:0,c=s===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)ki(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(o-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){let t=Wi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Lr(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let _=0;_<e.length;_++){let v=e[_];a&&v._isTracked&&(a=!1);let C=v.range;if(v.text){let A=!0;s||(A=!jp(v.text),s=A),!n&&A&&(n=tu(v.text)),!o&&A&&(o=ax(v.text))}let w="",S=0,D=0,I=0;if(v.text){let A;[S,D,I,A]=Td(v.text);let O=this.getEOL();A===0||A===(O===`\r
`?2:1)?w=v.text:w=v.text.replace(/\r\n|\r|\n/g,O)}l[_]={sortIndex:_,identifier:v.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:w,eolCount:S,firstLineLength:D,lastLineLength:I,forceMoveMarkers:Boolean(v.forceMoveMarkers),isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(Pd._sortOpsAscending);let c=!1;for(let _=0,v=l.length-1;_<v;_++){let C=l[_].range.getEndPosition(),w=l[_+1].range.getStartPosition();if(w.isBeforeOrEqual(C)){if(w.isBefore(C))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let d=i||t?Pd._getInverseEditRanges(l):[],h=[];if(t)for(let _=0;_<l.length;_++){let v=l[_],C=d[_];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let w=C.startLineNumber;w<=C.endLineNumber;w++){let S="";w===C.startLineNumber&&(S=this.getLineContent(v.range.startLineNumber),Wi(S)!==-1)||h.push({lineNumber:w,oldContent:S})}}let u=null;if(i){let _=0;u=[];for(let v=0;v<l.length;v++){let C=l[v],w=d[v],S=this.getValueInRange(C.range),D=C.rangeOffset+_;_+=C.text.length-S.length,u[v]={sortIndex:C.sortIndex,identifier:C.identifier,range:w,text:S,textChange:new Sn(C.rangeOffset,S,D,C.text)}}c||u.sort((v,C)=>v.sortIndex-C.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;let m=this._doApplyEdits(l),p=null;if(t&&h.length>0){h.sort((_,v)=>v.lineNumber-_.lineNumber),p=[];for(let _=0,v=h.length;_<v;_++){let C=h[_].lineNumber;if(_>0&&h[_-1].lineNumber===C)continue;let w=h[_].oldContent,S=this.getLineContent(C);S.length===0||S===w||Wi(S)!==-1||p.push(C)}}return this._onDidChangeContent.fire(),new rT(u,m,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,i=e[0].range,n=e[e.length-1].range,o=new L(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn),s=i.startLineNumber,a=i.startColumn,l=[];for(let m=0,p=e.length;m<p;m++){let _=e[m],v=_.range;t=t||_.forceMoveMarkers,l.push(this.getValueInRange(new L(s,a,v.startLineNumber,v.startColumn))),_.text.length>0&&l.push(_.text),s=v.endLineNumber,a=v.endColumn}let c=l.join(""),[d,h,u]=Td(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:h,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Pd._sortOpsDescending);let t=[];for(let i=0;i<e.length;i++){let n=e[i],o=n.range.startLineNumber,s=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(o===a&&s===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);let c=new L(o,s,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){let t=[],i=0,n=0,o=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=i,d=n+(l.range.startColumn-o.range.endColumn)):(c=i+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){let u=l.eolCount+1;u===1?h=new L(c,d,c,d+l.firstLineLength):h=new L(c,d,c+u-1,l.lastLineLength+1)}else h=new L(c,d,c,d);i=h.endLineNumber,n=h.endColumn,t.push(h),o=l}return t}static _sortOpsAscending(e,t){let i=L.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){let i=L.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}};var uz=class{constructor(e,t,i,n,o,s,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=o,this._containsRTL=s,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){let t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=i.length;o<s;o++){let a=i[o].buffer.replace(/\r\n|\r|\n/g,t),l=uc(a);i[o]=new Od(a,l)}let n=new Pd(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}},XN=class{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Mp(e)&&(this.BOM=VW,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=az(this._tmpLineStarts,e);this.chunks.push(new Od(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=tu(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=ax(e))}finish(e=!0){return this._finish(),new uz(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=uc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var QN=class{constructor(){this.changeType=1}},wo=class{constructor(e,t,i,n,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(let o of t)i+=e.substring(n,o.column-1),n=o.column-1,i+=o.options.content;return i+=e.substring(n),i}static fromDecorations(e){let t=[];for(let i of e)i.options.before&&i.options.before.content.length>0&&t.push(new wo(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new wo(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}},_E=class{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}},JN=class{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}},eR=class{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}},tR=class{constructor(){this.changeType=5}},mc=class{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let i=[].concat(e.changes).concat(t.changes),n=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new mc(i,n,o,s)}},_y=class{constructor(e){this.changes=e}},I_=class{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){let t=mc.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=I_._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new I_(t,i)}static _mergeChangeEvents(e,t){let i=[].concat(e.changes).concat(t.changes),n=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:i,eol:n,versionId:o,isUndoing:s,isRedoing:a,isFlush:l}}};var mz=class{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let i=[],n=[];for(let o=0;o<t;o++)i[o]=null,n[o]=!1;this._beginState=au(this._beginState,e,i),this._valid=au(this._valid,e,n),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,i){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;let n=this.getBeginState(t+1);if(n===null||!i.equals(n)){this._setBeginState(t+1,i),this._invalidateLine(t+1);return}let o=t+1;for(;o<e&&this._isValid(o);)o++;this._invalidLineStartIndex=o}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){let i=e.endLineNumber-e.startLineNumber,o=Math.min(i,t);for(let s=o;s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new V(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}},iR=class extends H{constructor(e,t){super();this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new mz,this._tokenizationSupport=null,this._register(ti.onDidChange(i=>{let n=this._textModel.getLanguageId();i.changedLanguages.indexOf(n)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(i=>{if(i.isFlush){this._resetTokenizationState();return}for(let n=0,o=i.changes.length;n<o;n++){let s=i.changes[n],[a]=Td(s.text);this._tokenizationStateStore.applyEdits(s.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){let[e,t]=Xse(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&Gv(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){let e=this._textModel.getLineCount(),t=1,i=new gy,n=or.create(!1),o=-1;for(;this._hasLinesToTokenize()&&!(n.elapsed()>t||(o=this._tokenizeOneInvalidLine(i),o>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){let i=new gy;this._tokenizeViewport(i,e,t),this._textModel.setTokens(i.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){let t=new gy;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;let t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;let i=this._textModel.getLanguageId(),n=this._textModel.getLineCount(),o=t-1;for(let s=this._tokenizationStateStore.invalidLineStartIndex;s<=o;s++){let a=this._textModel.getLineContent(s+1),l=this._tokenizationStateStore.getBeginState(s),c=nR(this._languageIdCodec,i,this._tokenizationSupport,a,!0,l);e.add(s+1,c.tokens),this._tokenizationStateStore.setEndState(n,s,c.endState),s=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,i){if(!this._tokenizationSupport||i<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,i);return}let n=this._textModel.getLineFirstNonWhitespaceColumn(t),o=[],s=null;for(let c=t-1;n>1&&c>=1;c--){let d=this._textModel.getLineFirstNonWhitespaceColumn(c);if(d!==0&&d<n){if(s=this._tokenizationStateStore.getBeginState(c-1),s)break;o.push(this._textModel.getLineContent(c)),n=d}}s||(s=this._tokenizationSupport.getInitialState());let a=this._textModel.getLanguageId(),l=s;for(let c=o.length-1;c>=0;c--)l=nR(this._languageIdCodec,a,this._tokenizationSupport,o[c],!1,l).endState;for(let c=t;c<=i;c++){let d=this._textModel.getLineContent(c),h=nR(this._languageIdCodec,a,this._tokenizationSupport,d,!0,l);e.add(c,h.tokens),this._tokenizationStateStore.setFakeTokens(c-1),l=h.endState}}};function Xse(r){let e=r.getLanguageId(),t=r.isTooLargeForTokenization()?null:ti.get(e),i=null;if(t)try{i=t.getInitialState()}catch(n){we(n),t=null}return[t,i]}function nR(r,e,t,i,n,o){let s=null;if(t)try{s=t.tokenize2(i,n,o.clone(),0)}catch(a){we(a)}return s||(s=vx(r.encodeLanguageId(e),i,o,0)),Vi.convertToEndOffset(s.tokens,i.length),s}function pu(r,e){let t=Math.pow(10,e);return Math.round(r*t)/t}var ct=class{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=pu(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},La=class{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pu(Math.max(Math.min(1,t),0),3),this.l=pu(Math.max(Math.min(1,i),0),3),this.a=pu(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,i=e.g/255,n=e.b/255,o=e.a,s=Math.max(t,i,n),a=Math.min(t,i,n),l=0,c=0,d=(a+s)/2,h=s-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),s){case t:l=(i-n)/h+(i<n?6:0);break;case i:l=(n-t)/h+2;break;case n:l=(t-i)/h+4;break}l*=60,l=Math.round(l)}return new La(l,c,d,o)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){let t=e.h/360,{s:i,l:n,a:o}=e,s,a,l;if(i===0)s=a=l=n;else{let c=n<.5?n*(1+i):n+i-n*i,d=2*n-c;s=La._hue2rgb(d,c,t+1/3),a=La._hue2rgb(d,c,t),l=La._hue2rgb(d,c,t-1/3)}return new ct(Math.round(s*255),Math.round(a*255),Math.round(l*255),o)}},ka=class{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=pu(Math.max(Math.min(1,t),0),3),this.v=pu(Math.max(Math.min(1,i),0),3),this.a=pu(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,i=e.g/255,n=e.b/255,o=Math.max(t,i,n),s=Math.min(t,i,n),a=o-s,l=o===0?0:a/o,c;return a===0?c=0:o===t?c=((i-n)/a%6+6)%6:o===i?c=(n-t)/a+2:c=(t-i)/a+4,new ka(Math.round(c*60),l,o,e.a)}static toRGBA(e){let{h:t,s:i,v:n,a:o}=e,s=n*i,a=s*(1-Math.abs(t/60%2-1)),l=n-s,[c,d,h]=[0,0,0];return t<60?(c=s,d=a):t<120?(c=a,d=s):t<180?(d=s,h=a):t<240?(d=a,h=s):t<300?(c=a,h=s):t<=360&&(c=s,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new ct(c,d,h,o)}},q=class{constructor(e){if(e)if(e instanceof ct)this.rgba=e;else if(e instanceof La)this._hsla=e,this.rgba=La.toRGBA(e);else if(e instanceof ka)this._hsva=e,this.rgba=ka.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return q.Format.CSS.parseHex(e)||q.red}get hsla(){return this._hsla?this._hsla:La.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:ka.fromRGBA(this.rgba)}equals(e){return!!e&&ct.equals(this.rgba,e.rgba)&&La.equals(this.hsla,e.hsla)&&ka.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=q._relativeLuminanceForComponent(this.rgba.r),t=q._relativeLuminanceForComponent(this.rgba.g),i=q._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return pu(n,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){let t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new q(new La(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new q(new La(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:i,b:n,a:o}=this.rgba;return new q(new ct(t,i,n,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new q(new ct(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=q.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;let n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-n)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;let n=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(n-o)/n,e.darken(i)}};q.white=new q(new ct(255,255,255,1));q.black=new q(new ct(0,0,0,1));q.red=new q(new ct(255,0,0,1));q.blue=new q(new ct(0,0,255,1));q.cyan=new q(new ct(0,255,255,1));q.lightgrey=new q(new ct(211,211,211,1));q.transparent=new q(new ct(0,0,0,0));(function(r){let e;(function(t){let i;(function(n){function o(_){return _.rgba.a===1?`rgb(${_.rgba.r}, ${_.rgba.g}, ${_.rgba.b})`:r.Format.CSS.formatRGBA(_)}n.formatRGB=o;function s(_){return`rgba(${_.rgba.r}, ${_.rgba.g}, ${_.rgba.b}, ${+_.rgba.a.toFixed(2)})`}n.formatRGBA=s;function a(_){return _.hsla.a===1?`hsl(${_.hsla.h}, ${(_.hsla.s*100).toFixed(2)}%, ${(_.hsla.l*100).toFixed(2)}%)`:r.Format.CSS.formatHSLA(_)}n.formatHSL=a;function l(_){return`hsla(${_.hsla.h}, ${(_.hsla.s*100).toFixed(2)}%, ${(_.hsla.l*100).toFixed(2)}%, ${_.hsla.a.toFixed(2)})`}n.formatHSLA=l;function c(_){let v=_.toString(16);return v.length!==2?"0"+v:v}function d(_){return`#${c(_.rgba.r)}${c(_.rgba.g)}${c(_.rgba.b)}`}n.formatHex=d;function h(_,v=!1){return v&&_.rgba.a===1?r.Format.CSS.formatHex(_):`#${c(_.rgba.r)}${c(_.rgba.g)}${c(_.rgba.b)}${c(Math.round(_.rgba.a*255))}`}n.formatHexA=h;function u(_){return _.isOpaque()?r.Format.CSS.formatHex(_):r.Format.CSS.formatRGBA(_)}n.format=u;function m(_){let v=_.length;if(v===0||_.charCodeAt(0)!==35)return null;if(v===7){let C=16*p(_.charCodeAt(1))+p(_.charCodeAt(2)),w=16*p(_.charCodeAt(3))+p(_.charCodeAt(4)),S=16*p(_.charCodeAt(5))+p(_.charCodeAt(6));return new r(new ct(C,w,S,1))}if(v===9){let C=16*p(_.charCodeAt(1))+p(_.charCodeAt(2)),w=16*p(_.charCodeAt(3))+p(_.charCodeAt(4)),S=16*p(_.charCodeAt(5))+p(_.charCodeAt(6)),D=16*p(_.charCodeAt(7))+p(_.charCodeAt(8));return new r(new ct(C,w,S,D/255))}if(v===4){let C=p(_.charCodeAt(1)),w=p(_.charCodeAt(2)),S=p(_.charCodeAt(3));return new r(new ct(16*C+C,16*w+w,16*S+S))}if(v===5){let C=p(_.charCodeAt(1)),w=p(_.charCodeAt(2)),S=p(_.charCodeAt(3)),D=p(_.charCodeAt(4));return new r(new ct(16*C+C,16*w+w,16*S+S,(16*D+D)/255))}return null}n.parseHex=m;function p(_){switch(_){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(i=t.CSS||(t.CSS={}))})(e=r.Format||(r.Format={}))})(q||(q={}));var fc=Ie("undoRedoService"),bE=class{constructor(e,t){this.resource=e,this.elements=t}},_u=class{constructor(){this.id=_u._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};_u._ID=0;_u.None=new _u;var Ia=class{constructor(){this.id=Ia._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Ia._ID=0;Ia.None=new Ia;var vE=class{constructor(e,t,i){this.range=e,this.nestingLevel=t,this.isInvalid=i}},fz=class{constructor(e,t,i,n){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n}},rR=class extends fz{constructor(e,t,i,n,o){super(e,t,i,n);this.minVisibleColumnIndentation=o}};var gz=class{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}};function pz(r,e,t,i){return r!==t?Ei(t-r,i):Ei(0,i-e)}var Us=0;function _z(r){return r===0}var fs=Math.pow(2,26);function Ei(r,e){return r*fs+e}function _l(r){let e=r,t=Math.floor(e/fs),i=e-t*fs;return new gz(t,i)}function bz(r){return Math.floor(r/fs)}function oR(r){return r}function sn(r,e){return e<fs?r+e:r-r%fs+e}function vz(r,e){let t=r,i=e;if(i-t<=0)return Us;let o=Math.floor(t/fs),s=Math.floor(i/fs),a=i-s*fs;if(o===s){let l=t-o*fs;return Ei(0,a-l)}else return Ei(s-o,a)}function O_(r,e){return r<e}function Ad(r,e){return r<=e}function by(r,e){return r>=e}function vy(r){return Ei(r.lineNumber-1,r.column-1)}function T_(r,e){let t=r,i=Math.floor(t/fs),n=t-i*fs,o=e,s=Math.floor(o/fs),a=o-s*fs;return new L(i+1,n+1,s+1,a+1)}function wz(r){let e=sr(r);return Ei(e.length-1,e[e.length-1].length)}function yz(r){return r}var wE=class{constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}},sR=class{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(i=>yE.from(i))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):this.documentLength;return vz(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Ei(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Ei(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=_l(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Ei(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Ei(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Ad(i,e)){this.nextEditIdx++;let n=_l(i),o=_l(this.translateOldToCur(t.endOffsetBeforeObj)),s=n.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},yE=class{constructor(e,t,i){this.endOffsetBeforeObj=_l(t),this.endOffsetAfterObj=_l(sn(e,i)),this.offsetObj=_l(e)}static from(e){return new yE(e.startOffset,e.endOffset,e.newLength)}};var _t=class{static visibleColumnFromColumn(e,t,i){let n=e.length,o=t-1<n?t-1:n,s=0,a=0;for(;a<o;){let l=rl(e,o,a);if(a+=l>=65536?2:1,l===9)s=_t.nextRenderTabStop(s,i);else{let c=$m(l);for(;a<o;){let d=rl(e,o,a),h=$m(d);if(Fp(c,h))break;a+=d>=65536?2:1,c=h}uo(l)||Hm(l)?s=s+2:s=s+1}}return s}static visibleColumnsByColumns(e,t){let i=e.length,n=new Array;n.push(-1);let o=0,s=0;for(;s<i;){let a=rl(e,i,s);if(s+=a>=65536?2:1,n.push(o),a>=65536&&n.push(o),a===9)o=_t.nextRenderTabStop(o,t);else{let l=$m(a);for(;s<i;){let c=rl(e,i,s),d=$m(c);if(Fp(l,d))break;s+=c>=65536?2:1,n.push(o),a>=65536&&n.push(o),l=d}uo(a)||Hm(a)?o=o+2:o=o+1}}return n.push(o),n}static visibleColumnFromColumn2(e,t,i){return this.visibleColumnFromColumn(t.getLineContent(i.lineNumber),i.column,e.tabSize)}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;let n=e.length,o=0,s=1,a=0;for(;a<n;){let l=rl(e,n,a);a+=l>=65536?2:1;let c;if(l===9)c=_t.nextRenderTabStop(o,i);else{let h=$m(l);for(;a<n;){let u=rl(e,n,a),m=$m(u);if(Fp(h,m))break;a+=u>=65536?2:1,h=m}uo(l)||Hm(l)?c=o+2:c=o+1}let d=a+1;if(c>=t){let h=t-o;return c-t<h?d:s}o=c,s=d}return n+1}static columnFromVisibleColumn2(e,t,i,n){let o=this.columnFromVisibleColumn(t.getLineContent(i),n,e.tabSize),s=t.getLineMinColumn(i);if(o<s)return s;let a=t.getLineMaxColumn(i);return o>a?a:o}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};var CE=new Array,Ri=class{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let i=Ri.cache[e];return i||(i=new Ri(e,t),Ri.cache[e]=i),i}return new Ri(e,t)}static getEmpty(){return this.empty}add(e,t){let i=t.getKey(e),n=i>>5;if(n===0){let s=1<<i|this.items;return s===this.items?this:Ri.create(s,this.additionalItems)}n--;let o=this.additionalItems.slice(0);for(;o.length<n;)o.push(0);return o[n]|=1<<(i&31),Ri.create(this.items,o)}merge(e){let t=this.items|e.items;if(this.additionalItems===CE&&e.additionalItems===CE)return t===this.items?this:t===e.items?e:Ri.create(t,CE);let i=new Array;for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){let o=this.additionalItems[n]||0,s=e.additionalItems[n]||0;i.push(o|s)}return Ri.create(t,i)}intersects(e){if((this.items&e.items)!=0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!=0)return!0;return!1}};Ri.cache=new Array(129);Ri.empty=Ri.create(0,CE);var aR={getKey(r){return r}},lR=class{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}};var SE=class{constructor(e){this._length=e}get length(){return this._length}},Df=class extends SE{constructor(e,t,i,n,o){super(e);this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=o}static create(e,t,i){let n=e.length;return t&&(n=sn(n,t.length)),i&&(n=sn(n,i.length)),new Df(n,e,t,i,t?t.missingOpeningBracketIds:Ri.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Df(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(sn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}},Vs=class extends SE{constructor(e,t,i){super(e);this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}static create23(e,t,i,n=!1){let o=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=sn(o,t.length),s=s.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");o=sn(o,i.length),s=s.merge(i.missingOpeningBracketIds)}return n?new Cz(o,e.listHeight+1,e,t,i,s):new N_(o,e.listHeight+1,e,t,i,s)}static getEmpty(){return new Sz(Us,0,[],Ri.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let e=this.childrenLength;if(e===0)return;let t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,i;for(;t.kind===4&&(i=t.childrenLength)>0;)t=t.getChild(i-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();let e=this.childrenLength,t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){let o=this.getChild(n);t=sn(t,o.length),i=i.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let o=0;o<this.childrenLength;o++){let s=this.getChild(o);s&&(i=Math.min(i,s.computeMinIndentation(n,t)),n=sn(n,s.length))}return this.cachedMinIndentation=i,i}},N_=class extends Vs{constructor(e,t,i,n,o,s){super(e,t,s);this._item1=i,this._item2=n,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new N_(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}},Cz=class extends N_{toMutable(){return new N_(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},wy=class extends Vs{constructor(e,t,i,n){super(e,t,n);this._children=i}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){let e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new wy(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}},Sz=class extends wy{toMutable(){return new wy(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},Qse=[],xE=class extends SE{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return Qse}deepClone(){return this}},bu=class extends xE{get kind(){return 0}get missingOpeningBracketIds(){return Ri.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let i=_l(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,o=bz(sn(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=n;a<=o;a++){let l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;let d=_t.visibleColumnFromColumn(c,l,t.getOptions().tabSize);s=Math.min(s,d)}return s}},jd=class extends xE{constructor(e){super(e)}static create(e){let t=yz(e),i=jd.cacheByLength.get(t);if(i)return i;let n=new jd(e);return jd.cacheByLength.set(t,n),n}get kind(){return 1}get missingOpeningBracketIds(){return Ri.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};jd.cacheByLength=new Map;var cR=class extends xE{constructor(e,t){super(t);this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var gc=class{constructor(e,t,i,n,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=o}},dR=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new xz(this.textModel,this.bracketTokens),this._offset=Us,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Ei(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=sn(this._offset,e);let t=_l(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=sn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},xz=class{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=oR(o.length),o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,i=0;for(;;){let o=this.lineTokens,s=o.getCount(),a=null;if(this.lineTokenOffset<s){let l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let c=dr.getTokenType(l)===0,d=o.getEndOffset(this.lineTokenOffset);if(c&&d!==this.lineCharOffset){let h=o.getLanguageId(this.lineTokenOffset),u=this.line.substring(this.lineCharOffset,d),m=this.bracketTokens.getSingleLanguageBracketTokens(h),p=m.regExpGlobal;if(p){p.lastIndex=0;let _=p.exec(u);_&&(a=m.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(i+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=oR(a.length),a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}let n=pz(e,t,this.lineIdx,this.lineCharOffset);return new gc(n,0,-1,Ri.getEmpty(),new bu(n))}},hR=class{constructor(e,t){this.text=e,this._offset=Us,this.idx=0;let n=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,o=[],s,a=0,l=0,c=0,d=0,h=new Array;for(let p=0;p<60;p++)h.push(new gc(Ei(0,p),0,-1,Ri.getEmpty(),new bu(Ei(0,p))));let u=new Array;for(let p=0;p<60;p++)u.push(new gc(Ei(1,p),0,-1,Ri.getEmpty(),new bu(Ei(1,p))));if(n)for(n.lastIndex=0;(s=n.exec(e))!==null;){let p=s.index,_=s[0];if(_===`
`)a++,l=p+1;else{if(c!==p){let v;if(d===a){let C=p-c;if(C<h.length)v=h[C];else{let w=Ei(0,C);v=new gc(w,0,-1,Ri.getEmpty(),new bu(w))}}else{let C=a-d,w=p-l;if(C===1&&w<u.length)v=u[w];else{let S=Ei(C,w);v=new gc(S,0,-1,Ri.getEmpty(),new bu(S))}}o.push(v)}o.push(t.getToken(_)),c=p+_.length,d=a}}let m=e.length;if(c!==m){let p=d===a?Ei(0,m-c):Ei(a-d,m-l);o.push(new gc(p,0,-1,Ri.getEmpty(),new bu(p)))}this.length=Ei(a,m-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new yO}};var yy=class{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function i(l,c){return t.getKey(`${l}:::${c}`)}let n=e.characterPair.getColorizedBrackets(),o=new Map,s=new Set;for(let[l,c]of n){s.add(l);let d=o.get(c),h=i(e.languageId,l);d||(d={openingBrackets:Ri.getEmpty(),first:h},o.set(c,d)),d.openingBrackets=d.openingBrackets.add(h,aR)}let a=new Map;for(let[l,c]of o){let d=Ei(0,l.length);a.set(l,new gc(d,2,c.first,c.openingBrackets,jd.create(d)))}for(let l of s){let c=Ei(0,l.length),d=i(e.languageId,l);a.set(l,new gc(c,1,d,Ri.getEmpty().add(d,aR),jd.create(c)))}return new yy(a)}getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Jse(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}};function Jse(r){let e=Xn(r);return/^[\w ]+$/.test(r)?`\\b${e}\\b`:e}var uR=class{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){let t=this.languageIdToBracketTokens.get(e);if(!t)return!1;let i=yy.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==i}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=yy.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}};function Ez(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;let s=e,a=r[s].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-s>=2?mR(s===0&&e===r.length?r:r.slice(s,e),!1):r[s]}let i=t(),n=t();if(!n)return i;for(let s=t();s;s=t())Dz(i,n)<=Dz(n,s)?(i=fR(i,n),n=s):n=fR(n,s);return fR(i,n)}function mR(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){let i=t>>1;for(let n=0;n<i;n++){let o=n<<1;r[n]=Vs.create23(r[o],r[o+1],o+3===t?r[o+2]:null,e)}t=i}return Vs.create23(r[0],r[1],t>=3?r[2]:null,e)}function Dz(r,e){return Math.abs(r.listHeight-e.listHeight)}function fR(r,e){return r.listHeight===e.listHeight?Vs.create23(r,e,null,!1):r.listHeight>e.listHeight?eae(r,e):tae(e,r)}function eae(r,e){r=r.toMutable();let t=r,i=new Array,n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let o=i.length-1;o>=0;o--){let s=i[o];n?s.childrenLength>=3?n=Vs.create23(s.unappendChild(),n,null,!1):(s.appendChildOfSameHeight(n),n=void 0):s.handleChildrenChanged()}return n?Vs.create23(r,n,null,!1):r}function tae(r,e){r=r.toMutable();let t=r,i=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let o=i.length-1;o>=0;o--){let s=i[o];n?s.childrenLength>=3?n=Vs.create23(n,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(n),n=void 0):s.handleChildrenChanged()}return n?Vs.create23(n,r,null,!1):r}var gR=class{constructor(e){this.lastOffset=Us,this.nextNodes=[e],this.offsets=[Us],this.idxs=[]}readLongestNodeAt(e,t){if(O_(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let i=Cy(this.nextNodes);if(!i)return;let n=Cy(this.offsets);if(O_(e,n))return;if(O_(n,e))if(sn(n,i.length)<=e)this.nextNodeAfterCurrent();else{let o=pR(i);o!==-1?(this.nextNodes.push(i.getChild(o)),this.offsets.push(n),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{let o=pR(i);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(o)),this.offsets.push(n),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){let e=Cy(this.offsets),t=Cy(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let i=Cy(this.nextNodes),n=pR(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(sn(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}};function pR(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function Cy(r){return r.length>0?r[r.length-1]:void 0}function _R(r,e,t,i){return new Lz(r,e,t,i).parseDocument()}var Lz=class{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new gR(i):void 0,this.positionMapper=new sR(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ri.getEmpty());return e||(e=Vs.getEmpty()),e}parseList(e){let t=new Array;for(;;){let n=this.tokenizer.peek();if(!n||n.kind===2&&n.bracketIds.intersects(e))break;let o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?Ez(t):mR(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){let i=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!_z(i)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>O_(o.length,i)?o.canBeReused(e):!1);if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}this._itemsConstructed++;let t=this.tokenizer.read();switch(t.kind){case 2:return new cR(t.bracketIds,t.length);case 0:return t.astNode;case 1:let i=e.merge(t.bracketIds),n=this.parseList(i),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Df.create(t.astNode,n,o.astNode)):Df.create(t.astNode,n,null);default:throw new Error("unexpected")}}};var bR=class extends H{constructor(e,t){super();this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new Mi),this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(i=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(i=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(i=>{var n;(!i.languageId||((n=this.cache.value)===null||n===void 0?void 0:n.object.didLanguageChange(i.languageId)))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){let e=5e4*100;return this.textModel.getValueLength()<=e}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){let e=new G;this.cache.value=iae(e.add(new kz(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.cache.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}};function iae(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}var kz=class extends H{constructor(e,t){super();if(this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new M,this.denseKeyProvider=new lR,this.brackets=new uR(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){let i=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,i||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:i})=>{let n=i.map(o=>new wE(Ei(o.fromLineNumber-1,0),Ei(o.toLineNumber,0),Ei(o.toLineNumber-o.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(n,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){let i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new hR(this.textModel.getValue(),i);this.initialAstWithoutTokens=_R(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){let t=e.changes.map(i=>{let n=L.lift(i.range);return new wE(vy(n.getStartPosition()),vy(n.getEndPosition()),wz(i.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,i){let o=!1?t==null?void 0:t.deepClone():t,s=new dR(this.textModel,this.brackets);return _R(s,e,o,i)}getBracketsInRange(e){let t=Ei(e.startLineNumber-1,e.startColumn-1),i=Ei(e.endLineNumber-1,e.endColumn-1),n=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return Sy(o,Us,o.length,t,i,n),n}getBracketPairsInRange(e,t){let i=new Array,n=vy(e.getStartPosition()),o=vy(e.getEndPosition()),s=this.initialAstWithoutTokens||this.astWithTokens,a=new Iz(i,t,this.textModel);return Oz(s,Us,s.length,n,o,a),i}};function Sy(r,e,t,i,n,o,s=0){if(r.kind===1){let a=T_(e,t);o.push(new vE(a,s-1,!1))}else if(r.kind===3){let a=T_(e,t);o.push(new vE(a,s-1,!0))}else if(r.kind===4)for(let a of r.children)t=sn(e,a.length),Ad(e,n)&&by(t,i)&&Sy(a,e,t,i,n,o,s),e=t;else if(r.kind===2){s++;{let a=r.openingBracket;t=sn(e,a.length),Ad(e,n)&&by(t,i)&&Sy(a,e,t,i,n,o,s),e=t}if(r.child){let a=r.child;t=sn(e,a.length),Ad(e,n)&&by(t,i)&&Sy(a,e,t,i,n,o,s),e=t}if(r.closingBracket){let a=r.closingBracket;t=sn(e,a.length),Ad(e,n)&&by(t,i)&&Sy(a,e,t,i,n,o,s),e=t}}}var Iz=class{constructor(e,t,i){this.result=e,this.includeMinIndentation=t,this.textModel=i}};function Oz(r,e,t,i,n,o,s=0){var a;if(r.kind===2){let c=sn(e,r.openingBracket.length),d=-1;o.includeMinIndentation&&(d=r.computeMinIndentation(e,o.textModel)),o.result.push(new rR(T_(e,t),T_(e,c),r.closingBracket?T_(sn(c,((a=r.child)===null||a===void 0?void 0:a.length)||Us),t):void 0,s,d)),s++}let l=e;for(let c of r.children){let d=l;l=sn(l,c.length),Ad(d,n)&&Ad(i,l)&&Oz(c,d,l,i,n,o,s)}}var vR={ColorContribution:"base.contributions.colors"},Tz=class{constructor(){this._onDidChangeSchema=new M,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,o){let s={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){let i=this.colorsById[e];if(i&&i.defaults){let n=i.defaults[t.type];return Cc(n,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,i)=>{let n=t.indexOf(".")===-1?0:1,o=i.indexOf(".")===-1?0:1;return n!==o?n-o:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},EE=new Tz;ii.add(vR.ColorContribution,EE);function z(r,e,t,i,n){return EE.registerColor(r,e,t,i,n)}var Pe=z("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},g("foreground","Overall foreground color. This color is only used if not overridden by a component.")),Nz=z("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},g("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),DE=z("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},g("iconForeground","The default color for icons in the workbench.")),pc=z("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},g("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ci=z("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},g("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),an=z("contrastActiveBorder",{light:null,dark:null,hc:pc},g("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),_c=z("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},g("textLinkForeground","Foreground color for links in text.")),bc=z("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},g("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),R_=z("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:q.black},g("textCodeBlockBackground","Background color for code blocks in text.")),Oa=z("widget.shadow",{dark:si(q.black,.36),light:si(q.black,.16),hc:null},g("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),P_=z("input.background",{dark:"#3C3C3C",light:q.white,hc:q.black},g("inputBoxBackground","Input box background.")),A_=z("input.foreground",{dark:Pe,light:Pe,hc:Pe},g("inputBoxForeground","Input box foreground.")),j_=z("input.border",{dark:null,light:null,hc:Ci},g("inputBoxBorder","Input box border.")),xy=z("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Ci},g("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Ey=z("inputOption.activeBackground",{dark:si(pc,.4),light:si(pc,.2),hc:q.transparent},g("inputOption.activeBackground","Background color of activated options in input fields.")),Dy=z("inputOption.activeForeground",{dark:q.white,light:q.black,hc:null},g("inputOption.activeForeground","Foreground color of activated options in input fields.")),M_=z("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:q.black},g("inputValidationInfoBackground","Input validation background color for information severity.")),F_=z("inputValidation.infoForeground",{dark:null,light:null,hc:null},g("inputValidationInfoForeground","Input validation foreground color for information severity.")),B_=z("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Ci},g("inputValidationInfoBorder","Input validation border color for information severity.")),LE=z("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:q.black},g("inputValidationWarningBackground","Input validation background color for warning severity.")),kE=z("inputValidation.warningForeground",{dark:null,light:null,hc:null},g("inputValidationWarningForeground","Input validation foreground color for warning severity.")),IE=z("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Ci},g("inputValidationWarningBorder","Input validation border color for warning severity.")),OE=z("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:q.black},g("inputValidationErrorBackground","Input validation background color for error severity.")),TE=z("inputValidation.errorForeground",{dark:null,light:null,hc:null},g("inputValidationErrorForeground","Input validation foreground color for error severity.")),NE=z("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Ci},g("inputValidationErrorBorder","Input validation border color for error severity.")),wR=z("dropdown.background",{dark:"#3C3C3C",light:q.white,hc:q.black},g("dropdownBackground","Dropdown background.")),Rz=z("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:q.white},g("dropdownForeground","Dropdown foreground.")),Pz=z("button.foreground",{dark:q.white,light:q.white,hc:q.white},g("buttonForeground","Button foreground color.")),RE=z("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},g("buttonBackground","Button background color.")),Az=z("button.hoverBackground",{dark:i8(RE,.2),light:t8(RE,.2),hc:null},g("buttonHoverBackground","Button background color when hovering.")),Lf=z("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:q.black},g("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),kf=z("badge.foreground",{dark:q.white,light:"#333",hc:q.white},g("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),vc=z("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},g("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),If=z("scrollbarSlider.background",{dark:q.fromHex("#797979").transparent(.4),light:q.fromHex("#646464").transparent(.4),hc:si(Ci,.6)},g("scrollbarSliderBackground","Scrollbar slider background color.")),Of=z("scrollbarSlider.hoverBackground",{dark:q.fromHex("#646464").transparent(.7),light:q.fromHex("#646464").transparent(.7),hc:si(Ci,.8)},g("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Tf=z("scrollbarSlider.activeBackground",{dark:q.fromHex("#BFBFBF").transparent(.4),light:q.fromHex("#000000").transparent(.6),hc:Ci},g("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),jz=z("progressBar.background",{dark:q.fromHex("#0E70C0"),light:q.fromHex("#0E70C0"),hc:Ci},g("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Mz=z("editorError.background",{dark:null,light:null,hc:null},g("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Nf=z("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},g("editorError.foreground","Foreground color of error squigglies in the editor.")),PE=z("editorError.border",{dark:null,light:null,hc:q.fromHex("#E47777").transparent(.8)},g("errorBorder","Border color of error boxes in the editor.")),Fz=z("editorWarning.background",{dark:null,light:null,hc:null},g("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ta=z("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},g("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Rf=z("editorWarning.border",{dark:null,light:null,hc:q.fromHex("#FFCC00").transparent(.8)},g("warningBorder","Border color of warning boxes in the editor.")),Bz=z("editorInfo.background",{dark:null,light:null,hc:null},g("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),zo=z("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},g("editorInfo.foreground","Foreground color of info squigglies in the editor.")),W_=z("editorInfo.border",{dark:null,light:null,hc:q.fromHex("#3794FF").transparent(.8)},g("infoBorder","Border color of info boxes in the editor.")),Wz=z("editorHint.foreground",{dark:q.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},g("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Uz=z("editorHint.border",{dark:null,light:null,hc:q.fromHex("#eeeeee").transparent(.8)},g("hintBorder","Border color of hint boxes in the editor.")),Yr=z("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:q.black},g("editorBackground","Editor background color.")),Na=z("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:q.white},g("editorForeground","Editor default foreground color.")),Zr=z("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},g("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),wc=z("editorWidget.foreground",{dark:Pe,light:Pe,hc:Pe},g("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Md=z("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Ci},g("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Vz=z("editorWidget.resizeBorder",{light:null,dark:null,hc:null},g("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),yR=z("quickInput.background",{dark:Zr,light:Zr,hc:Zr},g("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),zz=z("quickInput.foreground",{dark:wc,light:wc,hc:wc},g("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Hz=z("quickInputTitle.background",{dark:new q(new ct(255,255,255,.105)),light:new q(new ct(0,0,0,.06)),hc:"#000000"},g("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),$z=z("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:q.white},g("pickerGroupForeground","Quick picker color for grouping labels.")),Kz=z("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:q.white},g("pickerGroupBorder","Quick picker color for grouping borders.")),qz=z("keybindingLabel.background",{dark:new q(new ct(128,128,128,.17)),light:new q(new ct(221,221,221,.4)),hc:q.transparent},g("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Yz=z("keybindingLabel.foreground",{dark:q.fromHex("#CCCCCC"),light:q.fromHex("#555555"),hc:q.white},g("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Zz=z("keybindingLabel.border",{dark:new q(new ct(51,51,51,.6)),light:new q(new ct(204,204,204,.4)),hc:new q(new ct(111,195,223))},g("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Gz=z("keybindingLabel.bottomBorder",{dark:new q(new ct(68,68,68,.6)),light:new q(new ct(187,187,187,.4)),hc:new q(new ct(111,195,223))},g("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),yc=z("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},g("editorSelectionBackground","Color of the editor selection.")),Xz=z("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},g("editorSelectionForeground","Color of the selected text for high contrast.")),Ly=z("editor.inactiveSelectionBackground",{light:si(yc,.5),dark:si(yc,.5),hc:si(yc,.5)},g("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),ky=z("editor.selectionHighlightBackground",{light:n8(yc,Yr,.3,.6),dark:n8(yc,Yr,.3,.6),hc:null},g("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Qz=z("editor.selectionHighlightBorder",{light:null,dark:null,hc:an},g("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Jz=z("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},g("editorFindMatch","Color of the current search match.")),Iy=z("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},g("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),eH=z("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},g("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),tH=z("editor.findMatchBorder",{light:null,dark:null,hc:an},g("editorFindMatchBorder","Border color of the current search match.")),iH=z("editor.findMatchHighlightBorder",{light:null,dark:null,hc:an},g("findMatchHighlightBorder","Border color of the other search matches.")),nH=z("editor.findRangeHighlightBorder",{dark:null,light:null,hc:si(an,.4)},g("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),rH=z("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},g("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Fd=z("editorHoverWidget.background",{light:Zr,dark:Zr,hc:Zr},g("hoverBackground","Background color of the editor hover.")),AE=z("editorHoverWidget.foreground",{light:wc,dark:wc,hc:wc},g("hoverForeground","Foreground color of the editor hover.")),jE=z("editorHoverWidget.border",{light:Md,dark:Md,hc:Md},g("hoverBorder","Border color of the editor hover.")),oH=z("editorHoverWidget.statusBarBackground",{dark:i8(Fd,.2),light:t8(Fd,.05),hc:Zr},g("statusBarBackground","Background color of the editor hover status bar.")),U_=z("editorLink.activeForeground",{dark:"#4E94CE",light:q.blue,hc:q.cyan},g("activeLinkForeground","Color of active links.")),vu=z("editorInlayHint.foreground",{dark:si(kf,.8),light:si(kf,.8),hc:kf},g("editorInlayHintForeground","Foreground color of inline hints")),wu=z("editorInlayHint.background",{dark:si(Lf,.6),light:si(Lf,.3),hc:Lf},g("editorInlayHintBackground","Background color of inline hints")),sH=z("editorInlayHint.typeForeground",{dark:vu,light:vu,hc:vu},g("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),aH=z("editorInlayHint.typeBackground",{dark:wu,light:wu,hc:wu},g("editorInlayHintBackgroundTypes","Background color of inline hints for types")),lH=z("editorInlayHint.parameterForeground",{dark:vu,light:vu,hc:vu},g("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),cH=z("editorInlayHint.parameterBackground",{dark:wu,light:wu,hc:wu},g("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),dH=z("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},g("editorLightBulbForeground","The color used for the lightbulb actions icon.")),hH=z("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},g("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),ME=new q(new ct(155,185,85,.2)),FE=new q(new ct(255,0,0,.2)),CR=z("diffEditor.insertedTextBackground",{dark:ME,light:ME,hc:null},g("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),SR=z("diffEditor.removedTextBackground",{dark:FE,light:FE,hc:null},g("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),uH=z("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},g("diffEditorInsertedOutline","Outline color for the text that got inserted.")),mH=z("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},g("diffEditorRemovedOutline","Outline color for text that got removed.")),fH=z("diffEditor.border",{dark:null,light:null,hc:Ci},g("diffEditorBorder","Border color between the two text editors.")),gH=z("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},g("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),pH=z("list.focusBackground",{dark:null,light:null,hc:null},g("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),_H=z("list.focusForeground",{dark:null,light:null,hc:null},g("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bH=z("list.focusOutline",{dark:pc,light:pc,hc:an},g("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Bd=z("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},g("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Wd=z("list.activeSelectionForeground",{dark:q.white,light:q.white,hc:null},g("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Oy=z("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},g("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vH=z("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},g("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wH=z("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},g("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),yH=z("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},g("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),CH=z("list.inactiveFocusBackground",{dark:null,light:null,hc:null},g("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),SH=z("list.inactiveFocusOutline",{dark:null,light:null,hc:null},g("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),xH=z("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},g("listHoverBackground","List/Tree background when hovering over items using the mouse.")),EH=z("list.hoverForeground",{dark:null,light:null,hc:null},g("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),DH=z("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},g("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),bl=z("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:pc},g("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),BE=z("list.focusHighlightForeground",{dark:bl,light:rae(Bd,bl,"#9DDDFF"),hc:bl},g("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),LH=z("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:q.black},g("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),kH=z("listFilterWidget.outline",{dark:q.transparent,light:q.transparent,hc:"#f38518"},g("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),IH=z("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Ci},g("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),OH=z("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},g("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),TH=z("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},g("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),NH=z("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,g("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),V_=z("quickInputList.focusForeground",{dark:Wd,light:Wd,hc:Wd},g("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),z_=z("quickInputList.focusIconForeground",{dark:Oy,light:Oy,hc:Oy},g("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),H_=z("quickInputList.focusBackground",{dark:K_(NH,Bd),light:K_(NH,Bd),hc:null},g("quickInput.listFocusBackground","Quick picker background color for the focused item.")),RH=z("menu.border",{dark:null,light:null,hc:Ci},g("menuBorder","Border color of menus.")),PH=z("menu.foreground",{dark:Rz,light:Pe,hc:Rz},g("menuForeground","Foreground color of menu items.")),AH=z("menu.background",{dark:wR,light:wR,hc:wR},g("menuBackground","Background color of menu items.")),jH=z("menu.selectionForeground",{dark:Wd,light:Wd,hc:Wd},g("menuSelectionForeground","Foreground color of the selected menu item in menus.")),MH=z("menu.selectionBackground",{dark:Bd,light:Bd,hc:Bd},g("menuSelectionBackground","Background color of the selected menu item in menus.")),FH=z("menu.selectionBorder",{dark:null,light:null,hc:an},g("menuSelectionBorder","Border color of the selected menu item in menus.")),BH=z("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Ci},g("menuSeparatorBackground","Color of a separator menu item in menus.")),WH=z("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},g("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),UH=z("editor.snippetTabstopHighlightBackground",{dark:new q(new ct(124,124,124,.3)),light:new q(new ct(10,50,100,.2)),hc:new q(new ct(124,124,124,.3))},g("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),VH=z("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},g("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),zH=z("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},g("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),HH=z("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new q(new ct(10,50,100,.5)),hc:"#525252"},g("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),WE=z("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},g("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),UE=z("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},g("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),xR=z("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},g("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),$_=z("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},g("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),ER=z("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},g("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),$H=z("minimap.errorHighlight",{dark:new q(new ct(255,18,18,.7)),light:new q(new ct(255,18,18,.7)),hc:new q(new ct(255,50,50,1))},g("minimapError","Minimap marker color for errors.")),KH=z("minimap.warningHighlight",{dark:Ta,light:Ta,hc:Rf},g("overviewRuleWarning","Minimap marker color for warnings.")),qH=z("minimap.background",{dark:null,light:null,hc:null},g("minimapBackground","Minimap background color.")),YH=z("minimap.foregroundOpacity",{dark:q.fromHex("#000f"),light:q.fromHex("#000f"),hc:q.fromHex("#000f")},g("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),ZH=z("minimapSlider.background",{light:si(If,.5),dark:si(If,.5),hc:si(If,.5)},g("minimapSliderBackground","Minimap slider background color.")),GH=z("minimapSlider.hoverBackground",{light:si(Of,.5),dark:si(Of,.5),hc:si(Of,.5)},g("minimapSliderHoverBackground","Minimap slider background color when hovering.")),XH=z("minimapSlider.activeBackground",{light:si(Tf,.5),dark:si(Tf,.5),hc:si(Tf,.5)},g("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),QH=z("problemsErrorIcon.foreground",{dark:Nf,light:Nf,hc:Nf},g("problemsErrorIconForeground","The color used for the problems error icon.")),JH=z("problemsWarningIcon.foreground",{dark:Ta,light:Ta,hc:Ta},g("problemsWarningIconForeground","The color used for the problems warning icon.")),e8=z("problemsInfoIcon.foreground",{dark:zo,light:zo,hc:zo},g("problemsInfoIconForeground","The color used for the problems info icon."));function nae(r,e){var t,i,n;switch(r.op){case 0:return(t=Cc(r.value,e))===null||t===void 0?void 0:t.darken(r.factor);case 1:return(i=Cc(r.value,e))===null||i===void 0?void 0:i.lighten(r.factor);case 2:return(n=Cc(r.value,e))===null||n===void 0?void 0:n.transparent(r.factor);case 3:for(let a of r.values){let l=Cc(a,e);if(l)return l}return;case 5:return Cc(e.defines(r.if)?r.then:r.else,e);case 4:let o=Cc(r.value,e);if(!o)return;let s=Cc(r.background,e);return s?o.isDarkerThan(s)?q.getLighterColor(o,s,r.factor).transparent(r.transparency):q.getDarkerColor(o,s,r.factor).transparent(r.transparency):o.transparent(r.factor*r.transparency);default:throw hU(r)}}function t8(r,e){return{op:0,value:r,factor:e}}function i8(r,e){return{op:1,value:r,factor:e}}function si(r,e){return{op:2,value:r,factor:e}}function K_(...r){return{op:3,values:r}}function rae(r,e,t){return{op:5,if:r,then:e,else:t}}function n8(r,e,t,i){return{op:4,value:r,background:e,factor:t,transparency:i}}function Cc(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?q.fromHex(r):e.getColor(r);if(r instanceof q)return r;if(typeof r=="object")return nae(r,e)}}var r8="vscode://schemas/workbench-colors",o8=ii.as(sf.JSONContribution);o8.registerSchema(r8,EE.getColorSchema());var s8=new dt(()=>o8.notifySchemaChanged(r8),200);EE.onDidChangeSchema(()=>{s8.isScheduled()||s8.schedule()});var a8=z("editor.lineHighlightBackground",{dark:null,light:null,hc:null},g("lineHighlight","Background color for the highlight of line at the cursor position.")),DR=z("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},g("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),oae=z("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},g("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),sae=z("editor.rangeHighlightBorder",{dark:null,light:null,hc:an},g("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),aae=z("editor.symbolHighlightBackground",{dark:Iy,light:Iy,hc:null},g("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),lae=z("editor.symbolHighlightBorder",{dark:null,light:null,hc:an},g("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),VE=z("editorCursor.foreground",{dark:"#AEAFAD",light:q.black,hc:q.white},g("caret","Color of the editor cursor.")),l8=z("editorCursor.background",null,g("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Pf=z("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},g("editorWhitespaces","Color of whitespace characters in the editor.")),q_=z("editorIndentGuide.background",{dark:Pf,light:Pf,hc:Pf},g("editorIndentGuides","Color of the editor indentation guides.")),Y_=z("editorIndentGuide.activeBackground",{dark:Pf,light:Pf,hc:Pf},g("editorActiveIndentGuide","Color of the active editor indentation guides.")),zE=z("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:q.white},g("editorLineNumbers","Color of editor line numbers.")),LR=z("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:an},g("editorActiveLineNumber","Color of editor active line number"),!1,g("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),c8=z("editorLineNumber.activeForeground",{dark:LR,light:LR,hc:LR},g("editorActiveLineNumber","Color of editor active line number")),d8=z("editorRuler.foreground",{dark:"#5A5A5A",light:q.lightgrey,hc:q.white},g("editorRuler","Color of the editor rulers.")),h8=z("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},g("editorCodeLensForeground","Foreground color of editor CodeLens")),u8=z("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},g("editorBracketMatchBackground","Background color behind matching brackets")),HE=z("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Ci},g("editorBracketMatchBorder","Color for matching brackets boxes")),m8=z("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},g("editorOverviewRulerBorder","Color of the overview ruler border.")),f8=z("editorOverviewRuler.background",null,g("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),cae=z("editorGutter.background",{dark:Yr,light:Yr,hc:Yr},g("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),g8=z("editorUnnecessaryCode.border",{dark:null,light:null,hc:q.fromHex("#fff").transparent(.8)},g("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),p8=z("editorUnnecessaryCode.opacity",{dark:q.fromHex("#000a"),light:q.fromHex("#0007"),hc:null},g("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),kR=z("editorGhostText.border",{dark:null,light:null,hc:q.fromHex("#fff").transparent(.8)},g("editorGhostTextBorder","Border color of ghost text in the editor.")),IR=z("editorGhostText.foreground",{dark:q.fromHex("#ffffff56"),light:q.fromHex("#0007"),hc:null},g("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),OR=new q(new ct(0,122,204,.6)),FMe=z("editorOverviewRuler.rangeHighlightForeground",{dark:OR,light:OR,hc:OR},g("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),_8=z("editorOverviewRuler.errorForeground",{dark:new q(new ct(255,18,18,.7)),light:new q(new ct(255,18,18,.7)),hc:new q(new ct(255,50,50,1))},g("overviewRuleError","Overview ruler marker color for errors.")),b8=z("editorOverviewRuler.warningForeground",{dark:Ta,light:Ta,hc:Rf},g("overviewRuleWarning","Overview ruler marker color for warnings.")),v8=z("editorOverviewRuler.infoForeground",{dark:zo,light:zo,hc:W_},g("overviewRuleInfo","Overview ruler marker color for infos.")),$E=z("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},g("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),KE=z("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},g("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),qE=z("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},g("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),YE=z("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),ZE=z("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),GE=z("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),w8=z("editorBracketHighlight.unexpectedBracket.foreground",{dark:new q(new ct(255,18,18,.8)),light:new q(new ct(255,18,18,.8)),hc:new q(new ct(255,50,50,1))},g("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),y8=z("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),C8=z("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),S8=z("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),x8=z("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),E8=z("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),D8=z("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),L8=z("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),k8=z("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),I8=z("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),O8=z("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),T8=z("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),N8=z("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},g("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Be((r,e)=>{let t=r.getColor(Yr);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);let i=r.getColor(Na);i&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${i}; }`);let n=r.getColor(cae);n&&e.addRule(`.monaco-editor .margin { background-color: ${n}; }`);let o=r.getColor(oae);o&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${o}; }`);let s=r.getColor(sae);s&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${s}; }`);let a=r.getColor(aae);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);let l=r.getColor(lae);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${l}; }`);let c=r.getColor(Pf);c&&(e.addRule(`.monaco-editor .mtkw { color: ${c} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${c} !important; }`))});var TR=class extends H{constructor(e){super();this.textModel=e,this.colorProvider=new NR,this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,i){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];let n=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(let s of o)n.push({id:`bracket${s.range.toString()}-${s.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(s)},ownerId:0,range:s.range});return n}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new L(1,1,this.textModel.getLineCount(),1),e,t):[]}},NR=class{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};Be((r,e)=>{let t=[$E,KE,qE,YE,ZE,GE],i=new NR;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${r.getColor(w8)}; }`);let n=t.map(o=>r.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){let s=n[o%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});var dae=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},RR=function(r,e){return function(t,i){e(t,i,r)}};function hae(){return new XN}function uae(r){let e=hae();return e.acceptChunk(r),e.finish()}function R8(r,e){return(typeof r=="string"?uae(r):r).create(e)}var XE=0,mae=999,fae=1e4,P8=class{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,i=0;do{let n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}},Ty=()=>{throw new Error("Invalid change accessor")},Sc=class{constructor(){this._searchCanceledBrand=void 0}};Sc.INSTANCE=new Sc;function QE(r){return r instanceof Sc?null:r}var Hn=class xc extends H{constructor(e,t,i,n=null,o,s,a){super();this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onWillDispose=this._register(new M),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new B8(u=>this.handleBeforeFireDecorationsChangedEvent(u))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new M),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new M),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new M),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new M),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new M),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new M),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new W8),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new M),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(u=>{this._onDidChangeContentOrInjectedText.fire(u.rawContentChangedEvent)})),XE++,this.id="$model"+XE,this.isForSimpleWidget=t.isForSimpleWidget,typeof n=="undefined"||n===null?this._associatedResource=ve.parse("inmemory://model/"+XE):this._associatedResource=n,this._attachedEditorCount=0;let{textBuffer:l,disposable:c}=R8(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=xc.resolveOptions(this._buffer,t);let d=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new L(1,1,d,this._buffer.getLineLength(d)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=h>xc.LARGE_FILE_SIZE_THRESHOLD||d>xc.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>xc.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=i||ba,this._languageRegistryListener=this._languageConfigurationService.onDidChange(u=>{u.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=lx(XE),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new jR,this._commandManager=new sy(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Vo(this._modeService.languageIdCodec),this._tokens2=new py(this._modeService.languageIdCodec),this._tokenization=new iR(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new bR(this,this._languageConfigurationService)),this._decorationProvider=this._register(new TR(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){let i=UN(e,t.tabSize,t.insertSpaces);return new Gm({tabSize:i.tabSize,indentSize:i.tabSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Gm({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;let t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;let e=new Pd([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new I_(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;let{textBuffer:t,disposable:i}=R8(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,o,s,a){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:s,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new jR,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new mc([new QN],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,o,s),0,n,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();let t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;let i=this.getFullModelRange(),n=this.getValueLengthInRange(i),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new mc([new tR],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,o,s),0,n,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){let o=t[i],s=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),c=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,kd(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0,i=this._buffer.getLineCount();for(let n=1;n<=i;n++){let o=this._buffer.getLineLength(n);o>=fae?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize!="undefined"?e.tabSize:this._options.tabSize,i=typeof e.indentSize!="undefined"?e.indentSize:this._options.indentSize,n=typeof e.insertSpaces!="undefined"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace!="undefined"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=typeof e.bracketColorizationOptions!="undefined"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Gm({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:s});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let i=UN(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}static _normalizeIndentationFromWhitespace(e,t,i){let n=0;for(let s=0;s<e.length;s++)e.charAt(s)==="	"?n+=t:n++;let o="";if(!i){let s=Math.floor(n/t);n=n%t;for(let a=0;a<s;a++)o+="	"}for(let s=0;s<n;s++)o+=" ";return o}static normalizeIndentation(e,t,i){let n=Wi(e);return n===-1&&(n=e.length),xc._normalizeIndentationFromWhitespace(e.substring(0,n),t,i)+e.substring(n)}normalizeIndentation(e){return this._assertNotDisposed(),xc.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){let t=this.findMatches($O.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new P8(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();let i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){let t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn,o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(o<1)o=1,s=1;else if(o>t)o=t,s=this.getLineMaxColumn(o);else if(s<=1)s=1;else{let h=this.getLineMaxColumn(o);s>=h&&(s=h)}let a=e.endLineNumber,l=e.endColumn,c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{let h=this.getLineMaxColumn(c);d>=h&&(d=h)}return i===o&&n===s&&a===c&&l===d&&e instanceof L&&!(e instanceof le)?e:new L(o,s,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;let n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;let o=this.getLineMaxColumn(e);if(t>o)return!1;if(i===1){let s=this._buffer.getLineCharCode(e,t-2);if(ki(s))return!1}return!0}_validatePosition(e,t,i){let n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=this._buffer.getLineCount();if(n<1)return new V(1,1);if(n>s)return new V(s,this.getLineMaxColumn(s));if(o<=1)return new V(n,1);let a=this.getLineMaxColumn(n);if(o>=a)return new V(n,a);if(i===1){let l=this._buffer.getLineCharCode(n,o-2);if(ki(l))return new V(n,o-1)}return new V(n,o)}validatePosition(e){let t=1;return this._assertNotDisposed(),e instanceof V&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}_isValidRange(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(o,s,0))return!1;if(t===1){let a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,c=ki(a),d=ki(l);return!c&&!d}return!0}validateRange(e){let t=1;if(this._assertNotDisposed(),e instanceof L&&!(e instanceof le)&&this._isValidRange(e,t))return e;let i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),o=i.lineNumber,s=i.column,a=n.lineNumber,l=n.column;if(t===1){let c=s>1?this._buffer.getLineCharCode(o,s-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=ki(c),u=ki(d);return!h&&!u?new L(o,s,a,l):o===a&&s===l?new L(o,s-1,a,l-1):h&&u?new L(o,s-1,a,l+1):h?new L(o,s-1,a,l):new L(o,s,a,l+1)}return new L(o,s,a,l)}modifyPosition(e,t){this._assertNotDisposed();let i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let e=this.getLineCount();return new L(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,o,s,a=mae){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>L.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,u)=>h.startLineNumber-u.startLineNumber||h.startColumn-u.startColumn);let c=[];c.push(l.reduce((h,u)=>L.areIntersecting(h,u)?h.plusRange(u):(c.push(h),u)));let d;if(!i&&e.indexOf(`
`)<0){let u=new hc(e,i,n,o).parseSearchRequest();if(!u)return[];d=m=>this.findMatchesLineByLine(m,u,s,a)}else d=h=>D_.findMatches(this,new hc(e,i,n,o),h,s,a);return c.map(d).reduce((h,u)=>h.concat(u),[])}findNextMatch(e,t,i,n,o,s){this._assertNotDisposed();let a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){let c=new hc(e,i,n,o).parseSearchRequest();if(!c)return null;let d=this.getLineCount(),h=new L(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),u=this.findMatchesLineByLine(h,c,s,1);return D_.findNextMatch(this,new hc(e,i,n,o),a,s),u.length>0||(h=new L(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),u=this.findMatchesLineByLine(h,c,s,1),u.length>0)?u[0]:null}return D_.findNextMatch(this,new hc(e,i,n,o),a,s)}findPreviousMatch(e,t,i,n,o,s){this._assertNotDisposed();let a=this.validatePosition(t);return D_.findPreviousMatch(this,new hc(e,i,n,o),a,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof gw?e:new gw(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let n=t.map(s=>({range:this.validateRange(s.range),text:s.text})),o=!0;if(e)for(let s=0,a=e.length;s<a;s++){let l=e[s],c=!1;for(let d=0,h=n.length;d<h;d++){let u=n[d].range,m=u.startLineNumber>l.endLineNumber,p=l.startLineNumber>u.endLineNumber;if(!m&&!p){c=!0;break}}if(!c){o=!1;break}}if(o)for(let s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){let l=this._trimAutoWhitespaceLines[s],c=this.getLineMaxColumn(l),d=!0;for(let h=0,u=n.length;h<u;h++){let m=n[h].range,p=n[h].text;if(!(l<m.startLineNumber||l>m.endLineNumber)&&!(l===m.startLineNumber&&m.startColumn===c&&m.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(l===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){d=!1;break}}if(d){let h=new L(l,1,l,c);t.push(new gw(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i)}_applyUndo(e,t,i,n){let o=e.map(s=>{let a=this.getPositionAt(s.newPosition),l=this.getPositionAt(s.newEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:s.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,n)}_applyRedo(e,t,i,n){let o=e.map(s=>{let a=this.getPositionAt(s.oldPosition),l=this.getPositionAt(s.oldEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:s.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,o,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){let i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),s=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,s.length!==0){for(let c=0,d=s.length;c<d;c++){let h=s[c],[u,m,p]=Td(h.text);this._tokens.acceptEdit(h.range,u,m),this._tokens2.acceptEdit(h.range,u,m,p,h.text.length>0?h.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=i;for(let c=0,d=s.length;c<d;c++){let h=s[c],[u]=Td(h.text);this._onDidChangeDecorations.fire();let m=h.range.startLineNumber,p=h.range.endLineNumber,_=p-m,v=u,C=Math.min(_,v),w=v-_,S=o-l-w+m,D=S,I=S+v,A=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new V(D,1)),this.getOffsetAt(new V(I,this.getLineMaxColumn(I))),0),O=wo.fromDecorations(A),N=new wd(O);for(let F=C;F>=0;F--){let Y=m+F,K=S+F;N.takeFromEndWhile(ie=>ie.lineNumber>K);let ee=N.takeFromEndWhile(ie=>ie.lineNumber===K);a.push(new _E(Y,this.getLineContent(K),ee))}if(C<_){let F=m+C;a.push(new JN(F+1,p))}if(C<v){let F=new wd(O),Y=m+C,K=v-C,ee=o-l-K+Y+1,ie=[],Ee=[];for(let Le=0;Le<K;Le++){let Te=ee+Le;Ee[Le]=this.getLineContent(Te),F.takeWhile(Ne=>Ne.lineNumber<Te),ie[Le]=F.takeWhile(Ne=>Ne.lineNumber===Te)}a.push(new eR(Y+1,m+v,Ee,ie))}l+=w}this._emitContentChangedEvent(new mc(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;let i=[...e].map(n=>new _E(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeContentOrInjectedText.fire(new _y(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let i={addDecoration:(o,s)=>this._deltaDecorationsImpl(e,[],[{range:o,options:s}])[0],changeDecoration:(o,s)=>{this._changeDecorationImpl(o,s)},changeDecorationOptions:(o,s)=>{this._changeDecorationOptionsImpl(o,F8(s))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,s)=>o.length===0&&s.length===0?[]:this._deltaDecorationsImpl(e,o,s)},n=null;try{n=t(i)}catch(o){we(o)}return i.addDecoration=Ty,i.changeDecoration=Ty,i.changeDecorationOptions=Ty,i.removeDecoration=Ty,i.deltaDecorations=Ty,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){let n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:M8[i]}])[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;let o=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,a,o),n.setOptions(M8[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;let t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){let o=t[i];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){let t=this._decorations[e];return t?t.options:null}getDecorationRange(e){let t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1){let o=this.getLineCount(),s=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new L(s,1,a,l),d=this._getDecorationsInRange(c,i,n);return d.push(...this._decorationProvider.getDecorationsInRange(c,i,n)),d}getDecorationsInRange(e,t=0,i=!1){let n=this.validateRange(e),o=this._getDecorationsInRange(n,t,i);return o.push(...this._decorationProvider.getDecorationsInRange(n,t,i)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){let t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return wo.fromDecorations(n).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}_getDecorationsInRange(e,t,i){let n=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,n,o,t,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){let i=this._decorations[e];if(!i)return;if(i.options.after){let a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){let a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}let n=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),s=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,s,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){let i=this._decorations[e];if(!i)return;let n=!!(i.options.overviewRuler&&i.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){let s=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber)}if(i.options.before||t.before){let s=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}n!==o?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i){let n=this.getVersionId(),o=t.length,s=0,a=i.length,l=0,c=new Array(a);for(;s<o||l<a;){let d=null;if(s<o){do d=this._decorations[t[s++]];while(!d&&s<o);if(d){if(d.options.after){let h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){let h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(l<a){if(!d){let v=++this._lastDecorationId,C=`${this._instanceId};${v}`;d=new fE(C,0,0),this._decorations[C]=d}let h=i[l],u=this._validateRangeRelaxedNoAllocations(h.range),m=F8(h.options),p=this._buffer.getOffsetAt(u.startLineNumber,u.startColumn),_=this._buffer.getOffsetAt(u.endLineNumber,u.endColumn);d.ownerId=e,d.reset(n,p,_,u),d.setOptions(m),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(d),c[l]=d.id,l++}else d&&delete this._decorations[d.id]}return c}setTokens(e,t=!1){if(e.length!==0){let i=[];for(let n=0,o=e.length;n<o;n++){let s=e[n],a=0,l=0,c=!1;for(let d=0,h=s.tokens.length;d<h;d++){let u=s.startLineNumber+d;c?(this._tokens.setTokens(this._languageId,u-1,this._buffer.getLineLength(u),s.tokens[d],!1),l=u):this._tokens.setTokens(this._languageId,u-1,this._buffer.getLineLength(u),s.tokens[d],!0)&&(c=!0,a=u,l=u)}c&&i.push({fromLineNumber:a,toLineNumber:l})}i.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:i})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;let i=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){let t=this.getLineContent(e),i=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,i)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){let i=this.validatePosition(new V(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();let t=this.validatePosition(e),i=this.getLineContent(t.lineNumber),n=this._getLineTokens(t.lineNumber),o=n.findTokenIndexAtOffset(t.column-1),[s,a]=xc._findLanguageBoundaries(n,o),l=gp(t.column,this.getLanguageConfiguration(n.getLanguageId(o)).getWordDefinition(),i.substring(s,a),s);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&s===t.column-1){let[c,d]=xc._findLanguageBoundaries(n,o-1),h=gp(t.column,this.getLanguageConfiguration(n.getLanguageId(o-1)).getWordDefinition(),i.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}static _findLanguageBoundaries(e,t){let i=e.getLanguageId(t),n=0;for(let s=t;s>=0&&e.getLanguageId(s)===i;s--)n=e.getStartOffset(s);let o=e.getLineContent().length;for(let s=t,a=e.getCount();s<a&&e.getLanguageId(s)===i;s++)o=e.getEndOffset(s);return[n,o]}getWordUntilPosition(e){let t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let i=e.toLowerCase(),n=this.validatePosition(t),o=this._getLineTokens(n.lineNumber),s=o.getLanguageId(o.findTokenIndexAtOffset(n.column-1)),a=this.getLanguageConfiguration(s).brackets;if(!a)return null;let l=a.textIsBracket[i];return l?QE(this._findMatchingBracketUp(l,n,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,i,n){let o=t.getCount(),s=t.getLanguageId(n),a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){let d=t.getEndOffset(c);if(d<=a)break;if(va(t.getStandardTokenType(c))||t.getLanguageId(c)!==s){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<o;c++){let d=t.getStartOffset(c);if(d>=l)break;if(va(t.getStandardTokenType(c))||t.getLanguageId(c)!==s){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){let t=e.lineNumber,i=this._getLineTokens(t),n=this._buffer.getLineContent(t),o=i.findTokenIndexAtOffset(e.column-1);if(o<0)return null;let s=this.getLanguageConfiguration(i.getLanguageId(o)).brackets;if(s&&!va(i.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,i,s,o),c=null;for(;;){let d=Fo.findNextBracketInRange(s.forwardRegex,t,n,a,l);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){let h=n.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),u=this._matchFoundBracket(d,s.textIsBracket[h],s.textIsOpenBracket[h],null);if(u){if(u instanceof Sc)return null;c=u}}a=d.endColumn-1}if(c)return c}if(o>0&&i.getStartOffset(o)===e.column-1){let a=o-1,l=this.getLanguageConfiguration(i.getLanguageId(a)).brackets;if(l&&!va(i.getStandardTokenType(a))){let{searchStartOffset:c,searchEndOffset:d}=this._establishBracketSearchOffsets(e,i,l,a),h=Fo.findPrevBracketInRange(l.reversedRegex,t,n,c,d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){let u=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),m=this._matchFoundBracket(h,l.textIsBracket[u],l.textIsOpenBracket[u],null);if(m)return m instanceof Sc?null:m}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;let o=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return o?o instanceof Sc?o:[e,o]:null}_findMatchingBracketUp(e,t,i){let n=e.languageId,o=e.reversedRegex,s=-1,a=0,l=(c,d,h,u)=>{for(;;){if(i&&++a%100==0&&!i())return Sc.INSTANCE;let m=Fo.findPrevBracketInRange(o,c,d,h,u);if(!m)break;let p=d.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(p)?s++:e.isClose(p)&&s--,s===0)return m;u=m.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){let d=this._getLineTokens(c),h=d.getCount(),u=this._buffer.getLineContent(c),m=h-1,p=u.length,_=u.length;c===t.lineNumber&&(m=d.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let v=!0;for(;m>=0;m--){let C=d.getLanguageId(m)===n&&!va(d.getStandardTokenType(m));if(C)v?p=d.getStartOffset(m):(p=d.getStartOffset(m),_=d.getEndOffset(m));else if(v&&p!==_){let w=l(c,u,p,_);if(w)return w}v=C}if(v&&p!==_){let C=l(c,u,p,_);if(C)return C}}return null}_findMatchingBracketDown(e,t,i){let n=e.languageId,o=e.forwardRegex,s=1,a=0,l=(d,h,u,m)=>{for(;;){if(i&&++a%100==0&&!i())return Sc.INSTANCE;let p=Fo.findNextBracketInRange(o,d,h,u,m);if(!p)break;let _=h.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(_)?s++:e.isClose(_)&&s--,s===0)return p;u=p.endColumn-1}return null},c=this.getLineCount();for(let d=t.lineNumber;d<=c;d++){let h=this._getLineTokens(d),u=h.getCount(),m=this._buffer.getLineContent(d),p=0,_=0,v=0;d===t.lineNumber&&(p=h.findTokenIndexAtOffset(t.column-1),_=t.column-1,v=t.column-1);let C=!0;for(;p<u;p++){let w=h.getLanguageId(p)===n&&!va(h.getStandardTokenType(p));if(w)C||(_=h.getStartOffset(p)),v=h.getEndOffset(p);else if(C&&_!==v){let S=l(d,m,_,v);if(S)return S}C=w}if(C&&_!==v){let w=l(d,m,_,v);if(w)return w}}return null}findPrevBracket(e){let t=this.validatePosition(e),i=null,n=null;for(let o=t.lineNumber;o>=1;o--){let s=this._getLineTokens(o),a=s.getCount(),l=this._buffer.getLineContent(o),c=a-1,d=l.length,h=l.length;if(o===t.lineNumber){c=s.findTokenIndexAtOffset(t.column-1),d=t.column-1,h=t.column-1;let m=s.getLanguageId(c);i!==m&&(i=m,n=this.getLanguageConfiguration(i).brackets)}let u=!0;for(;c>=0;c--){let m=s.getLanguageId(c);if(i!==m){if(n&&u&&d!==h){let _=Fo.findPrevBracketInRange(n.reversedRegex,o,l,d,h);if(_)return this._toFoundBracket(n,_);u=!1}i=m,n=this.getLanguageConfiguration(i).brackets}let p=!!n&&!va(s.getStandardTokenType(c));if(p)u?d=s.getStartOffset(c):(d=s.getStartOffset(c),h=s.getEndOffset(c));else if(n&&u&&d!==h){let _=Fo.findPrevBracketInRange(n.reversedRegex,o,l,d,h);if(_)return this._toFoundBracket(n,_)}u=p}if(n&&u&&d!==h){let m=Fo.findPrevBracketInRange(n.reversedRegex,o,l,d,h);if(m)return this._toFoundBracket(n,m)}}return null}findNextBracket(e){let t=this.validatePosition(e),i=this.getLineCount(),n=null,o=null;for(let s=t.lineNumber;s<=i;s++){let a=this._getLineTokens(s),l=a.getCount(),c=this._buffer.getLineContent(s),d=0,h=0,u=0;if(s===t.lineNumber){d=a.findTokenIndexAtOffset(t.column-1),h=t.column-1,u=t.column-1;let p=a.getLanguageId(d);n!==p&&(n=p,o=this.getLanguageConfiguration(n).brackets)}let m=!0;for(;d<l;d++){let p=a.getLanguageId(d);if(n!==p){if(o&&m&&h!==u){let v=Fo.findNextBracketInRange(o.forwardRegex,s,c,h,u);if(v)return this._toFoundBracket(o,v);m=!1}n=p,o=this.getLanguageConfiguration(n).brackets}let _=!!o&&!va(a.getStandardTokenType(d));if(_)m||(h=a.getStartOffset(d)),u=a.getEndOffset(d);else if(o&&m&&h!==u){let v=Fo.findNextBracketInRange(o.forwardRegex,s,c,h,u);if(v)return this._toFoundBracket(o,v)}m=_}if(o&&m&&h!==u){let p=Fo.findNextBracketInRange(o.forwardRegex,s,c,h,u);if(p)return this._toFoundBracket(o,p)}}return null}findEnclosingBrackets(e,t){let i;if(typeof t=="undefined")i=null;else{let m=Date.now();i=()=>Date.now()-m<=t}let n=this.validatePosition(e),o=this.getLineCount(),s=new Map,a=[],l=(m,p)=>{if(!s.has(m)){let _=[];for(let v=0,C=p?p.brackets.length:0;v<C;v++)_[v]=0;s.set(m,_)}a=s.get(m)},c=0,d=(m,p,_,v,C)=>{for(;;){if(i&&++c%100==0&&!i())return Sc.INSTANCE;let w=Fo.findNextBracketInRange(m.forwardRegex,p,_,v,C);if(!w)break;let S=_.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),D=m.textIsBracket[S];if(D&&(D.isOpen(S)?a[D.index]++:D.isClose(S)&&a[D.index]--,a[D.index]===-1))return this._matchFoundBracket(w,D,!1,i);v=w.endColumn-1}return null},h=null,u=null;for(let m=n.lineNumber;m<=o;m++){let p=this._getLineTokens(m),_=p.getCount(),v=this._buffer.getLineContent(m),C=0,w=0,S=0;if(m===n.lineNumber){C=p.findTokenIndexAtOffset(n.column-1),w=n.column-1,S=n.column-1;let I=p.getLanguageId(C);h!==I&&(h=I,u=this.getLanguageConfiguration(h).brackets,l(h,u))}let D=!0;for(;C<_;C++){let I=p.getLanguageId(C);if(h!==I){if(u&&D&&w!==S){let O=d(u,m,v,w,S);if(O)return QE(O);D=!1}h=I,u=this.getLanguageConfiguration(h).brackets,l(h,u)}let A=!!u&&!va(p.getStandardTokenType(C));if(A)D||(w=p.getStartOffset(C)),S=p.getEndOffset(C);else if(u&&D&&w!==S){let O=d(u,m,v,w,S);if(O)return QE(O)}D=A}if(u&&D&&w!==S){let I=d(u,m,v,w,S);if(I)return QE(I)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.getValueInRange(t);i=i.toLowerCase();let n=e.textIsBracket[i];return n?{range:t,open:n.open,close:n.close,isOpen:e.textIsOpenBracket[i]}:null}static computeIndentLevel(e,t){let i=0,n=0,o=e.length;for(;n<o;){let s=e.charCodeAt(n);if(s===32)i++;else if(s===9)i=i-i%t+t;else break;n++}return n===o?-1:i}_computeIndentLevel(e){return xc.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,i){this._assertNotDisposed();let n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for lineNumber");let o=this.getLanguageConfiguration(this._languageId).foldingRules,s=Boolean(o&&o.offSide),a=-2,l=-1,c=-2,d=-1,h=O=>{if(a!==-1&&(a===-2||a>O-1)){a=-1,l=-1;for(let N=O-2;N>=0;N--){let F=this._computeIndentLevel(N);if(F>=0){a=N,l=F;break}}}if(c===-2){c=-1,d=-1;for(let N=O;N<n;N++){let F=this._computeIndentLevel(N);if(F>=0){c=N,d=F;break}}}},u=-2,m=-1,p=-2,_=-1,v=O=>{if(u===-2){u=-1,m=-1;for(let N=O-2;N>=0;N--){let F=this._computeIndentLevel(N);if(F>=0){u=N,m=F;break}}}if(p!==-1&&(p===-2||p<O-1)){p=-1,_=-1;for(let N=O;N<n;N++){let F=this._computeIndentLevel(N);if(F>=0){p=N,_=F;break}}}},C=0,w=!0,S=0,D=!0,I=0,A=0;for(let O=0;w||D;O++){let N=e-O,F=e+O;O>1&&(N<1||N<t)&&(w=!1),O>1&&(F>n||F>i)&&(D=!1),O>5e4&&(w=!1,D=!1);let Y=-1;if(w){let ee=this._computeIndentLevel(N-1);ee>=0?(c=N-1,d=ee,Y=Math.ceil(ee/this._options.indentSize)):(h(N),Y=this._getIndentLevelForWhitespaceLine(s,l,d))}let K=-1;if(D){let ee=this._computeIndentLevel(F-1);ee>=0?(u=F-1,m=ee,K=Math.ceil(ee/this._options.indentSize)):(v(F),K=this._getIndentLevelForWhitespaceLine(s,m,_))}if(O===0){A=Y;continue}if(O===1){if(F<=n&&K>=0&&A+1===K){w=!1,C=F,S=F,I=K;continue}if(N>=1&&Y>=0&&Y-1===A){D=!1,C=N,S=N,I=Y;continue}if(C=e,S=e,I=A,I===0)return{startLineNumber:C,endLineNumber:S,indent:I}}w&&(Y>=I?C=N:w=!1),D&&(K>=I?S=F:D=!1)}return{startLineNumber:C,endLineNumber:S,indent:I}}getLinesBracketGuides(e,t,i,n){var o,s,a,l,c;let d=[],h=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new L(e,1,t,this.getLineMaxColumn(t))),u;if(i&&h.length>0){let C=e<=i.lineNumber&&i.lineNumber<=t?h.filter(w=>w.range.containsPosition(i)):this._bracketPairColorizer.getBracketPairsInRange(L.fromPositions(i));u=(o=j3(C,w=>w.range.startLineNumber!==w.range.endLineNumber))===null||o===void 0?void 0:o.range}let m=new wd(h),p=new Array,_=new Array,v=new JE;for(let C=e;C<=t;C++){let w=new Array;_.length>0&&(w=w.concat(_),_.length=0),d.push(w);for(let D of m.takeWhile(I=>I.openingBracketRange.startLineNumber<=C)||[]){if(D.range.startLineNumber===D.range.endLineNumber)continue;let I=Math.min(this.getVisibleColumnFromPosition(D.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(s=D.closingBracketRange)===null||s===void 0?void 0:s.getStartPosition())!==null&&a!==void 0?a:D.range.getEndPosition()),D.minVisibleColumnIndentation+1),A=!1;D.closingBracketRange&&Wi(this.getLineContent(D.closingBracketRange.startLineNumber))<D.closingBracketRange.startColumn-1&&(A=!0);let O=D.openingBracketRange.getStartPosition(),N=(c=(l=D.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&c!==void 0?c:D.range.getEndPosition();D.closingBracketRange===void 0?p[D.nestingLevel]=null:p[D.nestingLevel]={nestingLevel:D.nestingLevel,guideVisibleColumn:I,start:O,visibleStartColumn:this.getVisibleColumnFromPosition(O),end:N,visibleEndColumn:this.getVisibleColumnFromPosition(N),bracketPair:D,renderHorizontalEndLineAtTheBottom:A}}for(let D of p){if(!D)continue;let I=u&&D.bracketPair.range.equalsRange(u),A=v.getInlineClassNameOfLevel(D.nestingLevel)+(n.highlightActive&&I?" "+v.activeClassName:"");(I&&n.horizontalGuides!==hd.Disabled||n.includeInactive&&n.horizontalGuides===hd.Enabled)&&(D.start.lineNumber===C&&D.guideVisibleColumn<D.visibleStartColumn&&w.push(new Jl(D.guideVisibleColumn,A,new zp(!1,D.start.column))),D.end.lineNumber===C+1&&D.guideVisibleColumn<D.visibleEndColumn&&_.push(new Jl(D.guideVisibleColumn,A,new zp(!D.renderHorizontalEndLineAtTheBottom,D.end.column))))}let S=Number.MAX_SAFE_INTEGER;for(let D=p.length-1;D>=0;D--){let I=p[D];if(!I)continue;let A=n.highlightActive&&u&&I.bracketPair.range.equalsRange(u),O=v.getInlineClassNameOfLevel(I.nestingLevel)+(A?" "+v.activeClassName:"");(A||n.includeInactive)&&I.renderHorizontalEndLineAtTheBottom&&I.end.lineNumber===C+1&&_.push(new Jl(I.guideVisibleColumn,O,null)),!(I.end.lineNumber<=C||I.start.lineNumber>=C)&&(I.guideVisibleColumn>=S&&!A||(S=I.guideVisibleColumn,(A||n.includeInactive)&&w.push(new Jl(I.guideVisibleColumn,O,null))))}w.sort((D,I)=>D.visibleColumn-I.visibleColumn)}return d}getVisibleColumnFromPosition(e){return _t.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();let i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");let n=this.getLanguageConfiguration(this._languageId).foldingRules,o=Boolean(n&&n.offSide),s=new Array(t-e+1),a=-2,l=-1,c=-2,d=-1;for(let h=e;h<=t;h++){let u=h-e,m=this._computeIndentLevel(h-1);if(m>=0){a=h-1,l=m,s[u]=Math.ceil(m/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let p=h-2;p>=0;p--){let _=this._computeIndentLevel(p);if(_>=0){a=p,l=_;break}}}if(c!==-1&&(c===-2||c<h-1)){c=-1,d=-1;for(let p=h;p<i;p++){let _=this._computeIndentLevel(p);if(_>=0){c=p,d=_;break}}}s[u]=this._getIndentLevelForWhitespaceLine(o,l,d)}return s}_getIndentLevelForWhitespaceLine(e,t,i){return t===-1||i===-1?0:t<i?1+Math.floor(t/this._options.indentSize):t===i?Math.ceil(i/this._options.indentSize):e?Math.ceil(i/this._options.indentSize):1+Math.floor(i/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return gae(this.getLineContent(e))+1}};Hn.MODEL_SYNC_LIMIT=50*1024*1024;Hn.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Hn.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Hn.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Bn.tabSize,indentSize:Bn.indentSize,insertSpaces:Bn.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Bn.trimAutoWhitespace,largeFileOptimizations:Bn.largeFileOptimizations,bracketPairColorizationOptions:Bn.bracketPairColorizationOptions};Hn=dae([RR(4,fc),RR(5,ui),RR(6,bd)],Hn);function gae(r){let e=0;for(let t of r)if(t===" "||t==="	")e++;else break;return e}var JE=class{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};function PR(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function AR(r){return!!r.options.after||!!r.options.before}var jR=class{constructor(){this._decorationsTree0=new ay,this._decorationsTree1=new ay,this._injectedTextDecorationsTree=new ay}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(let i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,o){let s=e.getVersionId(),a=this._intervalSearch(t,i,n,o,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,i,n,o){let s=this._decorationsTree0.intervalSearch(e,t,i,n,o),a=this._decorationsTree1.intervalSearch(e,t,i,n,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,o);return s.concat(a).concat(l)}getInjectedTextInInterval(e,t,i,n){let o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,o);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i);return this._ensureNodesHaveRanges(e,n).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,i,n){let o=e.getVersionId(),s=this._search(t,i,n,o);return this._ensureNodesHaveRanges(e,s)}_search(e,t,i,n){if(i)return this._decorationsTree1.search(e,t,n);{let o=this._decorationsTree0.search(e,t,n),s=this._decorationsTree1.search(e,t,n),a=this._injectedTextDecorationsTree.search(e,t,n);return o.concat(s).concat(a)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){AR(e)?this._injectedTextDecorationsTree.insert(e):PR(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){AR(e)?this._injectedTextDecorationsTree.delete(e):PR(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){AR(e)?this._injectedTextDecorationsTree.resolveNode(e,t):PR(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}};function yu(r){return r.replace(/[^a-z0-9\-_]/gi," ")}var MR=class{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},A8=class extends MR{constructor(e){super(e);this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Qn.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let i=e?t.getColor(e.id):null;return i?i.toString():""}},j8=class extends MR{constructor(e){super(e);this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?q.fromHex(e):t.getColor(e.id)}},Z_=class{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof Z_?e:new Z_(e)}},ze=class{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?yu(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new A8(e.overviewRuler):null,this.minimap=e.minimap?new j8(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?yu(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?yu(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?yu(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?yu(e.marginClassName):null,this.inlineClassName=e.inlineClassName?yu(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?yu(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?yu(e.afterContentClassName):null,this.after=e.after?Z_.from(e.after):null,this.before=e.before?Z_.from(e.before):null}static register(e){return new ze(e)}static createDynamic(e){return new ze(e)}};ze.EMPTY=ze.register({description:"empty"});var M8=[ze.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ze.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ze.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ze.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function F8(r){return r instanceof ze?r:ze.createDynamic(r)}var B8=class extends H{constructor(e){super();this.handleBeforeFire=e,this._actual=this._register(new M),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}},W8=class extends H{constructor(){super();this._fastEmitter=this._register(new M),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new M),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var pae=()=>!0,U8=()=>!1,_ae=r=>r===" "||r==="	",gs=class{constructor(e,t,i){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;let n=i.options,o=n.get(129);this.readOnly=n.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=n.get(103),this.lineHeight=n.get(58),this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=n.get(114),this.wordSeparators=n.get(115),this.emptySelectionClipboard=n.get(32),this.copyWithSyntaxHighlighting=n.get(21),this.multiCursorMergeOverlapping=n.get(68),this.multiCursorPaste=n.get(70),this.autoClosingBrackets=n.get(5),this.autoClosingQuotes=n.get(8),this.autoClosingDelete=n.get(6),this.autoClosingOvertype=n.get(7),this.autoSurround=n.get(11),this.autoIndent=n.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:gs._getShouldAutoClose(e,this.autoClosingQuotes),bracket:gs._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=st.getAutoClosingPairs(e);let s=gs._getSurroundingPairs(e);if(s)for(let a of s)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=gs._getElectricCharacters(this._languageId);if(e)for(let t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Hn.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return st.getElectricCharacters(e)}catch(t){return we(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return _ae;case"languageDefined":return gs._getLanguageDefinedShouldAutoClose(e);case"always":return pae;case"never":return U8}}static _getLanguageDefinedShouldAutoClose(e){try{let t=st.getAutoCloseBeforeSet(e);return i=>t.indexOf(i)!==-1}catch(t){return we(t),U8}}static _getSurroundingPairs(e){try{return st.getSurroundingPairs(e)}catch(t){return we(t),null}}},qi=class{constructor(e,t,i,n){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=i,this.leftoverVisibleColumns=n,this.selection=qi._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new qi(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new V(t,i),n):new qi(new L(t,i,t,i),n,new V(t,i),n)}static _computeSelection(e,t){let i,n,o,s;return e.isEmpty()?(i=e.startLineNumber,n=e.startColumn,o=t.lineNumber,s=t.column):t.isBeforeOrEqual(e.getStartPosition())?(i=e.endLineNumber,n=e.endColumn,o=t.lineNumber,s=t.column):(i=e.startLineNumber,n=e.startColumn,o=t.lineNumber,s=t.column),new le(i,n,o,s)}},eD=class{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}},V8=class{constructor(e){this.modelState=e,this.viewState=null}},z8=class{constructor(e){this.modelState=null,this.viewState=e}},nt=class{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new V8(e)}static fromViewState(e){return new z8(e)}static fromModelSelection(e){let t=e.selectionStartLineNumber,i=e.selectionStartColumn,n=e.positionLineNumber,o=e.positionColumn,s=new qi(new L(t,i,t,i),0,new V(n,o),0);return nt.fromModelState(s)}static fromModelSelections(e){let t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},_r=class{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}};function Cu(r){return r==="'"||r==='"'||r==="`"}var Su=class{static whitespaceVisibleColumn(e,t,i){let n=e.length,o=0,s=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[s,a,o];switch(o%i==0&&(s=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=_t.nextRenderTabStop(o,i);break;default:return[-1,-1,-1]}}return t===n?[s,a,o]:[-1,-1,-1]}static atomicPosition(e,t,i,n){let o=e.length,[s,a,l]=Su.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i==0)return t;c=l%i<=i/2;break}if(c){if(s===-1)return-1;let u=a;for(let m=s;m<o;++m){if(u===a+i)return s;switch(e.charCodeAt(m)){case 32:u+=1;break;case 9:u=_t.nextRenderTabStop(u,i);break;default:return-1}}return u===a+i?s:-1}let d=_t.nextRenderTabStop(l,i),h=l;for(let u=t;u<o;u++){if(h===d)return u;switch(e.charCodeAt(u)){case 32:h+=1;break;case 9:h=_t.nextRenderTabStop(h,i);break;default:return-1}}return h===d?o:-1}};var Ud=class{constructor(e=null){this.hitTarget=e,this.type=0}},tD=class{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}},Af;(function(r){function e(t,i,n){let o=t.getPositionFromDOMInfo(i,n);return o?new tD(o,i,null):new Ud(i)}r.createFromDOMInfo=e})(Af||(Af={}));var FR=class{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}},ps=class{constructor(e,t,i=0,n=null,o=null,s=null){this.element=e,this.type=t,this.mouseColumn=i,this.position=n,!o&&n&&(o=new L(n.lineNumber,n.column,n.lineNumber,n.column)),this.range=o,this.detail=s}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return ps.toString(this)}},zs=class{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}},xu=class{constructor(e,t,i){this.model=e.model;let n=e.configuration.options;this.layoutInfo=n.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(58),this.stickyTabStops=n.get(103),this.typicalHalfwidthCharacterWidth=n.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return xu.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){let i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){let n=i.verticalOffset+i.height/2,o=e.model.getLineCount(),s=null,a,l=null;return i.afterLineNumber!==o&&(l=new V(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(s=new V(i.afterLineNumber,e.model.getLineMaxColumn(i.afterLineNumber))),l===null?a=s:s===null?a=l:t<n?a=s:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:s,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let n=this._context.model.getLineCount(),o=this._context.model.getLineMaxColumn(n);return{range:new L(n,o,n,o),isAfterLines:!0}}let t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.model.getLineMaxColumn(t);return{range:new L(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return xu._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}},H8=class{constructor(e,t,i){this.editorPos=t,this.pos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+i.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+i.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=i.x-t.x<e.layoutInfo.contentLeft&&i.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,$n._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}},iD=class extends H8{constructor(e,t,i,n){super(e,t,i);this._ctx=e,n?(this.target=n,this.targetPath=pr.collect(n,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,i=null,n=null){let o=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(o=_t.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new ps(this.target,e,o,t,i,n)}withTarget(e){return new iD(this._ctx,this.editorPos,this.pos,e)}},$8={isAfterLines:!0};function BR(r){return{isAfterLines:!1,horizontalDistanceToText:r}}var $n=class{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){let t=e.target,i=pr.collect(t,this._viewHelper.viewDomNode);return!!(zs.isChildOfContentWidgets(i)||zs.isChildOfOverflowingContentWidgets(i)||zs.isChildOfOverlayWidgets(i))}createMouseTarget(e,t,i,n){let o=new xu(this._context,this._viewHelper,e),s=new iD(o,t,i,n);try{return $n._createMouseTarget(o,s,!1)}catch{return s.fulfill(0)}}static _createMouseTarget(e,t,i){if(t.target===null){if(i)return t.fulfill(0);let s=$n._doHitTest(e,t);return s.type===1?$n.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}let n=t,o=null;return o=o||$n._hitTestContentWidget(e,n),o=o||$n._hitTestOverlayWidget(e,n),o=o||$n._hitTestMinimap(e,n),o=o||$n._hitTestScrollbarSlider(e,n),o=o||$n._hitTestViewZone(e,n),o=o||$n._hitTestMargin(e,n),o=o||$n._hitTestViewCursor(e,n),o=o||$n._hitTestTextArea(e,n),o=o||$n._hitTestViewLines(e,n,i),o=o||$n._hitTestScrollbar(e,n),o||t.fulfill(0)}static _hitTestContentWidget(e,t){if(zs.isChildOfContentWidgets(t.targetPath)||zs.isChildOfOverflowingContentWidgets(t.targetPath)){let i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(9,null,null,i):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(zs.isChildOfOverlayWidgets(t.targetPath)){let i=e.findAttribute(t.target,"widgetId");return i?t.fulfill(12,null,null,i):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){let i=e.lastRenderData.lastViewCursorsRenderData;for(let n of i)if(t.target===n.domNode)return t.fulfill(6,n.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){let i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(let s of i){if(n<s.contentLeft||n>s.contentLeft+s.width)continue;let a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=o&&o<=a+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){let i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){let n=t.isInContentArea?8:5;return t.fulfill(n,i.position,null,i)}return null}static _hitTestTextArea(e,t){return zs.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){let i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition(),o=Math.abs(t.pos.x-t.editorPos.x),s={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,n,i.range,s):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,n,i.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,n,i.range,s)))}return null}static _hitTestViewLines(e,t,i){if(!zs.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new V(1,1),null,$8);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){let o=e.model.getLineCount(),s=e.model.getLineMaxColumn(o);return t.fulfill(7,new V(o,s),null,$8)}if(i){if(zs.isStrictChildOfViewLines(t.targetPath)){let o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(o)===0){let a=e.getLineWidth(o),l=BR(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new V(o,1),null,l)}let s=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=s){let a=BR(t.mouseContentHorizontalOffset-s),l=new V(o,e.model.getLineMaxColumn(o));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}let n=$n._doHitTest(e,t);return n.type===1?$n.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):this._createMouseTarget(e,t.withTarget(n.hitTarget),!0)}static _hitTestMinimap(e,t){if(zs.isChildOfMinimap(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.model.getLineMaxColumn(i);return t.fulfill(11,new V(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(zs.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){let i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(n);return t.fulfill(11,new V(n,o))}}return null}static _hitTestScrollbar(e,t){if(zs.isChildOfScrollableElement(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.model.getLineMaxColumn(i);return t.fulfill(11,new V(i,n))}return null}getMouseColumn(e,t){let i=this._context.configuration.options,n=i.get(129),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-n.contentLeft;return $n._getMouseColumn(o,i.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,o){let s=n.lineNumber,a=n.column,l=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>l){let v=BR(t.mouseContentHorizontalOffset-l);return t.fulfill(7,n,null,v)}let c=e.visibleRangeForPosition(s,a);if(!c)return t.fulfill(0,n);let d=c.left;if(t.mouseContentHorizontalOffset===d)return t.fulfill(6,n,null,{mightBeForeignElement:!!o});let h=[];if(h.push({offset:c.left,column:a}),a>1){let v=e.visibleRangeForPosition(s,a-1);v&&h.push({offset:v.left,column:a-1})}let u=e.model.getLineMaxColumn(s);if(a<u){let v=e.visibleRangeForPosition(s,a+1);v&&h.push({offset:v.left,column:a+1})}h.sort((v,C)=>v.offset-C.offset);let m=t.pos.toClientCoordinates(),p=i.getBoundingClientRect(),_=p.left<=m.clientX&&m.clientX<=p.right;for(let v=1;v<h.length;v++){let C=h[v-1],w=h[v];if(C.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){let S=new L(s,C.column,s,w.column);return t.fulfill(6,n,S,{mightBeForeignElement:!_||!!o})}}return t.fulfill(6,n,null,{mightBeForeignElement:!_||!!o})}static _doHitTestWithCaretRangeFromPoint(e,t){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(i)+Math.floor(e.lineHeight/2),s=t.pos.y+(o-t.mouseVerticalOffset);s<=t.editorPos.y&&(s=t.editorPos.y+1),s>=t.editorPos.y+e.layoutInfo.height&&(s=t.editorPos.y+e.layoutInfo.height-1);let a=new ny(t.pos.x,s),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){let i=ga(e.viewDomNode),n;if(i?typeof i.caretRangeFromPoint=="undefined"?n=bae(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=document.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Ud;let o=n.startContainer;if(o.nodeType===o.TEXT_NODE){let s=o.parentNode,a=s?s.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Ws.CLASS_NAME?Af.createFromDOMInfo(e,s,n.startOffset):new Ud(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){let s=o.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Ws.CLASS_NAME?Af.createFromDOMInfo(e,o,o.textContent.length):new Ud(o)}return new Ud}static _doHitTestWithCaretPositionFromPoint(e,t){let i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){let n=i.offsetNode.parentNode,o=n?n.parentNode:null,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===Ws.CLASS_NAME?Af.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Ud(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){let n=i.offsetNode.parentNode,o=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,s=n?n.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(o===Ws.CLASS_NAME){let l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Af.createFromDOMInfo(e,l,0)}else if(a===Ws.CLASS_NAME)return Af.createFromDOMInfo(e,i.offsetNode,0)}return new Ud(i.offsetNode)}static _snapToSoftTabBoundary(e,t){let i=t.getLineContent(e.lineNumber),{tabSize:n}=t.getTextModelOptions(),o=Su.atomicPosition(i,e.column-1,n,2);return o!==-1?new V(e.lineNumber,o+1):e}static _doHitTest(e,t){let i=new Ud;if(typeof document.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),i.type===1){let n=e.model.getInjectedTextAt(i.position),o=e.model.normalizePosition(i.position,2);(n||!o.equals(i.position))&&(i=new tD(o,i.spanNode,n))}return i.type===1&&e.stickyTabStops&&(i=new tD(this._snapToSoftTabBoundary(i.position,e.model),i.spanNode,i.injectedText)),i}};function bae(r,e,t){let i=document.createRange(),n=r.elementFromPoint(e,t);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;let o=n.getBoundingClientRect(),s=window.getComputedStyle(n,null).getPropertyValue("font"),a=n.innerText,l=o.left,c=0,d;if(e>o.left+o.width)c=a.length;else{let h=Eu.getInstance();for(let u=0;u<a.length+1;u++){if(d=h.getCharWidth(a.charAt(u),s)/2,l+=d,e<l){c=u;break}l+=d}}i.setStart(n.firstChild,c),i.setEnd(n.firstChild,c)}return i}var Eu=class{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Eu._INSTANCE||(Eu._INSTANCE=new Eu),Eu._INSTANCE}getCharWidth(e,t){let i=e+t;if(this._cache[i])return this._cache[i];let n=this._canvas.getContext("2d");n.font=t;let s=n.measureText(e).width;return this._cache[i]=s,s}};Eu._INSTANCE=null;function Ny(r){return function(e,t){let i=!1;return r&&(i=r.mouseTargetIsWidget(t)),i||t.preventDefault(),t}}var Vd=class extends gl{constructor(e,t,i){super();this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new $n(this._context,i),this._mouseDownOperation=this._register(new K8(this._context,this.viewController,this.viewHelper,(s,a)=>this._createMouseTarget(s,a),s=>this._getMouseColumn(s))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;let n=new TN(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,s=>this._onContextMenu(s,!0))),this._register(n.onMouseMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),Ny(this.mouseTargetFactory),Vd.MOUSE_MOVE_MINIMUM_TIME)),this._register(n.onMouseUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(n.onMouseDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)));let o=s=>{if(this.viewController.emitMouseWheel(s),!this._context.configuration.options.get(67))return;let a=new Ja(s);if(We?(s.metaKey||s.ctrlKey)&&!s.shiftKey&&!s.altKey:s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey){let c=js.getZoomLevel(),d=a.deltaY>0?1:-1;js.setZoomLevel(c+d),a.preventDefault(),a.stopPropagation()}};this._register(J(this.viewHelper.viewDomNode,De.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){let t=this._context.configuration.options.get(129).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){let n=new dE(e,t).toPageCoordinates(),o=ON(this.viewHelper.viewDomNode);return n.y<o.y||n.y>o.y+o.height||n.x<o.x||n.x>o.x+o.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,n,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){let n=ga(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){let t=this._createMouseTarget(e,!0),i=t.type===6||t.type===7,n=t.type===2||t.type===3||t.type===4,o=t.type===3,s=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9,c=e.leftButton||e.middleButton;We&&e.leftButton&&e.ctrlKey&&(c=!1);let d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(i||o&&s))d(),this._mouseDownOperation.start(t.type,e);else if(n)e.preventDefault();else if(a){let h=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}};Vd.MOUSE_MOVE_MINIMUM_TIME=100;var K8=class extends H{constructor(e,t,i,n,o){super();this._context=e,this._viewController=t,this._viewHelper=i,this._createMouseTarget=n,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new RN(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new li),this._mouseState=new Ry,this._currentSelection=new le(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);let t=this._findMousePosition(e,!0);!t||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);let i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;let n=this._context.configuration.options;if(!n.get(80)&&n.get(31)&&!n.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Ny(null),o=>this._onMouseDownThenMove(o),o=>{let s=this._findMousePosition(this._lastMouseEvent,!0);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:s?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,Ny(null),o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;let e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){let t=e.editorPos,i=this._context.model,n=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){let a=Math.max(n.getCurrentScrollTop()-(t.y-e.posy),0),l=xu.getZoneAtCoord(this._context,a);if(l){let d=this._helpPositionJumpOverViewZone(l);if(d)return new ps(null,13,o,d)}let c=n.getLineNumberAtVerticalOffset(a);return new ps(null,13,o,new V(c,1))}if(e.posy>t.y+t.height){let a=n.getCurrentScrollTop()+(e.posy-t.y),l=xu.getZoneAtCoord(this._context,a);if(l){let d=this._helpPositionJumpOverViewZone(l);if(d)return new ps(null,13,o,d)}let c=n.getLineNumberAtVerticalOffset(a);return new ps(null,13,o,new V(c,i.getLineMaxColumn(c)))}let s=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new ps(null,13,o,new V(s,1)):e.posx>t.x+t.width?new ps(null,13,o,new V(s,i.getLineMaxColumn(s))):null}_findMousePosition(e,t){let i=this._getPositionOutsideEditor(e);if(i)return i;let n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){let s=this._helpPositionJumpOverViewZone(n.detail);if(s)return new ps(n.element,n.type,n.mouseColumn,s,null,n.detail)}return n}_helpPositionJumpOverViewZone(e){let t=new V(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}},Ry=class{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){let i=new Date().getTime();i-this._lastSetMouseDownCountTime>Ry.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};Ry.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var yo;(function(r){r.text="text/plain",r.binary="application/octet-stream",r.unknown="application/unknown",r.markdown="text/markdown",r.latex="text/latex"})(yo||(yo={}));var jf=[],WR=[],nD=[];function Py(r,e=!1){let t=vae(r);jf.push(t),t.userConfigured?nD.push(t):WR.push(t),e&&!t.userConfigured&&jf.forEach(i=>{i.mime===t.mime||i.userConfigured||(t.extension&&i.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&i.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&i.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&i.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function vae(r){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:r.userConfigured,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?dT(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(zi.sep)>=0:!1}}function q8(r){r?(jf=jf.filter(e=>!e.userConfigured),nD=[]):(jf=[],WR=[],nD=[])}function Y8(r,e){let t;if(r)switch(r.scheme){case Xe.file:t=r.fsPath;break;case Xe.data:t=Xl.parseMetaData(r).get(Xl.META_DATA_LABEL);break;default:t=r.path}if(!t)return[yo.unknown];t=t.toLowerCase();let i=$l(t),n=Z8(t,i,nD);if(n)return[n,yo.text];let o=Z8(t,i,WR);if(o)return[o,yo.text];if(e){let s=wae(e);if(s)return[s,yo.text]}return[yo.unknown]}function Z8(r,e,t){var i;let n=null,o=null,s=null;for(let a=t.length-1;a>=0;a--){let l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!o||l.filepattern.length>o.filepattern.length)){let c=l.filepatternOnPath?r:e;((i=l.filepatternLowercase)===null||i===void 0?void 0:i.call(l,c))&&(o=l)}l.extension&&(!s||l.extension.length>s.extension.length)&&e.endsWith(l.extensionLowercase)&&(s=l)}return n?n.mime:o?o.mime:s?s.mime:null}function wae(r){if(Mp(r)&&(r=r.substr(1)),r.length>0)for(let e=jf.length-1;e>=0;e--){let t=jf[e];if(!t.firstline)continue;let i=r.match(t.firstline);if(i&&i.length>0)return t.mime}return null}var _s=!1,ln=class{constructor(e,t,i,n,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selectionStartPosition=n,this.selectionEndPosition=o}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new ln(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new ln(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,i){_s&&console.log("writeToTextArea "+e+": "+this.toString()),t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){let n=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,n,-1)}if(e>=this.selectionEnd){let n=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,1)}let t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);let i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)n++;return[e,i*t.length,n]}static selectedText(e){return new ln(e,0,e.length,null,null)}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};_s&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString()));let n=e.value,o=e.selectionStart,s=e.selectionEnd,a=t.value,l=t.selectionStart,c=t.selectionEnd,d=n.substring(s),h=a.substring(c),u=Vm(d,h);a=a.substring(0,a.length-u),n=n.substring(0,n.length-u);let m=n.substring(0,o),p=a.substring(0,l),_=nl(m,p);if(a=a.substring(_),n=n.substring(_),l-=_,o-=_,c-=_,s-=_,_s&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+n+">, selectionStart: "+o+", selectionEnd: "+s),console.log("AFTER DIFFING CURRENT STATE: <"+a+">, selectionStart: "+l+", selectionEnd: "+c)),i&&l===c&&n.length>0){let C=null;if(l===a.length?a.startsWith(n)&&(C=a.substring(n.length)):a.endsWith(n)&&(C=a.substring(0,a.length-n.length)),C!==null&&C.length>0&&(/\uFE0F/.test(C)||WW(C)))return{text:C,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===c){if(n===a&&o===0&&s===n.length&&l===a.length&&a.indexOf(`
`)===-1&&UW(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let C=m.length-_;return _s&&console.log("REMOVE PREVIOUS: "+(m.length-_)+" chars"),{text:a,replacePrevCharCnt:C,replaceNextCharCnt:0,positionDelta:0}}let v=s-o;return{text:a,replacePrevCharCnt:v,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(_s&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: "+e.toString()),console.log("CURRENT STATE: "+t.toString())),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};let i=Math.min(nl(e.value,t.value),e.selectionEnd),n=Math.min(Vm(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(i,e.value.length-n),s=t.value.substring(i,t.value.length-n),a=e.selectionStart-i,l=e.selectionEnd-i,c=t.selectionStart-i,d=t.selectionEnd-i;return _s&&(console.log("AFTER DIFFING PREVIOUS STATE: <"+o+">, selectionStart: "+a+", selectionEnd: "+l),console.log("AFTER DIFFING CURRENT STATE: <"+s+">, selectionStart: "+c+", selectionEnd: "+d)),{text:s,replacePrevCharCnt:l,replaceNextCharCnt:o.length-l,positionDelta:d-s.length}}};ln.EMPTY=new ln("",0,0,null,null);var Du=class{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){let i=e*t,n=i+1,o=i+t;return new L(n,1,o+1,1)}static fromEditorSelection(e,t,i,n,o){let s=Du._getPageOfLine(i.startLineNumber,n),a=Du._getRangeForPage(s,n),l=Du._getPageOfLine(i.endLineNumber,n),c=Du._getRangeForPage(l,n),d=a.intersectRanges(new L(1,1,i.startLineNumber,i.startColumn)),h=t.getValueInRange(d,1),u=t.getLineCount(),m=t.getLineMaxColumn(u),p=c.intersectRanges(new L(i.endLineNumber,i.endColumn,u,m)),_=t.getValueInRange(p,1),v;if(s===l||s+1===l)v=t.getValueInRange(i,1);else{let C=a.intersectRanges(i),w=c.intersectRanges(i);v=t.getValueInRange(C,1)+String.fromCharCode(8230)+t.getValueInRange(w,1)}if(o){let C=500;h.length>C&&(h=h.substring(h.length-C,h.length)),_.length>C&&(_=_.substring(0,C)),v.length>2*C&&(v=v.substring(0,C)+String.fromCharCode(8230)+v.substring(v.length-C,v.length))}return new ln(h+v+_,h.length,h.length+v.length,new V(i.startLineNumber,i.startColumn),new V(i.endLineNumber,i.endColumn))}};var Ay;(function(r){r.Tap="-monaco-textarea-synthetic-tap"})(Ay||(Ay={}));var jy={forceCopyWithSyntaxHighlighting:!1},Mf=class{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};Mf.INSTANCE=new Mf;var UR=class extends H{constructor(e,t){super();this.textArea=t,this._onFocus=this._register(new M),this.onFocus=this._onFocus.event,this._onBlur=this._register(new M),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new M),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new M),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new M),this.onCut=this._onCut.event,this._onPaste=this._register(new M),this.onPaste=this._onPaste.event,this._onType=this._register(new M),this.onType=this._onType.event,this._onCompositionStart=this._register(new M),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new M),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new M),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new M),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new G8(t)),this._asyncTriggerCut=this._register(new dt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new dt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=ln.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let i=null;this._register(Zt(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),i=a,this._onKeyDown.fire(a)})),this._register(Zt(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(J(t.domNode,"compositionstart",a=>{if(_s&&console.log("[compositionstart]",a),!this._isDoingComposition){if(this._isDoingComposition=!0,We&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(i&&i.equals(109)&&(i.code==="ArrowRight"||i.code==="ArrowLeft")||Hi)){_s&&console.log("[compositionstart] Handling long press case on macOS + arrow key or Firefox",a),this._textAreaState=new ln(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new V(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(Bm){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",ln.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));let n=a=>{let l=this._textAreaState,c=ln.readFromTextArea(this._textArea);return[c,ln.deduceInput(l,c,a)]},o=()=>{let a=this._textAreaState,l=ln.readFromTextArea(this._textArea);return[l,ln.deduceAndroidCompositionInput(a,l)]},s=a=>{let l=this._textAreaState,c=ln.selectedText(a),d={text:c.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[c,d]};this._register(J(t.domNode,"compositionupdate",a=>{if(_s&&console.log("[compositionupdate]",a),Bm){let[d,h]=o();this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(a);return}let[l,c]=s(a.data||"");this._textAreaState=l,this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(J(t.domNode,"compositionend",a=>{if(_s&&console.log("[compositionend]",a),!this._isDoingComposition)return;if(this._isDoingComposition=!1,Bm){let[d,h]=o();this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}let[l,c]=s(a.data||"");this._textAreaState=l,this._onType.fire(c),(iw||Hi)&&(this._textAreaState=ln.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(J(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;let[a,l]=n(We);l.replacePrevCharCnt===0&&l.text.length===1&&ki(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(J(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(J(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(J(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),G_.canUseTextData(a)){let[l,c]=G_.getTextData(a);l!==""&&this._firePaste(l,c)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",ln.EMPTY),this._nextCommand=1})),this._register(J(t.domNode,"focus",()=>{let a=this._hasFocus;this._setHasFocus(!0),Gn&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(J(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(J(t.domNode,Ay.Tap,()=>{Bm&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return J(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!iw)return;let i=Date.now(),n=i-e;if(e=i,n<5)return;let o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;let s=this._textArea.getValue();if(this._textAreaState.value!==s)return;let a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;let c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),u=this._host.deduceModelPosition(h[0],h[1],h[2]),m=new le(d.lineNumber,d.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){let e=ga(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):Ip(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){let t=this._host.getDataToCopy(G_.canUseTextData(e)),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(Mf.INSTANCE.set(Hi?t.text.replace(/\r\n/g,`
`):t.text,i),!G_.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",ln.selectedText(t.text));return}G_.setTextData(e,t.text,t.html,i)}_firePaste(e,t){t||(t=Mf.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}},G_=class{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();let t=e.clipboardData.getData(yo.text),i=null,n=e.clipboardData.getData("vscode-editor-data");if(typeof n=="string")try{i=JSON.parse(n),i.version!==1&&(i=null)}catch{}return[t,i]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,i,n){if(e.clipboardData){e.clipboardData.setData(yo.text,t),typeof i=="string"&&e.clipboardData.setData("text/html",i),e.clipboardData.setData("vscode-editor-data",JSON.stringify(n)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}},G8=class extends H{constructor(e){super();this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){let i=this._actual.domNode;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,i){let n=this._actual.domNode,o=null,s=ga(n);s?o=s.activeElement:o=document.activeElement;let a=o===n,l=n.selectionStart,c=n.selectionEnd;if(a&&l===t&&c===i){Hi&&window.parent!==window&&n.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),Hi&&window.parent!==window&&n.focus();return}try{let d=kW(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),IW(n,d)}catch{}}};var X8=class extends Vd{constructor(e,t,i){super(e,t,i);this._register(yt.addTarget(this.viewHelper.linesContentDomNode)),this._register(J(this.viewHelper.linesContentDomNode,Ft.Tap,o=>this.onTap(o))),this._register(J(this.viewHelper.linesContentDomNode,Ft.Change,o=>this.onChange(o))),this._register(J(this.viewHelper.linesContentDomNode,Ft.Contextmenu,o=>this._onContextMenu(new Dd(o,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(J(this.viewHelper.linesContentDomNode,"pointerdown",o=>{let s=o.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));let n=new NN(this.viewHelper.viewDomNode);this._register(n.onPointerMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),Ny(this.mouseTargetFactory),Vd.MOUSE_MOVE_MINIMUM_TIME)),this._register(n.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new Dd(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}},Q8=class extends Vd{constructor(e,t,i){super(e,t,i);this._register(yt.addTarget(this.viewHelper.linesContentDomNode)),this._register(J(this.viewHelper.linesContentDomNode,Ft.Tap,n=>this.onTap(n))),this._register(J(this.viewHelper.linesContentDomNode,Ft.Change,n=>this.onChange(n))),this._register(J(this.viewHelper.linesContentDomNode,Ft.Contextmenu,n=>this._onContextMenu(new Dd(n,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new Dd(e,this.viewHelper.viewDomNode),!1);if(t.position){let i=document.createEvent("CustomEvent");i.initEvent(Ay.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}},VR=class extends H{constructor(e,t,i){super();To&&Wm.pointerEvents?this.handler=this._register(new X8(e,t,i)):window.TouchEvent?this.handler=this._register(new Q8(e,t,i)):this.handler=this._register(new Vd(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}};var Hs=class extends gl{};var zd=class extends Hs{constructor(e){super();this._context=e,this._readConfig(),this._lastCursorModelPosition=new V(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(58);let t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);let i=e.get(129);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){let t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new V(e,1));if(t.column!==1)return"";let i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){let n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return n===0?'<span class="relative-current-line-number">'+i+"</span>":String(n)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10==0?String(i):"":String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}let t=ji?this._lineHeight%2==0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o='<div class="'+zd.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),a=[];for(let l=i;l<=n;l++){let c=l-i;if(!this._renderFinalNewline&&l===s&&this._context.model.getLineLength(l)===0){a[c]="";continue}let d=this._getLineRenderLineNumber(l);d?l===this._activeLineNumber?a[c]='<div class="active-line-number '+zd.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+d+"</div>":a[c]=o+d+"</div>":a[c]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};zd.CLASS_NAME="line-numbers";Be((r,e)=>{let t=r.getColor(zE);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);let i=r.getColor(c8);i&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${i}; }`)});var Ec=class extends Ki{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(129);this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=tt(document.createElement("div")),this._domNode.setClassName(Ec.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=tt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ec.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};Ec.CLASS_NAME="glyph-margin";Ec.OUTER_CLASS_NAME="margin";var vl="monaco-mouse-cursor-text";var rD=class{constructor(e,t,i){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=i}setWidth(e){return new rD(this.top,this.left,e)}},My=Hi,zR=class extends Ki{constructor(e,t,i){super(e);this._primaryCursorPosition=new V(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=i,this._scrollLeft=0,this._scrollTop=0;let n=this._context.configuration.options,o=n.get(129);this._setAccessibilityOptions(n),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=n.get(43),this._lineHeight=n.get(58),this._emptySelectionClipboard=n.get(32),this._copyWithSyntaxHighlighting=n.get(21),this._visibleTextArea=null,this._selections=[new le(1,1,1,1)],this._modelSelections=[new le(1,1,1,1)],this._lastRenderPosition=null,this.textArea=tt(document.createElement("textarea")),pr.write(this.textArea,6),this.textArea.setClassName(`inputarea ${vl}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(n)),this.textArea.setAttribute("tabindex",String(n.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",g("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),n.get(30)&&n.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=tt(document.createElement("div")),this.textAreaCover.setPosition("absolute");let s={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,c)=>this._context.model.getValueInRange(l,c)},a={getDataToCopy:l=>{let c=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,bi),d=this._context.model.getEOL(),h=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),u=Array.isArray(c)?c:null,m=Array.isArray(c)?c.join(d):c,p,_=null;if(l&&(jy.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&m.length<65536)){let v=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(p=v.html,_=v.mode)}return{isFromEmptySelection:h,multicursorText:u,text:m,html:p,mode:_}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(We){let c=this._selections[0];if(c.isEmpty()){let d=c.getStartPosition(),h=this._getWordBeforePosition(d);if(h.length===0&&(h=this._getCharacterBeforePosition(d)),h.length>0)return new ln(h,h.length,h.length,d,d)}}return ln.EMPTY}if(Bm){let c=this._selections[0];if(c.isEmpty()){let d=c.getStartPosition(),[h,u]=this._getAndroidWordAtPosition(d);if(h.length>0)return new ln(h,u,u,d,d)}return ln.EMPTY}return Du.fromEditorSelection(l,s,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,c,d)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,c,d)};this._textAreaInput=this._register(new UR(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let c=!1,d=null,h=null;l.metadata&&(c=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,d=typeof l.metadata.multicursorText!="undefined"?l.metadata.multicursorText:null,h=l.metadata.mode),this._viewController.paste(l.text,c,d,h)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?(_s&&console.log(` => compositionType: <<${l.text}>>, ${l.replacePrevCharCnt}, ${l.replaceNextCharCnt}, ${l.positionDelta}`),this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta)):(_s&&console.log(` => type: <<${l.text}>>`),this._viewController.type(l.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{let c=this._selections[0].startLineNumber,d=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new L(c,d,c,d),0,1);let h=this._viewHelper.visibleRangeForPositionRelativeToEditor(c,d);h&&(this._visibleTextArea=new rD(this._context.viewLayout.getVerticalOffsetForLineNumber(c),h.left,My?0:1),this._render()),this.textArea.setClassName(`inputarea ${vl} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{!this._visibleTextArea||(this._visibleTextArea=this._visibleTextArea.setWidth(yae(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${vl}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){let t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.model.getLineContent(e.lineNumber),n=Ir(t),o=!0,s=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&s<=1&&(o=!1),o){let d=i.charCodeAt(s-2);n.get(d)!==0?o=!1:s--}if(a&&l>i.length&&(a=!1),a){let d=i.charCodeAt(l-1);n.get(d)!==0?a=!1:l++}c++}return[i.substring(s-1,l-1),e.column-s]}_getWordBeforePosition(e){let t=this._context.model.getLineContent(e.lineNumber),i=Ir(this._context.configuration.options.get(115)),n=e.column,o=0;for(;n>1;){let s=t.charCodeAt(n-2);if(i.get(s)!==0||o>50)return t.substring(n-1,e.column-1);o++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){let i=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!ki(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){return e.get(2)===1?g("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",ji?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);let t=e.get(3);this._accessibilitySupport===2&&t===lo.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new V(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(We){this._renderInsideEditor(this._primaryCursorPosition,t,e,My?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,My?0:1,My?0:1)}_renderInsideEditor(e,t,i,n,o){this._lastRenderPosition=e;let s=this.textArea,a=this.textAreaCover;Ti.applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(i),s.setWidth(n),s.setHeight(o),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;let e=this.textArea,t=this.textAreaCover;if(Ti.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),My){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);let i=this._context.configuration.options;i.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Ec.OUTER_CLASS_NAME):i.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+zd.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}};function yae(r,e){let i=document.createElement("canvas").getContext("2d");i.font=Cae(e);let n=i.measureText(r);return Hi?n.width+2:n.width}function Cae(r){return Sae("normal",r.fontWeight,r.fontSize,r.lineHeight,r.fontFamily)}function Sae(r,e,t,i,n){return`${r} normal ${e} ${t}px / ${i}px ${n}`}var Hd=class{static columnSelect(e,t,i,n,o,s){let a=Math.abs(o-i)+1,l=i>o,c=n>s,d=n<s,h=[];for(let u=0;u<a;u++){let m=i+(l?-u:u),p=_t.columnFromVisibleColumn2(e,t,m,n),_=_t.columnFromVisibleColumn2(e,t,m,s),v=_t.visibleColumnFromColumn2(e,t,new V(m,p)),C=_t.visibleColumnFromColumn2(e,t,new V(m,_));d&&(v>s||C<n)||c&&(C>n||v<s)||h.push(new qi(new L(m,p,m,p),0,new V(m,_),0))}if(h.length===0)for(let u=0;u<a;u++){let m=i+(l?-u:u),p=t.getLineMaxColumn(m);h.push(new qi(new L(m,p,m,p),0,new V(m,p),0))}return{viewStates:h,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:o,toVisualColumn:s}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,Hd.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0,o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),s=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=o;l<=s;l++){let c=t.getLineMaxColumn(l),d=_t.visibleColumnFromColumn2(e,t,new V(l,c));n=Math.max(n,d)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){let o=n?e.pageSize:1,s=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){let o=n?e.pageSize:1,s=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,s,i.toViewVisualColumn)}};var Yi=class{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new le(n.endLineNumber,n.endColumn,n.endLineNumber,n.endColumn)}},HR=class{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new le(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn)}},X_=class{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new le(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn)}},Q_=class{constructor(e,t,i,n,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return new le(n.endLineNumber+this._lineNumberDeltaOffset,n.endColumn+this._columnDeltaOffset,n.endLineNumber+this._lineNumberDeltaOffset,n.endColumn+this._columnDeltaOffset)}},Ff=class{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};var oD=class{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}},Et=class{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-BW(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){let i=t.lineNumber-1;return new V(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let n=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=Su.atomicPosition(o,t.column-1,i,0);if(s!==-1&&s+1>=n)return new V(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,i){let n=e.stickyTabStops?Et.leftPositionAtomicSoftTabs(t,i,e.tabSize):Et.leftPosition(t,i);return new oD(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,o){let s,a;if(i.hasSelection()&&!n)s=i.selection.startLineNumber,a=i.selection.startColumn;else{let l=i.position.delta(void 0,-(o-1)),c=t.normalizePosition(Et.clipPositionColumn(l,t),0),d=Et.left(e,t,c);s=d.lineNumber,a=d.column}return i.move(n,s,a,0)}static clipPositionColumn(e,t){return new V(e.lineNumber,Et.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+zm(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new V(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,o){if(i<e.getLineIndentColumn(t)){let s=e.getLineContent(t),a=Su.atomicPosition(s,i-1,n,1);if(a!==-1)return new V(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){let n=e.stickyTabStops?Et.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Et.rightPosition(t,i.lineNumber,i.column);return new oD(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,o){let s,a;if(i.hasSelection()&&!n)s=i.selection.endLineNumber,a=i.selection.endColumn;else{let l=i.position.delta(void 0,o-1),c=t.normalizePosition(Et.clipPositionColumn(l,t),1),d=Et.right(e,t,c);s=d.lineNumber,a=d.column}return i.move(n,s,a,0)}static vertical(e,t,i,n,o,s,a){let l=_t.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+o,c=t.getLineCount(),d=i===1&&n===1,h=i===c&&n===t.getLineMaxColumn(i),u=s<i?d:h;return i=s,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>c?(i=c,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=_t.columnFromVisibleColumn2(e,t,i,l),u?o=0:o=l-_t.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),new oD(i,n,o)}static down(e,t,i,n,o,s,a){return this.vertical(e,t,i,n,o,i+s,a)}static moveDown(e,t,i,n,o){let s,a;i.hasSelection()&&!n?(s=i.selection.endLineNumber,a=i.selection.endColumn):(s=i.position.lineNumber,a=i.position.column);let l=Et.down(e,t,s,a,i.leftoverVisibleColumns,o,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,i){let n=i.selection,o=Et.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),s=Et.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new qi(new L(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new V(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,i,n,o,s,a){return this.vertical(e,t,i,n,o,i-s,a)}static moveUp(e,t,i,n,o){let s,a;i.hasSelection()&&!n?(s=i.selection.startLineNumber,a=i.selection.startColumn):(s=i.position.lineNumber,a=i.position.column);let l=Et.up(e,t,s,a,i.leftoverVisibleColumns,o,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){let n=i.selection,o=Et.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),s=Et.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new qi(new L(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new V(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,n){let o=t.getLineCount(),s=i.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,i,n){let o=i.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,l;return i.position.column===a?l=s:l=a,i.move(n,o,l,0)}static moveToEndOfLine(e,t,i,n,o){let s=i.position.lineNumber,a=t.getLineMaxColumn(s);return i.move(n,s,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return i.move(n,o,s,0)}};var wl=class{static deleteRight(e,t,i,n){let o=[],s=e!==3;for(let a=0,l=n.length;a<l;a++){let c=n[a],d=c;if(d.isEmpty()){let h=c.getPosition(),u=Et.right(t,i,h);d=new L(u.lineNumber,u.column,h.lineNumber,h.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(s=!0),o[a]=new Yi(d,"")}return[s,o]}static isAutoClosingPairDelete(e,t,i,n,o,s,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=s.length;l<c;l++){let d=s[l],h=d.getPosition();if(!d.isEmpty())return!1;let u=o.getLineContent(h.lineNumber);if(h.column<2||h.column>=u.length+1)return!1;let m=u.charAt(h.column-2),p=n.get(m);if(!p)return!1;if(Cu(m)){if(i==="never")return!1}else if(t==="never")return!1;let _=u.charAt(h.column-1),v=!1;for(let C of p)C.open===m&&C.close===_&&(v=!0);if(!v)return!1;if(e==="auto"){let C=!1;for(let w=0,S=a.length;w<S;w++){let D=a[w];if(h.lineNumber===D.startLineNumber&&h.column===D.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){let n=[];for(let o=0,s=i.length;o<s;o++){let a=i[o].getPosition(),l=new L(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[o]=new Yi(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,o))return this._runAutoClosingPairDelete(t,i,n);let s=[],a=e!==2;for(let l=0,c=n.length;l<c;l++){let d=wl.getDeleteRange(n[l],i,t);if(d.isEmpty()){s[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),s[l]=new Yi(d,"")}return[a,s]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;let n=e.getPosition();if(i.useTabStops&&n.column>1){let o=t.getLineContent(n.lineNumber),s=Wi(o),a=s===-1?o.length+1:s+1;if(n.column<=a){let l=_t.visibleColumnFromColumn2(i,t,n),c=_t.prevIndentTabStop(l,i.indentSize),d=_t.columnFromVisibleColumn2(i,t,n.lineNumber,c);return new L(n.lineNumber,d,n.lineNumber,n.column)}}return L.fromPositions(wl.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let i=HW(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){let i=e.lineNumber-1;return new V(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){let n=[],o=null;i.sort((s,a)=>V.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=i.length;s<a;s++){let l=i[s];if(l.isEmpty())if(e.emptySelectionClipboard){let c=l.getPosition(),d,h,u,m;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,u=c.lineNumber+1,m=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),u=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,u=c.lineNumber,m=t.getLineMaxColumn(c.lineNumber));let p=new L(d,h,u,m);o=p,p.isEmpty()?n[s]=null:n[s]=new Yi(p,"")}else n[s]=null;else n[s]=new Yi(l,"")}return new _r(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}};var Ct=class{static _createWord(e,t,i,n,o){return{start:n,end:o,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;for(let o=i.column-2;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===0){if(n===2)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1));n=1}else if(a===2){if(n===1)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1));n=2}else if(a===1&&n!==0)return this._createWord(e,n,a,o+1,this._findEndOfWord(e,t,n,o+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){let o=e.length;for(let s=n;s<o;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===1||i===1&&l===2||i===2&&l===0)return s}return o}static _findNextWordOnLine(e,t,i){let n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0,o=e.length;for(let s=i.column-1;s<o;s++){let a=e.charCodeAt(s),l=t.get(a);if(l===0){if(n===2)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,s-1),s);n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,s-1),s);n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,this._findStartOfWord(e,t,n,s-1),s)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,o-1),o):null}static _findStartOfWord(e,t,i,n){for(let o=n;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===1||i===1&&a===2||i===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,i,n){let o=i.lineNumber,s=i.column;s===1&&o>1&&(o=o-1,s=t.getLineMaxColumn(o));let a=Ct._findPreviousWordOnLine(e,t,new V(o,s));if(n===0)return new V(o,a?a.start+1:1);if(n===1)return a&&a.wordType===2&&a.end-a.start==1&&a.nextCharClass===0&&(a=Ct._findPreviousWordOnLine(e,t,new V(o,a.start+1))),new V(o,a?a.start+1:1);if(n===3){for(;a&&a.wordType===2;)a=Ct._findPreviousWordOnLine(e,t,new V(o,a.start+1));return new V(o,a?a.start+1:1)}return a&&s<=a.end+1&&(a=Ct._findPreviousWordOnLine(e,t,new V(o,a.start+1))),new V(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){let i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new V(i-1,e.getLineMaxColumn(i-1)):t;let o=e.getLineContent(i);for(let s=t.column-1;s>1;s--){let a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a===95&&l!==95)return new V(i,s);if(Yl(a)&&Rs(l))return new V(i,s);if(Rs(a)&&Rs(l)&&s+1<n){let c=o.charCodeAt(s);if(Yl(c))return new V(i,s)}}return new V(i,1)}static moveWordRight(e,t,i,n){let o=i.lineNumber,s=i.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);let l=Ct._findNextWordOnLine(e,t,new V(o,s));if(n===2)l&&l.wordType===2&&l.end-l.start==1&&l.nextCharClass===0&&(l=Ct._findNextWordOnLine(e,t,new V(o,l.end+1))),l?s=l.end+1:s=t.getLineMaxColumn(o);else if(n===3){for(a&&(s=0);l&&(l.wordType===2||l.start+1<=s);)l=Ct._findNextWordOnLine(e,t,new V(o,l.end+1));l?s=l.start+1:s=t.getLineMaxColumn(o)}else l&&!a&&s>=l.start+1&&(l=Ct._findNextWordOnLine(e,t,new V(o,l.end+1))),l?s=l.start+1:s=t.getLineMaxColumn(o);return new V(o,s)}static _moveWordPartRight(e,t){let i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new V(i+1,1):t;let o=e.getLineContent(i);for(let s=t.column+1;s<n;s++){let a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a!==95&&l===95)return new V(i,s);if(Yl(a)&&Rs(l))return new V(i,s);if(Rs(a)&&Rs(l)&&s+1<n){let c=o.charCodeAt(s);if(Yl(c))return new V(i,s)}}return new V(i,n)}static _deleteWordLeftWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=t.column-2,o=Lr(i,n);return o+1<n?new L(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(wl.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let h=e.selection.getPosition();return new L(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}let a=new V(o.positionLineNumber,o.positionColumn),l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(s){let h=this._deleteWordLeftWhitespace(n,a);if(h)return h}let d=Ct._findPreviousWordOnLine(i,n,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=Ct._findPreviousWordOnLine(i,n,new V(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;let n=new V(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,n);return o||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){let i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let s=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,s))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;s+1<n&&this._charAtIsWhitespace(i,s+1);)s++;return new L(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){let n=t.getLineContent(i.lineNumber),o=n.length;if(o===0)return i.lineNumber>1?new L(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new L(i.lineNumber,1,i.lineNumber+1,1):new L(i.lineNumber,1,i.lineNumber,1);let s=h=>h.start+1<=i.column&&i.column<=h.end+1,a=(h,u)=>(h=Math.min(h,i.column),u=Math.max(u,i.column),new L(i.lineNumber,h,i.lineNumber,u)),l=h=>{let u=h.start+1,m=h.end+1,p=!1;for(;m-1<o&&this._charAtIsWhitespace(n,m-1);)p=!0,m++;if(!p)for(;u>1&&this._charAtIsWhitespace(n,u-2);)u--;return a(u,m)},c=Ct._findPreviousWordOnLine(e,t,i);if(c&&s(c))return l(c);let d=Ct._findNextWordOnLine(e,t,i);return d&&s(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=Ct._moveWordPartLeft(e,i);return new L(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){let i=e.length;for(let n=t;n<i;n++){let o=e.charAt(n);if(o!==" "&&o!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){let i=e.getLineContent(t.lineNumber),n=t.column-1,o=this._findFirstNonWhitespaceChar(i,n);return n+1<o?new L(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){let i=e.wordSeparators,n=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;let a=new V(o.positionLineNumber,o.positionColumn),l=a.lineNumber,c=a.column,d=n.getLineCount(),h=n.getLineMaxColumn(l);if(l===d&&c===h)return null;if(s){let m=this._deleteWordRightWhitespace(n,a);if(m)return m}let u=Ct._findNextWordOnLine(i,n,a);return t===2?u?c=u.end+1:c<h||l===d?c=h:(l++,u=Ct._findNextWordOnLine(i,n,new V(l,1)),u?c=u.start+1:c=n.getLineMaxColumn(l)):(u&&c>=u.start+1&&(u=Ct._findNextWordOnLine(i,n,new V(l,u.end+1))),u?c=u.start+1:c<h||l===d?c=h:(l++,u=Ct._findNextWordOnLine(i,n,new V(l,1)),u?c=u.start+1:c=n.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let i=t.getPosition(),n=Ct._moveWordPartRight(e,i);return new L(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){let n=new L(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i){let n=Ir(t),o=Ct._findPreviousWordOnLine(n,e,i);if(o&&o.wordType===1&&o.start<=i.column-1&&i.column-1<=o.end)return Ct._createWordAtPosition(e,i.lineNumber,o);let s=Ct._findNextWordOnLine(n,e,i);return s&&s.wordType===1&&s.start<=i.column-1&&i.column-1<=s.end?Ct._createWordAtPosition(e,i.lineNumber,s):null}static word(e,t,i,n,o){let s=Ir(e.wordSeparators),a=Ct._findPreviousWordOnLine(s,t,o),l=Ct._findNextWordOnLine(s,t,o);if(!n){let m,p;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(m=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(m=l.start+1,p=l.end+1):(a?m=a.end+1:m=1,l?p=l.start+1:p=t.getLineMaxColumn(o.lineNumber)),new qi(new L(o.lineNumber,m,o.lineNumber,p),0,new V(o.lineNumber,p),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);let h=o.lineNumber,u;if(i.selectionStart.containsPosition(o))u=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){u=c;let m=new V(h,u);i.selectionStart.containsPosition(m)&&(u=i.selectionStart.endColumn)}else{u=d;let m=new V(h,u);i.selectionStart.containsPosition(m)&&(u=i.selectionStart.startColumn)}return i.move(!0,h,u,0)}},J_=class extends Ct{static deleteWordPartLeft(e){let t=sD([Ct.deleteWordLeft(e,0),Ct.deleteWordLeft(e,2),Ct._deleteWordPartLeft(e.model,e.selection)]);return t.sort(L.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){let t=sD([Ct.deleteWordRight(e,0),Ct.deleteWordRight(e,2),Ct._deleteWordPartRight(e.model,e.selection)]);return t.sort(L.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i){let n=sD([Ct.moveWordLeft(e,t,i,0),Ct.moveWordLeft(e,t,i,2),Ct._moveWordPartLeft(t,i)]);return n.sort(V.compare),n[2]}static moveWordPartRight(e,t,i){let n=sD([Ct.moveWordRight(e,t,i,0),Ct.moveWordRight(e,t,i,2),Ct._moveWordPartRight(t,i)]);return n.sort(V.compare),n[0]}};function sD(r){return r.filter(e=>Boolean(e))}var gn=class{static addCursorDown(e,t,i){let n=[],o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];n[o++]=new nt(l.modelState,l.viewState),i?n[o++]=nt.fromModelState(Et.translateDown(e.cursorConfig,e.model,l.modelState)):n[o++]=nt.fromViewState(Et.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){let n=[],o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];n[o++]=new nt(l.modelState,l.viewState),i?n[o++]=nt.fromModelState(Et.translateUp(e.cursorConfig,e.model,l.modelState)):n[o++]=nt.fromViewState(Et.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];n[o]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){let n=t.viewState.position.column,o=t.modelState.position.column,s=n===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return nt.fromViewState(Et.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return nt.fromModelState(Et.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=this._moveToLineEnd(e,l,i,n)}return o}static _moveToLineEnd(e,t,i,n){let o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),a=o.column===s,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=s-o.column==c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return nt.fromViewState(Et.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return nt.fromModelState(Et.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){let i=[];for(let n=0,o=t.length;n<o;n++){let s=t[n],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount(),c=s.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[n]=nt.fromModelState(new qi(new L(a,1,a,1),0,new V(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];n[o]=nt.fromModelState(Et.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];n[o]=nt.fromModelState(Et.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){let i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return nt.fromModelState(new qi(new L(1,1,1,1),0,new V(i,n),0))}static line(e,t,i,n,o){let s=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new V(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!i||!t.modelState.hasSelection()){let c=e.model.getLineCount(),d=s.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),nt.fromModelState(new qi(new L(s.lineNumber,1,d,h),0,new V(d,h),0))}let l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return nt.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>l){let c=e.getLineCount(),d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),nt.fromViewState(t.viewState.move(t.modelState.hasSelection(),d,h,0))}else{let c=t.modelState.selectionStart.getEndPosition();return nt.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,i,n){let o=e.model.validatePosition(n);return nt.fromModelState(Ct.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new nt(t.modelState,t.viewState);let i=t.viewState.position.lineNumber,n=t.viewState.position.column;return nt.fromViewState(new qi(new L(i,n,i,n),0,new V(i,n),0))}static moveTo(e,t,i,n,o){let s=e.model.validatePosition(n),a=o?e.coordinatesConverter.validateViewPosition(new V(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return nt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,o,s){switch(i){case 0:return s===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,o);case 1:return s===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,o);case 2:return s===2?this._moveUpByViewLines(e,t,n,o):this._moveUpByModelLines(e,t,n,o);case 3:return s===2?this._moveDownByViewLines(e,t,n,o):this._moveDownByModelLines(e,t,n,o);case 4:return s===2?t.map(a=>nt.fromViewState(Et.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>nt.fromModelState(Et.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return s===2?t.map(a=>nt.fromViewState(Et.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>nt.fromModelState(Et.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,o){let s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(i){case 11:{let l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{let l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{let l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{let l=[];for(let c=0,d=t.length;c<d;c++){let h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,s,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){let o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new nt(t.modelState,t.viewState);{let s;o>i.endLineNumber-1?s=i.endLineNumber-1:o<i.startLineNumber?s=i.startLineNumber:s=o;let a=Et.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return nt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(o=>nt.fromViewState(Et.moveLeft(e.cursorConfig,e,o.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);n[o]=nt.fromViewState(Et.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(o=>nt.fromViewState(Et.moveRight(e.cursorConfig,e,o.viewState,i,n)))}static _moveHalfLineRight(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);n[o]=nt.fromViewState(Et.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromViewState(Et.moveDown(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveDownByModelLines(e,t,i,n){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromModelState(Et.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveUpByViewLines(e,t,i,n){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromViewState(Et.moveUp(e.cursorConfig,e,l.viewState,i,n))}return o}static _moveUpByModelLines(e,t,i,n){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromModelState(Et.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return o}static _moveToViewPosition(e,t,i,n,o){return nt.fromViewState(t.viewState.move(i,n,o,0))}static _moveToModelPosition(e,t,i,n,o){return nt.fromModelState(t.modelState.move(i,n,o,0))}static _moveToViewMinColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){let n=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[o]=this._moveToViewPosition(e,a,i,l,c)}return n}},Fy;(function(r){let e=function(i){if(!mn(i))return!1;let n=i;return!(!mo(n.to)||!Rn(n.select)&&!mx(n.select)||!Rn(n.by)&&!mo(n.by)||!Rn(n.value)&&!_a(n.value))};r.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},r.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case r.RawDirection.Left:n=0;break;case r.RawDirection.Right:n=1;break;case r.RawDirection.Up:n=2;break;case r.RawDirection.Down:n=3;break;case r.RawDirection.PrevBlankLine:n=4;break;case r.RawDirection.NextBlankLine:n=5;break;case r.RawDirection.WrappedLineStart:n=6;break;case r.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case r.RawDirection.WrappedLineColumnCenter:n=8;break;case r.RawDirection.WrappedLineEnd:n=9;break;case r.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case r.RawDirection.ViewPortTop:n=11;break;case r.RawDirection.ViewPortBottom:n=13;break;case r.RawDirection.ViewPortCenter:n=12;break;case r.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let o=0;switch(i.by){case r.RawUnit.Line:o=1;break;case r.RawUnit.WrappedLine:o=2;break;case r.RawUnit.Character:o=3;break;case r.RawUnit.HalfLine:o=4;break}return{direction:n,unit:o,select:!!i.select,value:i.value||1}}r.parse=t})(Fy||(Fy={}));var $R=Object.create(null);function Bf(r,e){if(e<=0)return"";$R[r]||($R[r]=["",r]);let t=$R[r];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+r;return t[e]}var Or=class{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,i,n,o){let s=_t.visibleColumnFromColumn(e,t,i);if(o){let a=Bf(" ",n),c=_t.prevIndentTabStop(s,n)/n;return Bf(a,c)}else{let a="	",c=_t.prevRenderTabStop(s,i)/i;return Bf(a,c)}}static shiftIndent(e,t,i,n,o){let s=_t.visibleColumnFromColumn(e,t,i);if(o){let a=Bf(" ",n),c=_t.nextIndentTabStop(s,n)/n;return Bf(a,c)}else{let a="	",c=_t.nextRenderTabStop(s,i)/i;return Bf(a,c)}}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){let i=this._selection.startLineNumber,n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);let{tabSize:o,indentSize:s,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let h=i;h<=n;h++,c=d){d=0;let u=e.getLineContent(h),m=Wi(u);if(this._opts.isUnshift&&(u.length===0||m===0)||!l&&!this._opts.isUnshift&&u.length===0)continue;if(m===-1&&(m=u.length),h>1&&_t.visibleColumnFromColumn(u,m+1,o)%s!=0&&e.isCheapToTokenize(h-1)){let v=st.getEnterAction(this._opts.autoIndent,e,new L(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)));if(v){if(d=c,v.appendText)for(let C=0,w=v.appendText.length;C<w&&d<s&&v.appendText.charCodeAt(C)===32;C++)d++;v.removeText&&(d=Math.max(0,d-v.removeText));for(let C=0;C<d&&!(m===0||u.charCodeAt(m-1)!==32);C++)m--}}if(this._opts.isUnshift&&m===0)continue;let p;this._opts.isUnshift?p=Or.unshiftIndent(u,m+1,o,s,a):p=Or.shiftIndent(u,m+1,o,s,a),this._addEditOperation(t,new L(h,1,h,m+1),p),h===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let c=a?Bf(" ",s):"	";for(let d=i;d<=n;d++){let h=e.getLineContent(d),u=Wi(h);if(!(this._opts.isUnshift&&(h.length===0||u===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(u===-1&&(u=h.length),!(this._opts.isUnshift&&u===0)))if(this._opts.isUnshift){u=Math.min(u,s);for(let m=0;m<u;m++)if(h.charCodeAt(m)===9){u=m+1;break}this._addEditOperation(t,new L(d,1,d,u+1),"")}else this._addEditOperation(t,new L(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let n=t.getInverseEditOperations()[0];return new le(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}let i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new le(i.startLineNumber,n,i.endLineNumber,i.endColumn):new le(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};var KR=class{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new L(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let i=t.getInverseEditOperations(),n=i[0].range,o=i[1].range;return new le(n.endLineNumber,n.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}};var pi=class{static indent(e,t,i){if(t===null||i===null)return[];let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new Or(i[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return n}static outdent(e,t,i){let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new Or(i[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return n}static shiftIndent(e,t,i){return i=i||1,Or.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,Or.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,n){let o=[];for(let s=0,a=i.length;s<a;s++)o[s]=new Yi(i[s],n[s]);return new _r(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,o){let s=[];for(let a=0,l=i.length;a<l;a++){let c=i[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&n.indexOf(`
`)!==n.length-1&&(o=!1),o){let h=new L(d.lineNumber,1,d.lineNumber,1);s[a]=new Ff(h,n,c,!0)}else s[a]=new Yi(c,n)}return new _r(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,n,o){if(n||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));let s=sr(i);if(s.length===t.length)return s}return null}static paste(e,t,i,n,o,s){let a=this._distributePasteToCursors(e,i,n,o,s);return a?(i=i.sort(L.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,o)}static _goodIndentForLine(e,t,i){let n=null,o="",s=st.getInheritIndentForLine(e.autoIndent,t,i,!1);if(s)n=s.action,o=s.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){let d=t.getLineContent(a);if(Lr(d)>=0)break}if(a<1)return null;let l=t.getLineMaxColumn(a),c=st.getEnterAction(e.autoIndent,t,new L(a,l,a,l));c&&(o=c.indentation+c.appendText)}return n&&(n===Ii.Indent&&(o=pi.shiftIndent(e,o)),n===Ii.Outdent&&(o=pi.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,i,n){let o="",s=i.getStartPosition();if(e.insertSpaces){let a=_t.visibleColumnFromColumn2(e,t,s),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new Yi(i,o,n)}static tab(e,t,i){let n=[];for(let o=0,s=i.length;o<s;o++){let a=i[o];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";let d=e.normalizeIndentation(c);if(!l.startsWith(d)){n[o]=new Yi(new L(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}n[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[o]=new Or(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return n}static compositionType(e,t,i,n,o,s,a,l){let c=n.map(d=>this._compositionType(i,d,o,s,a,l));return new _r(4,c,{shouldPushStackElementBefore:lD(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,o,s){if(!t.isEmpty())return null;let a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new L(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&s===0?null:new Q_(d,i,0,s)}static _typeCommand(e,t,i){return i?new X_(e,t,!0):new Yi(e,t,!0)}static _enter(e,t,i,n){if(e.autoIndent===0)return pi._typeCommand(n,`
`,i);if(!t.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(n.startLineNumber),c=Lt(l).substring(0,n.startColumn-1);return pi._typeCommand(n,`
`+e.normalizeIndentation(c),i)}let o=st.getEnterAction(e.autoIndent,t,n);if(o){if(o.indentAction===Ii.None)return pi._typeCommand(n,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===Ii.Indent)return pi._typeCommand(n,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===Ii.IndentOutdent){let l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return i?new X_(n,d,!0):new Q_(n,d,-1,c.length-l.length,!0)}else if(o.indentAction===Ii.Outdent){let l=pi.unshiftIndent(e,o.indentation);return pi._typeCommand(n,`
`+e.normalizeIndentation(l+o.appendText),i)}}let s=t.getLineContent(n.startLineNumber),a=Lt(s).substring(0,n.startColumn-1);if(e.autoIndent>=4){let l=st.getIndentForEnter(e.autoIndent,t,n,{unshiftIndent:c=>pi.unshiftIndent(e,c),shiftIndent:c=>pi.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)});if(l){let c=_t.visibleColumnFromColumn2(e,t,n.getEndPosition()),d=n.endColumn,h=t.getLineContent(n.endLineNumber),u=Wi(h);if(u>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,u+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new X_(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let m=0;return d<=u+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),m=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Q_(n,`
`+e.normalizeIndentation(l.afterEnter),0,m,!0)}}}return pi._typeCommand(n,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,o=i.length;n<o;n++)if(!t.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,n){let o=st.getIndentationAtPosition(t,i.startLineNumber,i.startColumn),s=st.getIndentActionForType(e.autoIndent,t,i,n,{shiftIndent:a=>pi.shiftIndent(e,a),unshiftIndent:a=>pi.unshiftIndent(e,a)});if(s===null)return null;if(s!==e.normalizeIndentation(o)){let a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?pi._typeCommand(new L(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(s)+n,!1):pi._typeCommand(new L(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(s)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+n,!1)}return null}static _isAutoClosingOvertype(e,t,i,n,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let s=0,a=i.length;s<a;s++){let l=i[s];if(!l.isEmpty())return!1;let c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==o)return!1;let u=Cu(o);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&u)return!1;if(e.autoClosingOvertype==="auto"){let p=!1;for(let _=0,v=n.length;_<v;_++){let C=n[_];if(c.lineNumber===C.startLineNumber&&c.column===C.startColumn){p=!0;break}}if(!p)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,n,o){let s=[];for(let a=0,l=n.length;a<l;a++){let d=n[a].getPosition(),h=new L(d.lineNumber,d.column,d.lineNumber,d.column+1);s[a]=new Yi(h,o)}return new _r(4,s,{shouldPushStackElementBefore:lD(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){let i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],s=n.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!s&&a}static _findAutoClosingPairOpen(e,t,i,n){let o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!o)return null;let s=null;for(let a of o)if(s===null||a.open.length>s.open.length){let l=!0;for(let c of i)if(t.getValueInRange(new L(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(s=a)}return s}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";let i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[],o=null;for(let s of n)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!o||s.open.length>o.open.length)&&(o=s);return o?o.close:""}static _getAutoClosingPairClose(e,t,i,n,o){let s=Cu(n),a=s?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;let l=this._findAutoClosingPairOpen(e,t,i.map(u=>u.getPosition()),n);if(!l)return null;let c=this._findSubAutoClosingPairClose(e,l),d=!0,h=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let u=0,m=i.length;u<m;u++){let p=i[u];if(!p.isEmpty())return null;let _=p.getPosition(),v=t.getLineContent(_.lineNumber),C=v.substring(_.column-1);if(C.startsWith(c)||(d=!1),v.length>_.column-1){let D=v.charAt(_.column-1);if(!pi._isBeforeClosingBrace(e,C)&&!h(D))return null}if(!t.isCheapToTokenize(_.lineNumber))return null;if(l.open.length===1&&(n==="'"||n==='"')&&a!=="always"){let D=Ir(e.wordSeparators);if(o&&_.column>1&&D.get(v.charCodeAt(_.column-2))===0||!o&&_.column>2&&D.get(v.charCodeAt(_.column-3))===0)return null}t.forceTokenization(_.lineNumber);let w=t.getLineTokens(_.lineNumber),S=!1;try{S=st.shouldAutoClosePair(l,w,o?_.column:_.column-1)}catch(D){we(D)}if(!S)return null}return d?l.close.substring(0,l.close.length-c.length):l.close}static _runAutoClosingOpenCharType(e,t,i,n,o,s,a){let l=[];for(let c=0,d=n.length;c<d;c++){let h=n[c];l[c]=new aD(h,o,s,a)}return new _r(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return Cu(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,n){if(!pi._shouldSurroundChar(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;let o=Cu(n);for(let s=0,a=i.length;s<a;s++){let l=i[s];if(l.isEmpty())return!1;let c=!0;for(let d=l.startLineNumber;d<=l.endLineNumber;d++){let h=t.getLineContent(d),u=d===l.startLineNumber?l.startColumn-1:0,m=d===l.endLineNumber?l.endColumn-1:h.length,p=h.substring(u,m);if(/[^ \t]/.test(p)){c=!1;break}}if(c)return!1;if(o&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){let d=t.getValueInRange(l);if(Cu(d))return!1}}return!0}static _runSurroundSelectionType(e,t,i,n,o){let s=[];for(let a=0,l=n.length;a<l;a++){let c=n[a],d=t.surroundingPairs[o];s[a]=new KR(c,o,d)}return new _r(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,o){if(!t.electricChars.hasOwnProperty(o)||!n.isEmpty())return null;let s=n.getPosition();i.forceTokenization(s.lineNumber);let a=i.getLineTokens(s.lineNumber),l;try{l=st.onElectricCharacter(o,a,s.column)}catch(c){return we(c),null}if(!l)return null;if(l.matchOpenBracket){let c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=i.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:s.lineNumber,column:c});if(d){if(d.startLineNumber===s.lineNumber)return null;let h=i.getLineContent(d.startLineNumber),u=Lt(h),m=t.normalizeIndentation(u),p=i.getLineContent(s.lineNumber),_=i.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,v=p.substring(_-1,s.column-1),C=m+v+o,w=new L(s.lineNumber,1,s.lineNumber,s.column),S=new Yi(w,C);return new _r(qR(C,e),[S],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,n,o,s){if(!n||le.selectionsArrEqual(n,o))return null;let a=null;for(let c of o){if(!c.isEmpty())return null;let d=c.getPosition(),h=i.getValueInRange(new L(d.lineNumber,d.column-1,d.lineNumber,d.column));if(a===null)a=h;else if(a!==h)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,i,o,s,a)){let c=o.map(d=>new Yi(new L(d.positionLineNumber,d.positionColumn,d.positionLineNumber,d.positionColumn+1),"",!1));return new _r(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let l=this._getAutoClosingPairClose(t,i,o,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,i,o,a,!1,l):null}static typeWithInterceptors(e,t,i,n,o,s,a){if(!e&&a===`
`){let d=[];for(let h=0,u=o.length;h<u;h++)d[h]=pi._enter(i,n,!1,o[h]);return new _r(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,n,o)){let d=[],h=!1;for(let u=0,m=o.length;u<m;u++)if(d[u]=this._runAutoIndentType(i,n,o[u],a),!d[u]){h=!0;break}if(!h)return new _r(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(i,n,o,s,a))return this._runAutoClosingOvertype(t,i,n,o,a);if(!e){let d=this._getAutoClosingPairClose(i,n,o,a,!0);if(d)return this._runAutoClosingOpenCharType(t,i,n,o,a,!0,d)}if(this._isSurroundSelectionType(i,n,o,a))return this._runSurroundSelectionType(t,i,n,o,a);if(!e&&this._isTypeInterceptorElectricChar(i,n,o)){let d=this._typeInterceptorElectricChar(t,i,n,o[0],a);if(d)return d}let l=[];for(let d=0,h=o.length;d<h;d++)l[d]=new Yi(o[d],a);let c=qR(a,t);return new _r(c,l,{shouldPushStackElementBefore:lD(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,n,o){let s=[];for(let l=0,c=n.length;l<c;l++)s[l]=new Yi(n[l],o);let a=qR(o,e);return new _r(a,s,{shouldPushStackElementBefore:lD(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];let n=[];for(let o=0,s=i.length;o<s;o++){let a=i[o].positionLineNumber;if(a===1)n[o]=new X_(new L(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);n[o]=this._enter(e,t,!1,new L(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];let n=[];for(let o=0,s=i.length;o<s;o++){let a=i[o].positionLineNumber,l=t.getLineMaxColumn(a);n[o]=this._enter(e,t,!1,new L(a,l,a,l))}return n}static lineBreakInsert(e,t,i){let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=this._enter(e,t,!0,i[o]);return n}},aD=class extends Q_{constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length);this._openCharacter=t,this._closeCharacter=n,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new L(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new L(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}};function qR(r,e){return r===" "?e===5||e===6?6:5:4}function lD(r,e){return e7(r)&&!e7(e)?!0:r===5?!1:J8(r)!==J8(e)}function J8(r){return r===6||r===5?"space":r}function e7(r){return r===4||r===5||r===6}var j;(function(r){r.editorSimpleInput=new _e("editorSimpleInput",!1,!0),r.editorTextFocus=new _e("editorTextFocus",!1,g("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),r.focus=new _e("editorFocus",!1,g("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),r.textInputFocus=new _e("textInputFocus",!1,g("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),r.readOnly=new _e("editorReadonly",!1,g("editorReadonly","Whether the editor is read only")),r.inDiffEditor=new _e("inDiffEditor",!1,g("inDiffEditor","Whether the context is a diff editor")),r.columnSelection=new _e("editorColumnSelection",!1,g("editorColumnSelection","Whether `editor.columnSelection` is enabled")),r.writable=r.readOnly.toNegated(),r.hasNonEmptySelection=new _e("editorHasSelection",!1,g("editorHasSelection","Whether the editor has text selected")),r.hasOnlyEmptySelection=r.hasNonEmptySelection.toNegated(),r.hasMultipleSelections=new _e("editorHasMultipleSelections",!1,g("editorHasMultipleSelections","Whether the editor has multiple selections")),r.hasSingleSelection=r.hasMultipleSelections.toNegated(),r.tabMovesFocus=new _e("editorTabMovesFocus",!1,g("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),r.tabDoesNotMoveFocus=r.tabMovesFocus.toNegated(),r.isInWalkThroughSnippet=new _e("isInEmbeddedEditor",!1,!0),r.canUndo=new _e("canUndo",!1,!0),r.canRedo=new _e("canRedo",!1,!0),r.hoverVisible=new _e("editorHoverVisible",!1,g("editorHoverVisible","Whether the editor hover is visible")),r.inCompositeEditor=new _e("inCompositeEditor",void 0,g("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),r.notInCompositeEditor=r.inCompositeEditor.toNegated(),r.languageId=new _e("editorLangId","",g("editorLangId","The language identifier of the editor")),r.hasCompletionItemProvider=new _e("editorHasCompletionItemProvider",!1,g("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),r.hasCodeActionsProvider=new _e("editorHasCodeActionsProvider",!1,g("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),r.hasCodeLensProvider=new _e("editorHasCodeLensProvider",!1,g("editorHasCodeLensProvider","Whether the editor has a code lens provider")),r.hasDefinitionProvider=new _e("editorHasDefinitionProvider",!1,g("editorHasDefinitionProvider","Whether the editor has a definition provider")),r.hasDeclarationProvider=new _e("editorHasDeclarationProvider",!1,g("editorHasDeclarationProvider","Whether the editor has a declaration provider")),r.hasImplementationProvider=new _e("editorHasImplementationProvider",!1,g("editorHasImplementationProvider","Whether the editor has an implementation provider")),r.hasTypeDefinitionProvider=new _e("editorHasTypeDefinitionProvider",!1,g("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),r.hasHoverProvider=new _e("editorHasHoverProvider",!1,g("editorHasHoverProvider","Whether the editor has a hover provider")),r.hasDocumentHighlightProvider=new _e("editorHasDocumentHighlightProvider",!1,g("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),r.hasDocumentSymbolProvider=new _e("editorHasDocumentSymbolProvider",!1,g("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),r.hasReferenceProvider=new _e("editorHasReferenceProvider",!1,g("editorHasReferenceProvider","Whether the editor has a reference provider")),r.hasRenameProvider=new _e("editorHasRenameProvider",!1,g("editorHasRenameProvider","Whether the editor has a rename provider")),r.hasSignatureHelpProvider=new _e("editorHasSignatureHelpProvider",!1,g("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),r.hasInlayHintsProvider=new _e("editorHasInlayHintsProvider",!1,g("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),r.hasDocumentFormattingProvider=new _e("editorHasDocumentFormattingProvider",!1,g("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),r.hasDocumentSelectionFormattingProvider=new _e("editorHasDocumentSelectionFormattingProvider",!1,g("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),r.hasMultipleDocumentFormattingProvider=new _e("editorHasMultipleDocumentFormattingProvider",!1,g("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),r.hasMultipleDocumentSelectionFormattingProvider=new _e("editorHasMultipleDocumentSelectionFormattingProvider",!1,g("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(j||(j={}));var It=0,Zi=class extends fi{runEditorCommand(e,t,i){let n=t._getViewModel();!n||this.runCoreEditorCommand(n,i||{})}},cD;(function(r){let e=function(i){if(!mn(i))return!1;let n=i;return!(!mo(n.to)||!Rn(n.by)&&!mo(n.by)||!Rn(n.value)&&!_a(n.value)||!Rn(n.revealCursor)&&!mx(n.revealCursor))};r.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},r.RawDirection={Up:"up",Down:"down"},r.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(i){let n;switch(i.to){case r.RawDirection.Up:n=1;break;case r.RawDirection.Down:n=2;break;default:return null}let o;switch(i.by){case r.RawUnit.Line:o=1;break;case r.RawUnit.WrappedLine:o=2;break;case r.RawUnit.Page:o=3;break;case r.RawUnit.HalfPage:o=4;break;default:o=2}let s=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:o,value:s,revealCursor:a,select:!!i.select}}r.parse=t})(cD||(cD={}));var eb;(function(r){let e=function(t){if(!mn(t))return!1;let i=t;return!(!_a(i.lineNumber)&&!mo(i.lineNumber)||!Rn(i.at)&&!mo(i.at))};r.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},r.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(eb||(eb={}));var dD=class{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{let n=t.get(it).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{let n=document.activeElement;return n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{let n=t.get(it).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){let n=this.runEditorCommand(e,t,i);return n||!0}},En;(function(r){class e extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,[gn.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,S.position,S.viewPosition)]),w.revealPrimaryCursor(S.source,!0)}}r.MoveTo=ce(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),r.MoveToSelect=ce(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Zi{runCoreEditorCommand(w,S){w.model.pushStackElement();let D=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),S);w.setCursorStates(S.source,3,D.viewStates.map(I=>nt.fromViewState(I))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:D.fromLineNumber,fromViewVisualColumn:D.fromVisualColumn,toViewLineNumber:D.toLineNumber,toViewVisualColumn:D.toVisualColumn}),D.reversed?w.revealTopMostCursor(S.source):w.revealBottomMostCursor(S.source)}}r.ColumnSelect=ce(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(C,w,S,D){let I=C.model.validatePosition(D.position),A=C.coordinatesConverter.validateViewPosition(new V(D.viewPosition.lineNumber,D.viewPosition.column),I),O=D.doColumnSelect?S.fromViewLineNumber:A.lineNumber,N=D.doColumnSelect?S.fromViewVisualColumn:D.mouseColumn-1;return Hd.columnSelect(C.cursorConfig,C,O,N,A.lineNumber,D.mouseColumn-1)}}),r.CursorColumnSelectLeft=ce(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|15,linux:{primary:0}}})}_getColumnSelectResult(C,w,S,D){return Hd.columnSelectLeft(C.cursorConfig,C,S)}}),r.CursorColumnSelectRight=ce(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|17,linux:{primary:0}}})}_getColumnSelectResult(C,w,S,D){return Hd.columnSelectRight(C.cursorConfig,C,S)}});class i extends t{constructor(w){super(w);this._isPaged=w.isPaged}_getColumnSelectResult(w,S,D,I){return Hd.columnSelectUp(w.cursorConfig,w,D,this._isPaged)}}r.CursorColumnSelectUp=ce(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|16,linux:{primary:0}}})),r.CursorColumnSelectPageUp=ce(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|11,linux:{primary:0}}}));class n extends t{constructor(w){super(w);this._isPaged=w.isPaged}_getColumnSelectResult(w,S,D,I){return Hd.columnSelectDown(w.cursorConfig,w,D,this._isPaged)}}r.CursorColumnSelectDown=ce(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|18,linux:{primary:0}}})),r.CursorColumnSelectPageDown=ce(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|512|12,linux:{primary:0}}}));class o extends Zi{constructor(){super({id:"cursorMove",precondition:void 0,description:Fy.description})}runCoreEditorCommand(w,S){let D=Fy.parse(S);!D||this._runCursorMove(w,S.source,D)}_runCursorMove(w,S,D){w.model.pushStackElement(),w.setCursorStates(S,3,o._move(w,w.getCursorStates(),D)),w.revealPrimaryCursor(S,!0)}static _move(w,S,D){let I=D.select,A=D.value;switch(D.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return gn.simpleMove(w,S,D.direction,I,A,D.unit);case 11:case 13:case 12:case 14:return gn.viewportMove(w,S,D.direction,I,A);default:return null}}}r.CursorMoveImpl=o,r.CursorMove=ce(new o);class s extends Zi{constructor(w){super(w);this._staticArgs=w.args}runCoreEditorCommand(w,S){let D=this._staticArgs;this._staticArgs.value===-1&&(D={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(S.source,3,gn.simpleMove(w,w.getCursorStates(),D.direction,D.select,D.value,D.unit)),w.revealPrimaryCursor(S.source,!0)}}r.CursorLeft=ce(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:15,mac:{primary:15,secondary:[256|32]}}})),r.CursorLeftSelect=ce(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|15}})),r.CursorRight=ce(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:17,mac:{primary:17,secondary:[256|36]}}})),r.CursorRightSelect=ce(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|17}})),r.CursorUp=ce(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:16,mac:{primary:16,secondary:[256|46]}}})),r.CursorUpSelect=ce(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|16,secondary:[2048|1024|16],mac:{primary:1024|16},linux:{primary:1024|16}}})),r.CursorPageUp=ce(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:11}})),r.CursorPageUpSelect=ce(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|11}})),r.CursorDown=ce(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:18,mac:{primary:18,secondary:[256|44]}}})),r.CursorDownSelect=ce(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|18,secondary:[2048|1024|18],mac:{primary:1024|18},linux:{primary:1024|18}}})),r.CursorPageDown=ce(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:12}})),r.CursorPageDownSelect=ce(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|12}})),r.CreateCursor=ce(new class extends Zi{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(C,w){let S;w.wholeLine?S=gn.line(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition):S=gn.moveTo(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition);let D=C.getCursorStates();if(D.length>1){let I=S.modelState?S.modelState.position:null,A=S.viewState?S.viewState.position:null;for(let O=0,N=D.length;O<N;O++){let F=D[O];if(!(I&&!F.modelState.selection.containsPosition(I))&&!(A&&!F.viewState.selection.containsPosition(A))){D.splice(O,1),C.model.pushStackElement(),C.setCursorStates(w.source,3,D);return}}}D.push(S),C.model.pushStackElement(),C.setCursorStates(w.source,3,D)}}),r.LastCursorMoveToSelect=ce(new class extends Zi{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(C,w){let S=C.getLastAddedCursorIndex(),D=C.getCursorStates(),I=D.slice(0);I[S]=gn.moveTo(C,D[S],!0,w.position,w.viewPosition),C.model.pushStackElement(),C.setCursorStates(w.source,3,I)}});class a extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,gn.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(S.source,!0)}}r.CursorHome=ce(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:14,mac:{primary:14,secondary:[2048|15]}}})),r.CursorHomeSelect=ce(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1024|14,mac:{primary:1024|14,secondary:[2048|1024|15]}}}));class l extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,this._exec(w.getCursorStates())),w.revealPrimaryCursor(S.source,!0)}_exec(w){let S=[];for(let D=0,I=w.length;D<I;D++){let A=w[D],O=A.modelState.position.lineNumber;S[D]=nt.fromModelState(A.modelState.move(this._inSelectionMode,O,1,0))}return S}}r.CursorLineStart=ce(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:0,mac:{primary:256|31}}})),r.CursorLineStartSelect=ce(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:0,mac:{primary:256|1024|31}}}));class c extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,gn.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,S.sticky||!1)),w.revealPrimaryCursor(S.source,!0)}}r.CursorEnd=ce(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:It,kbExpr:j.textInputFocus,primary:13,mac:{primary:13,secondary:[2048|17]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:g("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),r.CursorEndSelect=ce(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:It,kbExpr:j.textInputFocus,primary:1024|13,mac:{primary:1024|13,secondary:[2048|1024|17]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:g("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,this._exec(w,w.getCursorStates())),w.revealPrimaryCursor(S.source,!0)}_exec(w,S){let D=[];for(let I=0,A=S.length;I<A;I++){let O=S[I],N=O.modelState.position.lineNumber,F=w.model.getLineMaxColumn(N);D[I]=nt.fromModelState(O.modelState.move(this._inSelectionMode,N,F,0))}return D}}r.CursorLineEnd=ce(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:0,mac:{primary:256|35}}})),r.CursorLineEndSelect=ce(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:0,mac:{primary:256|1024|35}}}));class h extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,gn.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(S.source,!0)}}r.CursorTop=ce(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|14,mac:{primary:2048|16}}})),r.CursorTopSelect=ce(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|14,mac:{primary:2048|1024|16}}}));class u extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,gn.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(S.source,!0)}}r.CursorBottom=ce(new u({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|13,mac:{primary:2048|18}}})),r.CursorBottomSelect=ce(new u({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|1024|13,mac:{primary:2048|1024|18}}}));class m extends Zi{constructor(){super({id:"editorScroll",precondition:void 0,description:cD.description})}runCoreEditorCommand(w,S){let D=cD.parse(S);!D||this._runEditorScroll(w,S.source,D)}_runEditorScroll(w,S,D){let I=this._computeDesiredScrollTop(w,D);if(D.revealCursor){let A=w.getCompletelyVisibleViewRangeAtScrollTop(I);w.setCursorStates(S,3,[gn.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),A,D.select)])}w.setScrollTop(I,0)}_computeDesiredScrollTop(w,S){if(S.unit===1){let A=w.getCompletelyVisibleViewRange(),O=w.coordinatesConverter.convertViewRangeToModelRange(A),N;S.direction===1?N=Math.max(1,O.startLineNumber-S.value):N=Math.min(w.model.getLineCount(),O.startLineNumber+S.value);let F=w.coordinatesConverter.convertModelPositionToViewPosition(new V(N,1));return w.getVerticalOffsetForLineNumber(F.lineNumber)}let D;S.unit===3?D=w.cursorConfig.pageSize*S.value:S.unit===4?D=Math.round(w.cursorConfig.pageSize/2)*S.value:D=S.value;let I=(S.direction===1?-1:1)*D;return w.getScrollTop()+I*w.cursorConfig.lineHeight}}r.EditorScrollImpl=m,r.EditorScroll=ce(new m),r.ScrollLineUp=ce(new class extends Zi{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|16,mac:{primary:256|11}}})}runCoreEditorCommand(C,w){r.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageUp=ce(new class extends Zi{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|11,win:{primary:512|11},linux:{primary:512|11}}})}runCoreEditorCommand(C,w){r.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),r.ScrollLineDown=ce(new class extends Zi{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|18,mac:{primary:256|12}}})}runCoreEditorCommand(C,w){r.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),r.ScrollPageDown=ce(new class extends Zi{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|12,win:{primary:512|12},linux:{primary:512|12}}})}runCoreEditorCommand(C,w){r.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class p extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,[gn.word(w,w.getPrimaryCursorState(),this._inSelectionMode,S.position)]),w.revealPrimaryCursor(S.source,!0)}}r.WordSelect=ce(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),r.WordSelectDrag=ce(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),r.LastCursorWordSelect=ce(new class extends Zi{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(C,w){let S=C.getLastAddedCursorIndex(),D=C.getCursorStates(),I=D.slice(0),A=D[S];I[S]=gn.word(C,A,A.modelState.hasSelection(),w.position),C.model.pushStackElement(),C.setCursorStates(w.source,3,I)}});class _ extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){w.model.pushStackElement(),w.setCursorStates(S.source,3,[gn.line(w,w.getPrimaryCursorState(),this._inSelectionMode,S.position,S.viewPosition)]),w.revealPrimaryCursor(S.source,!1)}}r.LineSelect=ce(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),r.LineSelectDrag=ce(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends Zi{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,S){let D=w.getLastAddedCursorIndex(),I=w.getCursorStates(),A=I.slice(0);A[D]=gn.line(w,I[D],this._inSelectionMode,S.position,S.viewPosition),w.model.pushStackElement(),w.setCursorStates(S.source,3,A)}}r.LastCursorLineSelect=ce(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),r.LastCursorLineSelectDrag=ce(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),r.ExpandLineSelection=ce(new class extends Zi{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:2048|42}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,gn.expandLineSelection(C,C.getCursorStates())),C.revealPrimaryCursor(w.source,!0)}}),r.CancelSelection=ce(new class extends Zi{constructor(){super({id:"cancelSelection",precondition:j.hasNonEmptySelection,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[gn.cancelSelection(C,C.getPrimaryCursorState())]),C.revealPrimaryCursor(w.source,!0)}}),r.RemoveSecondaryCursors=ce(new class extends Zi{constructor(){super({id:"removeSecondaryCursors",precondition:j.hasMultipleSelections,kbOpts:{weight:It+1,kbExpr:j.textInputFocus,primary:9,secondary:[1024|9]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[C.getPrimaryCursorState()]),C.revealPrimaryCursor(w.source,!0),yf(g("removedCursor","Removed secondary cursors"))}}),r.RevealLine=ce(new class extends Zi{constructor(){super({id:"revealLine",precondition:void 0,description:eb.description})}runCoreEditorCommand(C,w){let S=w,D=S.lineNumber||0,I=typeof D=="number"?D+1:parseInt(D)+1;I<1&&(I=1);let A=C.model.getLineCount();I>A&&(I=A);let O=new L(I,1,I,C.model.getLineMaxColumn(I)),N=0;if(S.at)switch(S.at){case eb.RawAtArgument.Top:N=3;break;case eb.RawAtArgument.Center:N=1;break;case eb.RawAtArgument.Bottom:N=4;break;default:break}let F=C.coordinatesConverter.convertModelRangeToViewRange(O);C.revealRange(w.source,!1,F,N,0)}}),r.SelectAll=new class extends dD{constructor(){super(WV)}runDOMCommand(){Hi&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(C,w,S){let D=w._getViewModel();!D||this.runCoreEditorCommand(D,S)}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates("keyboard",3,[gn.selectAll(C,C.getPrimaryCursorState())])}},r.SetSelection=ce(new class extends Zi{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[nt.fromModelSelection(w.selection)])}})})(En||(En={}));var xae=fe.and(j.textInputFocus,j.columnSelection);function tb(r,e){on.registerKeybindingRule({id:r,primary:e,when:xae,weight:It+1})}tb(En.CursorColumnSelectLeft.id,1024|15);tb(En.CursorColumnSelectRight.id,1024|17);tb(En.CursorColumnSelectUp.id,1024|16);tb(En.CursorColumnSelectPageUp.id,1024|11);tb(En.CursorColumnSelectDown.id,1024|18);tb(En.CursorColumnSelectPageDown.id,1024|12);function t7(r){return r.register(),r}var Lu;(function(r){class e extends fi{runEditorCommand(i,n,o){let s=n._getViewModel();!s||this.runCoreEditingCommand(n,s,o||{})}}r.CoreEditingCommand=e,r.LineBreakInsert=ce(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:j.writable,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:0,mac:{primary:256|45}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,pi.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection)))}}),r.Outdent=ce(new class extends e{constructor(){super({id:"outdent",precondition:j.writable,kbOpts:{weight:It,kbExpr:fe.and(j.editorTextFocus,j.tabDoesNotMoveFocus),primary:1024|2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,pi.outdent(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),r.Tab=ce(new class extends e{constructor(){super({id:"tab",precondition:j.writable,kbOpts:{weight:It,kbExpr:fe.and(j.editorTextFocus,j.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,pi.tab(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),r.DeleteLeft=ce(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:1,secondary:[1024|1],mac:{primary:1,secondary:[1024|1,256|38,256|1]}}})}runCoreEditingCommand(t,i,n){let[o,s]=wl.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,s),i.setPrevEditOperationType(2)}}),r.DeleteRight=ce(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:It,kbExpr:j.textInputFocus,primary:20,mac:{primary:20,secondary:[256|34,256|20]}}})}runCoreEditingCommand(t,i,n){let[o,s]=wl.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,s),i.setPrevEditOperationType(3)}}),r.Undo=new class extends dD{constructor(){super(Jw)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(80)===!0))return i.getModel().undo()}},r.Redo=new class extends dD{constructor(){super(ey)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(80)===!0))return i.getModel().redo()}}})(Lu||(Lu={}));var YR=class extends C_{constructor(e,t,i){super({id:e,precondition:void 0,description:i});this._handlerId=t}runCommand(e,t){let i=e.get(it).getFocusedCodeEditor();!i||i.trigger("keyboard",this._handlerId,t)}};function Wf(r,e){t7(new YR("default:"+r,r)),t7(new YR(r,r,e))}Wf("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Wf("replacePreviousChar");Wf("compositionType");Wf("compositionStart");Wf("compositionEnd");Wf("paste");Wf("cut");var ZR=class{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){En.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new V(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,i=ji&&t.get(95),n=t.get(18);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){En.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){En.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,i){e=this._validateViewColumn(e),En.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),En.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){En.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){En.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){En.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){En.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){En.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){En.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){En.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){En.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){En.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}};var Uf=class{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return Uf.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new i7(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}},i7=class{constructor(e,t,i,n,o,s){this.element=e,this.type=t,this.mouseColumn=i,this.position=n,this.range=o,this.detail=s}toString(){return ps.toString(this)}};var GR,hD=class{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;let i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){let l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let o=0,s=0;for(let l=i;l<=n;l++){let c=l-this._rendLineNumberStart;e<=l&&l<=t&&(s===0?(o=c,s=1):s++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(o,s)}onLinesChanged(e,t){if(this.getCount()===0)return!1;let i=this.getStartLineNumber(),n=this.getEndLineNumber(),o=!1;for(let s=e;s<=t;s++)s>=i&&s<=n&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;let i=t-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);let s=[];for(let h=0;h<i;h++)s[h]=this._createLine();let a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(s).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;let t=this.getStartLineNumber(),i=this.getEndLineNumber(),n=!1;for(let o=0,s=e.length;o<s;o++){let a=e[o];if(a.toLineNumber<t||a.fromLineNumber>i)continue;let l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){let h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),n=!0}}return n}},By=class{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new hD(()=>this._host.createVisibleLine())}_createDomNode(){let e=tt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){let o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){let o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),i=new Dc(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}},Dc=class{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,n){let o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let s=t;s<=i;s++)o.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),n,t),o.rendLineNumberStart>t){let s=t,a=Math.min(i,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,n,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){let s=Math.min(o.linesLength,t-o.rendLineNumberStart);s>0&&(this._removeLinesBefore(o,s),o.linesLength-=s)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){let s=o.rendLineNumberStart+o.linesLength,a=i;s<=a&&(this._insertLinesAfter(o,s,a,n,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){let s=Math.max(0,i-o.rendLineNumberStart+1),l=o.linesLength-1-s+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,n),o}_renderUntouchedLines(e,t,i,n,o){let s=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){let c=s+l;a[l].layoutLine(c,n[c-o])}}_insertLinesBefore(e,t,i,n,o){let s=[],a=0;for(let l=t;l<=i;l++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){let n=e.lines[i].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,o){let s=[],a=0;for(let l=t;l<=i;l++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){let i=e.linesLength-t;for(let n=0;n<t;n++){let o=e.lines[i+n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){Dc._ttPolicy&&(i=Dc._ttPolicy.createHTML(i));let o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let s=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){let l=e.lines[a];n[a]&&(l.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,i){let n=document.createElement("div");Dc._ttPolicy&&(t=Dc._ttPolicy.createHTML(t)),n.innerHTML=t;for(let o=0;o<e.linesLength;o++){let s=e.lines[o];if(i[o]){let a=n.firstChild,l=s.getDomNode();l.parentNode.replaceChild(a,l),s.setDomNode(a)}}}_finishRendering(e,t,i){let n=Dc._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let d=0;d<o;d++){let h=s[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,i[d],this.viewportData,n))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1,d=[];for(let h=0;h<o;h++){let u=s[h];d[h]=!1,!(l[h]||!u.renderLine(h+a,i[h],this.viewportData,n))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),d)}}};Dc._ttPolicy=(GR=window.trustedTypes)===null||GR===void 0?void 0:GR.createPolicy("editorViewLayer",{createHTML:r=>r});Dc._sb=wa(1e5);var XR=class extends Ki{constructor(e){super(e);this._visibleLines=new By(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new n7(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){let o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}},n7=class{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=tt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,i,n){let o="";for(let s=0,a=this._dynamicOverlays.length;s<a;s++)o+=this._dynamicOverlays[s].render(i.startLineNumber,e);return this._renderedContent===o?!1:(this._renderedContent=o,n.appendASCIIString('<div style="position:absolute;top:'),n.appendASCIIString(String(t)),n.appendASCIIString("px;width:100%;height:"),n.appendASCIIString(String(this._lineHeight)),n.appendASCIIString('px;">'),n.appendASCIIString(o),n.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}},QR=class extends XR{constructor(e){super(e);let i=this._context.configuration.options.get(129);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){let i=this._context.configuration.options.get(129);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}},JR=class extends XR{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(129);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Ti.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){let t=this._context.configuration.options;Ti.applyFontInfo(this.domNode,t.get(43));let i=t.get(129);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}};var ib=class{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}},eP=class extends Ki{constructor(e,t){super(e);this._viewDomNode=t,this._widgets={},this.domNode=tt(document.createElement("div")),pr.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=tt(document.createElement("div")),pr.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){let t=new r7(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i){this._widgets[e.getId()].setPosition(t,i),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let i=this._widgets[t];delete this._widgets[t];let n=i.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].prepareRender(e)}render(e){let t=Object.keys(this._widgets);for(let i of t)this._widgets[i].render(e)}},r7=class{constructor(e,t,i){this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=tt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let n=this._context.configuration.options,o=n.get(129);this._fixedOverflowWidgets=n.get(36),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=n.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){let t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){let i=t.get(129);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){let t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,i,n,o){let s=e.top,a=s,l=t.top+this._lineHeight,c=o.viewportHeight-l,d=s-n,h=a>=n,u=l,m=c>=n,p=e.left,_=t.left;return p+i>o.scrollLeft+o.viewportWidth&&(p=o.scrollLeft+o.viewportWidth-i),_+i>o.scrollLeft+o.viewportWidth&&(_=o.scrollLeft+o.viewportWidth-i),p<o.scrollLeft&&(p=o.scrollLeft),_<o.scrollLeft&&(_=o.scrollLeft),{fitsAbove:h,aboveTop:d,aboveLeft:p,fitsBelow:m,belowTop:u,belowLeft:_}}_layoutHorizontalSegmentInPage(e,t,i,n){let o=Math.max(0,t.left-n),s=Math.min(t.left+t.width+n,e.width),a=t.left+i-tl.scrollX;if(a+n>s){let l=a-(s-n);a-=l,i-=l}if(a<o){let l=a-o;a-=l,i-=l}return[i,a]}_layoutBoxInPage(e,t,i,n,o){let s=e.top-n,a=t.top+this._lineHeight,l=ci(this._viewDomNode.domNode),c=l.top+s-tl.scrollY,d=l.top+a-tl.scrollY,h=Xh(document.body),[u,m]=this._layoutHorizontalSegmentInPage(h,l,e.left-o.scrollLeft+this._contentLeft,i),[p,_]=this._layoutHorizontalSegmentInPage(h,l,t.left-o.scrollLeft+this._contentLeft,i),v=22,C=22,w=c>=v,S=d+n<=h.height-C;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(c,v),aboveLeft:m,fitsBelow:S,belowTop:d,belowLeft:_}:{fitsAbove:w,aboveTop:s,aboveLeft:u,fitsBelow:S,belowTop:a,belowLeft:p}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new ib(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];let t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let i=t[0],n=t[0];for(let h of t)h.lineNumber<i.lineNumber&&(i=h),h.lineNumber>n.lineNumber&&(n=h);let o=1073741824;for(let h of i.ranges)h.left<o&&(o=h.left);let s=1073741824;for(let h of n.ranges)h.left<s&&(s=h.left);let a=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,l=new ib(a,o),c=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,d=new ib(c,s);return[l,d]}_prepareRenderWidget(e){let[t,i]=this._getTopAndBottomLeft(e);if(!t||!i)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=tP(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeClientWidth=o.width,this._cachedDomNodeClientHeight=o.height;else{let s=this.domNode.domNode;this._cachedDomNodeClientWidth=s.clientWidth,this._cachedDomNodeClientHeight=s.clientHeight}}let n;if(this.allowEditorOverflow?n=this._layoutBoxInPage(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):n=this._layoutBoxInViewport(t,i,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let o=1;o<=2;o++)for(let s of this._preference)if(s===1){if(!n)return null;if(o===2||n.fitsAbove)return{coordinate:new ib(n.aboveTop,n.aboveLeft),position:1}}else if(s===2){if(!n)return null;if(o===2||n.fitsBelow)return{coordinate:new ib(n.belowTop,n.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&tP(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&tP(this._actual.afterRender,this._actual,this._renderData.position)}};function tP(r,e,...t){try{return r.call(e,...t)}catch{return null}}var iP=!0,nP=class extends Hs{constructor(e){super();this._context=e;let t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new le(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=iP?this._selections.slice(0,1):this._selections,i=t.map(o=>o.positionLineNumber);i.sort((o,s)=>o-s),zn(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);let n=t.every(o=>o.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=this._renderOne(e),i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length,s=0,a=[];for(let l=i;l<=n;l++){let c=l-i;for(;s<o&&this._cursorLineNumbers[s]<l;)s++;s<o&&this._cursorLineNumbers[s]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";let i=t-e;return i>=this._renderData.length?"":this._renderData[i]}},rP=class extends nP{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},oP=class extends nP{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}};Be((r,e)=>{iP=!1;let t=r.getColor(a8);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(DR)){let i=r.getColor(DR);i&&(iP=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${i}; }`),r.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});var sP=class extends Hs{constructor(e){super();this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let l=0,c=t.length;l<c;l++){let d=t[l];d.options.className&&(i[n++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;let d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:L.compareRangesUsingStarts(l.range,c.range)});let o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=s;l++){let c=l-o;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){let n=String(this._lineHeight),o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){let c=t[a];if(!c.options.isWholeLine)continue;let d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+n+'px;"></div>',h=Math.max(c.range.startLineNumber,o),u=Math.min(c.range.endLineNumber,s);for(let m=h;m<=u;m++){let p=m-o;i[p]+=d}}}_renderNormalDecorations(e,t,i){let n=String(this._lineHeight),o=e.visibleRange.startLineNumber,s=null,a=!1,l=null;for(let c=0,d=t.length;c<d;c++){let h=t[c];if(h.options.isWholeLine)continue;let u=h.options.className,m=Boolean(h.options.showIfCollapsed),p=h.range;if(m&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new L(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.model.getLineMaxColumn(p.endLineNumber-1))),s===u&&a===m&&L.areIntersectingOrTouching(l,p)){l=L.plusRange(l,p);continue}s!==null&&this._renderNormalDecoration(e,l,s,a,n,o,i),s=u,a=m,l=p}s!==null&&this._renderNormalDecoration(e,l,s,a,n,o,i)}_renderNormalDecoration(e,t,i,n,o,s,a){let l=e.linesVisibleRangesForRange(t,i==="findMatch");if(!!l)for(let c=0,d=l.length;c<d;c++){let h=l[c];if(h.outsideRenderedLine)continue;let u=h.lineNumber-s;if(n&&h.ranges.length===1){let m=h.ranges[0];m.width===0&&(h.ranges[0]=new xf(m.left,this._typicalHalfwidthCharacterWidth))}for(let m=0,p=h.ranges.length;m<p;m++){let _=h.ranges[m],v='<div class="cdr '+i+'" style="left:'+String(_.left)+"px;width:"+String(_.width)+"px;height:"+o+'px;"></div>';a[u]+=v}}}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};var en=class extends H{onclick(e,t){this._register(J(e,De.CLICK,i=>t(new Tn(i))))}onmousedown(e,t){this._register(J(e,De.MOUSE_DOWN,i=>t(new Tn(i))))}onmouseover(e,t){this._register(J(e,De.MOUSE_OVER,i=>t(new Tn(i))))}onnonbubblingmouseout(e,t){this._register(Op(e,i=>t(new Tn(i))))}onkeydown(e,t){this._register(J(e,De.KEY_DOWN,i=>t(new kt(i))))}onkeyup(e,t){this._register(J(e,De.KEY_UP,i=>t(new kt(i))))}oninput(e,t){this._register(J(e,De.INPUT,t))}onblur(e,t){this._register(J(e,De.BLUR,t))}onfocus(e,t){this._register(J(e,De.FOCUS,t))}ignoreGesture(e){yt.ignoreTarget(e)}};var ku=11,aP=class extends en{constructor(e){super();this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top!="undefined"&&(this.bgDomNode.style.top="0px"),typeof e.left!="undefined"&&(this.bgDomNode.style.left="0px"),typeof e.bottom!="undefined"&&(this.bgDomNode.style.bottom="0px"),typeof e.right!="undefined"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=ku+"px",this.domNode.style.height=ku+"px",typeof e.top!="undefined"&&(this.domNode.style.top=e.top+"px"),typeof e.left!="undefined"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom!="undefined"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right!="undefined"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new ms),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new Kl),this._mousedownScheduleRepeatTimer=this._register(new li)}_arrowMouseDown(e){let t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,fl,i=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var lP=class extends H{constructor(e,t,i){super();this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new li)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),!!this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}};var Eae=140,Wy=class extends en{constructor(e){super();this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new lP(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new ms),this._shouldRender=!0,this.domNode=tt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){let t=this._register(new aP(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=tt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,o=>{o.leftButton&&(o.preventDefault(),this._sliderMouseDown(o,()=>{}))}),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(e);i<=o&&o<=n?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,i=e.browserEvent.offsetY;else{let o=ci(this.domNode.domNode);t=e.posx-o.left,i=e.posy-o.top}let n=this._mouseDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){let i=this._sliderMousePosition(e),n=this._sliderOrthogonalMousePosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,fl,s=>{let a=this._sliderOrthogonalMousePosition(s),l=Math.abs(a-n);if(bi&&l>Eae){this._setDesiredScrollPositionNow(o.getScrollPosition());return}let d=this._sliderMousePosition(s)-i;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var Dae=20,Iu=class{constructor(e,t,i,n,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Iu(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,o){let s=Math.max(0,i-e),a=Math.max(0,s-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(Dae,Math.floor(i*a/n))),d=(a-c)/(n-i),h=o*d;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){let e=Iu._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var Lae=Kr("scrollbar-button-left",ge.triangleLeft),kae=Kr("scrollbar-button-right",ge.triangleRight),cP=class extends Wy{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:i,scrollbarState:new Iu(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage});if(t.horizontalHasArrows){let s=(t.arrowSize-ku)/2,a=(t.horizontalScrollbarSize-ku)/2;this._createArrow({className:"scra",icon:Lae,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ja(null,1,0))}),this._createArrow({className:"scra",icon:kae,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ja(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var Iae=Kr("scrollbar-button-up",ge.triangleUp),Oae=Kr("scrollbar-button-down",ge.triangleDown),dP=class extends Wy{constructor(e,t,i){let n=e.getScrollDimensions(),o=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:i,scrollbarState:new Iu(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage});if(t.verticalHasArrows){let s=(t.arrowSize-ku)/2,a=(t.verticalScrollbarSize-ku)/2;this._createArrow({className:"scra",icon:Iae,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ja(null,0,1))}),this._createArrow({className:"scra",icon:Oae,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ja(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var Uy=class{constructor(e,t,i,n,o,s){this._scrollStateBrand=void 0,e=e|0,t=t|0,i=i|0,n=n|0,o=o|0,s=s|0,this.rawScrollLeft=i,this.rawScrollTop=s,e<0&&(e=0),i+e>t&&(i=t-e),i<0&&(i=0),n<0&&(n=0),s+n>o&&(s=o-n),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=i,this.height=n,this.scrollHeight=o,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Uy(typeof e.width!="undefined"?e.width:this.width,typeof e.scrollWidth!="undefined"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height!="undefined"?e.height:this.height,typeof e.scrollHeight!="undefined"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Uy(this.width,this.scrollWidth,typeof e.scrollLeft!="undefined"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop!="undefined"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},$d=class extends H{constructor(e,t){super();this._scrollableBrand=void 0,this._onScroll=this._register(new M),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new Uy(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft=="undefined"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop=="undefined"?this._smoothScrolling.to.scrollTop:e.scrollTop};let i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new nb(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{let i=this._state.withScrollPosition(e);this._smoothScrolling=nb.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},hP=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function uP(r,e){let t=e-r;return function(i){return r+t*Rae(i)}}function Tae(r,e,t){return function(i){return i<t?r(i/t):e((i-t)/(1-t))}}var nb=class{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,s;return e<t?(o=e+.75*i,s=t-.75*i):(o=e-.75*i,s=t+.75*i),Tae(uP(e,o),uP(s,t),.33)}return uP(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let i=this.scrollLeft(t),n=this.scrollTop(t);return new hP(i,n,!1)}return new hP(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return nb.start(e,t,i)}static start(e,t,i){i=i+10;let n=Date.now()-10;return new nb(e,t,n,i)}};function Nae(r){return Math.pow(r,3)}function Rae(r){return 1-Nae(1-r)}var Pae=500,o7=50,s7=!0,a7=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},uD=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{let o=n===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[n].score*o,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}accept(e,t,i){let n=new a7(e,t,i);n.score=this._computeScore(n),this._front===-1&&this._rear===-1?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5,i=this._front===-1&&this._rear===-1?null:this._memory[this._rear];return(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};uD.INSTANCE=new uD;var mP=class extends en{constructor(e,t,i){super();this._onScroll=this._register(new M),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new M),e.style.overflow="hidden",this._options=Aae(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let n={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new dP(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new cP(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onnonbubblingmouseout(this._listenOnDomNode,o=>this._onMouseOut(o)),this._hideTimeout=this._register(new li),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Ge(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,We&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel!="undefined"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity!="undefined"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity!="undefined"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis!="undefined"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal!="undefined"&&(this._options.horizontal=e.horizontal),typeof e.vertical!="undefined"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize!="undefined"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize!="undefined"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage!="undefined"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ge(this._mouseWheelToDispose),e)){let i=n=>{this._onMouseWheel(new Ja(n))};this._mouseWheelToDispose.push(J(this._listenOnDomNode,De.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){let t=uD.INSTANCE;if(s7){let o=window.devicePixelRatio/mW();bi||ji?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let i=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);let a=!We&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),c={};if(o){let d=o7*o,h=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,h)}if(s){let d=o7*s,h=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,h)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(s7&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",o=t?" top":"",s=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Pae)}},rb=class extends mP{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let i=new $d(0,n=>Ro(n));super(e,t,i);this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Vf=class extends mP{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},yl=class extends rb{constructor(e,t){super(e,t);this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function Aae(r){let e={lazyRender:typeof r.lazyRender!="undefined"?r.lazyRender:!1,className:typeof r.className!="undefined"?r.className:"",useShadows:typeof r.useShadows!="undefined"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel!="undefined"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes!="undefined"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded!="undefined"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel!="undefined"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX!="undefined"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity!="undefined"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity!="undefined"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis!="undefined"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll!="undefined"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize!="undefined"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode!="undefined"?r.listenOnDomNode:null,horizontal:typeof r.horizontal!="undefined"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize!="undefined"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize!="undefined"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows!="undefined"?r.horizontalHasArrows:!1,vertical:typeof r.vertical!="undefined"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize!="undefined"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows!="undefined"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize!="undefined"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage!="undefined"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize!="undefined"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize!="undefined"?r.verticalSliderSize:e.verticalScrollbarSize,We&&(e.className+=" mac"),e}var fP=class extends Ki{constructor(e,t,i,n){super(e);let o=this._context.configuration.options,s=o.get(91),a=o.get(66),l=o.get(34),c=o.get(94),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+Cf(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new Vf(t.domNode,d,this._context.viewLayout.getScrollable())),pr.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=tt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let h=(u,m,p)=>{let _={};if(m){let v=u.scrollTop;v&&(_.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,u.scrollTop=0)}if(p){let v=u.scrollLeft;v&&(_.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,u.scrollLeft=0)}this._context.model.setScrollPosition(_,1)};this._register(J(i.domNode,"scroll",u=>h(i.domNode,!0,!0))),this._register(J(t.domNode,"scroll",u=>h(t.domNode,!0,!1))),this._register(J(n.domNode,"scroll",u=>h(n.domNode,!0,!1))),this._register(J(this.scrollbarDomNode.domNode,"scroll",u=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){let t=this._context.configuration.options,i=t.get(91),n=t.get(66),o=t.get(34),s=t.get(94),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:o,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+Cf(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};Be((r,e)=>{let t=r.getColor(vc);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);let i=r.getColor(If);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${i};
			}
		`);let n=r.getColor(Of);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${n};
			}
		`);let o=r.getColor(Tf);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});var zf=class{constructor(e,t,i){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(i)}},ob=class extends Hs{_render(e,t,i){let n=[];for(let a=e;a<=t;a++){let l=a-e;n[l]=[]}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,s=0;for(let a=0,l=i.length;a<l;a++){let c=i[a],d=c.className,h=Math.max(c.startLineNumber,e)-e,u=Math.min(c.endLineNumber,t)-e;o===d?(h=Math.max(s+1,h),s=Math.max(s,u)):(o=d,s=u);for(let m=h;m<=s;m++)n[m].push(o)}return n}},gP=class extends ob{constructor(e){super();this._context=e;let t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.options.glyphMarginClassName;l&&(i[n++]=new zf(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._lineHeight.toString(),s=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+s+"px;width:"+a+"px;height:"+o+'px;"></div>',c=[];for(let d=t;d<=i;d++){let h=d-t,u=n[h];u.length===0?c[h]="":c[h]='<div class="cgmr codicon '+u.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};var pP=class extends Hs{constructor(e){super();this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,i=t.get(130),n=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(130),n=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;let n=e.selections[0].getPosition();return((t=this._primaryPosition)===null||t===void 0?void 0:t.equals(n))?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,n,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}let s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,h=this.getGuidesByLine(s,a,d),u=[];for(let m=s;m<=a;m++){let p=m-s,_=h[p],v="",C=(i=(t=e.visibleRangeForPosition(new V(m,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(let w of _){let S=C+(w.visibleColumn-1)*this._spaceWidth;if(S>l||this._maxIndentLeft>0&&S>this._maxIndentLeft)break;let D=w.horizontalLine?w.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",I=w.horizontalLine?((o=(n=e.visibleRangeForPosition(new V(m,w.horizontalLine.endColumn)))===null||n===void 0?void 0:n.left)!==null&&o!==void 0?o:S+this._spaceWidth)-S:this._spaceWidth;v+=`<div class="core-guide ${w.className} ${D}" style="left:${S}px;height:${c}px;width:${I}px"></div>`}u[p]=v}this._renderResult=u}getGuidesByLine(e,t,i){let n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?hd.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?hd.EnabledForActive:hd.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null,s=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&i){let h=this._context.model.getActiveIndentGuide(i.lineNumber,e,t);s=h.startLineNumber,a=h.endLineNumber,l=h.indent}let{indentSize:c}=this._context.model.getTextModelOptions(),d=[];for(let h=e;h<=t;h++){let u=new Array;d.push(u);let m=n?n[h-e]:[],p=new wd(m),_=o?o[h-e]:[];for(let v=1;v<=_;v++){let C=(v-1)*c+1,w=m.length===0&&s<=h&&h<=a&&v===l;u.push(...p.takeWhile(D=>D.visibleColumn<C)||[]);let S=p.peek();(!S||S.visibleColumn!==C||S.horizontalLine)&&u.push(new Jl(C,w?"core-guide-indent-active":"core-guide-indent",null))}u.push(...p.takeWhile(v=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};function mD(r){if(!(r&&r.isTransparent()))return r}Be((r,e)=>{let t=r.getColor(q_);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);let i=r.getColor(Y_)||t;i&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${i} inset; }`);let n=[{bracketColor:$E,guideColor:y8,guideColorActive:L8},{bracketColor:KE,guideColor:C8,guideColorActive:k8},{bracketColor:qE,guideColor:S8,guideColorActive:I8},{bracketColor:YE,guideColor:x8,guideColorActive:O8},{bracketColor:ZE,guideColor:E8,guideColorActive:T8},{bracketColor:GE,guideColor:D8,guideColorActive:N8}],o=new JE,s=n.map(a=>{var l,c;let d=r.getColor(a.bracketColor),h=r.getColor(a.guideColor),u=r.getColor(a.guideColorActive),m=mD((l=mD(h))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),p=mD((c=mD(u))!==null&&c!==void 0?c:d);if(!(!m||!p))return{guideColor:m,guideColorActive:p}}).filter(lU);if(s.length>0){for(let a=0;a<30;a++){let l=s[a%s.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});var l7=class{constructor(){this._currentVisibleRange=new L(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}},c7=class{constructor(e,t,i,n,o,s){this.lineNumber=e,this.startColumn=t,this.endColumn=i,this.startScrollTop=n,this.stopScrollTop=o,this.scrollType=s,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}},d7=class{constructor(e,t,i,n){this.selections=e,this.startScrollTop=t,this.stopScrollTop=i,this.scrollType=n,this.type="selections";let o=e[0].startLineNumber,s=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){let c=e[a];o=Math.min(o,c.startLineNumber),s=Math.max(s,c.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=s}},sb=class extends Ki{constructor(e,t){super(e);this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new By(this),this.domNode=this._visibleLines.domNode;let i=this._context.configuration,n=this._context.configuration.options,o=n.get(43),s=n.get(130);this._lineHeight=n.get(58),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=n.get(88),this._cursorSurroundingLines=n.get(25),this._cursorSurroundingLinesStyle=n.get(26),this._canUseLayerHinting=!n.get(28),this._viewLineOptions=new uE(i,this._context.theme.type),pr.write(this.domNode,7),this.domNode.setClassName(`view-lines ${vl}`),Ti.applyFontInfo(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new dt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new dt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new l7,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Ws(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);let t=this._context.configuration.options,i=t.get(43),n=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Ti.applyFontInfo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new uE(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1;for(let o=t;o<=i;o++)n=this._visibleLines.getVisibleLine(o).onSelectionChanged()||n;return n}onDecorationsChanged(e){{let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new c7(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new d7(e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let i=this._getViewLineDomNode(e);if(i===null)return null;let n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(n)===1)return new V(n,1);let o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(n<o||n>s)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t),l=this._context.model.getLineMinColumn(n);return a<l&&(a=l),new V(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Ws.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){let o=this._visibleLines.getVisibleLine(n);if(e===o.getDomNode())return n}return-1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let i=e.endLineNumber,n=L.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;let o=[],s=0,a=new hE(this.domNode.domNode,this._textRangeRestingSpot),l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new V(n.startLineNumber,1)).lineNumber);let c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=n.startLineNumber;h<=n.endLineNumber;h++){if(h<c||h>d)continue;let u=h===n.startLineNumber?n.startColumn:1,m=h===n.endLineNumber?n.endColumn:this._context.model.getLineMaxColumn(h),p=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,u,m,a);if(!!p){if(t&&h<i){let _=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new V(h+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[s++]=new AN(p.outsideRenderedLine,h,xf.from(p.ranges))}}return s===0?null:o}_visibleRangesForLineRange(e,t,i){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,new hE(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new jN(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0;for(let s=t;s<=i;s++){let a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){o=!1;continue}n=Math.max(n,a.getWidth())}return o&&t===1&&i===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1,i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++){let s=this._visibleLines.getVisibleLine(o);if(s.needsMonospaceFontCheck()){let a=s.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=i;o<=n;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let n=this._computeScrollLeftToReveal(i);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),ji&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let o=i;o<=n;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,o){let s=e.top,a=e.height,l=s+a,c,d,h;if(n&&n.length>0){let p=n[0].startLineNumber,_=n[0].endLineNumber;for(let v=1,C=n.length;v<C;v++){let w=n[v];p=Math.min(p,w.startLineNumber),_=Math.max(_,w.endLineNumber)}c=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(p),h=this._context.viewLayout.getVerticalOffsetForLineNumber(_)+this._lineHeight}else if(i)c=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){let p=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);d-=p*this._lineHeight,h+=Math.max(0,p-1)*this._lineHeight}(o===0||o===4)&&(h+=this._lineHeight);let m;if(h-d>a){if(!c)return-1;m=d}else if(o===5||o===6)if(o===6&&s<=d&&h<=l)m=s;else{let p=Math.max(5*this._lineHeight,a*.2),_=d-p,v=h-a;m=Math.max(v,_)}else if(o===1||o===2)if(o===2&&s<=d&&h<=l)m=s;else{let p=(d+h)/2;m=Math.max(0,p-a/2)}else m=this._computeMinimumScrolling(s,l,d,h,o===3,o===4);return m}_computeScrollLeftToReveal(e){let t=this._context.viewLayout.getCurrentViewport(),i=t.left,n=i+t.width,o=1073741824,s=0;if(e.type==="range"){let l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(let c of l.ranges)o=Math.min(o,Math.round(c.left)),s=Math.max(s,Math.round(c.left+c.width))}else for(let l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;let c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(let d of c.ranges)o=Math.min(o,Math.round(d.left)),s=Math.max(s,Math.round(d.left+d.width))}return o=Math.max(0,o-sb.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding,e.type==="selections"&&s-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,n,o,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,i,n,o,s){e=e|0,t=t|0,i=i|0,n=n|0,o=!!o,s=!!s;let a=t-e;if(n-i<a){if(o)return i;if(s)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}};sb.HORIZONTAL_EXTRA_PX=30;var _P=class extends ob{constructor(e){super();this._context=e;let i=this._context.configuration.options.get(129);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let i=this._context.configuration.options.get(129);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.options.linesDecorationsClassName;l&&(i[n++]=new zf(a.range.startLineNumber,a.range.endLineNumber,l));let c=a.options.firstLineDecorationClassName;c&&(i[n++]=new zf(a.range.startLineNumber,a.range.startLineNumber,c))}return i}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+s+'px;"></div>',l=[];for(let c=t;c<=i;c++){let d=c-t,h=n[d],u="";for(let m=0,p=h.length;m<p;m++)u+='<div class="cldr '+h[m]+a;l[d]=u}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};var bP=class extends ob{constructor(e){super();this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),i=[],n=0;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.options.marginClassName;l&&(i[n++]=new zf(a.range.startLineNumber,a.range.endLineNumber,l))}return i}prepareRender(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),o=[];for(let s=t;s<=i;s++){let a=s-t,l=n[a],c="";for(let d=0,h=l.length;d<h;d++)c+='<div class="cmdr '+l[d]+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};var Co=class{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=Co._clamp(e),this.g=Co._clamp(t),this.b=Co._clamp(i),this.a=Co._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Co.Empty=new Co(0,0,0,0);var Ou=class extends H{constructor(){super();this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(ti.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=Y5(new Ou)),this._INSTANCE}_updateColorMap(){let e=ti.getColorMap();if(!e){this._colors=[Co.Empty],this._backgroundIsLight=!0;return}this._colors=[Co.Empty];for(let i=1;i<e.length;i++){let n=e[i].rgba;this._colors[i]=new Co(n.r,n.g,n.b,Math.round(n.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};Ou._INSTANCE=null;var h7=(()=>{let r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),u7=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:96-1:r);var Hf=class{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Hf.soften(e,12/15),this.charDataLight=Hf.soften(e,50/60)}static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=cf(e[n]*t);return i}renderChar(e,t,i,n,o,s,a,l,c,d,h){let u=1*this.scale,m=2*this.scale,p=h?1:m;if(t+u>e.width||i+p>e.height){console.warn("bad render request outside image data");return}let _=d?this.charDataLight:this.charDataNormal,v=u7(n,c),C=e.width*4,w=a.r,S=a.g,D=a.b,I=o.r-w,A=o.g-S,O=o.b-D,N=Math.max(s,l),F=e.data,Y=v*u*m,K=i*C+t*4;for(let ee=0;ee<p;ee++){let ie=K;for(let Ee=0;Ee<u;Ee++){let Le=_[Y++]/255*(s/255);F[ie++]=w+I*Le,F[ie++]=S+A*Le,F[ie++]=D+O*Le,F[ie++]=N}K+=C}}blockRenderChar(e,t,i,n,o,s,a,l){let c=1*this.scale,d=2*this.scale,h=l?1:d;if(t+c>e.width||i+h>e.height){console.warn("bad render request outside image data");return}let u=e.width*4,m=.5*(o/255),p=s.r,_=s.g,v=s.b,C=n.r-p,w=n.g-_,S=n.b-v,D=p+C*m,I=_+w*m,A=v+S*m,O=Math.max(o,a),N=e.data,F=i*u+t*4;for(let Y=0;Y<h;Y++){let K=F;for(let ee=0;ee<c;ee++)N[K++]=D,N[K++]=I,N[K++]=A,N[K++]=O;F+=u}}};var m7={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},f7=r=>{let e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=m7[r[t]]<<4|m7[r[t+1]]&15;return e},vP={1:os(()=>f7("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:os(()=>f7("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};var $f=class{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return vP[e]?i=new Hf(vP[e](),e):i=$f.createFromSampleData($f.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold ${16}px ${e}`,i.textBaseline="middle";let n=0;for(let o of h7)i.fillText(String.fromCharCode(o),n,16/2),n+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){let i=16*10*4*96;if(e.length!==i)throw new Error("Unexpected source in MinimapCharRenderer");let n=$f._downsample(e,t);return new Hf(n,t)}static _downsampleChar(e,t,i,n,o){let s=1*o,a=2*o,l=n,c=0;for(let d=0;d<a;d++){let h=d/a*16,u=(d+1)/a*16;for(let m=0;m<s;m++){let p=m/s*10,_=(m+1)/s*10,v=0,C=0;for(let S=h;S<u;S++){let D=t+Math.floor(S)*3840,I=1-(S-Math.floor(S));for(let A=p;A<_;A++){let O=1-(A-Math.floor(A)),N=D+Math.floor(A)*4,F=O*I;C+=F,v+=e[N]*e[N+3]/255*F}}let w=v/C;c=Math.max(c,w),i[l++]=cf(w)}}return c}static _downsample(e,t){let i=2*t*1*t,n=i*96,o=new Uint8ClampedArray(n),s=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,s,t)),s+=i,a+=10*4;if(l>0){let c=255/l;for(let d=0;d<n;d++)o[d]*=c}return o}};var jae=140,Mae=2,ab=class{constructor(e,t,i){let n=e.options,o=n.get(127),s=n.get(129),a=s.minimap,l=n.get(43),c=n.get(64);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(93),this.showSlider=c.showSlider,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=os(()=>$f.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=ab._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=ab._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){let i=e.getColor(qH);return i?new Co(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(YH);return t?Co._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}},lb=class{constructor(e,t,i,n,o,s,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=o,this.sliderHeight=s,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,i,n,o,s,a,l,c,d,h){let u=e.pixelRatio,m=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/m),_=e.lineHeight;if(e.minimapHeightIsEditorHeight){let I=l*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),A=Math.max(1,Math.floor(o*o/I)),O=Math.max(0,e.minimapHeight-A),N=O/(d-o),F=c*N,Y=O>0,K=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new lb(c,d,Y,N,F,A,1,Math.min(a,K))}let v;if(s&&i!==a){let I=i-t+1;v=Math.floor(I*m/u)}else{let I=o/_;v=Math.floor(I*m/u)}let C;e.scrollBeyondLastLine?C=(a-1)*m/u:C=Math.max(0,a*m/u-v),C=Math.min(e.minimapHeight-v,C);let w=C/(d-o),S=c*w,D=0;if(e.scrollBeyondLastLine&&(D=o/_-1),p>=a+D){let I=1,A=a,O=C>0;return new lb(c,d,O,w,S,v,I,A)}else{let I=Math.max(1,Math.floor(t-S*u/m));h&&h.scrollHeight===d&&(h.scrollTop>c&&(I=Math.min(I,h.startLineNumber)),h.scrollTop<c&&(I=Math.max(I,h.startLineNumber)));let A=Math.min(a,I+p-1),O=(c-n)/_,N=(t-I+O)*m/u;return new lb(c,d,!0,w,N,v,I,A)}}},Vy=class{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};Vy.INVALID=new Vy(-1);var wP=class{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new hD(()=>Vy.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;let i=this._renderedLines._get().lines;for(let n=0,o=i.length;n<o;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}},fD=class{constructor(e,t,i,n){this._backgroundFillData=fD._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){let n=i.r,o=i.g,s=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4),c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=n,l[c+1]=o,l[c+2]=s,l[c+3]=a,c+=4;return l}},cb=class{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];let n=e.pixelRatio,o=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:a}=Hh.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:o,pixelRatio:n}),l=t/a,c=l/2;if(!i||i.minimapLines.length===0){let S=[];if(S[0]=1,a>1){for(let D=0,I=a-1;D<I;D++)S[D]=Math.round(D*l+c);S[a-1]=t}return[new cb(l,S),[]]}let d=i.minimapLines,h=d.length,u=[],m=0,p=0,_=1,v=10,C=[],w=null;for(let S=0;S<a;S++){let D=Math.max(_,Math.round(S*l)),I=Math.max(D,Math.round((S+1)*l));for(;m<h&&d[m]<D;){if(C.length<v){let O=m+1+p;w&&w.type==="deleted"&&w._oldIndex===m-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:m,deleteFromLineNumber:O,deleteToLineNumber:O},C.push(w)),p--}m++}let A;if(m<h&&d[m]<=I)A=d[m],m++;else if(S===0?A=1:S+1===a?A=t:A=Math.round(S*l+c),C.length<v){let O=m+1+p;w&&w.type==="inserted"&&w._i===S-1?w.insertToLineNumber++:(w={type:"inserted",_i:S,insertFromLineNumber:O,insertToLineNumber:O},C.push(w)),p++}u[S]=A,_=A}if(C.length<v)for(;m<h;){let S=m+1+p;w&&w.type==="deleted"&&w._oldIndex===m-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:m,deleteFromLineNumber:S,deleteToLineNumber:S},C.push(w)),p--,m++}else C=[{type:"flush"}];return[new cb(l,u),C]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){let o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,i=this.minimapLines.length,n=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),n=Math.max(n,o)):this.minimapLines[o]-=t;return[i,n]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}},yP=class extends Ki{constructor(e){super(e);this.tokensColorTracker=Ou.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new ab(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=cb.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new zy(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new ab(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){let[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(let i of e.ranges){let n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));let n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;let e=Boolean(this._samplingState),[t,i]=cb.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let n=[];for(let o=0,s=t-e+1;o<s;o++)i[o]?n[o]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+o-1]):n[o]=null;return n}return this._context.model.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let e of this._selections){let[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new le(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){let o=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new L(o,1,s,this._context.model.getLineMaxColumn(s))}else i=new L(e,1,t,this._context.model.getLineMaxColumn(t));let n=this._context.model.getDecorationsInViewport(i);if(this._samplingState){let o=[];for(let s of n){if(!s.options.minimap)continue;let a=s.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new Aw(new L(l,a.startColumn,c,a.endColumn),s.options))}return o}return n}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new L(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}},zy=class extends H{constructor(e,t){super();this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(ER),this._domNode=tt(document.createElement("div")),pr.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=tt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=tt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=tt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=tt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=tt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=Zt(this._domNode.domNode,"mousedown",i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.leftButton&&this._lastRenderData){let c=ci(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i.buttons,i.posx,d,i.posy,this._lastRenderData.renderedLayout)}return}let o=this._model.options.minimapLineHeight,s=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.browserEvent.offsetY,l=Math.floor(s/o)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new ms,this._sliderMouseDownListener=Zt(this._slider.domNode,"mousedown",i=>{i.preventDefault(),i.stopPropagation(),i.leftButton&&this._lastRenderData&&this._startSliderDragging(i.buttons,i.posx,i.posy,i.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=yt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=J(this._domNode.domNode,Ft.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=J(this._domNode.domNode,Ft.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Zt(this._domNode.domNode,Ft.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i,n,o){this._slider.toggleClassName("active",!0);let s=(a,l)=>{let c=Math.abs(l-t);if(bi&&c>jae){this._model.setScrollTop(o.scrollTop);return}let d=a-i;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(d))};n!==i&&s(n,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,fl,a=>s(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new fD(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(ER),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let i=lb.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(L.compareRangesUsingStarts);let i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((u,m)=>(u.options.zIndex||0)-(m.options.zIndex||0));let{canvasInnerWidth:n,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,o);let d=new CP(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,s),this._renderDecorationsLineHighlights(c,i,d,e,s);let h=new CP(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,s,l,a,n),this._renderDecorationsHighlights(c,i,h,e,s,l,a,n)}}_renderSelectionLineHighlights(e,t,i,n,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(let l of t){let c=Math.max(n.startLineNumber,l.startLineNumber),d=Math.min(n.endLineNumber,l.endLineNumber);if(c>d)continue;for(let m=c;m<=d;m++)i.set(m,!0);let h=(c-n.startLineNumber)*o,u=(d-n.startLineNumber)*o+o;a>=h||(a>s&&e.fillRect(sd,s,e.canvas.width,a-s),s=h),a=u}a>s&&e.fillRect(sd,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,i,n,o){let s=new Map;for(let a=t.length-1;a>=0;a--){let l=t[a],c=l.options.minimap;if(!c||c.position!==kr.Inline)continue;let d=Math.max(n.startLineNumber,l.range.startLineNumber),h=Math.min(n.endLineNumber,l.range.endLineNumber);if(d>h)continue;let u=c.getColor(this._theme);if(!u||u.isTransparent())continue;let m=s.get(u.toString());m||(m=u.transparent(.5).toString(),s.set(u.toString(),m)),e.fillStyle=m;for(let p=d;p<=h;p++){if(i.has(p))continue;i.set(p,!0);let _=(d-n.startLineNumber)*o;e.fillRect(sd,_,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,n,o,s,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let c of t){let d=Math.max(n.startLineNumber,c.startLineNumber),h=Math.min(n.endLineNumber,c.endLineNumber);if(!(d>h))for(let u=d;u<=h;u++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,u,o,o,s,a,l)}}_renderDecorationsHighlights(e,t,i,n,o,s,a,l){for(let c of t){let d=c.options.minimap;if(!d)continue;let h=Math.max(n.startLineNumber,c.range.startLineNumber),u=Math.min(n.endLineNumber,c.range.endLineNumber);if(h>u)continue;let m=d.getColor(this._theme);if(!(!m||m.isTransparent()))for(let p=h;p<=u;p++)switch(d.position){case kr.Inline:this.renderDecorationOnLine(e,i,c.range,m,n,p,o,o,s,a,l);continue;case kr.Gutter:let _=(p-n.startLineNumber)*o,v=2;this.renderDecoration(e,m,v,_,Mae,o);continue}}}renderDecorationOnLine(e,t,i,n,o,s,a,l,c,d,h){let u=(s-o.startLineNumber)*l;if(u+a<0||u>this._model.options.canvasInnerHeight)return;let{startLineNumber:m,endLineNumber:p}=i,_=m===s?i.startColumn:1,v=p===s?i.endColumn:this._model.getLineMaxColumn(s),C=this.getXOffsetForPosition(t,s,_,c,d,h),w=this.getXOffsetForPosition(t,s,v,c,d,h);this.renderDecoration(e,n,C,u,w-C,a)}getXOffsetForPosition(e,t,i,n,o,s){if(i===1)return sd;if((i-1)*o>=s)return s;let l=e.get(t);if(!l){let c=this._model.getLineContent(t);l=[sd];let d=sd;for(let h=1;h<c.length+1;h++){let u=c.charCodeAt(h-1),m=u===9?n*o:uo(u)?2*o:o,p=d+m;if(p>=s){l[h]=s;break}l[h]=p,d=p}e.set(t,l)}return i-1<l.length?l[i-1]:s}renderDecoration(e,t,i,n,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,o,s)}renderLines(e){let t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let Le=this._lastRenderData._get();return new wP(e,Le.imageData,Le.lines)}let o=this._getBuffer();if(!o)return null;let[s,a,l]=zy._renderUntouchedLines(o,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,_=p.backgroundIsLight(),v=this._model.options.renderMinimap,C=this._model.options.charRenderer(),w=this._model.options.fontScale,S=this._model.options.minimapCharWidth,I=(v===1?2:2+1)*w,A=n>I?Math.floor((n-I)/2):0,O=u.a/255,N=new Co(Math.round((u.r-h.r)*O+h.r),Math.round((u.g-h.g)*O+h.g),Math.round((u.b-h.b)*O+h.b),255),F=0,Y=[];for(let Le=0,Te=i-t+1;Le<Te;Le++)l[Le]&&zy._renderLine(o,N,u.a,_,v,S,p,m,C,F,A,d,c[Le],w,n),Y[Le]=new Vy(F),F+=n;let K=s===-1?0:s,ie=(a===-1?o.height:a)-K;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,K,o.width,ie),new wP(e,o,Y)}static _renderUntouchedLines(e,t,i,n,o){let s=[];if(!o){for(let N=0,F=i-t+1;N<F;N++)s[N]=!0;return[-1,-1,s]}let a=o._get(),l=a.imageData.data,c=a.rendLineNumberStart,d=a.lines,h=d.length,u=e.width,m=e.data,p=(i-t+1)*n*u*4,_=-1,v=-1,C=-1,w=-1,S=-1,D=-1,I=0;for(let N=t;N<=i;N++){let F=N-t,Y=N-c,K=Y>=0&&Y<h?d[Y].dy:-1;if(K===-1){s[F]=!0,I+=n;continue}let ee=K*u*4,ie=(K+n)*u*4,Ee=I*u*4,Le=(I+n)*u*4;w===ee&&D===Ee?(w=ie,D=Le):(C!==-1&&(m.set(l.subarray(C,w),S),_===-1&&C===0&&C===S&&(_=w),v===-1&&w===p&&C===S&&(v=C)),C=ee,w=ie,S=Ee,D=Le),s[F]=!1,I+=n}C!==-1&&(m.set(l.subarray(C,w),S),_===-1&&C===0&&C===S&&(_=w),v===-1&&w===p&&C===S&&(v=C));let A=_===-1?-1:_/(u*4),O=v===-1?-1:v/(u*4);return[A,O,s]}static _renderLine(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_){let v=m.content,C=m.tokens,w=e.width-s,S=_===1,D=sd,I=0,A=0;for(let O=0,N=C.getCount();O<N;O++){let F=C.getEndOffset(O),Y=C.getForeground(O),K=a.getColor(Y);for(;I<F;I++){if(D>w)return;let ee=v.charCodeAt(I);if(ee===9){let ie=u-(I+A)%u;A+=ie-1,D+=ie*s}else if(ee===32)D+=s;else{let ie=uo(ee)?2:1;for(let Ee=0;Ee<ie;Ee++)if(o===2?c.blockRenderChar(e,D,d+h,K,l,t,i,S):c.renderChar(e,D,d+h,ee,K,l,t,i,p,n,S),D+=s,D>w)return}}}}},CP=class{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,o=this._endLineNumber-this._startLineNumber+1;n<o;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};Be((r,e)=>{let t=r.getColor(ZH);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);let i=r.getColor(GH);i&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${i}; }`);let n=r.getColor(XH);n&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${n}; }`);let o=r.getColor(vc);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});var SP=class extends Ki{constructor(e){super(e);let i=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._domNode=tt(document.createElement("div")),pr.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let i=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){let t=tt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let i=this._widgets[e.getId()];return i.preference===t?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.parentNode.removeChild(n),this.setShouldRender()}}_renderWidget(e){let t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){let i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){let o=t[i];this._renderWidget(this._widgets[o])}}};var g7=class{constructor(e,t){let i=e.options;this.lineHeight=i.get(58),this.pixelRatio=i.get(127),this.overviewRulerLanes=i.get(73),this.renderBorder=i.get(72);let n=t.getColor(m8);this.borderColor=n?n.toString():null,this.hideCursor=i.get(51);let o=t.getColor(VE);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;let s=i.get(64),a=s.enabled,l=s.side,c=a?t.getColor(f8)||ti.getDefaultBackground():null;c===null||l==="left"?this.backgroundColor=null:this.backgroundColor=q.Format.CSS.formatHex(c);let h=i.get(129).overviewRuler;this.top=h.top,this.right=h.right,this.domWidth=h.width,this.domHeight=h.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[u,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=u,this.w=m}_initLanes(e,t,i){let n=t-e;if(i>=3){let o=Math.floor(n/3),s=Math.floor(n/3),a=n-o-s,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(i===2){let o=Math.floor(n/2),s=n-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,s,o+s,o+s,o+s]]}else{let o=e,s=n;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}},xP=class extends Ki{constructor(e){super(e);this._domNode=tt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=ti.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new g7(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(V.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}let e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,n=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),s=t/o,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,d=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?d.clearRect(0,0,e,t):(d.fillStyle=this._settings.backgroundColor,d.fillRect(0,0,e,t));let h=this._settings.x,u=this._settings.w;a.sort(jw.cmp);for(let m of a){let p=m.color,_=m.data;d.fillStyle=p;let v=0,C=0,w=0;for(let S=0,D=_.length/3;S<D;S++){let I=_[3*S],A=_[3*S+1],O=_[3*S+2],N=n.getVerticalOffsetForLineNumber(A)*s|0,F=(n.getVerticalOffsetForLineNumber(O)+i)*s|0;if(F-N<l){let K=(N+F)/2|0;K<c?K=c:K+c>t&&(K=t-c),N=K-c,F=K+c}N>w+1||I!==v?(S!==0&&d.fillRect(h[v],C,u[v],w-C),v=I,C=N,w=F):F>w&&(w=F)}d.fillRect(h[v],C,u[v],w-C)}if(!this._settings.hideCursor&&this._settings.cursorColor){let m=2*this._settings.pixelRatio|0,p=m/2|0,_=this._settings.x[7],v=this._settings.w[7];d.fillStyle=this._settings.cursorColor;let C=-100,w=-100;for(let S=0,D=this._cursorPositions.length;S<D;S++){let I=this._cursorPositions[S],A=n.getVerticalOffsetForLineNumber(I.lineNumber)*s|0;A<p?A=p:A+p>t&&(A=t-p);let O=A-p,N=O+m;O>w+1?(S!==0&&d.fillRect(_,C,v,w-C),C=O,w=N):N>w&&(w=N)}d.fillRect(_,C,v,w-C)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,t),d.stroke(),d.moveTo(0,0),d.lineTo(e,0),d.stroke())}};var EP=class{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}},Kf=class{constructor(e,t,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}},DP=class{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Kf.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),o=i/n,s=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){let d=this._zones[l];if(!e){let w=d.getColorZones();if(w){a.push(w);continue}}let h=Math.floor(o*this._getVerticalOffsetForLine(d.startLineNumber)),u=Math.floor(o*(this._getVerticalOffsetForLine(d.endLineNumber)+t)),m=Math.floor((h+u)/2),p=u-m;p<s&&(p=s),m-p<0&&(m=p),m+p>i&&(m=i-p);let _=d.color,v=this._color2Id[_];v||(v=++this._lastAssignedId,this._color2Id[_]=v,this._id2Color[v]=_);let C=new EP(m-p,m+p,v);d.setColorZone(C),a.push(C)}return this._colorZonesInvalid=!1,a.sort(EP.compare),a}};var LP=class extends gl{constructor(e,t){super();this._context=e;let i=this._context.configuration.options;this._domNode=tt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new DP(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(58)),this._zoneManager.setPixelRatio(i.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,n,e),!0}_renderOneLane(e,t,i,n){let o=0,s=0,a=0;for(let l of t){let c=l.colorId,d=l.from,h=l.to;c!==o?(e.fillRect(0,s,n,a-s),o=c,e.fillStyle=i[o],s=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,s,n,a-s),s=d,a=h)}e.fillRect(0,s,n,a-s)}};var kP=class extends Ki{constructor(e){super(e);this.domNode=tt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:n}=this._context.model.getTextModelOptions(),o=n,s=t-e;for(;s>0;){let a=tt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let i=e-t;for(;i>0;){let n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){let n=this._renderedRulers[t],o=this._rulers[t];n.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}};Be((r,e)=>{let t=r.getColor(d8);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});var IP=class extends Ki{constructor(e){super(e);this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let i=this._context.configuration.options.get(91);this._useShadows=i.useShadows,this._domNode=tt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){let t=this._context.configuration.options.get(129);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){let i=this._context.configuration.options.get(91);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}};Be((r,e)=>{let t=r.getColor(vc);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});var p7=class{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}},_7=class{constructor(e,t){this.lineNumber=e,this.ranges=t}};function Fae(r){return new p7(r)}function Bae(r){return new _7(r.lineNumber,r.ranges.map(Fae))}var Pi=class extends Hs{constructor(e){super();this._previousFrameVisibleRangesWithStyle=[],this._context=e;let t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){let n=this._typicalHalfwidthCharacterWidth/4,o=null,s=null;if(i&&i.length>0&&t.length>0){let a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<i.length;c++)i[c].lineNumber===a&&(o=i[c].ranges[0]);let l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!s&&c>=0;c--)i[c].lineNumber===l&&(s=i[c].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let a=0,l=t.length;a<l;a++){let c=t[a].ranges[0],d=c.left,h=c.left+c.width,u={top:0,bottom:0},m={top:0,bottom:0};if(a>0){let p=t[a-1].ranges[0].left,_=t[a-1].ranges[0].left+t[a-1].ranges[0].width;gD(d-p)<n?u.top=2:d>p&&(u.top=1),gD(h-_)<n?m.top=2:p<h&&h<_&&(m.top=1)}else o&&(u.top=o.startStyle.top,m.top=o.endStyle.top);if(a+1<l){let p=t[a+1].ranges[0].left,_=t[a+1].ranges[0].left+t[a+1].ranges[0].width;gD(d-p)<n?u.bottom=2:p<d&&d<_&&(u.bottom=1),gD(h-_)<n?m.bottom=2:h<_&&(m.bottom=1)}else s&&(u.bottom=s.startStyle.bottom,m.bottom=s.endStyle.bottom);c.startStyle=u,c.endStyle=m}}_getVisibleRangesWithStyle(e,t,i){let o=(t.linesVisibleRangesForRange(e,!0)||[]).map(Bae);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,n,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;let o=!!n[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=n[0].lineNumber,c=n[n.length-1].lineNumber;for(let d=0,h=n.length;d<h;d++){let u=n[d],m=u.lineNumber,p=m-t,_=i&&(m===c||m===l)?a:s,v=i&&m===l?1:0,C="",w="";for(let S=0,D=u.ranges.length;S<D;S++){let I=u.ranges[S];if(o){let O=I.startStyle,N=I.endStyle;if(O.top===1||O.bottom===1){C+=this._createSelectionPiece(v,_,Pi.SELECTION_CLASS_NAME,I.left-Pi.ROUNDED_PIECE_WIDTH,Pi.ROUNDED_PIECE_WIDTH);let F=Pi.EDITOR_BACKGROUND_CLASS_NAME;O.top===1&&(F+=" "+Pi.SELECTION_TOP_RIGHT),O.bottom===1&&(F+=" "+Pi.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(v,_,F,I.left-Pi.ROUNDED_PIECE_WIDTH,Pi.ROUNDED_PIECE_WIDTH)}if(N.top===1||N.bottom===1){C+=this._createSelectionPiece(v,_,Pi.SELECTION_CLASS_NAME,I.left+I.width,Pi.ROUNDED_PIECE_WIDTH);let F=Pi.EDITOR_BACKGROUND_CLASS_NAME;N.top===1&&(F+=" "+Pi.SELECTION_TOP_LEFT),N.bottom===1&&(F+=" "+Pi.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(v,_,F,I.left+I.width,Pi.ROUNDED_PIECE_WIDTH)}}let A=Pi.SELECTION_CLASS_NAME;if(o){let O=I.startStyle,N=I.endStyle;O.top===0&&(A+=" "+Pi.SELECTION_TOP_LEFT),O.bottom===0&&(A+=" "+Pi.SELECTION_BOTTOM_LEFT),N.top===0&&(A+=" "+Pi.SELECTION_TOP_RIGHT),N.bottom===0&&(A+=" "+Pi.SELECTION_BOTTOM_RIGHT)}w+=this._createSelectionPiece(v,_,A,I.left,I.width)}e[p][0]+=C,e[p][1]+=w}}prepareRender(e){let t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let s=i;s<=n;s++){let a=s-i;t[a]=["",""]}let o=[];for(let s=0,a=this._selections.length;s<a;s++){let l=this._selections[s];if(l.isEmpty()){o[s]=null;continue}let c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);o[s]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";let i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};Pi.SELECTION_CLASS_NAME="selected-text";Pi.SELECTION_TOP_LEFT="top-left-radius";Pi.SELECTION_BOTTOM_LEFT="bottom-left-radius";Pi.SELECTION_TOP_RIGHT="top-right-radius";Pi.SELECTION_BOTTOM_RIGHT="bottom-right-radius";Pi.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";Pi.ROUNDED_PIECE_WIDTH=10;Be((r,e)=>{let t=r.getColor(yc);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);let i=r.getColor(Ly);i&&e.addRule(`.monaco-editor .selected-text { background-color: ${i}; }`);let n=r.getColor(Xz);n&&!n.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${n}; }`)});function gD(r){return r<0?-r:r}var OP=class{constructor(e,t,i,n,o,s){this.top=e,this.left=t,this.width=i,this.height=n,this.textContent=o,this.textContentClassName=s}},pD=class{constructor(e){this._context=e;let t=this._context.configuration.options,i=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=tt(document.createElement("div")),this._domNode.setClassName(`cursor ${vl}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Ti.applyFontInfo(this._domNode,i),this._domNode.setDisplay("none"),this._position=new V(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Ti.applyFontInfo(this._domNode,i),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===wn.Line||this._cursorStyle===wn.LineThin){let u=e.visibleRangeForPosition(this._position);if(!u||u.outsideRenderedLine)return null;let m;if(this._cursorStyle===wn.Line){if(m=zO(this._lineCursorWidth>0?this._lineCursorWidth:2),m>2){let v=this._context.model.getLineContent(this._position.lineNumber),C=zm(v,this._position.column-1);t=v.substr(this._position.column-1,C)}}else m=zO(1);let p=u.left;m>=2&&p>=1&&(p-=1);let _=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new OP(_,p,m,this._lineHeight,t,"")}let i=this._context.model.getLineContent(this._position.lineNumber),n=zm(i,this._position.column-1),o=e.linesVisibleRangesForRange(new L(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+n),!1);if(!o||o.length===0)return null;let s=o[0];if(s.outsideRenderedLine||s.ranges.length===0)return null;let a=s.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width,c="";if(this._cursorStyle===wn.Block){let u=this._context.model.getViewLineData(this._position.lineNumber);t=i.substr(this._position.column-1,n);let m=u.tokens.findTokenIndexAtOffset(this._position.column-1);c=u.tokens.getClassName(m)}let d=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===wn.Underline||this._cursorStyle===wn.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new OP(d,a.left,l,h,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${vl} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}};var qf=class extends Ki{constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new pD(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=tt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new li,this._cursorFlatBlinkInterval=new Kl,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){let i=t.length-this._secondaryCursors.length;for(let n=0;n<i;n++){let o=new pD(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){let i=this._secondaryCursors.length-t.length;for(let n=0;n<i;n++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let i=0;i<t.length;i++)this._secondaryCursors[i].onCursorPositionChanged(t[i])}onCursorStateChanged(e){let t=[];for(let n=0,o=e.selections.length;n<o;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));let i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let t=i=>{for(let n=0,o=e.ranges.length;n<o;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(let i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},qf.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},qf.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case wn.Line:e+=" cursor-line-style";break;case wn.Block:e+=" cursor-block-style";break;case wn.Underline:e+=" cursor-underline-style";break;case wn.LineThin:e+=" cursor-line-thin-style";break;case wn.BlockOutline:e+=" cursor-block-outline-style";break;case wn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0,n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let o=0,s=this._secondaryCursors.length;o<s;o++){let a=this._secondaryCursors[o].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};qf.BLINK_INTERVAL=500;Be((r,e)=>{let t=r.getColor(VE);if(t){let i=r.getColor(l8);i||(i=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${i}; }`),r.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${i}; border-right: 1px solid ${i}; }`)}});var TP=()=>{throw new Error("Invalid change accessor")},NP=class extends Ki{constructor(e){super(e);let t=this._context.configuration.options,i=t.get(129);this._lineHeight=t.get(58),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=tt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=tt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let n of e)t.set(n.id,n);let i=!1;return this._context.model.changeWhitespace(n=>{let o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){let l=o[s],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;let h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(n.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){let t=this._context.configuration.options,i=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn!="undefined"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn!="undefined")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let s=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new V(s,this._context.model.getModelLineMaxColumn(s))}let i;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?i=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});let n=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),o=this._context.model.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:n.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(i=>{let n={addZone:o=>(t=!0,this._addZone(i,o)),removeZone:o=>{!o||(t=this._removeZone(i,o)||t)},layoutZone:o=>{!o||(t=this._layoutZone(i,o)||t)}};Wae(e,n),n.addZone=TP,n.removeZone=TP,n.layoutZone=TP}),t}_addZone(e,t){let i=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:tt(t.domNode),marginDomNode:t.marginDomNode?tt(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){let t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){we(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){we(i)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,i={},n=!1;for(let s of t)this._zones[s.id].isInHiddenArea||(i[s.id]=s,n=!0);let o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){let l=o[s],c=this._zones[l],d=0,h=0,u="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,h=i[l].height,u="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(u),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(u))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};function Wae(r,e){try{return r(e)}catch(t){we(t)}}var b7=class{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}},RP=class{constructor(e,t,i){this.configuration=e,this.theme=new b7(t),this.model=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}};var PP=class{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new L(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}};var AP=class extends gl{constructor(e,t,i,n,o,s){super();this._selections=[new le(1,1,1,1)],this._renderAnimationFrame=null;let a=new ZR(t,n,o,e);this._context=new RP(t,i.getColorTheme(),n),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(i.onDidColorThemeChange(_=>{this._context.theme.update(_),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new zR(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=tt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=tt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=tt(document.createElement("div")),pr.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new fP(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new sb(this._context,this._linesContent),this._viewZones=new NP(this._context),this._viewParts.push(this._viewZones);let l=new xP(this._context);this._viewParts.push(l);let c=new IP(this._context);this._viewParts.push(c);let d=new QR(this._context);this._viewParts.push(d),d.addDynamicOverlay(new rP(this._context)),d.addDynamicOverlay(new Pi(this._context)),d.addDynamicOverlay(new pP(this._context)),d.addDynamicOverlay(new sP(this._context));let h=new JR(this._context);this._viewParts.push(h),h.addDynamicOverlay(new oP(this._context)),h.addDynamicOverlay(new gP(this._context)),h.addDynamicOverlay(new bP(this._context)),h.addDynamicOverlay(new _P(this._context)),h.addDynamicOverlay(new zd(this._context));let u=new Ec(this._context);u.getDomNode().appendChild(this._viewZones.marginDomNode),u.getDomNode().appendChild(h.getDomNode()),this._viewParts.push(u),this._contentWidgets=new eP(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new qf(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new SP(this._context),this._viewParts.push(this._overlayWidgets);let m=new kP(this._context);this._viewParts.push(m);let p=new yP(this._context);if(this._viewParts.push(p),l){let _=this._scrollbar.getOverviewRulerLayoutInfo();_.parent.insertBefore(l.getDomNode(),_.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new VR(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{let e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new FR(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new V(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new V(e,t)))}}_applyLayout(){let t=this._context.configuration.options.get(129);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(126)+" "+Cf(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=BO(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){Uae(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(let i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!Ip(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;let t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);let i=new PP(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());let n=new PN(this._context.viewLayout,i,this._viewLines);for(let o of e)o.prepareRender(n);for(let o of e)o.render(n),o.onDidRender();Math.abs(Sp()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){let i=this._context.model.validateModelPosition({lineNumber:e,column:t}),n=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();let o=this._viewLines.visibleRangeForPosition(new V(n.lineNumber,n.column));return o?o.left:-1}getTargetAtClientPoint(e,t){let i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?Uf.convertViewToModelMouseTarget(i,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new LP(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(let i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){let n=e.position?e.position.position:null;n!==null&&(t=new L(n.lineNumber,n.column,n.lineNumber,n.column))}let i=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,i),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){let t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}};function Uae(r){try{return r()}catch(e){we(e)}}var db=class{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new qi(new L(1,1,1,1),0,new V(1,1),0),new qi(new L(1,1,1,1),0,new V(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new nt(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new le(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new le(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){let i=t.position,n=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,s),l=this._validatePositionWithCache(e,o,n,a);return i.equals(s)&&n.equals(a)&&o.equals(l)?t:new qi(L.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+n.column-a.column,s,t.leftoverVisibleColumns+i.column-s.column)}_setState(e,t,i){if(i&&(i=db._validateViewState(e.viewModel,i)),t){let n=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new qi(n,o,s,a)}else{if(!i)return;let n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new qi(n,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){let n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new qi(n,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{let n=e.coordinatesConverter.convertModelPositionToViewPosition(new V(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new V(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new L(n.lineNumber,n.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new qi(s,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}};var _D=class{constructor(e){this.context=e,this.primaryCursor=new db(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){let n=this.secondaryCursors[t].viewState.position;n.isBefore(e)&&(e=n)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,i=this.secondaryCursors.length;t<i;t++){let n=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(n)&&(e=n)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(nt.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.secondaryCursors.length,i=e.length;if(t<i){let n=i-t;for(let o=0;o<n;o++)this._addSecondaryCursor()}else if(t>i){let n=t-i;for(let o=0;o<n;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let n=0;n<i;n++)this.secondaryCursors[n].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new db(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,i=this.secondaryCursors.length;t<i;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort((i,n)=>i.selection.startLineNumber===n.selection.startLineNumber?i.selection.startColumn-n.selection.startColumn:i.selection.startLineNumber-n.selection.startLineNumber);for(let i=0;i<t.length-1;i++){let n=t[i],o=t[i+1],s=n.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||s.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):l=a.getStartPosition().isBefore(s.getEndPosition()),l){let c=n.index<o.index?i:i+1,d=n.index<o.index?i+1:i,h=t[d].index,u=t[c].index,m=t[d].selection,p=t[c].selection;if(!m.equalsSelection(p)){let _=m.plusRange(p),v=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,C=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,w;h===this.lastAddedCursorIndex?(w=v,this.lastAddedCursorIndex=u):w=C;let S;w?S=new le(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):S=new le(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn),t[c].selection=S;let D=nt.fromModelSelection(S);e[u].setState(this.context,D.modelState,D.viewState)}for(let _ of t)_.index>h&&_.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),i--}}}};var jP=class{constructor(){this.type=0}},MP=class{constructor(){this.type=1}},FP=class{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}},BP=class{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}},Tu=class{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}},hb=class{constructor(){this.type=5}},WP=class{constructor(e){this.type=6,this.isFocused=e}},UP=class{constructor(){this.type=7}},ub=class{constructor(){this.type=8}},bD=class{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}},Hy=class{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}},$y=class{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}},Yf=class{constructor(e,t,i,n,o,s){this.type=12,this.source=e,this.range=t,this.selections=i,this.verticalType=n,this.revealHorizontal=o,this.scrollType=s}},VP=class{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}},zP=class{constructor(){this.type=14}},HP=class{constructor(e){this.type=15,this.ranges=e}},$P=class{constructor(){this.type=16}},KP=class{constructor(){this.type=17}};var qP=class extends H{constructor(){super();this._onEvent=this._register(new M),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new v7),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(let i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let t=this._eventHandlers.slice(0);for(let i of t)i.handleEvents(e)}}},v7=class{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}},Ky=class{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new Ky(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}},qy=class{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new qy(this.oldHasFocus,e.hasFocus)}},Yy=class{constructor(e,t,i,n,o,s,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=o,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new Yy(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}},vD=class{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}};var mb=class{constructor(e,t,i,n,o,s,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=o,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let i=e.length,n=t.length;if(i!==n)return!1;for(let o=0;o<i;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return mb._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new mb(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}},YP=class{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}};var wD=class{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}},ZP=class{constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}static getAllAutoClosedCharacters(e){let t=[];for(let i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){let t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){let n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(L.compareRangesUsingStarts),e.sort(L.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}},Kd=class extends H{constructor(e,t,i,n){super();this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new eD(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new _D(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Ge(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new eD(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let o=!1;n!==null&&n.length>Kd.MAX_CURSOR_COUNT&&(n=n.slice(0,Kd.MAX_CURSOR_COUNT),o=!0);let s=new wD(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,n){let o=this._cursors.getViewPositions();if(o.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,i,n);return}else{let s=o[0],a=new L(s.lineNumber,s.column,s.lineNumber,s.column);this._emitCursorRevealRange(e,t,a,null,0,i,n)}}_revealPrimaryCursor(e,t,i,n,o){let s=this._cursors.getViewPositions();if(s.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),i,n,o);else{let a=s[0],l=new L(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,i,n,o)}}_emitCursorRevealRange(e,t,i,n,o,s,a){e.emitViewEvent(new Yf(t,i,n,o,s,a))}saveState(){let e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){let o=t[i];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){let i=[];for(let n=0,o=t.length;n<o;n++){let s=t[n],a=1,l=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(l=s.position.column);let c=a,d=l;s.selectionStart&&s.selectionStart.lineNumber&&(c=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(d=s.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,nt.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof _y){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;let i=t.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new _D(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){let n=nt.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,n)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{let n=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,nt.fromModelSelections(n))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:_t.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:_t.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,nt.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});let o=this._model.deltaDecorations([],i),s=this._model.deltaDecorations([],n);this._autoClosedActions.push(new ZP(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=w7.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let i=[],n=[];for(let o=0;o<e.commands.length;o++){let s=e.commands[o];s instanceof aD&&s.enclosingRange&&s.closeCharacterRange&&(i.push(s.closeCharacterRange),n.push(s.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,o){let s=new wD(this._model,this);if(s.equals(n))return!1;let a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new BP(l,a)),!n||n.cursorState.length!==s.cursorState.length||s.cursorState.some((c,d)=>!c.modelState.equals(n.cursorState[d].modelState))){let c=n?n.cursorState.map(h=>h.modelState.selection):null,d=n?n.modelVersionId:0;e.emitOutgoingEvent(new mb(c,a,d,s.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let i=0,n=e.length;i<n;i++){let o=e[i];if(!o.text||o.text.indexOf(`
`)>=0)return null;let s=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;let a=s[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;let c=l[0].open,d=o.text.length-s[2].length-1,h=o.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,i,n){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);let s=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(o)for(let h=0,u=o.length;h<u;h++){let[m,p]=o[h],_=c[h],v=_.range.startLineNumber,C=_.range.startColumn-1+m,w=_.range.startColumn-1+p;s.push(new L(v,w+1,v,w+2)),a.push(new L(v,C+1,v,w+2))}let d=n(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;let o=new wD(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){we(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,o,!1)&&this._revealPrimaryCursor(t,i,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return ZP.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(pi.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){let n=t.length,o=0;for(;o<n;){let s=zm(t,o),a=t.substr(o,s);this._executeEditOperation(pi.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=s}}else this._executeEditOperation(pi.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,o,s){if(t.length===0&&i===0&&n===0){if(o!==0){let a=this.getSelections().map(l=>{let c=l.getPosition();return new le(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(pi.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,o))},e,s)}paste(e,t,i,n,o){this._executeEdit(()=>{this._executeEditOperation(pi.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(wl.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new _r(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new _r(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}};Kd.MAX_CURSOR_COUNT=1e4;var w7=class{static executeCommands(e,t,i){let n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(n,i);for(let s=0,a=n.trackedRanges.length;s<a;s++)n.model._setTrackedRange(n.trackedRanges[s],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let i=this._getEditOperations(e,t);if(i.operations.length===0)return null;let n=i.operations,o=this._getLoserCursorMap(n);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let c=0,d=n.length;c<d;c++)o.hasOwnProperty(n[c].identifier.major.toString())||s.push(n[c]);i.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,c=>{let d=[];for(let m=0;m<e.selectionsBefore.length;m++)d[m]=[];for(let m of c)!m.identifier||d[m.identifier.major].push(m);let h=(m,p)=>m.identifier.minor-p.identifier.minor,u=[];for(let m=0;m<e.selectionsBefore.length;m++)d[m].length>0?(d[m].sort(h),u[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>d[m],getTrackedSelection:p=>{let _=parseInt(p,10),v=e.model._getTrackedRange(e.trackedRanges[_]);return e.trackedRangesDirection[_]===0?new le(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new le(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):u[m]=e.selectionsBefore[m];return u});a||(a=e.selectionsBefore);let l=[];for(let c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(let c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let o=0,s=t.length;o<s;o++){let a=t[o];if(a){let l=this._getEditOperationsFromCommand(e,o,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){let n=[],o=0,s=(h,u,m=!1)=>{L.isEmpty(h)&&u===""||n.push({identifier:{major:t,minor:o++},range:h,text:u,forceMoveMarkers:m,isAutoWhitespaceEdit:i.insertsAutoWhitespace})},a=!1,d={addEditOperation:s,addTrackedEditOperation:(h,u,m)=>{a=!0,s(h,u,m)},trackSelection:(h,u)=>{let m=le.liftSelection(h),p;if(m.isEmpty())if(typeof u=="boolean")u?p=2:p=3;else{let C=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===C?p=2:p=3}else p=1;let _=e.trackedRanges.length,v=e.model._setTrackedRange(null,m,p);return e.trackedRanges[_]=v,e.trackedRangesDirection[_]=m.getDirection(),_.toString()}};try{i.getEditOperations(e.model,d)}catch(h){return we(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-L.compareRangesUsingEnds(i.range,n.range));let t={};for(let i=1;i<e.length;i++){let n=e[i-1],o=e[i];if(L.getStartPosition(n.range).isBefore(L.getEndPosition(o.range))){let s;n.identifier.major>o.identifier.major?s=n.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}};var Zy=class{constructor(e,t,i,n,o,s){this.id=e,this.label=t,this.alias=i,this._precondition=n,this._run=o,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}};var y7={getInitialState:()=>of,tokenize2:(r,e,t,i)=>vx(0,r,t,i)};function GP(r,e,t=y7){return Vae(r,e,t||y7)}function C7(r,e,t,i,n,o,s){let a="<div>",l=i,c=0,d=!0;for(let h=0,u=e.getCount();h<u;h++){let m=e.getEndOffset(h);if(m<=i)continue;let p="";for(;l<m&&l<n;l++){let _=r.charCodeAt(l);switch(_){case 9:let v=o-(l+c)%o;for(c+=v-1;v>0;)s&&d?(p+="&#160;",d=!1):(p+=" ",d=!0),v--;break;case 60:p+="&lt;",d=!1;break;case 62:p+="&gt;",d=!1;break;case 38:p+="&amp;",d=!1;break;case 0:p+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:p+="\uFFFD",d=!1;break;case 13:p+="&#8203",d=!1;break;case 32:s&&d?(p+="&#160;",d=!1):(p+=" ",d=!0);break;default:p+=String.fromCharCode(_),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${p}</span>`,m>n||l>=n)break}return a+="</div>",a}function Vae(r,e,t){let i='<div class="monaco-tokenized-source">',n=sr(r),o=t.getInitialState();for(let s=0,a=n.length;s<a;s++){let l=n[s];s>0&&(i+="<br/>");let c=t.tokenize2(l,!0,o,0);Vi.convertToEndOffset(c.tokens,l.length);let h=new Vi(c.tokens,l,e).inflate(),u=0;for(let m=0,p=h.getCount();m<p;m++){let _=h.getClassName(m),v=h.getEndOffset(m);i+=`<span class="${_}">${Np(l.substring(u,v))}</span>`,u=v}o=c.endState}return i+="</div>",i}var S7=class{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}},x7=class{constructor(e,t,i,n,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=o,this.prefixSum=0}},Zf=class{constructor(e,t,i,n){this._instanceId=lx(++Zf.INSTANCE_COUNT),this._pendingChanges=new S7,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,o=e.length;for(;n<o;){let s=n+o>>>1;t===e[s].afterLineNumber?i<e[s].ordinal?o=s:n=s+1:t<e[s].afterLineNumber?o=s:n=s+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,o,s,a)=>{t=!0,n=n|0,o=o|0,s=s|0,a=a|0;let l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new x7(l,n,o,s,a)),l},changeOneWhitespace:(n,o,s)=>{t=!0,o=o|0,s=s|0,this._pendingChanges.change({id:n,newAfterLineNumber:o,newHeight:s})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(let l of e)this._insertWhitespace(l);for(let l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(let l of i){let c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}let n=new Set;for(let l of i)n.add(l.id);let o=new Map;for(let l of t)o.set(l.id,l);let s=l=>{let c=[];for(let d of l)if(!n.has(d.id)){if(o.has(d.id)){let h=o.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},a=s(this._arr).concat(s(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){let t=Zf.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){let t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){let n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){let o=this._arr[n];this._removeWhitespace(n),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){let o=this._arr[i].afterLineNumber;e<=o&&o<=t?this._arr[i].afterLineNumber=e-1:o>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){let o=this._arr[i].afterLineNumber;e<=o&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();let e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;let t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;let t=this._arr,i=0,n=t.length-1;for(;i<=n;){let s=(n-i|0)/2|0,a=i+s|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;let i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;let i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;let t=this._lineCount|0,i=this._lineHeight,n=1,o=t;for(;n<o;){let s=(n+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+i)n=s+1;else{if(e>=a)return s;o=s}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let i=this._lineHeight,n=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(n)|0,s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(n)|0,l=this.getWhitespacesCount()|0,c,d;a===-1?(a=l,d=s+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=o,u=h,m=5e5,p=0;o>=m&&(p=Math.floor(o/m)*m,p=Math.floor(p/i)*i,u-=p);let _=[],v=e+(t-e)/2,C=-1;for(let I=n;I<=s;I++){if(C===-1){let A=h,O=h+i;(A<=v&&v<O||A>v)&&(C=I)}for(h+=i,_[I-n]=u,u+=i;d===I;)u+=c,h+=c,a++,a>=l?d=s+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){s=I;break}}C===-1&&(C=s);let w=this.getVerticalOffsetForLineNumber(s)|0,S=n,D=s;return S<D&&o<e&&S++,S<D&&w+i>t&&D--,{bigNumbersDelta:p,startLineNumber:n,endLineNumber:s,relativeVerticalOffset:_,centeredLineNumber:C,completelyVisibleStartLineNumber:S,completelyVisibleEndLineNumber:D}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;let t=this.getAfterLineNumberForWhitespaceIndex(e),i;t>=1?i=this._lineHeight*t:i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;let n=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=n+o)return-1;for(;t<i;){let s=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(e>=a+l)t=s+1;else{if(e>=a)return s;i=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;let t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;let i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;let n=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];let o=[];for(let s=i;s<=n;s++){let a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};Zf.INSTANCE_COUNT=0;var zae=125,fb=class{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}},E7=class extends H{constructor(e,t){super();this._onDidContentSizeChange=this._register(new M),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new fb(0,0,0,0),this._scrollable=this._register(new $d(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new Ky(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}},XP=class extends H{constructor(e,t,i){super();this._configuration=e;let n=this._configuration.options,o=n.get(129),s=n.get(74);this._linesLayout=new Zf(t,n.get(58),s.top,s.bottom),this._scrollable=this._register(new E7(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new fb(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?zae:0)}onConfigurationChanged(e){let t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){let i=t.get(74);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(129)){let i=t.get(129),n=i.contentWidth,o=i.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new fb(n,s.contentWidth,o,this._getContentHeight(n,o,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){let n=this._configuration.options.get(91);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){let n=this._configuration.options,o=this._linesLayout.getLinesTotalHeight();return n.get(93)?o+=Math.max(0,t-n.get(58)-n.get(74).bottom):o+=this._getHorizontalScrollbarHeight(e,i),o}_updateHeight(){let e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new fb(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Fx(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Fx(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){let t=this._configuration.options,i=t.get(130),n=t.get(43);if(i.isViewportWrapping){let o=t.get(129),s=t.get(64);return e>o.contentWidth+n.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?e+o.verticalScrollbarWidth:e}else{let o=t.get(92)*n.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o,s)}}setMaxLineWidth(e){let t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new fb(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){let t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){let i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}};var D7=class{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}},L7=class{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){let i=this._counts[e],n=e>0?this._modelToView[e-1]:0;this._modelToView[e]=n+i;for(let o=0;o<i;o++)this._viewToModel[n+o]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=au(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();let t=this._viewToModel[e],i=t>0?this._modelToView[t-1]:0;return new Lx(t,e-i)}},QP=class{constructor(e,t,i,n,o,s,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new D7(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);let i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),o=i.length,s=this.createLineBreaksComputer(),a=new wd(wo.fromDecorations(n));for(let _=0;_<o;_++){let v=a.takeWhile(C=>C.lineNumber===_+1);s.addRequest(i[_],v,t?t[_]:null)}let l=s.finalize(),c=[],d=this.hiddenAreasIds.map(_=>this.model.getDecorationRange(_)).sort(L.compareRangesUsingStarts),h=1,u=0,m=-1,p=m+1<d.length?u+1:o+2;for(let _=0;_<o;_++){let v=_+1;v===p&&(m++,h=d[m].startLineNumber,u=d[m].endLineNumber,p=m+1<d.length?u+1:o+2);let C=v>=h&&v<=u,w=iA(l[_],!C);c[_]=w.getViewLineCount(),this.lines[_]=w}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new L7(c)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(s=>this.model.validateRange(s)).sort(L.compareRangesUsingStarts),i=[],n=t[0].startLineNumber,o=t[0].endLineNumber;for(let s=1,a=t.length;s<a;s++){let l=t[s];l.startLineNumber>o+1?(i.push(new L(n,1,o,1)),n=l.startLineNumber,o=l.endLineNumber):l.endLineNumber>o&&(o=l.endLineNumber)}return i.push(new L(n,1,o,1)),i}setHiddenAreas(e){let t=this._reduceRanges(e),i=this.hiddenAreasIds.map(h=>this.model.getDecorationRange(h)).sort(L.compareRangesUsingStarts);if(t.length===i.length){let h=!1;for(let u=0;u<t.length;u++)if(!t[u].equalsRange(i[u])){h=!0;break}if(!h)return!1}let n=[];for(let h of t)n.push({range:h,options:ze.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,n);let o=t,s=1,a=0,l=-1,c=l+1<o.length?a+1:this.lines.length+2,d=!1;for(let h=0;h<this.lines.length;h++){let u=h+1;u===c&&(l++,s=o[l].startLineNumber,a=o[l].endLineNumber,c=l+1<o.length?a+1:this.lines.length+2);let m=!1;if(u>=s&&u<=a?this.lines[h].isVisible()&&(this.lines[h]=this.lines[h].setVisible(!1),m=!0):(d=!0,this.lines[h].isVisible()||(this.lines[h]=this.lines[h].setVisible(!0),m=!0)),m){let p=this.lines[h].getViewLineCount();this.prefixSumComputer.changeValue(h,p)}}return d||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n){let o=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===i,l=this.wrappingIndent===n;if(o&&s&&a&&l)return!1;let c=o&&s&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n;let d=null;if(c){d=[];for(let h=0,u=this.lines.length;h<u;h++)d[h]=this.lines[h].getLineBreakData()}return this._constructLines(!1,d),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;let n=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,o=this.prefixSumComputer.getAccumulatedValue(i-1);return this.lines.splice(t-1,i-t+1),this.prefixSumComputer.removeValues(t-1,i-t+1),new Hy(n,o)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;let o=t>2&&!this.lines[t-2].isVisible(),s=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],c=[];for(let d=0,h=n.length;d<h;d++){let u=iA(n[d],!o);l.push(u);let m=u.getViewLineCount();a+=m,c[d]=m}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,c),new $y(s,s+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let n=t-1,o=this.lines[n].getViewLineCount(),s=this.lines[n].isVisible(),a=iA(i,s);this.lines[n]=a;let l=this.lines[n].getViewLineCount(),c=!1,d=0,h=-1,u=0,m=-1,p=0,_=-1;o>l?(d=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+l-1,p=h+1,_=p+(o-l)-1,c=!0):o<l?(d=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+o-1,u=h+1,m=u+(l-o)-1,c=!0):(d=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,h=d+l-1),this.prefixSumComputer.changeValue(n,l);let v=d<=h?new bD(d,h):null,C=u<=m?new $y(u,m):null,w=p<=_?new Hy(p,_):null;return[c,v,C,w]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;let t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);let n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.getActiveIndentGuide(n.lineNumber,o.lineNumber,s.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return new JP(i+1,n)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let t=this.lines[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new V(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){let t=this.lines[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new V(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){let i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),o=new Array,s=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){let c=this.lines[l-1];if(c.isVisible()){let d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,h=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let u=d;u<h;u++)a.push(new JP(l,u))}if(!c.isVisible()&&s){let d=new V(l-1,this.model.getLineMaxColumn(l-1)+1),h=L.fromPositions(s,d);o.push(new eA(h,a)),a=[],s=null}else c.isVisible()&&!s&&(s=new V(l,1))}if(s){let l=L.fromPositions(s,this.getModelEndPositionOfViewLine(n));o.push(new eA(l,a))}return o}getViewLinesBracketGuides(e,t,i,n){let o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,s=[];for(let a of this.getViewLineInfosGroupedByModelRanges(e,t)){let l=a.modelRange.startLineNumber,c=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,n);for(let d of a.viewLines)if(d.isWrappedLineContinuation&&this.getMinColumnOfViewLine(d)===1)s.push([]);else{let h=c[d.modelLineNumber-l];h=h.map(u=>u.horizontalLine?new Jl(u.visibleColumn,u.className,new zp(u.horizontalLine.top,this.convertModelPositionToViewPosition(d.modelLineNumber,u.horizontalLine.endColumn).column)):u),s.push(h)}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),o=[],s=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1,d=null;for(let p=l;p<=c;p++){let _=this.lines[p];if(_.isVisible()){let v=_.getViewLineNumberOfModelPosition(0,p===l?i.column:1),C=_.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),w=C-v+1,S=0;w>1&&_.getViewLineMinColumn(this.model,p+1,C)===1&&(S=v===0?1:2),s.push(w),a.push(S),d===null&&(d=new V(p+1,0))}else d!==null&&(o=o.concat(this.model.getLinesIndentGuides(d.lineNumber,p)),d=null)}d!==null&&(o=o.concat(this.model.getLinesIndentGuides(d.lineNumber,n.lineNumber)),d=null);let h=t-e+1,u=new Array(h),m=0;for(let p=0,_=o.length;p<_;p++){let v=o[p],C=Math.min(h-m,s[p]),w=a[p],S;w===2?S=0:w===1?S=1:S=C;for(let D=0;D<C;D++)D===S&&(v=0),u[m++]=v}return u}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineContent(this.model,i+1,n)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineLength(this.model,i+1,n)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineMinColumn(this.model,i+1,n)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineMaxColumn(this.model,i+1,n)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),i=t.index,n=t.remainder;return this.lines[i].getViewLineData(this.model,i+1,n)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.prefixSumComputer.getIndexOf(e-1),o=e,s=n.index,a=n.remainder,l=[];for(let c=s,d=this.model.getLineCount();c<d;c++){let h=this.lines[c];if(!h.isVisible())continue;let u=c===s?a:0,m=h.getViewLineCount()-u,p=!1;o+m>t&&(p=!0,m=t-o+1);let _=u+m;if(h.getViewLinesData(this.model,c+1,u,_,o-e,i,l),o+=m,p)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),o=n.index,s=n.remainder,a=this.lines[o],l=a.getViewLineMinColumn(this.model,o+1,s),c=a.getViewLineMaxColumn(this.model,o+1,s);t<l&&(t=l),t>c&&(t=c);let d=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new V(o+1,d)).equals(i)?new V(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){let i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new L(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let i=this.prefixSumComputer.getIndexOf(e-1),n=i.index,o=i.remainder,s=this.lines[n].getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new V(n+1,s))}convertViewRangeToModelRange(e){let t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new L(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2){let n=this.model.validatePosition(new V(e,t)),o=n.lineNumber,s=n.column,a=o-1,l=!1;for(;a>0&&!this.lines[a].isVisible();)a--,l=!0;if(a===0&&!this.lines[a].isVisible())return new V(1,1);let c=1+(a===0?0:this.prefixSumComputer.getAccumulatedValue(a-1)),d;return l?d=this.lines[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),i):d=this.lines[o-1].getViewPositionOfModelPosition(c,s,i),d}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){let i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return L.fromPositions(i)}else{let i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new L(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.lines[i].isVisible()){let o=1+(i===0?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(o,t)}for(;i>0&&!this.lines[i].isVisible();)i--;if(i===0&&!this.lines[i].isVisible())return 1;let n=1+(i===0?0:this.prefixSumComputer.getAccumulatedValue(i-1));return this.lines[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i){let n=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-n.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new L(n.lineNumber,1,o.lineNumber,o.column),t,i);let s=[],a=n.lineNumber-1,l=o.lineNumber-1,c=null;for(let m=a;m<=l;m++)if(this.lines[m].isVisible())c===null&&(c=new V(m+1,m===a?n.column:1));else if(c!==null){let _=this.model.getLineMaxColumn(m);s=s.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,m,_),t,i)),c=null}c!==null&&(s=s.concat(this.model.getDecorationsInRange(new L(c.lineNumber,c.column,o.lineNumber,o.column),t,i)),c=null),s.sort((m,p)=>{let _=L.compareRangesUsingStarts(m.range,p.range);return _===0?m.id<p.id?-1:m.id>p.id?1:0:_});let d=[],h=0,u=null;for(let m of s){let p=m.id;u!==p&&(u=p,d[h++]=m)}return d}getInjectedTextAt(e){let t=this._toValidViewLineNumber(e.lineNumber),i=this.prefixSumComputer.getIndexOf(t-1),n=i.index,o=i.remainder;return this.lines[n].getInjectedTextAt(o,e.column)}normalizePosition(e,t){let i=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(i-1),o=n.index,s=n.remainder;return this.lines[o].normalizePosition(this.model,o+1,s,e,t)}getLineIndentColumn(e){let t=this._toValidViewLineNumber(e),i=this.prefixSumComputer.getIndexOf(t-1),n=i.index;return i.remainder===0?this.model.getLineIndentColumn(n+1):0}},JP=class{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}},eA=class{constructor(e,t){this.modelRange=e,this.viewLines=t}},Gy=class{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Xy.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){let n=e.getLineTokens(t),o=n.getLineContent();return new Pw(o,!1,1,o.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new V(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i,n,o){return n}getInjectedTextAt(e,t){return null}};Gy.INSTANCE=new Gy;var Xy=class{constructor(){}isVisible(){return!1}setVisible(e){return e?Gy.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,o,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i,n,o){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};Xy.INSTANCE=new Xy;var k7=class{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,i){return i+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(i+1,0)}getViewLineContent(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=i>0?this._lineBreakData.breakOffsets[i-1]:0,o=i<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[i]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1],s;if(this._lineBreakData.injectionOffsets!==null){let a=this._lineBreakData.injectionOffsets.map((l,c)=>new wo(0,0,l+1,this._lineBreakData.injectionOptions[c],0));s=wo.applyInjectedText(e.getLineContent(t),a).substring(n,o)}else s=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:o+1});return i>0&&(s=I7(this._lineBreakData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=i>0?this._lineBreakData.breakOffsets[i-1]:0,s=(i<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[i]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-n;return i>0&&(s=this._lineBreakData.wrappedTextIndentLength+s),s}getViewLineMinColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(i)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,i){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,i)+1}getViewLineData(e,t,i){if(!this._isVisible)throw new Error("Not supported");let n=this._lineBreakData,o=i>0?n.wrappedTextIndentLength:0,s=n.injectionOffsets,a=n.injectionOptions,l,c,d;if(s){let _=e.getLineTokens(t).withInserted(s.map((S,D)=>({offset:S,text:a[D].content,tokenMetadata:Vi.defaultTokenMetadata}))),v=i>0?n.breakOffsets[i-1]:0,C=n.breakOffsets[i];l=_.getLineContent().substring(v,C),c=_.sliceAndInflate(v,C,o),d=new Array;let w=0;for(let S=0;S<s.length;S++){let D=a[S].content.length,I=s[S]+w,A=s[S]+w+D;if(I>C)break;if(v<A){let O=a[S];if(O.inlineClassName){let N=i>0?n.wrappedTextIndentLength:0,F=N+Math.max(I-v,0),Y=N+Math.min(A-v,C);F!==Y&&d.push(new JT(F,Y,O.inlineClassName,O.inlineClassNameAffectsLetterSpacing))}}w+=D}}else{let _=this.getInputStartOffsetOfOutputLineIndex(i),v=this.getInputEndOffsetOfOutputLineIndex(e,t,i),C=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:_+1,endLineNumber:t,endColumn:v+1}),c=C.sliceAndInflate(_,v,o),d=null}i>0&&(l=I7(n.wrappedTextIndentLength)+l);let h=i>0?n.wrappedTextIndentLength+1:1,u=l.length+1,m=i+1<this.getViewLineCount(),p=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new Pw(l,m,h,u,p,c,d)}getViewLinesData(e,t,i,n,o,s,a){if(!this._isVisible)throw new Error("Not supported");for(let l=i;l<n;l++){let c=o+l-i;if(!s[c]){a[c]=null;continue}a[c]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let i=t-1;return e>0&&(i<this._lineBreakData.wrappedTextIndentLength?i=0:i-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,i)+1}getViewPositionOfModelPosition(e,t,i=2){if(!this._isVisible)throw new Error("Not supported");let n=this._lineBreakData.getOutputPositionOfInputOffset(t-1,i),o=n.outputLineIndex,s=n.outputOffset+1;return o>0&&(s+=this._lineBreakData.wrappedTextIndentLength),new V(e+o,s)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let i=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i,n,o){if(this._lineBreakData.injectionOffsets!==null){let s=n.lineNumber-i,a=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(i,n.column-1),l=this._lineBreakData.normalizeOffsetAroundInjections(a,o);if(l!==a)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(l,o).toPosition(s,this._lineBreakData.wrappedTextIndentLength)}if(o===0){if(i>0&&n.column===this._getViewLineMinColumn(i))return new V(n.lineNumber-1,this.getViewLineMaxColumn(e,t,i-1))}else if(o===1){let s=this.getViewLineCount()-1;if(i<s&&n.column===this.getViewLineMaxColumn(e,t,i))return new V(n.lineNumber+1,this._getViewLineMinColumn(i+1))}return n}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}},tA=[""];function I7(r){if(r>=tA.length)for(let e=1;e<=r;e++)tA[e]=Hae(e);return tA[r]}function Hae(r){return new Array(r+1).join(" ")}function iA(r,e){return r===null?e?Gy.INSTANCE:Xy.INSTANCE:new k7(r,e)}var O7=class{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}},nA=class{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new O7(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new Hy(t,i)}onModelLinesInserted(e,t,i,n){return new $y(t,i)}onModelLineChanged(e,t,i){return[!1,new bD(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){let i=t-e+1,n=new Array(i);for(let o=0;o<i;o++)n[o]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),i=t.getLineContent();return new Pw(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){let n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);let o=[];for(let s=e;s<=t;s++){let a=s-e;i[a]||(o[a]=null),o[a]=this.getViewLineData(s)}return o}getDecorationsInRange(e,t,i){return this.model.getDecorationsInRange(e,t,i)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}};var rA=class{constructor(e,t,i,n,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){let t=e.id,i=this._decorationsCache[t];if(!i){let n=e.range,o=e.options,s;if(o.isWholeLine){let a=this._coordinatesConverter.convertModelPositionToViewPosition(new V(n.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new V(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);s=new L(a.lineNumber,a.column,l.lineNumber,l.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new Aw(s,o),this._decorationsCache[t]=i}return i}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){let t=this._linesCollection.getDecorationsInRange(e,this.editorId,_p(this.configuration.options)),i=e.startLineNumber,n=e.endLineNumber,o=[],s=0,a=[];for(let l=i;l<=n;l++)a[l-i]=[];for(let l=0,c=t.length;l<c;l++){let d=t[l],h=d.options,u=this._getOrCreateViewModelDecoration(d),m=u.range;if(o[s++]=u,h.inlineClassName){let p=new cu(m,h.inlineClassName,h.inlineClassNameAffectsLetterSpacing?3:0),_=Math.max(i,m.startLineNumber),v=Math.min(n,m.endLineNumber);for(let C=_;C<=v;C++)a[C-i].push(p)}if(h.beforeContentClassName&&i<=m.startLineNumber&&m.startLineNumber<=n){let p=new cu(new L(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),h.beforeContentClassName,1);a[m.startLineNumber-i].push(p)}if(h.afterContentClassName&&i<=m.endLineNumber&&m.endLineNumber<=n){let p=new cu(new L(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),h.afterContentClassName,2);a[m.endLineNumber-i].push(p)}}return{decorations:o,inlineDecorations:a}}};var $ae={ModesRegistry:"editor.modesRegistry"},T7=class{constructor(){this._onDidChangeLanguages=new M,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}},qd=new T7;ii.add($ae.ModesRegistry,qd);var Lc="plaintext",Kae=".txt";qd.registerLanguage({id:Lc,extensions:[Kae],aliases:[g("plainText.alias","Plain Text"),"text"],mimetypes:[yo.text]});st.register(Lc,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);var qae=!0,oA=class extends H{constructor(e,t,i,n,o,s){super();if(this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new qP,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new gs(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new dt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new dt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,qae&&this.model.isTooLargeForTokenization())this._lines=new nA(this.model);else{let a=this._configuration.options,l=a.get(43),c=a.get(123),d=a.get(130),h=a.get(122);this._lines=new QP(this._editorId,this.model,n,o,l,this.model.getOptions().tabSize,c,d.wrappingColumn,h)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Kd(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new XP(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new VP(a)),this._eventDispatcher.emitOutgoingEvent(new Yy(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new rA(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{let l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Ou.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new $P)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){let e=this.viewLayout.getLinesViewportData(),t=new L(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),i=this._toModelVisibleRanges(t);for(let n of i)this.model.tokenizeViewport(n.startLineNumber,n.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new WP(e)),this._eventDispatcher.emitOutgoingEvent(new qy(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new jP)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new MP)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new zP)}_onConfigurationChanged(e,t){let i=null;if(this._viewportStartLine!==-1){let d=new V(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));i=this.coordinatesConverter.convertViewPositionToModelPosition(d)}let n=!1,o=this._configuration.options,s=o.get(43),a=o.get(123),l=o.get(130),c=o.get(122);if(this._lines.setWrappingSettings(s,a,l.wrappingColumn,c)&&(e.emitViewEvent(new hb),e.emitViewEvent(new ub),e.emitViewEvent(new Tu(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(n=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new Tu(null))),e.emitViewEvent(new FP(t)),this.viewLayout.onConfigurationChanged(t),n&&i){let d=this.coordinatesConverter.convertModelPositionToViewPosition(i),h=this.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber);this.viewLayout.setScrollPosition({scrollTop:h+this._viewportStartLineDelta},1)}gs.shouldRecreate(t)&&(this.cursorConfig=new gs(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{let t=this._eventDispatcher.beginEmitViewEvents(),i=!1,n=!1,o=e.changes,s=e instanceof mc?e.versionId:null,a=this._lines.createLineBreaksComputer();for(let d of o)switch(d.changeType){case 4:{for(let h=0;h<d.detail.length;h++){let u=d.detail[h],m=d.injectedTexts[h];m&&(m=m.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(u,m,null)}break}case 2:{let h=null;d.injectedText&&(h=d.injectedText.filter(u=>!u.ownerId||u.ownerId===this._editorId)),a.addRequest(d.detail,h,null);break}}let l=a.finalize(),c=0;for(let d of o)switch(d.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new hb),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{let h=this._lines.onModelLinesDeleted(s,d.fromLineNumber,d.toLineNumber);h!==null&&(t.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),i=!0;break}case 4:{let h=l.slice(c,c+d.detail.length);c+=d.detail.length;let u=this._lines.onModelLinesInserted(s,d.fromLineNumber,d.toLineNumber,h);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesInserted(u.fromLineNumber,u.toLineNumber)),i=!0;break}case 2:{let h=l[c];c++;let[u,m,p,_]=this._lines.onModelLineChanged(s,d.lineNumber,h);n=u,m&&t.emitViewEvent(m),p&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),_&&(t.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}s!==null&&this._lines.acceptVersionId(s),this.viewLayout.onHeightMaybeChanged(),!i&&n&&(t.emitViewEvent(new ub),t.emitViewEvent(new Tu(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){let t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){let i=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:n+this._viewportStartLineDelta},1)}}try{let t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let i=0,n=e.ranges.length;i<n;i++){let o=e.ranges[i],s=this.coordinatesConverter.convertModelPositionToViewPosition(new V(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new V(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[i]={fromLineNumber:s,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new HP(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new UP),this.cursorConfig=new gs(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new gs(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new hb),t.emitViewEvent(new ub),t.emitViewEvent(new Tu(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new gs(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Tu(e))}))}setHiddenAreas(e){let t=!1;try{let i=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(i.emitViewEvent(new hb),i.emitViewEvent(new ub),i.emitViewEvent(new Tu(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new vD)}getVisibleRangesPlusViewportAboveBelow(){let e=this._configuration.options.get(129),t=this._configuration.options.get(58),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),o=Math.max(1,n.completelyVisibleStartLineNumber-i),s=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new L(o,this.getLineMinColumn(o),s,this.getLineMaxColumn(s)))}getVisibleRanges(){let e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){let t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];let n=[],o=0,s=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;for(let d=0,h=i.length;d<h;d++){let u=i[d].startLineNumber,m=i[d].endLineNumber;m<s||u>l||(s<u&&(n[o++]=new L(s,a,u-1,this.model.getLineMaxColumn(u-1))),s=m+1,a=1)}return(s<l||s===l&&a<c)&&(n[o++]=new L(s,a,l,c)),n}getCompletelyVisibleViewRange(){let e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new L(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){let t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new L(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){let e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new V(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition=="undefined")return this._reduceRestoreStateCompatibility(e);let t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStartLine=e;let n=this.coordinatesConverter.convertViewPositionToModelPosition(new V(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new L(n.lineNumber,n.column,n.lineNumber,n.column),1);let o=this.viewLayout.getVerticalOffsetForLineNumber(e),s=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=s-o}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){let t=Wi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Lr(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),s=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return s.inlineDecorations&&(l=[...l,...s.inlineDecorations.map(c=>c.toInlineDecoration(t))]),new mr(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,i,n,s.tokens,l,o,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){let n=this._lines.getViewLinesData(e,t,i);return new QT(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){let t=this.model.getOverviewRulerDecorations(this._editorId,_p(this._configuration.options)),i=new N7;for(let n of t){let o=n.options,s=o.overviewRuler;if(!s)continue;let a=s.position;if(a===0)continue;let l=s.getColor(e),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,o.zIndex,c,d,a)}return i.asArray}invalidateOverviewRulerColorCache(){let e=this.model.getOverviewRulerDecorations();for(let t of e){let i=t.options.overviewRuler;i&&i.invalidateCachedColor()}}invalidateMinimapColorCache(){let e=this.model.getAllDecorations();for(let t of e){let i=t.options.minimap;i&&i.invalidateCachedColor()}}getValueInRange(e,t){let i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,i){let n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);let s=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(s)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,i){let n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(L.compareRangesUsingStarts);let o=!1,s=!1;for(let l of e)l.isEmpty()?o=!0:s=!0;if(!s){if(!t)return"";let l=e.map(d=>d.startLineNumber),c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+n);return c}if(o&&t){let l=[],c=0;for(let d of e){let h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,i?2:0)),c=h}return l.length===1?l[0]:l}let a=[];for(let l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){let i=this.model.getLanguageId();if(i===Lc||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;let d=n.startLineNumber;n=new L(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}let o=this._configuration.options.get(43),s=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===Qi.fontFamily,c;return l?c=Qi.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Qi.fontFamily}`),{mode:i,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,s)+"</div>"}}_getHTMLToCopy(e,t){let i=e.startLineNumber,n=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=this.getTabSize(),l="";for(let c=i;c<=o;c++){let d=this.model.getLineTokens(c),h=d.getLineContent(),u=c===i?n-1:0,m=c===o?s-1:h.length;h===""?l+="<br>":l+=C7(h,d.inflate(),t,u,m,a,bi)}return l}_getColorMap(){let e=ti.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=q.Format.CSS.formatHex(e[i]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new YP);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,o){this._executeCursorEdit(s=>this._cursor.compositionType(s,e,t,i,n,o))}paste(e,t,i,n){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,t,0))}revealTopMostCursor(e){let t=this._cursor.getTopMostViewPosition(),i=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new Yf(e,i,null,0,!0,0)))}revealBottomMostCursor(e){let t=this._cursor.getBottomMostViewPosition(),i=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new Yf(e,i,null,0,!0,0)))}revealRange(e,t,i,n,o){this._withViewEventsCollector(s=>s.emitViewEvent(new Yf(e,i,null,n,t,o)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new KP),this._eventDispatcher.emitOutgoingEvent(new vD))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{let t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}},N7=class{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,o){let s=this._asMap[e];if(s){let a=s.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(o,i,n)}else{let a=new jw(e,t,[o,i,n]);this._asMap[e]=a,this.asArray.push(a)}}};var kc=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var pn=Ie("accessibilityService"),Gf=new _e("accessibilityModeEnabled",!1);var R7=class extends nc{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}},sA=[],aA=[],Qy=class{constructor(e,t){this.classifier=new R7(e,t)}static create(e){return new Qy(e.get(118),e.get(117))}createLineBreaksComputer(e,t,i,n){t=t|0,i=+i;let o=[],s=[],a=[];return{addRequest:(l,c,d)=>{o.push(l),s.push(c),a.push(d)},finalize:()=>{let l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let d=0,h=o.length;d<h;d++){let u=s[d],m=a[d];m&&!m.injectionOptions&&!u?c[d]=Yae(this.classifier,m,o[d],t,i,l,n):c[d]=Zae(this.classifier,o[d],u,t,i,l,n)}return sA.length=0,aA.length=0,c}}}};function Yae(r,e,t,i,n,o,s){if(n===-1)return null;let a=t.length;if(a<=1)return null;let l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,d=A7(t,i,n,o,s),h=n-d,u=sA,m=aA,p=0,_=0,v=0,C=n,w=l.length,S=0;if(S>=0){let D=Math.abs(c[S]-C);for(;S+1<w;){let I=Math.abs(c[S+1]-C);if(I>=D)break;D=I,S++}}for(;S<w;){let D=S<0?0:l[S],I=S<0?0:c[S];_>D&&(D=_,I=v);let A=0,O=0,N=0,F=0;if(I<=C){let K=I,ee=D===0?0:t.charCodeAt(D-1),ie=D===0?0:r.get(ee),Ee=!0;for(let Le=D;Le<a;Le++){let Te=Le,Ne=t.charCodeAt(Le),Fe,ue;if(ki(Ne)?(Le++,Fe=0,ue=2):(Fe=r.get(Ne),ue=Jy(Ne,K,i,o)),Te>_&&lA(ee,ie,Ne,Fe)&&(A=Te,O=K),K+=ue,K>C){Te>_?(N=Te,F=K-ue):(N=Le+1,F=K),K-O>h&&(A=0),Ee=!1;break}ee=Ne,ie=Fe}if(Ee){p>0&&(u[p]=l[l.length-1],m[p]=c[l.length-1],p++);break}}if(A===0){let K=I,ee=t.charCodeAt(D),ie=r.get(ee),Ee=!1;for(let Le=D-1;Le>=_;Le--){let Te=Le+1,Ne=t.charCodeAt(Le);if(Ne===9){Ee=!0;break}let Fe,ue;if(cd(Ne)?(Le--,Fe=0,ue=2):(Fe=r.get(Ne),ue=uo(Ne)?o:1),K<=C){if(N===0&&(N=Te,F=K),K<=C-h)break;if(lA(Ne,Fe,ee,ie)){A=Te,O=K;break}}K-=ue,ee=Ne,ie=Fe}if(A!==0){let Le=h-(F-O);if(Le<=i){let Te=t.charCodeAt(N),Ne;ki(Te)?Ne=2:Ne=Jy(Te,F,i,o),Le-Ne<0&&(A=0)}}if(Ee){S--;continue}}if(A===0&&(A=N,O=F),A<=_){let K=t.charCodeAt(_);ki(K)?(A=_+2,O=v+2):(A=_+1,O=v+Jy(K,v,i,o))}for(_=A,u[p]=A,v=O,m[p]=O,p++,C=O+h;S<0||S<w&&c[S]<O;)S++;let Y=Math.abs(c[S]-C);for(;S+1<w;){let K=Math.abs(c[S+1]-C);if(K>=Y)break;Y=K,S++}}return p===0?null:(u.length=p,m.length=p,sA=e.breakOffsets,aA=e.breakOffsetsVisibleColumn,e.breakOffsets=u,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=d,e)}function Zae(r,e,t,i,n,o,s){let a=wo.applyInjectedText(e,t),l,c;if(t&&t.length>0?(l=t.map(O=>O.options),c=t.map(O=>O.column-1)):(l=null,c=null),n===-1)return l?new lu([a.length],[],0,c,l):null;let d=a.length;if(d<=1)return l?new lu([a.length],[],0,c,l):null;let h=A7(a,i,n,o,s),u=n-h,m=[],p=[],_=0,v=0,C=0,w=n,S=a.charCodeAt(0),D=r.get(S),I=Jy(S,0,i,o),A=1;ki(S)&&(I+=1,S=a.charCodeAt(1),D=r.get(S),A++);for(let O=A;O<d;O++){let N=O,F=a.charCodeAt(O),Y,K;ki(F)?(O++,Y=0,K=2):(Y=r.get(F),K=Jy(F,I,i,o)),lA(S,D,F,Y)&&(v=N,C=I),I+=K,I>w&&((v===0||I-C>u)&&(v=N,C=I-K),m[_]=v,p[_]=C,_++,w=C+u,v=0),S=F,D=Y}return _===0&&(!t||t.length===0)?null:(m[_]=d,p[_]=I,new lu(m,p,h,c,l))}function Jy(r,e,t,i){return r===9?t-e%t:uo(r)||r<32?i:1}function P7(r,e){return e-r%e}function lA(r,e,t,i){return t!==32&&(e===2||e===3&&i!==2||i===1||i===3&&e!==1)}function A7(r,e,t,i,n){let o=0;if(n!==0){let s=Wi(r);if(s!==-1){for(let l=0;l<s;l++)o+=r.charCodeAt(l)===9?P7(o,e):1;let a=n===3?2:n===2?1:0;for(let l=0;l<a;l++)o+=P7(o,e);o+i>t&&(o=0)}}return o}var cA,dA=(cA=window.trustedTypes)===null||cA===void 0?void 0:cA.createPolicy("domLineBreaksComputer",{createHTML:r=>r}),eC=class{static create(){return new eC}constructor(){}createLineBreaksComputer(e,t,i,n){t=t|0,i=+i;let o=[],s=[];return{addRequest:(a,l,c)=>{o.push(a),s.push(l)},finalize:()=>Gae(o,e,t,i,n,s)}}};function Gae(r,e,t,i,n,o){var s;function a(N){let F=o[N];if(F){let Y=wo.applyInjectedText(r[N],F),K=F.map(ie=>ie.options),ee=F.map(ie=>ie.column-1);return new lu([Y.length],[],0,ee,K)}else return null}if(i===-1){let N=[];for(let F=0,Y=r.length;F<Y;F++)N[F]=a(F);return N}let l=Math.round(i*e.typicalHalfwidthCharacterWidth),d=Math.round(t*(n===3?2:n===2?1:0)),h=Math.ceil(e.spaceWidth*d),u=document.createElement("div");Ti.applyFontInfoSlow(u,e);let m=wa(1e4),p=[],_=[],v=[],C=[],w=[];for(let N=0;N<r.length;N++){let F=wo.applyInjectedText(r[N],o[N]),Y=0,K=0,ee=l;if(n!==0)if(Y=Wi(F),Y===-1)Y=0;else{for(let Te=0;Te<Y;Te++)K+=F.charCodeAt(Te)===9?t-K%t:1;let Le=Math.ceil(e.spaceWidth*K);Le+e.typicalFullwidthCharacterWidth>l?(Y=0,K=0):ee=l-Le}let ie=F.substr(Y),Ee=Xae(ie,K,t,ee,m,h);p[N]=Y,_[N]=K,v[N]=ie,C[N]=Ee[0],w[N]=Ee[1]}let S=m.build(),D=(s=dA==null?void 0:dA.createHTML(S))!==null&&s!==void 0?s:S;u.innerHTML=D,u.style.position="absolute",u.style.top="10000",u.style.wordWrap="break-word",document.body.appendChild(u);let I=document.createRange(),A=Array.prototype.slice.call(u.children,0),O=[];for(let N=0;N<r.length;N++){let F=A[N],Y=Qae(I,F,v[N],C[N]);if(Y===null){O[N]=a(N);continue}let K=p[N],ee=_[N]+d,ie=w[N],Ee=[];for(let Fe=0,ue=Y.length;Fe<ue;Fe++)Ee[Fe]=ie[Y[Fe]];if(K!==0)for(let Fe=0,ue=Y.length;Fe<ue;Fe++)Y[Fe]+=K;let Le,Te,Ne=o[N];Ne?(Le=Ne.map(Fe=>Fe.options),Te=Ne.map(Fe=>Fe.column-1)):(Le=null,Te=null),O[N]=new lu(Y,Ee,ee,Te,Le)}return document.body.removeChild(u),O}function Xae(r,e,t,i,n,o){if(o!==0){let u=String(o);n.appendASCIIString('<div style="text-indent: -'),n.appendASCIIString(u),n.appendASCIIString("px; padding-left: "),n.appendASCIIString(u),n.appendASCIIString("px; box-sizing: border-box; width:")}else n.appendASCIIString('<div style="width:');n.appendASCIIString(String(i)),n.appendASCIIString('px;">');let s=r.length,a=e,l=0,c=[],d=[],h=0<s?r.charCodeAt(0):0;n.appendASCIIString("<span>");for(let u=0;u<s;u++){u!==0&&u%16384==0&&n.appendASCIIString("</span><span>"),c[u]=l,d[u]=a;let m=h;h=u+1<s?r.charCodeAt(u+1):0;let p=1,_=1;switch(m){case 9:p=t-a%t,_=p;for(let v=1;v<=p;v++)v<p?n.write1(160):n.appendASCII(32);break;case 32:h===32?n.write1(160):n.appendASCII(32);break;case 60:n.appendASCIIString("&lt;");break;case 62:n.appendASCIIString("&gt;");break;case 38:n.appendASCIIString("&amp;");break;case 0:n.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.write1(65533);break;default:uo(m)&&_++,m<32?n.write1(9216+m):n.write1(m)}l+=p,a+=_}return n.appendASCIIString("</span>"),c[r.length]=l,d[r.length]=a,n.appendASCIIString("</div>"),[c,d]}function Qae(r,e,t,i){if(t.length<=1)return null;let n=Array.prototype.slice.call(e.children,0),o=[];try{hA(r,n,i,0,null,t.length-1,null,o)}catch(s){return console.log(s),null}return o.length===0?null:(o.push(t.length),o)}function hA(r,e,t,i,n,o,s,a){if(i===o||(n=n||uA(r,e,t[i],t[i+1]),s=s||uA(r,e,t[o],t[o+1]),Math.abs(n[0].top-s[0].top)<=.1))return;if(i+1===o){a.push(o);return}let l=i+(o-i)/2|0,c=uA(r,e,t[l],t[l+1]);hA(r,e,t,i,n,l,c,a),hA(r,e,t,l,c,o,s,a)}function uA(r,e,t,i){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[i/16384|0].firstChild,i%16384),r.getClientRects()}var Jae=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Xf=function(r,e){return function(t,i){e(t,i,r)}},ele=0,j7=class{constructor(e,t,i,n,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=o}dispose(){Ge(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},Nu=class yD extends H{constructor(e,t,i,n,o,s,a,l,c,d){super();this._onDidDispose=this._register(new M),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new M),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new M),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new M),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new M),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new M),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new M),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new M),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new M),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new M),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new M),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new M),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new mA),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new mA),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new M),this.onWillType=this._onWillType.event,this._onDidType=this._register(new M),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new M),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new M),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new M),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new M),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new M),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new M),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new M),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new M),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new M),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new M),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new M),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new M),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new M),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new M),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new M),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new M),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new M),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new M),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;let h=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=h.overflowWidgetsDomNode,delete h.overflowWidgetsDomNode,this._id=++ele,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=i.isSimpleWidget||!1,this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(h,d)),this._register(this._configuration.onDidChange(m=>{this._onDidChangeConfiguration.fire(m);let p=this._configuration.options;if(m.hasChanged(129)){let _=p.get(129);this._onDidLayoutChange.fire(_)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=s,this._themeService=l,this._register(new M7(this,this._contextKeyService)),this._register(new F7(this,this._contextKeyService)),this._instantiationService=n.createChild(new kc([be,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new B7(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let u;Array.isArray(i.contributions)?u=i.contributions:u=uu.getEditorContributions();for(let m of u){if(this._contributions[m.id]){we(new Error(`Cannot have two contributions with the same id ${m.id}`));continue}try{let p=this._instantiationService.createInstance(m.ctor,this);this._contributions[m.id]=p}catch(p){we(p)}}uu.getEditorActions().forEach(m=>{if(this._actions[m.id]){we(new Error(`Cannot have two actions with the same id ${m.id}`));return}let p=new Zy(m.id,m.label,m.alias,ol(m.precondition),()=>this._instantiationService.invokeFunction(_=>Promise.resolve(m.runEditorCommand(_,this,null))),this._contextKeyService);this._actions[p.id]=p}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Ti(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return iu.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();let e=Object.keys(this._contributions);for(let t=0,i=e.length;t<i;t++){let n=e[t];this._contributions[n].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Ct.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return"";let t=!!(e&&e.preserveBOM),i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){let t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;let i=this.hasTextFocus(),n=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();let o={oldModelUrl:n?n.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(n)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let t=this._decorationTypeSubtypes[e];for(let i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,i){let n=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}getTopForLineNumber(e){return this._modelData?yD._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?yD._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>L.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return _t.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(!!this._modelData){if(!V.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!L.isIRange(e))throw new Error("Invalid arguments");let o=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,s,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!V.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new L(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let t=le.isISelection(e),i=L.isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){let n={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(n)}}_setSelectionImpl(e){if(!this._modelData)return;let t=new le(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!L.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(L.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,o=e.length;n<o;n++)if(!le.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){!this._modelData||this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;let e={},t=Object.keys(this._contributions);for(let o of t){let s=this._contributions[o];typeof s.saveViewState=="function"&&(e[o]=s.saveViewState())}let i=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:i,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;let t=e;if(t&&t.cursorState&&t.viewState){let i=t.cursorState;Array.isArray(i)?this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]);let n=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,l=o.length;a<l;a++){let c=o[a],d=this._contributions[c];typeof d.restoreViewState=="function"&&d.restoreViewState(n[c])}let s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}getContribution(e){return this._contributions[e]||null}getActions(){let e=[],t=Object.keys(this._actions);for(let i=0,n=t.length;i<n;i++){let o=t[i];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{let o=i;this._type(e,o.text||"");return}case"replacePreviousChar":{let o=i;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{let o=i;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{let o=i;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}let n=this.getAction(t);if(n){Promise.resolve(n.run()).then(void 0,we);return}!this._modelData||this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,o){!this._modelData||this._modelData.viewModel.compositionType(t,i,n,o,e)}_paste(e,t,i,n,o){if(!this._modelData||t.length===0)return;let s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,i,n,e);let a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new L(s.lineNumber,s.column,a.lineNumber,a.column),languageId:o})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){let n=uu.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(n.runEditorCommand(o,this,i)).then(void 0,we)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(80))return!1;let n;return i?Array.isArray(i)?n=()=>i:n=i:n=()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){!this._modelData||this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){!this._modelData||this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,_p(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){let t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){let t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){let i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){let t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){let t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){let i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;let t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(129),o=yD._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:o,left:s,height:i.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Ti.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}let t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();let i=new oA(this._id,this._configuration,e,eC.create(),Qy.create(this._configuration.options),s=>Ro(s));t.push(e.onDidChangeDecorations(s=>this._onDidChangeModelDecorations.fire(s))),t.push(e.onDidChangeLanguage(s=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(s)})),t.push(e.onDidChangeLanguageConfiguration(s=>this._onDidChangeModelLanguageConfiguration.fire(s))),t.push(e.onDidChangeContent(s=>this._onDidChangeModelContent.fire(s))),t.push(e.onDidChangeOptions(s=>this._onDidChangeModelOptions.fire(s))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(s=>{switch(s.kind){case 0:this._onDidContentSizeChange.fire(s);break;case 1:this._editorTextFocus.setValue(s.hasFocus);break;case 2:this._onDidScrollChange.fire(s);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{s.reachedMaxCursorCount&&this._notificationService.warn(g("cursors.maximum","The number of cursors has been limited to {0}.",Kd.MAX_CURSOR_COUNT));let a=[];for(let d=0,h=s.selections.length;d<h;d++)a[d]=s.selections[d].getPosition();let l={position:a[0],secondaryPositions:a.slice(1),reason:s.reason,source:s.source};this._onDidChangeCursorPosition.fire(l);let c={selection:s.selections[0],secondarySelections:s.selections.slice(1),modelVersionId:s.modelVersionId,oldSelections:s.oldSelections,oldModelVersionId:s.oldModelVersionId,source:s.source,reason:s.reason};this._onDidChangeCursorSelection.fire(c);break}}}));let[n,o]=this._createView(i);if(o){this._domElement.appendChild(n.domNode.domNode);let s=Object.keys(this._contentWidgets);for(let a=0,l=s.length;a<l;a++){let c=s[a];n.addContentWidget(this._contentWidgets[c])}s=Object.keys(this._overlayWidgets);for(let a=0,l=s.length;a<l;a++){let c=s[a];n.addOverlayWidget(this._overlayWidgets[c])}n.render(!1,!0),n.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new j7(e,i,n,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,s,a,l)=>{this._paste("keyboard",o,s,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,s,a,l)=>{this._compositionType("keyboard",o,s,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,s,a,l)=>{let c={text:o,pasteOnNewLine:s,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{let s={text:o};this._commandService.executeCommand("type",s)},compositionType:(o,s,a,l)=>{if(a||l){let c={text:o,replacePrevCharCnt:s,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{let c={text:o,replaceCharCnt:s};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let i=new Uf(e.coordinatesConverter);return i.onKeyDown=o=>this._onKeyDown.fire(o),i.onKeyUp=o=>this._onKeyUp.fire(o),i.onContextMenu=o=>this._onContextMenu.fire(o),i.onMouseMove=o=>this._onMouseMove.fire(o),i.onMouseLeave=o=>this._onMouseLeave.fire(o),i.onMouseDown=o=>this._onMouseDown.fire(o),i.onMouseUp=o=>this._onMouseUp.fire(o),i.onMouseDrag=o=>this._onMouseDrag.fire(o),i.onMouseDrop=o=>this._onMouseDrop.fire(o),i.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),i.onMouseWheel=o=>this._onMouseWheel.fire(o),[new AP(t,this._configuration,this._themeService,e,i,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;let e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};Nu=Jae([Xf(3,Ue),Xf(4,it),Xf(5,jt),Xf(6,be),Xf(7,ht),Xf(8,Vt),Xf(9,pn)],Nu);var mA=class extends H{constructor(){super();this._onDidChangeToTrue=this._register(new M),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new M),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}},M7=class extends H{constructor(e,t){super();this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=j.editorSimpleInput.bindTo(t),this._editorFocus=j.focus.bindTo(t),this._textInputFocus=j.textInputFocus.bindTo(t),this._editorTextFocus=j.editorTextFocus.bindTo(t),this._editorTabMovesFocus=j.tabMovesFocus.bindTo(t),this._editorReadonly=j.readOnly.bindTo(t),this._inDiffEditor=j.inDiffEditor.bindTo(t),this._editorColumnSelection=j.columnSelection.bindTo(t),this._hasMultipleSelections=j.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=j.hasNonEmptySelection.bindTo(t),this._canUndo=j.canUndo.bindTo(t),this._canRedo=j.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}},F7=class extends H{constructor(e,t){super();this._editor=e,this._contextKeyService=t,this._langId=j.languageId.bindTo(t),this._hasCompletionItemProvider=j.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=j.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=j.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=j.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=j.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=j.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=j.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=j.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=j.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=j.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=j.hasReferenceProvider.bindTo(t),this._hasRenameProvider=j.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=j.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=j.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=j.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=j.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=j.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=j.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=j.isInWalkThroughSnippet.bindTo(t);let i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(po.onDidChange(i)),this._register(jo.onDidChange(i)),this._register(Fs.onDidChange(i)),this._register(fd.onDidChange(i)),this._register(Jm.onDidChange(i)),this._register(ef.onDidChange(i)),this._register(tf.onDidChange(i)),this._register(md.onDidChange(i)),this._register(tc.onDidChange(i)),this._register(cl.onDidChange(i)),this._register(Xm.onDidChange(i)),this._register(Qm.onDidChange(i)),this._register(ru.onDidChange(i)),this._register(Mo.onDidChange(i)),this._register(ll.onDidChange(i)),this._register(dl.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){let e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(po.has(e)),this._hasCodeActionsProvider.set(jo.has(e)),this._hasCodeLensProvider.set(Fs.has(e)),this._hasDefinitionProvider.set(fd.has(e)),this._hasDeclarationProvider.set(Jm.has(e)),this._hasImplementationProvider.set(ef.has(e)),this._hasTypeDefinitionProvider.set(tf.has(e)),this._hasHoverProvider.set(md.has(e)),this._hasDocumentHighlightProvider.set(tc.has(e)),this._hasDocumentSymbolProvider.set(cl.has(e)),this._hasReferenceProvider.set(Xm.has(e)),this._hasRenameProvider.set(Qm.has(e)),this._hasSignatureHelpProvider.set(ll.has(e)),this._hasInlayHintsProvider.set(dl.has(e)),this._hasDocumentFormattingProvider.set(ru.has(e)||Mo.has(e)),this._hasDocumentSelectionFormattingProvider.set(Mo.has(e)),this._hasMultipleDocumentFormattingProvider.set(ru.all(e).length+Mo.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Mo.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Xe.walkThroughSnippet)})}},B7=class extends H{constructor(e){super();this._onChange=this._register(new M),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(il(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}},tle=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),ile=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function fA(r){return tle+encodeURIComponent(r.toString())+ile}var nle=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),rle=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function ole(r){return nle+encodeURIComponent(r.toString())+rle}Be((r,e)=>{let t=r.getColor(PE);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);let i=r.getColor(Nf);i&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${fA(i)}") repeat-x bottom left; }`);let n=r.getColor(Mz);n&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${n}; }`);let o=r.getColor(Rf);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);let s=r.getColor(Ta);s&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${fA(s)}") repeat-x bottom left; }`);let a=r.getColor(Fz);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);let l=r.getColor(W_);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);let c=r.getColor(zo);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${fA(c)}") repeat-x bottom left; }`);let d=r.getColor(Bz);d&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${d}; }`);let h=r.getColor(Uz);h&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${h}; }`);let u=r.getColor(Wz);u&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${ole(u)}") no-repeat bottom left; }`);let m=r.getColor(p8);m&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);let p=r.getColor(g8);p&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${p}; }`);let _=r.getColor(Na)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${_}}`)});var Bt=class{constructor(e,t,i){let n=o=>this.emitter.fire(o);this.emitter=new M({onFirstListenerAdd:()=>e.addEventListener(t,n,i),onLastListenerRemove:()=>e.removeEventListener(t,n,i)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}};function gA(r){return r.preventDefault(),r.stopPropagation(),r}var gb=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},sle=!1,tC;(function(r){r.North="north",r.South="south",r.East="east",r.West="west"})(tC||(tC={}));var ale=4,lle=new M,cle=300,dle=new M,CD=class{constructor(){this.disposables=new G}get onPointerMove(){return this.disposables.add(new Bt(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Bt(window,"mouseup")).event}dispose(){this.disposables.dispose()}};gb([Ni],CD.prototype,"onPointerMove",null);gb([Ni],CD.prototype,"onPointerUp",null);var SD=class{constructor(e){this.el=e,this.disposables=new G}get onPointerMove(){return this.disposables.add(new Bt(this.el,Ft.Change)).event}get onPointerUp(){return this.disposables.add(new Bt(this.el,Ft.End)).event}dispose(){this.disposables.dispose()}};gb([Ni],SD.prototype,"onPointerMove",null);gb([Ni],SD.prototype,"onPointerUp",null);var iC=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};gb([Ni],iC.prototype,"onPointerMove",null);gb([Ni],iC.prototype,"onPointerUp",null);var cn=class extends H{constructor(e,t,i){super();this.hoverDelay=cle,this.hoverDelayer=this._register(new zr(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new M),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new M),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new M),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new M),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new G),this.orthogonalStartDragHandleDisposables=this._register(new G),this.orthogonalEndSashDisposables=this._register(new G),this.orthogonalEndDragHandleDisposables=this._register(new G),this.el=X(e,oe(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),We&&this.el.classList.add("mac");let n=this._register(new Bt(this.el,"mousedown")).event;this._register(n(h=>this.onPointerStart(h,new CD),this));let o=this._register(new Bt(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));let s=this._register(new Bt(this.el,"mouseenter")).event;this._register(s(()=>cn.onMouseEnter(this)));let a=this._register(new Bt(this.el,"mouseleave")).event;this._register(a(()=>cn.onMouseLeave(this))),this._register(yt.addTarget(this.el));let l=ye.map(this._register(new Bt(this.el,Ft.Start)).event,h=>{var u;return Object.assign(Object.assign({},h),{target:(u=h.initialTarget)!==null&&u!==void 0?u:null})});this._register(l(h=>this.onPointerStart(h,new SD(this.el)),this));let c=this._register(new Bt(this.el,Ft.Tap)).event,d=ye.map(ye.filter(ye.debounce(c,(h,u)=>{var m;return{event:u,count:((m=h==null?void 0:h.count)!==null&&m!==void 0?m:0)+1}},250),({count:h})=>h===2),({event:h})=>{var u;return Object.assign(Object.assign({},h),{target:(u=h.initialTarget)!==null&&u!==void 0?u:null})});this._register(d(this.onPointerDoublePress,this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=ale,this._register(lle.event(h=>{this.size=h,this.layout()}))),this._register(dle.event(h=>this.hoverDelay=h)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",sle),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=X(this.el,oe(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Re(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Bt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>cn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Bt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>cn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=X(this.el,oe(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Re(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Bt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>cn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Bt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>cn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){St.stop(e);let i=!1;if(!e.__orthogonalSashEvent){let p=this.getOrthogonalSash(e);p&&(i=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new iC(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new iC(t))),!this.state)return;let n=RW("iframe");for(let p of n)p.style.pointerEvents="none";let o=e.pageX,s=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);let c=un(this.el),d=()=>{let p="";i?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=We?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=We?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},h=new G;d(),i||this.onDidEnablementChange(d,null,h);let u=p=>{St.stop(p,!1);let _={startX:o,currentX:p.pageX,startY:s,currentY:p.pageY,altKey:a};this._onDidChange.fire(_)},m=p=>{St.stop(p,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(let _ of n)_.style.pointerEvents="auto"};t.onPointerMove(u,null,h),t.onPointerUp(m,null,h),h.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&cn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&cn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){cn.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};var pA=Ie("IEditorCancelService"),W7=new _e("cancellableOperation",!1,g("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));_o(pA,class{constructor(){this._tokens=new WeakMap}add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(n=>{let o=W7.bindTo(n.get(be)),s=new yn;return{key:o,tokens:s}}),this._tokens.set(r,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(r){let e=this._tokens.get(r);if(!e)return;let t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);var _A=class extends Di{constructor(e,t){super(t);this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(pA).add(e,this))}dispose(){this._unregister(),super.dispose()}};ce(new class extends fi{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:W7})}runEditorCommand(r,e){r.get(pA).cancel(e)}});var Ru=class{constructor(e,t){if(this.flags=t,(this.flags&1)!=0){let i=e.getModel();this.modelVersionId=i?Dr("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!=0?this.position=e.getPosition():this.position=null,(this.flags&2)!=0?this.selection=e.getSelection():this.selection=null,(this.flags&8)!=0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof Ru))return!1;let t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new Ru(e,this.flags))}},Yd=class extends _A{constructor(e,t,i,n){super(e,n);this._listener=new G,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!i||!L.containsPosition(i,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!i||!L.containsRange(i,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}},pb=class extends Di{constructor(e,t){super(t);this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}},$s=class{constructor(e,t,i){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=i}static capture(e){let t=null,i=0;if(e.getScrollTop()!==0){let n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();let o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}}return new $s(t,i,e.getPosition())}restore(e){if(this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){let t=e.getPosition();if(!this._cursorPosition||!t)return;let i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}};var xD={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:yo.text,TERMINALS:"Terminals"},bA=class{constructor(e){this.data=e}update(){}getData(){return this.data}},Cl={CurrentDragAndDropData:void 0};var Ra=class extends H{constructor(e,t,i={}){super();this.options=i,this._context=e||this,this._action=t,t instanceof er&&this._register(t.onDidChange(n=>{!this.element||this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Ea)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){let t=this.element=e;this._register(yt.addTarget(e));let i=this.options&&this.options.draggable;i&&(e.draggable=!0,Hi&&this._register(J(e,De.DRAG_START,n=>{var o;return(o=n.dataTransfer)===null||o===void 0?void 0:o.setData(xD.TEXT,this._action.label)}))),this._register(J(t,Ft.Tap,n=>this.onClick(n,!0))),this._register(J(t,De.MOUSE_DOWN,n=>{i||St.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),We&&this._register(J(t,De.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(J(t,De.CLICK,n=>{St.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(J(t,De.DBLCLICK,n=>{St.stop(n,!0)})),[De.MOUSE_UP,De.MOUSE_OUT].forEach(n=>{this._register(J(t,n,o=>{St.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var i;St.stop(e,!0);let n=lr(this._context)?((i=this.options)===null||i===void 0?void 0:i.useEventAsContext)?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}},Ic=class extends Ra{constructor(e,t,i={}){super(e,t,i);this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=X(this.element,oe("a.action-label"))),this.label&&(this._action.id===gr.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(X(this.element,oe("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=g({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}};var hle=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Gr=class extends H{constructor(e,t={}){var i,n,o,s,a,l;super();this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new M),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new M({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new M),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new M),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(n=this.options.orientation)!==null&&n!==void 0?n:0,this._triggerKeys={keyDown:(s=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&s!==void 0?s:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Ea,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(h=>this._onDidRun.fire(h))),this._register(this._actionRunner.onBeforeRun(h=>this._onBeforeRun.fire(h))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(J(this.domNode,De.KEY_DOWN,h=>{let u=new kt(h),m=!0,p=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(u.equals(c[0])||u.equals(c[1]))?m=this.focusPrevious():d&&(u.equals(d[0])||u.equals(d[1]))?m=this.focusNext():u.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():u.equals(14)?m=this.focusFirst():u.equals(13)?m=this.focusLast():u.equals(2)&&p instanceof Ra&&p.trapsArrowNavigation?m=this.focusNext():this.isTriggerKeyEvent(u)?this._triggerKeys.keyDown?this.doTrigger(u):this.triggerKeyDown=!0:m=!1,m&&(u.preventDefault(),u.stopPropagation())})),this._register(J(this.domNode,De.KEY_UP,h=>{let u=new kt(h);this.isTriggerKeyEvent(u)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(u)),u.preventDefault(),u.stopPropagation()):(u.equals(2)||u.equals(1024|2))&&this.updateFocusedItem()})),this.focusTracker=this._register(il(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Jh()===this.domNode||!Ts(Jh(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(Ts(Jh(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){let i=Array.isArray(e)?e:[e],n=_a(t.index)?t.index:null;i.forEach(o=>{let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(J(s,De.CONTEXT_MENU,l=>{St.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new Ic(this.context,o,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof Ra&&this.viewItems.length===0&&a.setFocusable(!0),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(s,this.actionsList.children[n]),this.viewItems.splice(n,0,a),this._actionIds.splice(n,0,o.id),n++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){Ge(this.viewItems),this.viewItems=[],this._actionIds=[],Li(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem=="undefined"){let n=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus()}else i!==void 0&&(this.focusedItem=i),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem=="undefined")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let e=this.focusedItem,t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem=="undefined")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let e=this.focusedItem,t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem=="undefined"&&this.actionsList.focus({preventScroll:t});for(let i=0;i<this.viewItems.length;i++){let n=this.viewItems[i],o=n;if(i===this.focusedItem){let s=!0;qm(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&qm(n.isEnabled)&&!n.isEnabled()&&(s=!1),s?o.focus(e):this.actionsList.focus({preventScroll:t})}else qm(o.blur)&&o.blur()}}doTrigger(e){if(typeof this.focusedItem=="undefined")return;let t=this.viewItems[this.focusedItem];if(t instanceof Ra){let i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}run(e,t){return hle(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){Ge(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}};var ule={IconContribution:"base.contributions.icons"},U7=class{constructor(){this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:g("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:g("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Vn.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){let o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return o}let s={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;Tt.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let n=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(let o of n.filter(s=>!!s.description).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|${Tt.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(let o of n.filter(s=>!Tt.isThemeIcon(s.defaults)).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|`);return i.join(`
`)}},Qf=new U7;ii.add(ule.IconContribution,Qf);function Gi(r,e,t,i){return Qf.registerIcon(r,e,t,i)}function V7(){return Qf}function mle(){for(let r of Kp.all)Qf.registerIcon(r.id,r.definition,r.description);Kp.onDidRegister(r=>Qf.registerIcon(r.id,r.definition,r.description))}mle();var z7="vscode://schemas/icons",H7=ii.as(sf.JSONContribution);H7.registerSchema(z7,Qf.getIconSchema());var $7=new dt(()=>H7.notifySchemaChanged(z7),200);Qf.onDidChange(()=>{$7.isScheduled()||$7.schedule()});var K7=Gi("widget-close",ge.close,g("widgetClose","Icon for the close action in widgets."));var fle=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},gle=function(r,e){return function(t,i){e(t,i,r)}},ple=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},vA,ED=3,_b=class{constructor(e,t,i,n){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=n}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}},DD=class{constructor(e){this.entries=e}},_le=Gi("diff-review-insert",ge.add,g("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),ble=Gi("diff-review-remove",ge.remove,g("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),vle=Gi("diff-review-close",ge.close,g("diffReviewCloseIcon","Icon for 'Close' in diff review.")),nC=class Jf extends H{constructor(e,t){super();this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=tt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=tt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Gr(this.actionBarContainer.domNode)),this._actionBar.push(new er("diffreview.close",g("label.close","Close"),"close-diff-review "+Tt.asClassName(vle),!0,()=>ple(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=tt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=tt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new yl(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(Zt(this.domNode.domNode,"click",i=>{i.preventDefault();let n=WO(i.target,"diff-review-row");n&&this._goToRow(n)})),this._register(Zt(this.domNode.domNode,"keydown",i=>{(i.equals(18)||i.equals(2048|18)||i.equals(512|18))&&(i.preventDefault(),this._goToRow(this._getNextRow())),(i.equals(16)||i.equals(2048|16)||i.equals(512|16))&&(i.preventDefault(),this._goToRow(this._getPrevRow())),(i.equals(9)||i.equals(2048|9)||i.equals(512|9)||i.equals(1024|9))&&(i.preventDefault(),this.hide()),(i.equals(10)||i.equals(3))&&(i.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let n=0,o=this._diffs.length;n<o;n++)if(this._diffs[n]===this._currentDiff){i=n;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new V(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let n=0,o=this._diffs.length;n<o;n++)if(this._diffs[n]===this._currentDiff){i=n;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;let t=this._diffs[e].entries;this._diffEditor.setPosition(new V(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new V(e,1)),this._diffEditor.revealPosition(new V(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){let e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];let t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return!t||!i?[]:Jf._mergeAdjacent(e,t.getLineCount(),i.getLineCount())}static _mergeAdjacent(e,t,i){if(!e||e.length===0)return[];let n=[],o=0;for(let c=0,d=e.length;c<d;c++){let h=e[c],u=h.originalStartLineNumber,m=h.originalEndLineNumber,p=h.modifiedStartLineNumber,_=h.modifiedEndLineNumber,v=[],C=0;{let w=m===0?u:u-1,S=_===0?p:p-1,D=1,I=1;if(c>0){let N=e[c-1];N.originalEndLineNumber===0?D=N.originalStartLineNumber+1:D=N.originalEndLineNumber+1,N.modifiedEndLineNumber===0?I=N.modifiedStartLineNumber+1:I=N.modifiedEndLineNumber+1}let A=w-ED+1,O=S-ED+1;if(A<D){let N=D-A;A=A+N,O=O+N}if(O<I){let N=I-O;A=A+N,O=O+N}v[C++]=new _b(A,w,O,S)}m!==0&&(v[C++]=new _b(u,m,0,0)),_!==0&&(v[C++]=new _b(0,0,p,_));{let w=m===0?u+1:m+1,S=_===0?p+1:_+1,D=t,I=i;if(c+1<d){let N=e[c+1];N.originalEndLineNumber===0?D=N.originalStartLineNumber:D=N.originalStartLineNumber-1,N.modifiedEndLineNumber===0?I=N.modifiedStartLineNumber:I=N.modifiedStartLineNumber-1}let A=w+ED-1,O=S+ED-1;if(A>D){let N=D-A;A=A+N,O=O+N}if(O>I){let N=I-O;A=A+N,O=O+N}v[C++]=new _b(w,A,S,O)}n[o++]=new DD(v)}let s=n[0].entries,a=[],l=0;for(let c=1,d=n.length;c<d;c++){let h=n[c].entries,u=s[s.length-1],m=h[0];if(u.getType()===0&&m.getType()===0&&m.originalLineStart<=u.originalLineEnd){s[s.length-1]=new _b(u.originalLineStart,m.originalLineEnd,u.modifiedLineStart,m.modifiedLineEnd),s=s.concat(h.slice(1));continue}a[l++]=new DD(s),s=h}return a[l++]=new DD(s),a}_findDiffIndex(e){let t=e.lineNumber;for(let i=0,n=this._diffs.length;i<n;i++){let o=this._diffs[i].entries,s=o[o.length-1].modifiedLineEnd;if(t<=s)return i}return 0}_render(){let e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel(),o=i.getOptions(),s=n.getOptions();if(!this._isVisible||!i||!n){Li(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});let a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];let l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Ti.applyFontInfoSlow(c,t.get(43));let d=0,h=0,u=0,m=0;for(let O=0,N=l.length;O<N;O++){let F=l[O],Y=F.originalLineStart,K=F.originalLineEnd,ee=F.modifiedLineStart,ie=F.modifiedLineEnd;Y!==0&&(d===0||Y<d)&&(d=Y),K!==0&&(h===0||K>h)&&(h=K),ee!==0&&(u===0||ee<u)&&(u=ee),ie!==0&&(m===0||ie>m)&&(m=ie)}let p=document.createElement("div");p.className="diff-review-row";let _=document.createElement("div");_.className="diff-review-cell diff-review-summary";let v=h-d+1,C=m-u+1;_.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${v} +${u},${C} @@`)),p.setAttribute("data-line",String(u));let w=O=>O===0?g("no_lines_changed","no lines changed"):O===1?g("one_line_changed","1 line changed"):g("more_lines_changed","{0} lines changed",O),S=w(v),D=w(C);p.setAttribute("aria-label",g({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,S,u,D)),p.appendChild(_),p.setAttribute("role","listitem"),c.appendChild(p);let I=t.get(58),A=u;for(let O=0,N=l.length;O<N;O++){let F=l[O];Jf._renderSection(c,F,A,I,this._width,e,i,o,t,n,s,this._modeService.languageIdCodec),F.modifiedLineStart!==0&&(A=F.modifiedLineEnd)}Li(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,n,o,s,a,l,c,d,h,u){let m=t.getType(),p="diff-review-row",_="",v="diff-review-spacer",C=null;switch(m){case 1:p="diff-review-row line-insert",_=" char-insert",C=_le;break;case 2:p="diff-review-row line-delete",_=" char-delete",C=ble;break}let w=t.originalLineStart,S=t.originalLineEnd,D=t.modifiedLineStart,I=t.modifiedLineEnd,A=Math.max(I-D,S-w),O=s.get(129),N=O.glyphMarginWidth+O.lineNumbersWidth,F=c.get(129),Y=10+F.glyphMarginWidth+F.lineNumbersWidth;for(let K=0;K<=A;K++){let ee=w===0?0:w+K,ie=D===0?0:D+K,Ee=document.createElement("div");Ee.style.minWidth=o+"px",Ee.className=p,Ee.setAttribute("role","listitem"),ie!==0&&(i=ie),Ee.setAttribute("data-line",String(i));let Le=document.createElement("div");Le.className="diff-review-cell",Le.style.height=`${n}px`,Ee.appendChild(Le);let Te=document.createElement("span");Te.style.width=N+"px",Te.style.minWidth=N+"px",Te.className="diff-review-line-number"+_,ee!==0?Te.appendChild(document.createTextNode(String(ee))):Te.innerText="\xA0",Le.appendChild(Te);let Ne=document.createElement("span");Ne.style.width=Y+"px",Ne.style.minWidth=Y+"px",Ne.style.paddingRight="10px",Ne.className="diff-review-line-number"+_,ie!==0?Ne.appendChild(document.createTextNode(String(ie))):Ne.innerText="\xA0",Le.appendChild(Ne);let Fe=document.createElement("span");if(Fe.className=v,C){let Xt=document.createElement("span");Xt.className=Tt.asClassName(C),Xt.innerText="\xA0\xA0",Fe.appendChild(Xt)}else Fe.innerText="\xA0\xA0";Le.appendChild(Fe);let ue;if(ie!==0){let Xt=this._renderLine(d,c,h.tabSize,ie,u);Jf._ttPolicy&&(Xt=Jf._ttPolicy.createHTML(Xt)),Le.insertAdjacentHTML("beforeend",Xt),ue=d.getLineContent(ie)}else{let Xt=this._renderLine(a,s,l.tabSize,ee,u);Jf._ttPolicy&&(Xt=Jf._ttPolicy.createHTML(Xt)),Le.insertAdjacentHTML("beforeend",Xt),ue=a.getLineContent(ee)}ue.length===0&&(ue=g("blankLine","blank"));let ni="";switch(m){case 0:ee===ie?ni=g({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",ue,ee):ni=g("equalLine","{0} original line {1} modified line {2}",ue,ee,ie);break;case 1:ni=g("insertLine","+ {0} modified line {1}",ue,ie);break;case 2:ni=g("deleteLine","- {0} original line {1}",ue,ee);break}Ee.setAttribute("aria-label",ni),e.appendChild(Ee)}}static _renderLine(e,t,i,n,o){let s=e.getLineContent(n),a=t.get(43),l=Vi.createEmpty(s,o),c=mr.isBasicASCII(s,e.mightContainNonBasicASCII()),d=mr.containsRTL(s,c,e.mightContainRTL());return s_(new Bs(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,s,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==Zn.OFF,null)).html}};nC._ttPolicy=(vA=window.trustedTypes)===null||vA===void 0?void 0:vA.createPolicy("diffReview",{createHTML:r=>r});nC=fle([gle(1,ui)],nC);Be((r,e)=>{let t=r.getColor(zE);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);let i=r.getColor(vc);i&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${i} 0 -6px 6px -6px inset; }`)});var q7=class extends pe{constructor(){super({id:"editor.action.diffReview.next",label:g("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:fe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){let i=Z7(e);i&&i.diffReviewNext()}},Y7=class extends pe{constructor(){super({id:"editor.action.diffReview.prev",label:g("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:fe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1024|65,weight:100}})}run(e,t){let i=Z7(e);i&&i.diffReviewPrev()}};function Z7(r){let e=r.get(it),t=e.listDiffEditors(),i=e.getActiveCodeEditor();if(!i)return null;for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.getModifiedEditor().getId()===i.getId()||s.getOriginalEditor().getId()===i.getId())return s}return null}ae(q7);ae(Y7);var bs=Ie("contextViewService"),Ho=Ie("contextMenuService");var wA=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},yA=class extends H{constructor(e,t,i,n,o,s){super();this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=n,this._contextMenuService=o,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=ge.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";let a=i.getOption(58),l=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);let c=[],d=n.modifiedEndLineNumber===0;c.push(new er("diff.clipboard.copyDeletedContent",d?n.originalEndLineNumber>n.modifiedStartLineNumber?g("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):g("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.originalEndLineNumber>n.modifiedStartLineNumber?g("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):g("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>wA(this,void 0,void 0,function*(){let _=new L(n.originalStartLineNumber,1,n.originalEndLineNumber+1,1),v=n.originalModel.getValueInRange(_);yield this._clipboardService.writeText(v)})));let h=0,u;n.originalEndLineNumber>n.modifiedStartLineNumber&&(u=new er("diff.clipboard.copyDeletedLineContent",d?g("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.originalStartLineNumber):g("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.originalStartLineNumber),void 0,!0,()=>wA(this,void 0,void 0,function*(){let _=n.originalModel.getLineContent(n.originalStartLineNumber+h);if(_===""){let v=n.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(v===0?`
`:`\r
`)}else yield this._clipboardService.writeText(_)})),c.push(u)),i.getOption(80)||c.push(new er("diff.inline.revertChange",g("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>wA(this,void 0,void 0,function*(){let _=new L(n.originalStartLineNumber,1,n.originalEndLineNumber,n.originalModel.getLineMaxColumn(n.originalEndLineNumber)),v=n.originalModel.getValueInRange(_);if(n.modifiedEndLineNumber===0){let C=i.getModel().getLineMaxColumn(n.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new L(n.modifiedStartLineNumber,C,n.modifiedStartLineNumber,C),text:l+v}])}else{let C=i.getModel().getLineMaxColumn(n.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new L(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,C),text:v}])}})));let p=(_,v)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:_,y:v}),getActions:()=>(u&&(u.label=d?g("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.originalStartLineNumber+h):g("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.originalStartLineNumber+h)),c),autoSelectFirstItem:!0})};this._register(Zt(this._diffActions,"mousedown",_=>{let{top:v,height:C}=ci(this._diffActions),w=Math.floor(a/3);_.preventDefault(),p(_.posx,v+C+w)})),this._register(i.onMouseMove(_=>{_.target.type===8||_.target.type===5?_.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(i.onMouseDown(_=>{!_.event.rightButton||(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._viewZoneId&&(_.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a),p(_.event.posx,_.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,i){let{top:n}=ci(e),o=t-n,s=Math.floor(o/i),a=s*i;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],s<l)return c}return s}};var $o=Ie("clipboardService");var Pa=class{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};Pa.None=Object.freeze({report(){}});var Xr=Ie("editorProgressService");var wle=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zd=function(r,e){return function(t,i){e(t,i,r)}},CA,SA=class{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(let i of this._zones)t.removeZone(i)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,i,n){let o=n?$s.capture(e):null;e.changeViewZones(s=>{var a;for(let l of this._zones)s.removeZone(l);for(let l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=i.zones.length;l<c;l++){let d=i.zones[l];d.suppressMouseDown=!0;let h=s.addZone(d);this._zones.push(h),this._zonesMap[String(h)]=!0,i.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=i.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new yA(h,d.marginDomNode,e,i.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),o&&o.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)}},yle=0,Cle=Gi("diff-insert",ge.add,g("diffInsertIcon","Line decoration for inserts in the diff editor.")),G7=Gi("diff-remove",ge.remove,g("diffRemoveIcon","Line decoration for removals in the diff editor.")),X7=(CA=window.trustedTypes)===null||CA===void 0?void 0:CA.createPolicy("diffEditorWidget",{createHTML:r=>r}),Gd=class br extends H{constructor(e,t,i,n,o,s,a,l,c,d,h,u){super();this._editorProgressService=u,this._onDidDispose=this._register(new M),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new M),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new M),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=l,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=a.createChild(new kc([be,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=d,this._id=++yle,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=t6(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor!="undefined"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new dt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=br._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=tt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Zt(this._overviewDomElement,"mousedown",p=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(p)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new SA(h,n),this._modifiedEditorState=new SA(h,n),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new iy(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,i.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,i.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(nC,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Oc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DA(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(p=>{this._strategy&&this._strategy.applyColors(p)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=br._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));let m=uu.getDiffEditorContributions();for(let p of m)try{this._register(a.createInstance(p.ctor,this))}catch(_){we(_)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=Cf(e.type),i}_recreateOverviewRulers(){!this._options.renderOverviewRuler||(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){let i=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{!i.getModel()||(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));let n=this._contextKeyService.createKey("isInDiffLeftEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>n.set(!0))),this._register(i.onDidBlurEditorWidget(()=>n.set(!1))),this._register(i.onDidContentSizeChange(o=>{let s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+br.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),i}_createRightHandSideEditor(e,t){let i=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{!i.getModel()||(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(i.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));let n=this._contextKeyService.createKey("isInDiffRightEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>n.set(!0))),this._register(i.onDidBlurEditorWidget(()=>n.set(!1))),this._register(i.onDidContentSizeChange(o=>{let s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+br.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),i}_createInnerEditor(e,t,i,n){return e.createInstance(Nu,t,i,n)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return iu.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){let t=t6(e,this._options),i=xle(this._options,t);this._options=t;let n=i.ignoreTrimWhitespace||i.renderIndicators,o=this._isVisible&&(i.maxComputationTime||i.maxFileSize);n?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),i.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Oc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DA(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=br._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),i.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._modifiedEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){let e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){let t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;let e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),i=br.ENTIRE_DIFF_OVERVIEW_WIDTH-2*br.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:br.ONE_OVERVIEW_WIDTH,right:i+br.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:br.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),br.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;let e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;let i=this._diffComputationToken,n=this._options.maxFileSize*1024*1024,o=s=>{let a=s.getValueLength();return n===0||a<=n};if(!o(e)||!o(t)){(!br._equals(e.uri,this._lastOriginalWarning)||!br._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(g("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(s=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=s,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},s=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;let e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),n=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,n.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,n.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){let t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){let t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){let t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=lo.revealHorizontalRightPadding.defaultValue+br.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){let e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),n=this._strategy.layout();this._originalDomNode.style.width=n+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-n+"px",this._modifiedDomNode.style.left=n+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-i+"px",this._overviewDomElement.style.width=br.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-br.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(br.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:n,height:t-i}),this._modifiedEditor.layout({width:e-n-(this._options.renderOverviewRuler?br.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-i}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-i,e,i),this._layoutOverviewViewport()}_layoutOverviewViewport(){let e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){let e=this._modifiedEditor.getLayoutInfo();if(!e)return null;let t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),n=Math.max(0,e.height),o=Math.max(0,n-2*0),s=i>0?o/i:0,a=Math.max(0,Math.floor(e.height*s)),l=Math.floor(t*s);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){let i=this._diffComputationResult?this._diffComputationResult.changes:[];if(i.length===0||e<t(i[0]))return null;let n=0,o=i.length-1;for(;n<o;){let s=Math.floor((n+o)/2),a=t(i[s]),l=s+1<=o?t(i[s+1]):1073741824;e<a?o=s-1:e>=l?n=s+1:(n=s,o=s)}return i[n]}_getEquivalentLineForOriginalLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;let i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=o?n+Math.min(a,s):n+s-o+a}_getEquivalentLineForModifiedLineNumber(e){let t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;let i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),n=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=s?i+Math.min(a,o):i+o-s+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Gd.ONE_OVERVIEW_WIDTH=15;Gd.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Gd.UPDATE_DIFF_DECORATIONS_DELAY=200;Gd=wle([Zd(3,$o),Zd(4,Jn),Zd(5,be),Zd(6,Ue),Zd(7,it),Zd(8,ht),Zd(9,Vt),Zd(10,Ho),Zd(11,Xr)],Gd);var xA=class extends H{constructor(e){super();this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){let t=(e.getColor(CR)||ME).transparent(2),i=(e.getColor(SR)||FE).transparent(2),n=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,n}getEditorsDiffDecorations(e,t,i,n,o){o=o.sort((c,d)=>c.afterLineNumber-d.afterLineNumber),n=n.sort((c,d)=>c.afterLineNumber-d.afterLineNumber);let s=this._getViewZones(e,n,o,i),a=this._getOriginalEditorDecorations(e,t,i),l=this._getModifiedEditorDecorations(e,t,i);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:s.modified}}}},EA=class{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}},Pu=class{constructor(e,t,i,n,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=n,this._modifiedEditor=o}static _getViewLineCount(e,t,i){let n=e.getModel(),o=e._getViewModel();if(n&&o){let s=rC(n,o,t,i);return s.endLineNumber-s.startLineNumber+1}return i-t+1}getViewZones(){let e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),i=this._originalEditor.getOption(130).wrappingColumn!==-1,n=this._modifiedEditor.getOption(130).wrappingColumn!==-1,o=i||n,s=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]},d=0,h=0,u=0,m=0,p=0,_=0,v=(A,O)=>A.afterLineNumber-O.afterLineNumber,C=(A,O)=>{if(O.domNode===null&&A.length>0){let N=A[A.length-1];if(N.afterLineNumber===O.afterLineNumber&&N.domNode===null){N.heightInLines+=O.heightInLines;return}}A.push(O)},w=new EA(this._modifiedForeignVZ),S=new EA(this._originalForeignVZ),D=1,I=1;for(let A=0,O=this._lineChanges.length;A<=O;A++){let N=A<O?this._lineChanges[A]:null;N!==null?(u=N.originalStartLineNumber+(N.originalEndLineNumber>0?-1:0),m=N.modifiedStartLineNumber+(N.modifiedEndLineNumber>0?-1:0),h=N.originalEndLineNumber>0?Pu._getViewLineCount(this._originalEditor,N.originalStartLineNumber,N.originalEndLineNumber):0,d=N.modifiedEndLineNumber>0?Pu._getViewLineCount(this._modifiedEditor,N.modifiedStartLineNumber,N.modifiedEndLineNumber):0,p=Math.max(N.originalStartLineNumber,N.originalEndLineNumber),_=Math.max(N.modifiedStartLineNumber,N.modifiedEndLineNumber)):(u+=1e7+h,m+=1e7+d,p=u,_=m);let F=[],Y=[];if(o){let ie;N?N.originalEndLineNumber>0?ie=N.originalStartLineNumber-D:ie=N.modifiedStartLineNumber-I:ie=s.getLineCount()-D;for(let Ee=0;Ee<ie;Ee++){let Le=D+Ee,Te=I+Ee,Ne=a.getModelLineViewLineCount(Le),Fe=l.getModelLineViewLineCount(Te);Ne<Fe?F.push({afterLineNumber:Le,heightInLines:Fe-Ne,domNode:null,marginDomNode:null}):Ne>Fe&&Y.push({afterLineNumber:Te,heightInLines:Ne-Fe,domNode:null,marginDomNode:null})}N&&(D=(N.originalEndLineNumber>0?N.originalEndLineNumber:N.originalStartLineNumber)+1,I=(N.modifiedEndLineNumber>0?N.modifiedEndLineNumber:N.modifiedStartLineNumber)+1)}for(;w.current&&w.current.afterLineNumber<=_;){let ie;w.current.afterLineNumber<=m?ie=u-m+w.current.afterLineNumber:ie=p;let Ee=null;N&&N.modifiedStartLineNumber<=w.current.afterLineNumber&&w.current.afterLineNumber<=N.modifiedEndLineNumber&&(Ee=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),F.push({afterLineNumber:ie,heightInLines:w.current.height/t,domNode:null,marginDomNode:Ee}),w.advance()}for(;S.current&&S.current.afterLineNumber<=p;){let ie;S.current.afterLineNumber<=u?ie=m-u+S.current.afterLineNumber:ie=_,Y.push({afterLineNumber:ie,heightInLines:S.current.height/e,domNode:null}),S.advance()}if(N!==null&&bb(N)){let ie=this._produceOriginalFromDiff(N,h,d);ie&&F.push(ie)}if(N!==null&&vb(N)){let ie=this._produceModifiedFromDiff(N,h,d);ie&&Y.push(ie)}let K=0,ee=0;for(F=F.sort(v),Y=Y.sort(v);K<F.length&&ee<Y.length;){let ie=F[K],Ee=Y[ee],Le=ie.afterLineNumber-u,Te=Ee.afterLineNumber-m;Le<Te?(C(c.original,ie),K++):Te<Le?(C(c.modified,Ee),ee++):ie.shouldNotShrink?(C(c.original,ie),K++):Ee.shouldNotShrink?(C(c.modified,Ee),ee++):ie.heightInLines>=Ee.heightInLines?(ie.heightInLines-=Ee.heightInLines,ee++):(Ee.heightInLines-=ie.heightInLines,K++)}for(;K<F.length;)C(c.original,F[K]),K++;for(;ee<Y.length;)C(c.modified,Y[ee]),ee++}return{original:Pu._ensureDomNodes(c.original),modified:Pu._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=e6()),t))}};function Xd(r,e,t,i,n){return{range:new L(r,e,t,i),options:n}}var So={charDelete:ze.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:ze.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:ze.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:ze.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:ze.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:ze.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+Tt.asClassName(Cle),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:ze.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:ze.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+Tt.asClassName(G7),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:ze.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})},Oc=class extends xA{constructor(e,t){super(e);this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new cn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(i=>this._onSashDrag(i)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){let t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){let i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Gd.ENTIRE_DIFF_OVERVIEW_WIDTH:0),n=Math.floor((e||.5)*i),o=Math.floor(.5*i);return n=this._disableSash?o:n||o,i>Oc.MINIMUM_EDITOR_WIDTH*2?(n<Oc.MINIMUM_EDITOR_WIDTH&&(n=Oc.MINIMUM_EDITOR_WIDTH),n>i-Oc.MINIMUM_EDITOR_WIDTH&&(n=i-Oc.MINIMUM_EDITOR_WIDTH)):n=o,this._sashPosition!==n&&(this._sashPosition=n,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){let i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Gd.ENTIRE_DIFF_OVERVIEW_WIDTH:0),n=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=n/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,i){let n=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new Q7(e,t,i,n,o).getViewZones()}_getOriginalEditorDecorations(e,t,i){let n=this._dataSource.getOriginalEditor(),o=String(this._removeColor),s={decorations:[],overviewZones:[]},a=n.getModel(),l=n._getViewModel();for(let c of e)if(vb(c)){s.decorations.push({range:new L(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:i?So.lineDeleteWithSign:So.lineDelete}),(!bb(c)||!c.charChanges)&&s.decorations.push(Xd(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,So.charDeleteWholeLine));let d=rC(a,l,c.originalStartLineNumber,c.originalEndLineNumber);if(s.overviewZones.push(new Kf(d.startLineNumber,d.endLineNumber,o)),c.charChanges){for(let h of c.charChanges)if(vb(h))if(t)for(let u=h.originalStartLineNumber;u<=h.originalEndLineNumber;u++){let m,p;u===h.originalStartLineNumber?m=h.originalStartColumn:m=a.getLineFirstNonWhitespaceColumn(u),u===h.originalEndLineNumber?p=h.originalEndColumn:p=a.getLineLastNonWhitespaceColumn(u),s.decorations.push(Xd(u,m,u,p,So.charDelete))}else s.decorations.push(Xd(h.originalStartLineNumber,h.originalStartColumn,h.originalEndLineNumber,h.originalEndColumn,So.charDelete))}}return s}_getModifiedEditorDecorations(e,t,i){let n=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=n.getModel(),l=n._getViewModel();for(let c of e)if(bb(c)){s.decorations.push({range:new L(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?So.lineInsertWithSign:So.lineInsert}),(!vb(c)||!c.charChanges)&&s.decorations.push(Xd(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,So.charInsertWholeLine));let d=rC(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(s.overviewZones.push(new Kf(d.startLineNumber,d.endLineNumber,o)),c.charChanges){for(let h of c.charChanges)if(bb(h))if(t)for(let u=h.modifiedStartLineNumber;u<=h.modifiedEndLineNumber;u++){let m,p;u===h.modifiedStartLineNumber?m=h.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(u),u===h.modifiedEndLineNumber?p=h.modifiedEndColumn:p=a.getLineLastNonWhitespaceColumn(u),s.decorations.push(Xd(u,m,u,p,So.charInsert))}else s.decorations.push(Xd(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,So.charInsert))}}return s}};Oc.MINIMUM_EDITOR_WIDTH=100;var Q7=class extends Pu{constructor(e,t,i,n,o){super(e,t,i,n,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}},DA=class extends xA{constructor(e,t){super(e);this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(i=>{this._decorationsLeft!==i.decorationsLeft&&(this._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,n){let o=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new J7(e,t,i,o,s,n).getViewZones()}_getOriginalEditorDecorations(e,t,i){let n=String(this._removeColor),o={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),a=s.getModel(),l=s._getViewModel();for(let c of e)if(vb(c)){o.decorations.push({range:new L(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:So.lineDeleteMargin});let d=rC(a,l,c.originalStartLineNumber,c.originalEndLineNumber);o.overviewZones.push(new Kf(d.startLineNumber,d.endLineNumber,n))}return o}_getModifiedEditorDecorations(e,t,i){let n=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=n.getModel(),l=n._getViewModel();for(let c of e)if(bb(c)){s.decorations.push({range:new L(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?So.lineInsertWithSign:So.lineInsert});let d=rC(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(s.overviewZones.push(new Kf(d.startLineNumber,d.endLineNumber,o)),c.charChanges){for(let h of c.charChanges)if(bb(h))if(t)for(let u=h.modifiedStartLineNumber;u<=h.modifiedEndLineNumber;u++){let m,p;u===h.modifiedStartLineNumber?m=h.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(u),u===h.modifiedEndLineNumber?p=h.modifiedEndColumn:p=a.getLineLastNonWhitespaceColumn(u),s.decorations.push(Xd(u,m,u,p,So.charInsert))}else s.decorations.push(Xd(h.modifiedStartLineNumber,h.modifiedStartColumn,h.modifiedEndLineNumber,h.modifiedEndColumn,So.charInsert))}else s.decorations.push(Xd(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,So.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}},J7=class extends Pu{constructor(e,t,i,n,o,s){super(e,t,i,n,o);this._originalModel=n.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){let e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){let e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){let n=document.createElement("div");return n.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:n}}_produceModifiedFromDiff(e,t,i){let n=document.createElement("div");n.className=`view-lines line-delete ${vl}`;let o=document.createElement("div");o.className="inline-deleted-margin-view-zone";let s={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:n,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){let t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,n=t.get(43),o=t.get(29),s=n.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(58),u=t.get(129).decorationsWidth,m=t.get(104),p=t.get(87),_=t.get(82),v=t.get(44),C=this._lineBreaksComputer.finalize(),w=0;for(let S=0;S<this._pendingLineChange.length;S++){let D=this._pendingLineChange[S],I=this._pendingViewZones[S],A=I.domNode;Ti.applyFontInfoSlow(A,n);let O=I.marginDomNode;Ti.applyFontInfoSlow(O,n);let N=[];if(D.charChanges)for(let Te of D.charChanges)vb(Te)&&N.push(new cu(new L(Te.originalStartLineNumber,Te.originalStartColumn,Te.originalEndLineNumber,Te.originalEndColumn),"char-delete",0));let F=N.length>0,Y=wa(1e4),K=0,ee=0,ie=null;for(let Te=D.originalStartLineNumber;Te<=D.originalEndLineNumber;Te++){let Ne=Te-D.originalStartLineNumber,Fe=this._originalModel.getLineTokens(Te),ue=Fe.getLineContent(),ni=C[w++],Xt=ur.filter(N,Te,1,ue.length+1);if(ni){let zt=0;for(let pt of ni.breakOffsets){let Ai=Fe.sliceAndInflate(zt,pt,0),qn=ue.substring(zt,pt);K=Math.max(K,this._renderOriginalLine(ee++,qn,Ai,ur.extractWrapped(Xt,zt,pt),F,l,c,n,o,d,u,m,p,_,v,i,Y,O)),zt=pt}for(ie||(ie=[]);ie.length<Ne;)ie[ie.length]=1;ie[Ne]=ni.breakOffsets.length,I.heightInLines+=ni.breakOffsets.length-1;let ri=document.createElement("div");ri.className="line-delete",e.original.push({afterLineNumber:Te,afterColumn:0,heightInLines:ni.breakOffsets.length-1,domNode:e6(),marginDomNode:ri})}else K=Math.max(K,this._renderOriginalLine(ee++,ue,Fe,Xt,F,l,c,n,o,d,u,m,p,_,v,i,Y,O))}K+=a;let Ee=Y.build(),Le=X7?X7.createHTML(Ee):Ee;if(A.innerHTML=Le,I.minWidthInPx=K*s,ie){let Te=D.originalEndLineNumber-D.originalStartLineNumber;for(;ie.length<=Te;)ie[ie.length]=1}I.diff.viewLineCounts=ie}e.original.sort((S,D)=>S.afterLineNumber-D.afterLineNumber)}_renderOriginalLine(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_,v,C,w){C.appendASCIIString('<div class="view-line'),o||C.appendASCIIString(" char-delete"),C.appendASCIIString('" style="top:'),C.appendASCIIString(String(e*d)),C.appendASCIIString('px;width:1000000px;">');let S=mr.isBasicASCII(t,s),D=mr.containsRTL(t,S,a),I=uf(new Bs(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,S,D,0,i,n,v,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,u,m,p,_!==Zn.OFF,null),C);if(C.appendASCIIString("</div>"),this._renderIndicators){let A=document.createElement("div");A.className=`delete-sign ${Tt.asClassName(G7)}`,A.setAttribute("style",`position:absolute;top:${e*d}px;width:${h}px;height:${d}px;right:0;`),w.appendChild(A)}return I.characterMapping.getAbsoluteOffset(I.characterMapping.length)}};function Sle(r,e){return Ur(r,e,["off","on","inherit"])}function bb(r){return r.modifiedEndLineNumber>0}function vb(r){return r.originalEndLineNumber>0}function e6(){let r=document.createElement("div");return r.className="diagonal-fill",r}function rC(r,e,t,i){let n=r.getLineCount();return t=Math.min(n,Math.max(1,t)),i=Math.min(n,Math.max(1,i)),e.coordinatesConverter.convertModelRangeToViewRange(new L(t,r.getLineMinColumn(t),i,r.getLineMaxColumn(i)))}function t6(r,e){return{enableSplitViewResizing:je(r.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:je(r.renderSideBySide,e.renderSideBySide),maxComputationTime:Y0(r.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Y0(r.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:je(r.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:je(r.renderIndicators,e.renderIndicators),originalEditable:je(r.originalEditable,e.originalEditable),diffCodeLens:je(r.diffCodeLens,e.diffCodeLens),renderOverviewRuler:je(r.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Sle(r.diffWordWrap,e.diffWordWrap)}}function xle(r,e){return{enableSplitViewResizing:r.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:r.renderSideBySide!==e.renderSideBySide,maxComputationTime:r.maxComputationTime!==e.maxComputationTime,maxFileSize:r.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:r.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:r.renderIndicators!==e.renderIndicators,originalEditable:r.originalEditable!==e.originalEditable,diffCodeLens:r.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:r.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:r.diffWordWrap!==e.diffWordWrap}}Be((r,e)=>{let t=r.getColor(CR);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));let i=r.getColor(SR);i&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${i}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${i}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${i}; }`));let n=r.getColor(uH);n&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${r.type==="hc"?"dashed":"solid"} ${n}; }`);let o=r.getColor(mH);o&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${r.type==="hc"?"dashed":"solid"} ${o}; }`);let s=r.getColor(vc);s&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${s}; }`);let a=r.getColor(fH);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);let l=r.getColor(If);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);let c=r.getColor(Of);c&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${c};
			}
		`);let d=r.getColor(Tf);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${d};
			}
		`);let h=r.getColor(gH);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${h} 12.5%,
			#0000 12.5%, #0000 50%,
			${h} 50%, ${h} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var Au=Ie("themeService");var Nt=Ie("keybindingService");var LA=class extends H{constructor(){super();this._onCodeEditorAdd=this._register(new M),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new M),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new M),this._onDiffEditorRemove=this._register(new M),this._onDecorationTypeRegistered=this._register(new M),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null,t=this.listCodeEditors();for(let i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}setModelProperty(e,t,i){let n=e.toString(),o;this._modelProperties.has(n)?o=this._modelProperties.get(n):(o=new Map,this._modelProperties.set(n,o)),o.set(t,i)}getModelProperty(e,t){let i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}};var Ele=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Dle=function(r,e){return function(t,i){e(t,i,r)}},i6=class{constructor(e,t,i){this._parent=e,this._editorId=t,this._styleSheet=i,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Tp(e,this._styleSheet)}},n6=class{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Tp(e,this._styleSheet)}},LD=class extends LA{constructor(e,t){super();this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new n6(un())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();let t=e.getContainerDomNode();if(!Qh(t))return this._getOrCreateGlobalStyleSheet();let i=e.getId();if(!this._editorStyleSheets.has(i)){let n=new i6(this,i,un(t));this._editorStyleSheets.set(i,n)}return this._editorStyleSheets.get(i)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,i,n,o){let s=this._decorationOptionProviders.get(t);if(!s){let a=this._getOrCreateStyleSheet(o),l={styleSheet:a,key:t,parentTypeKey:n,options:i||Object.create(null)};n?s=new r6(this._themeService,a,l):s=new o6(e,this._themeService,a,l),this._decorationOptionProviders.set(t,s),this._onDecorationTypeRegistered.fire(t)}s.refCount++}removeDecorationType(e){let t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorations(e))))}resolveDecorationOptions(e,t){let i=this._decorationOptionProviders.get(e);if(!i)throw new Error("Unknown decoration type key: "+e);return i.getOptions(this,t)}};LD=Ele([Dle(1,ht)],LD);var r6=class{constructor(e,t,i){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=i.parentTypeKey,this.refCount=0,this._beforeContentRules=new sC(3,i,e),this._afterContentRules=new sC(4,i,e)}getOptions(e,t){let i=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(i.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(i.afterContentClassName=this._afterContentRules.className),i}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}},o6=class{constructor(e,t,i,n){this._disposables=new G,this.description=e,this._styleSheet=i,this._styleSheet.ref(),this.refCount=0;let o=h=>{let u=new sC(h,n,t);if(this._disposables.add(u),u.hasContent)return u.className},s=h=>{let u=new sC(h,n,t);return this._disposables.add(u),u.hasContent?{className:u.className,hasLetterSpacing:u.hasLetterSpacing}:null};this.className=o(0);let a=s(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=o(3),this.afterContentClassName=o(4),n.options.beforeInjectedText&&n.options.beforeInjectedText.contentText){let h=s(5);this.beforeInjectedText={content:n.options.beforeInjectedText.contentText,inlineClassName:h==null?void 0:h.className,inlineClassNameAffectsLetterSpacing:(h==null?void 0:h.hasLetterSpacing)||n.options.beforeInjectedText.affectsLetterSpacing}}if(n.options.afterInjectedText&&n.options.afterInjectedText.contentText){let h=s(6);this.afterInjectedText={content:n.options.afterInjectedText.contentText,inlineClassName:h==null?void 0:h.className,inlineClassNameAffectsLetterSpacing:(h==null?void 0:h.hasLetterSpacing)||n.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=o(2);let l=n.options;this.isWholeLine=Boolean(l.isWholeLine),this.stickiness=l.rangeBehavior;let c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,d=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof c!="undefined"||typeof d!="undefined")&&(this.overviewRuler={color:c||d,darkColor:d||c,position:l.overviewRulerLane||Qn.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}},oC={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"},sC=class{constructor(e,t,i){this._theme=i.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let n=kD.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(n=n+" "+kD.getClassName(this._providerArgs.parentTypeKey,e)),this._className=n,this._unThemedSelector=kD.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=i.onDidColorThemeChange(o=>{this._theme=i.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){let e=this._providerArgs.options,t,i,n;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),i=this.getCSSTextForModelDecorationClassName(e.light),n=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),i=this.getCSSTextForModelDecorationInlineClassName(e.light),n=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),i=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),i=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}let o=this._providerArgs.styleSheet,s=!1;t.length>0&&(o.insertRule(`${this._unThemedSelector} {${t}}`,0),s=!0),i.length>0&&(o.insertRule(`.vs${this._unThemedSelector} {${i}}`,0),s=!0),n.length>0&&(o.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${n}}`,0),s=!0),this._hasContent=s}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";let t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";let t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";let t=[];if(typeof e!="undefined"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath!="undefined"&&t.push(Dr(oC.contentIconPath,Ns(ve.revive(e.contentIconPath)))),typeof e.contentText=="string"){let n=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(Dr(oC.contentText,n))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";let t=[];return typeof e.gutterIconPath!="undefined"&&(t.push(Dr(oC.gutterIconPath,Ns(ve.revive(e.gutterIconPath)))),typeof e.gutterIconSize!="undefined"&&t.push(Dr(oC.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(Dr("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,i){let n=i.length;for(let o of t){let s=this.resolveValue(e[o]);typeof s=="string"&&i.push(Dr(oC[o],s))}return i.length!==n}resolveValue(e){if(_U(e)){this._usesThemeColors=!0;let t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}},kD=class{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,i){let n=".monaco-editor ."+this.getClassName(e,i);return t&&(n=n+"."+this.getClassName(t,i)),i===3?n+="::before":i===4&&(n+="::after"),n}};var Lle=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},s6=function(r,e){return function(t,i){e(t,i,r)}},wb=class extends LD{constructor(e,t,i){super(e,i);this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(let t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,i){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){let o=t.resource.scheme;if(o===Xe.http||o===Xe.https)return ex(t.resource.toString()),e}return null}let n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{let o={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){let i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};wb=Lle([s6(1,be),s6(2,ht)],wb);var kA=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Si=function(r,e){return function(t,i){e(t,i,r)}},kle=0,a6=!1;function Ile(r){if(!r){if(a6)return;a6=!0}PV(r||document.body)}var ID=class extends Nu{constructor(e,t,i,n,o,s,a,l,c,d){let h=Object.assign({},t);h.ariaLabel=h.ariaLabel||Zw.editorViewAccessibleLabel,h.ariaLabel=h.ariaLabel+";"+Zw.accessibilityHelpMessage;super(e,h,{},i,n,o,s,l,c,d);a instanceof Gw?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,Ile(h.ariaContainerElement)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let n="DYNAMIC_"+ ++kle,o=fe.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,o),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),H.None;let t=e.id,i=e.label,n=fe.and(fe.equals("editorId",this.getId()),fe.deserialize(e.precondition)),o=e.keybindings,s=fe.and(n,fe.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(m,...p)=>Promise.resolve(e.run(this,...p)),d=new G,h=this.getId()+":"+t;if(d.add(Ke.registerCommand(h,c)),a){let m={command:{id:h,title:i},when:n,group:a,order:l};d.add(tr.appendMenuItem(Ce.EditorContext,m))}if(Array.isArray(o))for(let m of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,m,c,s));let u=new Zy(h,i,i,n,c,this._contextKeyService);return this._actions[t]=u,d.add(Re(()=>{delete this._actions[t]})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof wb)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};ID=kA([Si(2,Ue),Si(3,it),Si(4,jt),Si(5,be),Si(6,Nt),Si(7,ht),Si(8,Vt),Si(9,pn)],ID);var OD=class extends ID{constructor(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_){let v=Object.assign({},t);Xw(u,v,!1);let C=d.registerEditorContainer(e);typeof v.theme=="string"&&d.setTheme(v.theme),typeof v.autoDetectHighContrast!="undefined"&&d.setAutoDetectHighContrast(Boolean(v.autoDetectHighContrast));let w=v.model;delete v.model;super(e,v,n,o,s,a,l,d,h,m);this._contextViewService=c,this._configurationService=u,this._standaloneThemeService=d,this._register(i),this._register(C);let S;if(typeof w=="undefined"?(S=IA(p,_,v.value||"",v.language||yo.text,void 0),this._ownsModel=!0):(S=w,this._ownsModel=!1),this._attachModel(S),S){let D={oldModelUrl:null,newModelUrl:S.uri};this._onDidChangeModel.fire(D)}}dispose(){super.dispose()}updateOptions(e){Xw(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};OD=kA([Si(3,Ue),Si(4,it),Si(5,jt),Si(6,be),Si(7,Nt),Si(8,bs),Si(9,Au),Si(10,Vt),Si(11,Mt),Si(12,pn),Si(13,Gt),Si(14,ui)],OD);var TD=class extends Gd{constructor(e,t,i,n,o,s,a,l,c,d,h,u,m,p,_){let v=Object.assign({},t);Xw(u,v,!0);let C=d.registerEditorContainer(e);typeof v.theme=="string"&&d.setTheme(v.theme),typeof v.autoDetectHighContrast!="undefined"&&d.setAutoDetectHighContrast(Boolean(v.autoDetectHighContrast));super(e,v,{},_,l,o,n,c,d,h,m,p);this._contextViewService=a,this._configurationService=u,this._standaloneThemeService=d,this._register(i),this._register(C),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){Xw(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast!="undefined"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(ID,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};TD=kA([Si(3,Ue),Si(4,be),Si(5,Nt),Si(6,bs),Si(7,Jn),Si(8,it),Si(9,Au),Si(10,Vt),Si(11,Mt),Si(12,Ho),Si(13,Xr),Si(14,$o)],TD);function IA(r,e,t,i,n){if(t=t||"",!i){let o=t.indexOf(`
`),s=t;return o!==-1&&(s=t.substring(0,o)),l6(r,t,e.createByFilepathOrFirstLine(n||null,s),n)}return l6(r,t,e.create(i),n)}function l6(r,e,t,i){return r.createModel(e,t,i)}var eg=Object.prototype.hasOwnProperty,c6=class{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(ba,0),this._register(Lc,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||ba}},tg=class extends H{constructor(e=!0,t=!1){super();this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,tg.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new c6,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(qd.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){tg.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},q8();let e=qd.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),ii.as(ya.Configuration).registerOverrideIdentifiers(qd.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){let t=e.id,i;eg.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){let i=t.id,n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)Py({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)Py({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)Py({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);FW(l)||Py({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){we(l)}}e.aliases.push(i);let o=null;if(typeof t.aliases!="undefined"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(let a of o)!a||a.length===0||e.aliases.push(a);let s=o!==null&&o.length>0;if(!(s&&o[0]===null)){let a=(s?o[0]:null)||i;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return eg.call(this._mimeTypesMap,e)?!0:eg.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return eg.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>eg.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>eg.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===ba?ba:eg.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let i=Y8(e,t);return this.extractModeIds(i.join(","))}};tg.instanceCount=0;var OA=class{constructor(e,t){this._selector=t,this.languageId=this._selector();let i;this._onDidChange=new M({onFirstListenerAdd:()=>{i=e(()=>this._evaluate())},onLastListenerRemove:()=>{i.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){let e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}},ig=class extends H{constructor(e=!1){super();this._onDidEncounterLanguage=this._register(new M),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new M({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,ig.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new tg(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){ig.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){let i=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return Ow(i,null)}getModeId(e){let t=this._registry.extractModeIds(e);return Ow(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new OA(this.onLanguagesMaybeChanged,()=>{let t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new OA(this.onLanguagesMaybeChanged,()=>{let i=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(i)})}_createModeAndGetLanguageIdentifier(e){let t=this.validateLanguageId(e||"plaintext")||ba;return this._getOrCreateMode(t),t}triggerMode(e){let t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);let t=this.validateLanguageId(e)||ba;this._onDidEncounterLanguage.fire(t)}}};ig.instanceCount=0;var Ole=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},TA=function(r,e){return function(t,i){e(t,i,r)}},ND=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._modeService=i,this._logService=n,this._hashTable=new Tc,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,i){let n=this._modeService.languageIdCodec.encodeLanguageId(i),o=this._hashTable.get(e,t,n),s;if(o)s=o.metadata,this._logService.getLevel()===Sa.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${dr.getForeground(s)}, fontStyle ${dr.getFontStyle(s).toString(2)}`);else{let a=this._legend.tokenTypes[e],l=[];if(a){let c=t;for(let h=0;c>0&&h<this._legend.tokenModifiers.length;h++)c&1&&l.push(this._legend.tokenModifiers[h]),c=c>>1;c>0&&this._logService.getLevel()===Sa.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));let d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);typeof d=="undefined"?s=2147483647:(s=0,typeof d.italic!="undefined"&&(s|=(d.italic?1:0)<<11|1),typeof d.bold!="undefined"&&(s|=(d.bold?2:0)<<11|2),typeof d.underline!="undefined"&&(s|=(d.underline?4:0)<<11|4),d.foreground&&(s|=d.foreground<<14|8),s===0&&(s=2147483647))}else this._logService.getLevel()===Sa.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),s=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,s),this._logService.getLevel()===Sa.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${dr.getForeground(s)}, fontStyle ${dr.getFontStyle(s).toString(2)}`)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};ND=Ole([TA(1,ht),TA(2,ui),TA(3,hr)],ND);function RD(r,e,t){let i=r.data,n=r.data.length/5|0,o=Math.max(Math.ceil(n/1024),400),s=[],a=0,l=1,c=0;for(;a<n;){let d=a,h=Math.min(d+o,n);if(h<n){let S=h;for(;S-1>d&&i[5*S]===0;)S--;if(S-1===d){let D=h;for(;D+1<n&&i[5*D]===0;)D++;h=D}else h=S}let u=new Uint32Array((h-d)*4),m=0,p=0,_=0,v=0,C=0;for(;a<h;){let S=5*a,D=i[S],I=i[S+1],A=l+D|0,O=D===0?c+I|0:I,N=i[S+2],F=i[S+3],Y=i[S+4],K=e.getMetadata(F,Y,t);K!==2147483647&&(p===0&&(p=A),_===A&&C>O&&(e.warnOverlappingSemanticTokens(A,O+1),v<O?u[m-4+2]=O:m-=4),u[m]=A-p,u[m+1]=O,u[m+2]=O+N,u[m+3]=K,m+=4,_=A,v=O,C=O+N),l=A,c=O,a++}m!==u.length&&(u=u.subarray(0,m));let w=new k_(p,new L_(u));s.push(w)}return s}var d6=class{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}},Tc=class{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Tc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Tc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Tc._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){let n=this._hashFunc(e,t,i),o=this._elements[n];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let o=this._elements;this._currentLengthIndex++,this._currentLength=Tc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Tc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Tc._nullOutEntries(this._elements,this._currentLength);for(let s of o){let a=s;for(;a;){let l=a.next;a.next=null,this._add(a),a=l}}}this._add(new d6(e,t,i,n))}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Tc._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function Tle(r){for(let e=0,t=r.length;e<t;e+=4){let i=r[e+0],n=r[e+1],o=r[e+2],s=r[e+3];r[e+0]=s,r[e+1]=o,r[e+2]=n,r[e+3]=i}}function Nle(r){let e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return K0()||Tle(e),Km.wrap(e)}function NA(r){let e=new Uint32Array(Rle(r)),t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(let i of r.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return Nle(e)}function Rle(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(let t of r.deltas)t.data&&(e+=t.data.length)}return e}var ju=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function aC(r){return r&&!!r.data}function RA(r){return r&&Array.isArray(r.edits)}var h6=class{constructor(e,t){this.provider=e,this.tokens=t}};function PA(r){return _d.has(r)}function Ple(r){let e=_d.orderedGroups(r);return e.length>0?e[0]:[]}function AA(r,e,t,i){return ju(this,void 0,void 0,function*(){let n=Ple(r),o=yield Promise.all(n.map(s=>ju(this,void 0,void 0,function*(){let a;try{a=yield s.provideDocumentSemanticTokens(r,s===e?t:null,i)}catch(l){Qt(l),a=null}return(!a||!aC(a)&&!RA(a))&&(a=null),new h6(s,a)})));for(let s of o)if(s.tokens)return s;return o.length>0?o[0]:null})}function Ale(r){let e=_d.orderedGroups(r);return e.length>0?e[0]:null}var u6=class{constructor(e,t){this.provider=e,this.tokens=t}};function m6(r){return rf.has(r)}function f6(r){let e=rf.orderedGroups(r);return e.length>0?e[0]:[]}function PD(r,e,t){return ju(this,void 0,void 0,function*(){let i=f6(r),n=yield Promise.all(i.map(o=>ju(this,void 0,void 0,function*(){let s;try{s=yield o.provideDocumentRangeSemanticTokens(r,e,t)}catch(a){Qt(a),s=null}return(!s||!aC(s))&&(s=null),new u6(o,s)})));for(let o of n)if(o.tokens)return o;return n.length>0?n[0]:null})}Ke.registerCommand("_provideDocumentSemanticTokensLegend",(r,...e)=>ju(void 0,void 0,void 0,function*(){let[t]=e;xt(t instanceof ve);let i=r.get(Gt).getModel(t);if(!i)return;let n=Ale(i);return n?n[0].getLegend():r.get(jt).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Ke.registerCommand("_provideDocumentSemanticTokens",(r,...e)=>ju(void 0,void 0,void 0,function*(){let[t]=e;xt(t instanceof ve);let i=r.get(Gt).getModel(t);if(!i)return;if(!PA(i))return r.get(jt).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());let n=yield AA(i,null,null,Me.None);if(!n)return;let{provider:o,tokens:s}=n;if(!s||!aC(s))return;let a=NA({id:0,type:"full",data:s.data});return s.resultId&&o.releaseDocumentSemanticTokens(s.resultId),a}));Ke.registerCommand("_provideDocumentRangeSemanticTokensLegend",(r,...e)=>ju(void 0,void 0,void 0,function*(){let[t,i]=e;xt(t instanceof ve);let n=r.get(Gt).getModel(t);if(!n)return;let o=f6(n);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!i||!L.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();let s=yield PD(n,L.lift(i),Me.None);if(!!s)return s.provider.getLegend()}));Ke.registerCommand("_provideDocumentRangeSemanticTokens",(r,...e)=>ju(void 0,void 0,void 0,function*(){let[t,i]=e;xt(t instanceof ve),xt(L.isIRange(i));let n=r.get(Gt).getModel(t);if(!n)return;let o=yield PD(n,L.lift(i),Me.None);if(!(!o||!o.tokens))return NA({id:0,type:"full",data:o.tokens.data})}));var jle=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ng=function(r,e){return function(t,i){e(t,i,r)}};function Mu(r){return r.toString()}function g6(r){let e=new $p,t=r.createSnapshot(),i;for(;i=t.read();)e.update(i);return e.digest()}var p6=class{constructor(e,t,i){this._modelEventListeners=new G,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}},Mle=ji||We?1:2,_6=class{constructor(e,t,i,n,o,s,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=o,this.sha1=s,this.versionId=a,this.alternativeVersionId=l}},lC=class cC extends H{constructor(e,t,i,n,o,s,a){super();this._configurationService=e,this._resourcePropertiesService=t,this._themeService=i,this._logService=n,this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onModelAdded=this._register(new M),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new M),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new M),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new v6(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new b6(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var i;let n=Bn.tabSize;if(e.editor&&typeof e.editor.tabSize!="undefined"){let m=parseInt(e.editor.tabSize,10);isNaN(m)||(n=m),n<1&&(n=1)}let o=n;if(e.editor&&typeof e.editor.indentSize!="undefined"&&e.editor.indentSize!=="tabSize"){let m=parseInt(e.editor.indentSize,10);isNaN(m)||(o=m),o<1&&(o=1)}let s=Bn.insertSpaces;e.editor&&typeof e.editor.insertSpaces!="undefined"&&(s=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=Mle,l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Bn.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace!="undefined"&&(c=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let d=Bn.detectIndentation;e.editor&&typeof e.editor.detectIndentation!="undefined"&&(d=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let h=Bn.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations!="undefined"&&(h=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let u=Bn.bracketPairColorizationOptions;return((i=e.editor)===null||i===void 0?void 0:i.bracketPairColorization)&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:n,indentSize:o,insertSpaces:s,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:h,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Wr===3||Wr===2?`
`:`\r
`}_shouldRestoreUndoStack(){let e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){let n=this._modelCreationOptionsByLanguageAndResource[e+t];if(!n){let o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),s=this._getEOL(t,e);n=cC._readModelOptions({editor:o,eol:s},i),this._modelCreationOptionsByLanguageAndResource[e+t]=n}return n}_updateModelOptions(){let e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){let o=t[i],s=this._models[o],a=s.model.getLanguageId(),l=s.model.uri,c=e[a+l],d=this.getCreationOptions(a,l,s.model.isForSimpleWidget);cC._setModelOptionsForModel(s.model,d,c)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&$r(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Mu(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){let t=this._disposedModels.get(Mu(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Mu(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){let i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){let o=this.getCreationOptions(t,i,n),s=new Hn(e,o,t,i,this._undoRedoService,this._modeService,this._languageConfigurationService);if(i&&this._disposedModels.has(Mu(i))){let c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),h=g6(s)===c.sha1;if(h||c.sharesUndoRedoStack){for(let u of d.past)cc(u)&&u.matchesResource(i)&&u.setModel(s);for(let u of d.future)cc(u)&&u.matchesResource(i)&&u.setModel(s);this._undoRedoService.setElementsValidFlag(i,!0,u=>cc(u)&&u.matchesResource(i)),h&&(s._overwriteVersionId(c.versionId),s._overwriteAlternativeVersionId(c.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}let a=Mu(s.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");let l=new p6(s,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,n=!1){let o;return t?(o=this._createModelData(e,t.languageId,i,n),this.setMode(o.model,t)):o=this._createModelData(e,Lc,i,n),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;let i=this._models[Mu(e.uri)];!i||i.setLanguage(t)}getModels(){let e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){let o=t[i];e.push(this._models[o].model)}return e}getModel(e){let t=Mu(e),i=this._models[t];return i?i.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Xe.file||e.scheme===Xe.vscodeRemote||e.scheme===Xe.userData||e.scheme===Xe.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){let t=Mu(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),o=!1,s=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(let c of l.past)cc(c)&&c.matchesResource(e.uri)&&(o=!0,s+=c.heapSize(e.uri),c.setModel(e.uri));for(let c of l.future)cc(c)&&c.matchesResource(e.uri)&&(o=!0,s+=c.heapSize(e.uri),c.setModel(e.uri))}}let a=cC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!n&&s>a){let l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-s),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>cc(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new _6(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,s,g6(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){let l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){let i=t.oldLanguage,n=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);cC._setModelOptionsForModel(e,s,o),this._onModelModeChanged.fire({model:e,oldModeId:i})}};lC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;lC=jle([ng(0,Mt),ng(1,kx),ng(2,ht),ng(3,hr),ng(4,fc),ng(5,ui),ng(6,bd)],lC);var AD="editor.semanticHighlighting";function jD(r,e,t){var i;let n=(i=t.getValue(AD,{overrideIdentifier:r.getLanguageId(),resource:r.uri}))===null||i===void 0?void 0:i.enabled;return typeof n=="boolean"?n:e.getColorTheme().semanticHighlighting}var b6=class extends H{constructor(e,t,i,n){super();this._watchers=Object.create(null),this._semanticStyling=n;let o=l=>{this._watchers[l.uri.toString()]=new Fu(l,t,this._semanticStyling)},s=(l,c)=>{c.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){let c=this._watchers[l.uri.toString()];jD(l,t,i)?c||o(l):c&&s(l,c)}};this._register(e.onModelAdded(l=>{jD(l,t,i)&&o(l)})),this._register(e.onModelRemoved(l=>{let c=this._watchers[l.uri.toString()];c&&s(l,c)})),this._register(i.onDidChangeConfiguration(l=>{l.affectsConfiguration(AD)&&a()})),this._register(t.onDidColorThemeChange(a))}},v6=class extends H{constructor(e,t,i){super();this._themeService=e,this._modeService=t,this._logService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new ND(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}},w6=class{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}},Fu=class extends H{constructor(e,t,i){super();this._isDisposed=!1,this._model=e,this._semanticStyling=i,this._fetchDocumentSemanticTokens=this._register(new dt(()=>this._fetchDocumentSemanticTokensNow(),Fu.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let n=()=>{Ge(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let o of _d.all(e))typeof o.onDidChange=="function"&&this._documentProvidersChangeListeners.push(o.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};n(),this._register(_d.onDidChange(()=>{n(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(o=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!PA(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}let e=new Di,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,n=AA(this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e;let o=[],s=this._model.onDidChangeContent(a=>{o.push(a)});n.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,o);else{let{provider:l,tokens:c}=a,d=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,c||null,d,o)}},a=>{a&&(co(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||we(a),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,i,n,o){for(let s=0;s<o;s++)i[n+s]=e[t+s]}_setDocumentSemanticTokens(e,t,i,n){let o=this._currentDocumentResponse,s=()=>{n.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),s();return}if(RA(t)){if(!o){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(let u of t.edits)a+=(u.data?u.data.length:0)-u.deleteCount;let l=o.data,c=new Uint32Array(l.length+a),d=l.length,h=c.length;for(let u=t.edits.length-1;u>=0;u--){let m=t.edits[u],p=d-(m.start+m.deleteCount);p>0&&(Fu._copy(l,d-p,c,h-p,p),h-=p),m.data&&(Fu._copy(m.data,0,c,h-m.data.length,m.data.length),h-=m.data.length),d=m.start}d>0&&Fu._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(aC(t)){this._currentDocumentResponse=new w6(e,t.resultId,t.data);let a=RD(t,i,this._model.getLanguageId());if(n.length>0)for(let l of n)for(let c of a)for(let d of l.changes)c.applyEdit(d.range,d.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);s()}};Fu.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;var y6=class{constructor(e,t,i,n,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=o}};function Fle(r){if(!r||!Array.isArray(r))return[];let e=[],t=0;for(let i=0,n=r.length;i<n;i++){let o=r[i],s=-1;if(typeof o.fontStyle=="string"){s=0;let c=o.fontStyle.split(" ");for(let d=0,h=c.length;d<h;d++)switch(c[d]){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new y6(o.token||"",i,s,a,l)}return e}function Ble(r,e){r.sort((d,h)=>{let u=zle(d.token,h.token);return u!==0?u:d.index-h.index});let t=0,i="000000",n="ffffff";for(;r.length>=1&&r[0].token==="";){let d=r.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(n=d.background)}let o=new C6;for(let d of e)o.getId(d);let s=o.getId(i),a=o.getId(n),l=new FD(t,s,a),c=new BD(l);for(let d=0,h=r.length;d<h;d++){let u=r[d];c.insert(u.token,u.fontStyle,o.getId(u.foreground),o.getId(u.background))}return new MD(o,c)}var Wle=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,C6=class{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;let t=e.match(Wle);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=q.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}},MD=class{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(Fle(e),t)}static createFromParsedTokenTheme(e,t){return Ble(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i=="undefined"){let n=this._match(t),o=Vle(t);i=(n.metadata|o<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}},Ule=/\b(comment|string|regex|regexp)\b/;function Vle(r){let e=r.match(Ule);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function zle(r,e){return r<e?-1:r>e?1:0}var FD=class{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new FD(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}},BD=class{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));let o=this._children.get(i);return typeof o!="undefined"?o.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}let o=e.indexOf("."),s,a;o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(s);typeof l=="undefined"&&(l=new BD(this._mainRule.clone()),this._children.set(s,l)),l.insert(a,t,i,n)}};function S6(r){let e=[];for(let t=1,i=r.length;t<i;t++){let n=r[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}var x6={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Yr]:"#FFFFFE",[Na]:"#000000",[Ly]:"#E5EBF1",[q_]:"#D3D3D3",[Y_]:"#939393",[ky]:"#ADD6FF4D"}},E6={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Yr]:"#1E1E1E",[Na]:"#D4D4D4",[Ly]:"#3A3D41",[q_]:"#404040",[Y_]:"#707070",[ky]:"#ADD6FF26"}},D6={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Yr]:"#000000",[Na]:"#FFFFFF",[q_]:"#FFFFFF",[Y_]:"#FFFFFF"}};function L6(){let r=new M,e=V7();return e.onDidChange(()=>r.fire()),{onDidChange:r.event,getCSS(){let t={},i=o=>{let s=o.defaults;for(;Tt.isThemeIcon(s);){let l=e.getIcon(s.id);if(!l)return;s=l.defaults}let a=s.fontId;if(a){let l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${o.id}:before { content: '${s.fontCharacter}'; font-family: ${HO(a)}; }`}return`.codicon-${o.id}:before { content: '${s.fontCharacter}'; }`},n=[];for(let o of e.getIcons()){let s=i(o);s&&n.push(s)}for(let o in t){let a=t[o].definition.src.map(l=>`${Ns(l.location)} format('${l.format}')`).join(", ");n.push(`@font-face { src: ${a}; font-family: ${HO(o)}; font-display: block; }`)}return n.join(`
`)}}}var rg="vs",WD="vs-dark",yb="hc-black",Hle=ii.as(vR.ColorContribution),$le=ii.as(xN.ThemingContribution),jA=class{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let i=t.base;e.length>0?(UD(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let e=new Map;for(let t in this.themeData.colors)e.set(t,q.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=MA(this.themeData.base);for(let i in t.colors)e.has(i)||e.set(i,q.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){let i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Hle.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case rg:return qr.LIGHT;case yb:return qr.HIGH_CONTRAST;default:return qr.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let o=MA(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}let i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){let o={token:""};i&&(o.foreground=i),n&&(o.background=n),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=MD.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){let o=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=dr.getForeground(o),a=dr.getFontStyle(o);return{foreground:s,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4)}}};function UD(r){return r===rg||r===WD||r===yb}function MA(r){switch(r){case rg:return x6;case WD:return E6;case yb:return D6}}function FA(r){let e=MA(r);return new jA(r,e)}var BA=class extends H{constructor(){super();this._onColorThemeChange=this._register(new M),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(rg,FA(rg)),this._knownThemes.set(WD,FA(WD)),this._knownThemes.set(yb,FA(yb));let e=L6();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(rg),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),AW("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return Qh(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=un(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),H.None}_registerShadowDomContainer(e){let t=un(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!UD(t.base)&&!UD(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new jA(e,t)),UD(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(rg),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){let e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(yb):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};$le.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));let n=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(S6(n)),this._themeCSS=e.join(`
`),this._updateCSS(),ti.setColorMap(n),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}};var Kle=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},qle=function(r,e){return function(t,i){e(t,i,r)}},dC="data-keybinding-context",VD=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){let t=this._value[e];return typeof t=="undefined"&&this._parent?this._parent.getValue(e):t}},og=class extends VD{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};og.INSTANCE=new og;var Cb=class extends VD{constructor(e,t,i){super(e,null);this._configurationService=t,this._values=Gl.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===6){let o=Array.from(ot.map(this._values,([s])=>s));this._values.clear(),i.fire(new UA(o))}else{let o=[];for(let s of n.affectedKeys){let a=`config.${s}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...ot.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}i.fire(new UA(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Cb._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);let t=e.substr(Cb._keyPrefix.length),i=this._configurationService.getValue(t),n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};Cb._keyPrefix="config.";var k6=class{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue=="undefined"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}},WA=class{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}},UA=class{constructor(e){this.keys=e}affectsSome(e){for(let t of this.keys)if(e.has(t))return!0;return!1}},I6=class{constructor(e){this.events=e}affectsSome(e){for(let t of this.events)if(t.affectsSome(e))return!0;return!1}},VA=class{constructor(e){this._onDidChangeContext=new Am({merge:t=>new I6(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new k6(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new O6(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");let t=this.getContextValuesContainer(this._myContextId);return xd.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;let i=this.getContextValuesContainer(this._myContextId);!i||i.setValue(e,t)&&this._onDidChangeContext.fire(new WA(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new WA(e))}getContext(e){return this._isDisposed?og.INSTANCE:this.getContextValuesContainer(Yle(e))}},zD=class extends VA{constructor(e){super(0);this._contexts=new Map,this._toDispose=new G,this._lastContextId=0;let t=new Cb(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?og.INSTANCE:this._contexts.get(e)||og.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new VD(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};zD=Kle([qle(0,Mt)],zD);var O6=class extends VA{constructor(e,t){super(e.createChildContext());if(this._parentChangeListener=new Mi,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(dC)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(dC,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(dC),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?og.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}};function Yle(r){for(;r;){if(r.hasAttribute(dC)){let e=r.getAttribute(dC);return e?parseInt(e,10):NaN}r=r.parentElement}return 0}Ke.registerCommand(gV,function(r,e,t){r.get(be).createKey(String(e),t)});Ke.registerCommand({id:"getContextKeyInfo",handler(){return[..._e.all()].sort((r,e)=>r.key.localeCompare(e.key))},description:{description:g("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Ke.registerCommand("_generateContextKeyInfo",function(){let r=[],e=new Set;for(let t of _e.all())e.has(t.key)||(e.add(t.key),r.push(t));r.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(r,void 0,2))});function zA(r){let e=r.definition;for(;e instanceof ge;)e=e.definition;return`.codicon-${r.id}:before { content: '${e.fontCharacter}'; }`}var Dn;(function(r){function e(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};let a=Math.max(o.start,s.start),l=Math.min(o.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}r.intersect=e;function t(o){return o.end-o.start<=0}r.isEmpty=t;function i(o,s){return!t(e(o,s))}r.intersects=i;function n(o,s){let a=[],l={start:o.start,end:Math.min(s.start,o.end)},c={start:Math.max(s.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}r.relativeComplement=n})(Dn||(Dn={}));var Bu;(function(r){r[r.AVOID=0]="AVOID",r[r.ALIGN=1]="ALIGN"})(Bu||(Bu={}));function sg(r,e,t){let i=t.mode===Bu.ALIGN?t.offset:t.offset+t.size,n=t.mode===Bu.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=r-i?i:e<=n?n-e:Math.max(r-e,0):e<=n?n-e:e<=r-i?i:0}var Wu=class extends H{constructor(e,t){super();this.container=null,this.delegate=null,this.toDisposeOnClean=H.None,this.toDisposeOnSetContainer=H.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=oe(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Nn(this.view),this.setContainer(e,t),this._register(Re(()=>this.setContainer(null,1)))}setContainer(e,t){var i;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=oe(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let o=document.createElement("style");o.textContent=Zle,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(oe("slot"))}else this.container.appendChild(this.view);let n=new G;Wu.BUBBLE_UP_EVENTS.forEach(o=>{n.add(Zt(this.container,o,s=>{this.onDOMEvent(s,!1)}))}),Wu.BUBBLE_DOWN_EVENTS.forEach(o=>{n.add(Zt(this.container,o,s=>{this.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=n}}show(e){this.isVisible()&&this.hide(),Li(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Wn(this.view),this.toDisposeOnClean=e.render(this.view)||H.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(To&&Wm.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(J1(e)){let h=ci(e);t={top:h.top,left:h.left,width:h.width,height:h.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};let i=Po(this.view),n=sw(this.view),o=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0,l,c;if(a===0){let h={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},u={offset:t.left,size:t.width,position:s===0?0:1,mode:Bu.ALIGN};l=sg(window.innerHeight,n,h)+window.pageYOffset,Dn.intersects({start:l,end:l+n},{start:h.offset,end:h.offset+h.size})&&(u.mode=Bu.AVOID),c=sg(window.innerWidth,i,u)}else{let h={offset:t.left,size:t.width,position:s===0?0:1},u={offset:t.top,size:t.height,position:o===0?0:1,mode:Bu.ALIGN};c=sg(window.innerWidth,i,h),Dn.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(u.mode=Bu.AVOID),l=sg(window.innerHeight,n,u)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(s===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let d=ci(this.container);this.view.style.top=`${l-(this.useFixedPosition?ci(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?ci(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){let t=this.delegate;this.delegate=null,(t==null?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),Nn(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Ts(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Wu.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Wu.BUBBLE_DOWN_EVENTS=["click"];var Zle=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function T6(...r){return function(e,t){for(let i=0,n=r.length;i<n;i++){let o=r[i](e,t);if(o)return o}return null}}var HD=Gle.bind(void 0,!0);function Gle(r,e,t){if(!t||t.length<e.length)return null;let i;return r?i=Pp(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function Xle(r,e){let t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function Qle(r,e){return HA(r.toLowerCase(),e.toLowerCase(),0,0)}function HA(r,e,t,i){if(t===r.length)return[];if(i===e.length)return null;if(r[t]===e[i]){let n=null;return(n=HA(r,e,t+1,i+1))?R6({start:i,end:i+1},n):null}return HA(r,e,t,i+1)}function $A(r){return 97<=r&&r<=122}function $D(r){return 65<=r&&r<=90}function KA(r){return 48<=r&&r<=57}function Jle(r){return r===32||r===9||r===10||r===13}var ece=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(r=>ece.add(r.charCodeAt(0)));function N6(r){return $A(r)||$D(r)||KA(r)}function R6(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function P6(r,e){for(let t=e;t<r.length;t++){let i=r.charCodeAt(t);if($D(i)||KA(i)||t>0&&!N6(r.charCodeAt(t-1)))return t}return r.length}function qA(r,e,t,i){if(t===r.length)return[];if(i===e.length)return null;if(r[t]!==e[i].toLowerCase())return null;{let n=null,o=i+1;for(n=qA(r,e,t+1,i+1);!n&&(o=P6(e,o))<e.length;)n=qA(r,e,t+1,o),o++;return n===null?null:R6({start:i,end:i+1},n)}}function tce(r){let e=0,t=0,i=0,n=0,o=0;for(let d=0;d<r.length;d++)o=r.charCodeAt(d),$D(o)&&e++,$A(o)&&t++,N6(o)&&i++,KA(o)&&n++;let s=e/r.length,a=t/r.length,l=i/r.length,c=n/r.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:c}}function ice(r){let{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function nce(r){let{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=r;return t>.2&&e<.8&&i>.6&&n<.2}function rce(r){let e=0,t=0,i=0,n=0;for(let o=0;o<r.length;o++)i=r.charCodeAt(o),$D(i)&&e++,$A(i)&&t++,Jle(i)&&n++;return(e===0||t===0)&&n===0?r.length<=30:e<=5}function A6(r,e){if(!e||(e=e.trim(),e.length===0)||!rce(r)||e.length>60)return null;let t=tce(e);if(!nce(t)){if(!ice(t))return null;e=e.toLowerCase()}let i=null,n=0;for(r=r.toLowerCase();n<e.length&&(i=qA(r,e,0,n))===null;)n=P6(e,n+1);return i}var oce=T6(HD,A6,Xle),sce=T6(HD,A6,Qle),j6=new Ao(1e4);function YA(r,e,t=!1){if(typeof r!="string"||typeof e!="string")return null;let i=j6.get(r);i||(i=new RegExp(MW(r),"i"),j6.set(r,i));let n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?sce(r,e):oce(r,e)}function M6(r,e,t,i,n,o){let s=Math.min(13,r.length);for(;t<s;t++){let a=ag(r,e,t,i,n,o,!1);if(a)return a}return[0,o]}function hC(r){if(typeof r=="undefined")return[];let e=[],t=r[1];for(let i=r.length-1;i>1;i--){let n=r[i]+t,o=e[e.length-1];o&&o.end===n?o.end=n+1:e.push({start:n,end:n+1})}return e}var Uu=128;function ZA(){let r=[],e=[];for(let t=0;t<=Uu;t++)e[t]=0;for(let t=0;t<=Uu;t++)r.push(e.slice(0));return r}function F6(r){let e=[];for(let t=0;t<=r;t++)e[t]=0;return e}var B6=F6(2*Uu),GA=F6(2*Uu),Nc=ZA(),Vu=ZA(),uC=ZA(),ace=!1;function XA(r,e,t,i,n){function o(a,l,c=" "){for(;a.length<l;)a=c+a;return a}let s=` |   |${i.split("").map(a=>o(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=r[a].slice(0,n+1).map(l=>o(l.toString(),3)).join("|")+`
`;return s}function lce(r,e,t,i){r=r.substr(e),t=t.substr(i),console.log(XA(Vu,r,r.length,t,t.length)),console.log(XA(uC,r,r.length,t,t.length)),console.log(XA(Nc,r,r.length,t,t.length))}function KD(r,e){if(e<0||e>=r.length)return!1;let t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!Hm(t)}}function W6(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function qD(r,e,t){return e[r]!==t[r]}function cce(r,e,t,i,n,o,s=!1){for(;e<t&&n<o;)r[e]===i[n]&&(s&&(B6[e]=n),e+=1),n+=1;return e===t}var Ko;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(Ko||(Ko={}));function ag(r,e,t,i,n,o,s){let a=r.length>Uu?Uu:r.length,l=i.length>Uu?Uu:i.length;if(t>=a||o>=l||a-t>l-o||!cce(e,t,a,n,o,l,!0))return;dce(a,l,t,o,e,n);let c=1,d=1,h=t,u=o,m=[!1];for(c=1,h=t;h<a;c++,h++){let w=B6[h],S=GA[h],D=h+1<a?GA[h+1]:l;for(d=w-o+1,u=w;u<D;d++,u++){let I=Number.MIN_SAFE_INTEGER,A=!1;u<=S&&(I=hce(r,e,h,t,i,n,u,l,o,Nc[c-1][d-1]===0,m));let O=0;I!==Number.MAX_SAFE_INTEGER&&(A=!0,O=I+Vu[c-1][d-1]);let N=u>w,F=N?Vu[c][d-1]+(Nc[c][d-1]>0?-5:0):0,Y=u>w+1&&Nc[c][d-1]>0,K=Y?Vu[c][d-2]+(Nc[c][d-2]>0?-5:0):0;if(Y&&(!N||K>=F)&&(!A||K>=O))Vu[c][d]=K,uC[c][d]=3,Nc[c][d]=0;else if(N&&(!A||F>=O))Vu[c][d]=F,uC[c][d]=2,Nc[c][d]=0;else if(A)Vu[c][d]=O,uC[c][d]=1,Nc[c][d]=Nc[c-1][d-1]+1;else throw new Error("not possible")}}if(ace&&lce(r,t,i,o),!m[0]&&!s)return;c--,d--;let p=[Vu[c][d],o],_=0,v=0;for(;c>=1;){let w=d;do{let S=uC[c][w];if(S===3)w=w-2;else if(S===2)w=w-1;else break}while(w>=1);_>1&&e[t+c-1]===n[o+d-1]&&!qD(w+o-1,i,n)&&_+1>Nc[c][w]&&(w=d),w===d?_++:_=1,v||(v=w),c--,d=w-1,p.push(d)}l===a&&(p[0]+=2);let C=v-a;return p[0]-=C,p}function dce(r,e,t,i,n,o){let s=r-1,a=e-1;for(;s>=t&&a>=i;)n[s]===o[a]&&(GA[s]=a,s--),a--}function hce(r,e,t,i,n,o,s,a,l,c,d){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let h=1,u=!1;return s===t-i?h=r[t]===n[s]?7:5:qD(s,n,o)&&(s===0||!qD(s-1,n,o))?(h=r[t]===n[s]?7:5,u=!0):KD(o,s)&&(s===0||!KD(o,s-1))?h=5:(KD(o,s-1)||W6(o,s-1))&&(h=5,u=!0),h>1&&t===i&&(d[0]=!0),u||(u=qD(s,n,o)||KD(o,s-1)||W6(o,s-1)),t===i?s>l&&(h-=u?3:5):c?h+=u?2:0:h+=u?0:1,s+1===a&&(h-=u?3:5),h}function U6(r,e,t,i,n,o,s){return uce(r,e,t,i,n,o,!0,s)}function uce(r,e,t,i,n,o,s,a){let l=ag(r,e,t,i,n,o,a);if(l&&!s)return l;if(r.length>=3){let c=Math.min(7,r.length-1);for(let d=t+1;d<c;d++){let h=mce(r,d);if(h){let u=ag(h,h.toLowerCase(),t,i,n,o,a);u&&(u[0]-=3,(!l||u[0]>l[0])&&(l=u))}}}return l}function mce(r,e){if(e+1>=r.length)return;let t=r[e],i=r[e+1];if(t!==i)return r.slice(0,e)+i+t+r.slice(e+2)}var mC="$(",QA=new RegExp(`\\$\\(${Vn.iconNameExpression}(?:${Vn.iconModifierExpression})?\\)`,"g"),fce=new RegExp(`(\\\\)?${QA.source}`,"g");function V6(r){return r.replace(fce,(e,t)=>t?e:`\\${e}`)}var gce=new RegExp(`\\\\${QA.source}`,"g");function z6(r){return r.replace(gce,e=>`\\${e}`)}var pce=new RegExp(`(\\s)?(\\\\)?${QA.source}(\\s)?`,"g");function H6(r){return r.indexOf(mC)===-1?r:r.replace(pce,(e,t,i,n)=>i?e:t||n||"")}function fC(r){let e=r.indexOf(mC);return e===-1?{text:r}:_ce(r,e)}function _ce(r,e){let t=[],i="";function n(u){if(u){i+=u;for(let m of u)t.push(a)}}let o=-1,s="",a=0,l,c,d=e,h=r.length;for(n(r.substr(0,e));d<h;)l=r[d],c=r[d+1],l===mC[0]&&c===mC[1]?(o=d,n(s),s=mC,d++):l===")"&&o!==-1?(a+=d-o+1,o=-1,s=""):o!==-1?/^[a-z0-9\-]$/i.test(l)?s+=l:(n(s),o=-1,s=""):n(l),d++;return n(s),{text:i,iconOffsets:t}}function gC(r,e,t=!1){let{text:i,iconOffsets:n}=e;if(!n||n.length===0)return YA(r,i,t);let o=ix(i," "),s=i.length-o.length,a=YA(r,o,t);if(a)for(let l of a){let c=n[l.start+s]+s;l.start+=c,l.end+=c}return a}var JA=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,ej=/(&amp;)?(&amp;)([^\s&])/g,$6=Kr("menu-selection",ge.check),K6=Kr("menu-submenu",ge.chevronRight),YD;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(YD||(YD={}));var Qd=class extends Gr{constructor(e,t,i={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");let n=document.createElement("div");n.classList.add("monaco-menu"),n.setAttribute("role","presentation");super(n,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...We||ji?[10]:[]],keyDown:!0}});this.menuElement=n,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new G),this.initializeStyleSheet(e),this._register(yt.addTarget(n)),J(n,De.KEY_DOWN,a=>{new kt(a).equals(2)&&a.preventDefault()}),i.enableMnemonics&&this.menuDisposables.add(J(n,De.KEY_DOWN,a=>{let l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){St.stop(a,!0);let c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof tj&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){let d=c.shift();d&&d.container&&(this.focusItemByElement(d.container),c.push(d)),this.mnemonics.set(l,c)}}})),ji&&this._register(J(n,De.KEY_DOWN,a=>{let l=new kt(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),St.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),St.stop(a,!0))})),this._register(J(this.domNode,De.MOUSE_OUT,a=>{let l=a.relatedTarget;Ts(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(J(this.actionsList,De.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Ts(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){let c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(yt.addTarget(this.actionsList)),this._register(J(this.actionsList,Ft.Tap,a=>{let l=a.initialTarget;if(!(!l||!Ts(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){let c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new yl(n,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let s=this.scrollableElement.getDomNode();s.style.position="",this._register(J(n,Ft.Change,a=>{St.stop(a,!0);let l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(J(s,De.MOUSE_UP,a=>{a.preventDefault()})),n.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return((l=i.submenuIds)===null||l===void 0?void 0:l.has(a.id))?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof GD)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeStyleSheet(e){Qh(e)?(this.styleSheet=un(e),this.styleSheet.textContent=q6):(Qd.globalStyleSheet||(Qd.globalStyleSheet=un(),Qd.globalStyleSheet.textContent=q6),this.styleSheet=Qd.globalStyleSheet)}style(e){let t=this.getContainer(),i=e.foregroundColor?`${e.foregroundColor}`:"",n=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",s=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=o,this.domNode.style.color=i,this.domNode.style.backgroundColor=n,t.style.boxShadow=s,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof ZD||a instanceof GD)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){let t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem!="undefined"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof gr)return new GD(t.context,e,{icon:!0});if(e instanceof Ed){let n=new tj(e,e.actions,i,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){let o=n.getMnemonic();if(o&&n.isEnabled()){let s=[];this.mnemonics.has(o)&&(s=this.mnemonics.get(o)),s.push(n),this.mnemonics.set(o,s)}}return n}else{let n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){let s=t.getKeyBinding(e);if(s){let a=s.getLabel();a&&(n.keybinding=a)}}let o=new ZD(t.context,e,n);if(t.enableMnemonics){let s=o.getMnemonic();if(s&&o.isEnabled()){let a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}}},ZD=class extends Ra{constructor(e,t,i={}){i.isMenu=!0;super(t,t,i);if(this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){let n=this.getAction().label;if(n){let o=JA.exec(n);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new dt(()=>{!this.element||(this._register(J(this.element,De.MOUSE_UP,n=>{if(St.stop(n,!0),Hi){if(new Tn(n).rightButton)return;this.onClick(n)}else setTimeout(()=>{this.onClick(n)},0)})),this._register(J(this.element,De.CONTEXT_MENU,n=>{St.stop(n,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),!!this.element&&(this.container=e,this.item=X(this.element,oe("a.action-menu-item")),this._action.id===gr.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=X(this.item,oe("span.menu-item-check"+$6.cssSelector)),this.check.setAttribute("role","none"),this.label=X(this.item,oe("span.action-label")),this.options.label&&this.options.keybinding&&(X(this.item,oe("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(!!this.label&&this.options.label){Li(this.label);let e=H6(this.getAction().label);if(e){let t=bce(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));let i=JA.exec(e);if(i){e=Np(e),ej.lastIndex=0;let n=ej.exec(e);for(;n&&n[1];)n=ej.exec(e);let o=s=>s.replace(/&amp;&amp;/g,"&amp;");n?this.label.append(ix(o(e.substr(0,n.index))," "),oe("u",{"aria-hidden":"true"},n[3]),jW(o(e.substr(n.index+n[0].length))," ")):this.label.innerText=o(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=g({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;let e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;let e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=i?i.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=n)}style(e){this.menuStyle=e,this.applyStyle()}},tj=class extends ZD{constructor(e,t,i,n){super(e,e,n);this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new G),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:YD.Right,this.showScheduler=new dt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new dt(()=>{this.element&&!Ts(Jh(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),!!this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=X(this.item,oe("span.submenu-indicator"+K6.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(J(this.element,De.KEY_UP,t=>{let i=new kt(t);(i.equals(17)||i.equals(3))&&(St.stop(t,!0),this.createSubmenu(!0))})),this._register(J(this.element,De.KEY_DOWN,t=>{let i=new kt(t);Jh()===this.item&&(i.equals(17)||i.equals(3))&&St.stop(t,!0)})),this._register(J(this.element,De.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(J(this.element,De.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(J(this.element,De.FOCUS_OUT,t=>{this.element&&!Ts(Jh(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){St.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){let o={top:0,left:0};return o.left=sg(e.width,t.width,{position:n===YD.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=sg(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=X(this.element,oe("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let t=getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Qd(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new w_],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);let n=this.element.getBoundingClientRect(),o={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Wt(window.innerWidth,window.innerHeight),Wt.lift(s),o,this.expandDirection);this.submenuContainer.style.left=`${l-s.left}px`,this.submenuContainer.style.top=`${a-s.top}px`,this.submenuDisposables.add(J(this.submenuContainer,De.KEY_UP,c=>{new kt(c).equals(15)&&(St.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(J(this.submenuContainer,De.KEY_DOWN,c=>{new kt(c).equals(15)&&St.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;let t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}},GD=class extends Ic{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}};function bce(r){let e=JA,t=e.exec(r);if(!t)return r;let i=!t[1];return r.replace(e,i?"$2$3":"").trim()}var q6=`
.monaco-menu {
	font-size: 13px;

}

${zA($6)}
${zA(K6)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function Ks(r,e){let t=Object.create(null);for(let i in e){let n=e[i];n&&(t[i]=Cc(n,r))}return t}function ij(r,e,t){function i(){let n=Ks(r.getColorTheme(),e);typeof t=="function"?t(n):t.style(n)}return i(),r.onDidColorThemeChange(i)}function Y6(r,e,t){return ij(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||Lf,badgeForeground:(t==null?void 0:t.badgeForeground)||kf,badgeBorder:Ci},r)}function Jd(r,e,t){return ij(e,Object.assign(Object.assign({},pC),t||{}),r)}var pC={listFocusBackground:pH,listFocusForeground:_H,listFocusOutline:bH,listActiveSelectionBackground:Bd,listActiveSelectionForeground:Wd,listActiveSelectionIconForeground:Oy,listFocusAndSelectionBackground:Bd,listFocusAndSelectionForeground:Wd,listInactiveSelectionBackground:vH,listInactiveSelectionIconForeground:yH,listInactiveSelectionForeground:wH,listInactiveFocusBackground:CH,listInactiveFocusOutline:SH,listHoverBackground:xH,listHoverForeground:EH,listDropBackground:DH,listSelectionOutline:an,listHoverOutline:an,listFilterWidgetBackground:LH,listFilterWidgetOutline:kH,listFilterWidgetNoMatchesOutline:IH,listMatchesShadow:Oa,treeIndentGuidesStroke:OH,tableColumnsBorder:TH},vce={shadowColor:Oa,borderColor:RH,foregroundColor:PH,backgroundColor:AH,selectionForegroundColor:jH,selectionBackgroundColor:MH,selectionBorderColor:FH,separatorColor:BH};function Z6(r,e,t){return ij(e,Object.assign(Object.assign({},vce),t),r)}var nj=class{constructor(e,t,i,n,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){let t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let i,n=J1(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{let s=e.getMenuClassName?e.getMenuClassName():"";s&&(o.className+=" "+s),this.options.blockMouse&&(this.block=o.appendChild(oe(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",J(this.block,De.MOUSE_DOWN,c=>c.stopPropagation()));let a=new G,l=e.actionRunner||new Ea;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),i=new Qd(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(Z6(i,this.themeService)),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(J(window,De.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(J(window,De.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;let d=new Tn(c),h=d.target;if(!d.rightButton){for(;h;){if(h===o)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),Os(a,i)},focus:()=>{i&&i.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},n,!!n)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!co(e.error)&&this.notificationService.error(e.error)}};var wce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_C=function(r,e){return function(t,i){e(t,i,r)}},XD=class extends H{constructor(e,t,i,n,o){super();this.contextMenuHandler=new nj(i,e,t,n,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),ql.getInstance().resetKeyStatus()}};XD=wce([_C(0,ml),_C(1,Vt),_C(2,bs),_C(3,Nt),_C(4,ht)],XD);var zu=Ie("layoutService");var yce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Cce=function(r,e){return function(t,i){e(t,i,r)}},QD=class extends H{constructor(e){super();this.layoutService=e,this.currentViewDisposable=H.None,this.container=e.container,this.contextView=this._register(new Wu(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,i){t?t!==this.container&&(this.container=t,this.setContainer(t,i?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);let n=Re(()=>{this.currentViewDisposable===n&&this.hideContextView()});return this.currentViewDisposable=n,n}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};QD=yce([Cce(0,zu)],QD);var Sb=Ie("dialogService");var G6=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}},rj=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){let i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(this._hashFn(t),n),n.incoming.set(this._hashFn(e),i)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),i=this._nodes.get(t);return i||(i=new G6(e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,i]of this._nodes)e.push(`${t}, (incoming)[${[...i.incoming.keys()].join(", ")}], (outgoing)[${[...i.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){let i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(let[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);let o=this._findCycle(n,t);if(o)return o;t.delete(i)}}};var X6=!1,oj=class extends Error{constructor(e){var t;super("cyclic dependency between services");this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},xb=class{constructor(e=new kc,t=!1,i){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=i,this._services.set(Ue,this)}createChild(e){return new xb(e,this._strict,this)}invokeFunction(e,...t){let i=qo.traceInvocation(e),n=!1;try{return e({get:(s,a)=>{if(n)throw q5("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(s,i);if(!l&&a!==hW)throw new Error(`[invokeFunction] unknown service '${s}'`);return l}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof hl?(i=qo.traceCreation(e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=qo.traceCreation(e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){let n=ha.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(let a of n){let l=this._getOrCreateServiceInstance(a.id,i);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);o.push(l)}let s=n.length>0?n[0].index:t.length;if(t.length!==s){console.warn(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return new e(...[...t,...o])}_setServiceInstance(e,t){if(this._services.get(e)instanceof hl)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof hl?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){let n=new rj(a=>a.id.toString()),o=0,s=[{id:e,desc:t,_trace:i}];for(;s.length;){let a=s.pop();if(n.lookupOrInsertNode(a),o++>1e3)throw new oj(n);for(let l of ha.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(!c&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),c instanceof hl){let d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};n.insertEdge(a,d),s.push(d)}}}for(;;){let a=n.roots();if(a.length===0){if(!n.isEmpty())throw new oj(n);break}for(let{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof hl){let d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}n.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,o){if(this._services.get(e)instanceof hl)return this._createServiceInstance(t,i,n,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],i,n){if(i){let o=new el(()=>this._createInstance(e,t,n));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let l=o.value,c=l[a];return typeof c!="function"||(c=c.bind(l),s[a]=c),c},set(s,a,l){return o.value[a]=l,!0}})}else return this._createInstance(e,t,n)}},qo=class{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return X6?new qo(1,e.name||e.toString().substring(0,42).replace(/\n/g,"")):qo._None}static traceCreation(e){return X6?new qo(0,e.name):qo._None}branch(e,t){let i=new qo(2,e.toString());return this._dep.push([e,t,i]),i}stop(){let e=Date.now()-this._start;qo._totals+=e;let t=!1;function i(o,s){let a=[],l=new Array(o+1).join("	");for(let[c,d,h]of s._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);let u=i(o+1,h);u&&a.push(u)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}let n=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${qo._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(n.join(`
`))}};qo._None=new class extends qo{constructor(){super(-1,null)}stop(){}branch(){return this}};qo._totals=0;var Rc=Ie("labelService");var sj=class{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}};var eh=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};function Q6(r,e){let t=[];for(let i of e){if(r.start>=i.range.end)continue;if(r.end<i.range.start)break;let n=Dn.intersect(r,i.range);Dn.isEmpty(n)||t.push({range:n,size:i.size})}return t}function JD({start:r,end:e},t){return{start:r+t,end:e+t}}function Sce(r){let e=[],t=null;for(let i of r){let n=i.range.start,o=i.range.end,s=i.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:n,end:o},size:s},e.push(t)}return e}function xce(...r){return Sce(r.reduce((e,t)=>e.concat(t),[]))}var eL=class{constructor(){this.groups=[],this._size=0}splice(e,t,i=[]){let n=i.length-t,o=Q6({start:0,end:e},this.groups),s=Q6({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:JD(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=xce(o,a,s),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,i=0;for(let n of this.groups){let o=n.range.end-n.range.start,s=i+o*n.size;if(e<s)return t+Math.floor((e-i)/n.size);t+=o,i=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(let n of this.groups){let o=n.range.end-n.range.start,s=i+o;if(e<s)return t+(e-i)*n.size;t+=o*n.size,i=s}return-1}};function Ece(r){try{r.parentElement&&r.parentElement.removeChild(r)}catch{}}var aj=class{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){let i=oe(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:o}}return t}release(e){!e||this.releaseRow(e)}releaseRow(e){let{domNode:t,templateId:i}=e;t&&(t.classList.remove("scrolling"),Ece(t)),this.getTemplateCache(i).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var lg=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Pc={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},Hu=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},J6=class{constructor(e){this.elements=e}update(){}getData(){return this.elements}},e9=class{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}};function Dce(r,e){return Array.isArray(r)&&Array.isArray(e)?zn(r,e):r===e}var t9=class{constructor(e){(e==null?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,(e==null?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,(e==null?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",(e==null?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},qs=class{constructor(e,t,i,n=Pc){if(this.virtualDelegate=t,this.domId=`list_id_${++qs.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new zr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=H.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=H.None,this.onDragLeaveTimeout=H.None,this.disposables=new G,this._onDidChangeContentHeight=new M,this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new eL;for(let s of i)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new aj(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=al(n,s=>s.horizontalScrolling,Pc.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof n.additionalScrollHeight=="undefined"?0:n.additionalScrollHeight,this.accessibilityProvider=new t9(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",al(n,s=>s.transformOptimization,Pc.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(yt.addTarget(this.rowsContainer)),this.scrollable=new $d(al(n,s=>s.smoothScrolling,!1)?125:0,s=>Ro(s)),this.scrollableElement=this.disposables.add(new Vf(this.rowsContainer,{alwaysConsumeMouseWheel:al(n,s=>s.alwaysConsumeMouseWheel,Pc.alwaysConsumeMouseWheel),horizontal:1,vertical:al(n,s=>s.verticalScrollMode,Pc.verticalScrollMode),useShadows:al(n,s=>s.useShadows,Pc.useShadows),mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(J(this.rowsContainer,Ft.Change,s=>this.onTouchChange(s))),this.disposables.add(J(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(J(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(J(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(J(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(J(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=al(n,s=>s.setRowLineHeight,Pc.setRowLineHeight),this.setRowHeight=al(n,s=>s.setRowHeight,Pc.setRowHeight),this.supportDynamicHeights=al(n,s=>s.supportDynamicHeights,Pc.supportDynamicHeights),this.dnd=al(n,s=>s.dnd,Pc.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Q1(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=Dn.intersect(n,o),a=new Map;for(let A=s.start;A<s.end;A++){let O=this.items[A];if(O.dragStartDisposable.dispose(),O.row){let N=a.get(O.templateId);N||(N=[],a.set(O.templateId,N));let F=this.renderers.get(O.templateId);F&&F.disposeElement&&F.disposeElement(O.element,A,O.row.templateData,O.size),N.push(O.row)}O.row=null}let l={start:e+t,end:this.items.length},c=Dn.intersect(l,n),d=Dn.relativeComplement(l,n),h=i.map(A=>({id:String(this.itemId++),element:A,templateId:this.virtualDelegate.getTemplateId(A),size:this.virtualDelegate.getHeight(A),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(A),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:H.None})),u;e===0&&t>=this.items.length?(this.rangeMap=new eL,this.rangeMap.splice(0,0,h),u=this.items,this.items=h):(this.rangeMap.splice(e,t,h),u=this.items.splice(e,t,...h));let m=i.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),_=JD(c,m),v=Dn.intersect(p,_);for(let A=v.start;A<v.end;A++)this.updateItemInDOM(this.items[A],A);let C=Dn.relativeComplement(_,p);for(let A of C)for(let O=A.start;O<A.end;O++)this.removeItemFromDOM(O);let w=d.map(A=>JD(A,m)),D=[{start:e,end:e+i.length},...w].map(A=>Dn.intersect(p,A)),I=this.getNextToLastElement(D);for(let A of D)for(let O=A.start;O<A.end;O++){let N=this.items[O],F=a.get(N.templateId),Y=F==null?void 0:F.pop();this.insertItemInDOM(O,I,Y)}for(let A of a.values())for(let O of A)this.cache.release(O);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map(A=>A.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Ro(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width!="undefined"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let i={height:typeof e=="number"?e:EW(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t!="undefined"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Q1(this.domNode)})}render(e,t,i,n,o,s=!1){let a=this.getRenderRange(t,i),l=Dn.relativeComplement(a,e),c=Dn.relativeComplement(e,a),d=this.getNextToLastElement(l);if(s){let h=Dn.intersect(e,a);for(let u=h.start;u<h.end;u++)this.updateItemInDOM(this.items[u],u)}for(let h of l)for(let u=h.start;u<h.end;u++)this.insertItemInDOM(u,d);for(let h of c)for(let u=h.start;u<h.end;u++)this.removeItemFromDOM(u);n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t,i){let n=this.items[e];n.row||(n.row=i??this.cache.alloc(n.templateId));let o=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",o);let s=this.accessibilityProvider.isChecked(n.element);typeof s!="undefined"&&n.row.domNode.setAttribute("aria-checked",String(!!s)),n.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(n.row.domNode,t):this.rowsContainer.appendChild(n.row.domNode)),this.updateItemInDOM(n,e);let a=this.renderers.get(n.templateId);if(!a)throw new Error(`No renderer found for template id ${n.templateId}`);a&&a.renderElement(n.element,e,n.row.templateData,n.size);let l=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!l,l&&(n.dragStartDisposable=J(n.row.domNode,"dragstart",c=>this.onDragStart(n.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Hi?"-moz-fit-content":"fit-content",e.width=Q1(e.row.domNode);let t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){let i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return ye.map(this.disposables.add(new Bt(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return ye.map(this.disposables.add(new Bt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return ye.filter(ye.map(this.disposables.add(new Bt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return ye.map(this.disposables.add(new Bt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return ye.any(ye.map(this.disposables.add(new Bt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),ye.map(this.disposables.add(new Bt(this.domNode,Ft.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return ye.map(this.disposables.add(new Bt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return ye.map(this.disposables.add(new Bt(this.rowsContainer,Ft.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t=="undefined"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t=="undefined"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;let n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(xD.TEXT,t),i.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(n,i)),typeof o=="undefined"&&(o=String(n.length));let s=oe(".monaco-drag-image");s.textContent=o,document.body.appendChild(s),i.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>document.body.removeChild(s),0)}this.currentDragData=new Hu(n),Cl.CurrentDragAndDropData=new J6(n),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,i)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Cl.CurrentDragAndDropData&&Cl.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Cl.CurrentDragAndDropData)this.currentDragData=Cl.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new e9}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let i;if(typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index=="undefined"?i=[-1]:i=[e.index],i=hf(i).filter(n=>n>=-1&&n<this.length).sort((n,o)=>n-o),i=i[0]===-1?[-1]:i,Dce(this.currentDragFeedback,i))return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Re(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(let n of i){let o=this.items[n];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Re(()=>{for(let n of i){let o=this.items[n];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=fa(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Cl.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Cl.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=H.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=X1(this.domNode).top;this.dragOverAnimationDisposable=PW(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=fa(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){let n=i.getAttribute("data-index");if(n){let o=Number(n);if(!isNaN(o))return o}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){let n=this.getRenderRange(e,t),o,s;e===this.elementTop(n.start)?(o=n.start,s=0):n.end-n.start>1&&(o=n.start+1,s=this.elementTop(o)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),c=!1;for(let d=l.start;d<l.end;d++){let h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();let d=Dn.relativeComplement(n,l);for(let u of d)for(let m=u.start;m<u.end;m++)this.items[m].row&&this.removeItemFromDOM(m);let h=Dn.relativeComplement(l,n);for(let u of h)for(let m=u.start;m<u.end;m++){let p=m+1,_=p<this.items.length?this.items[p].row:null,v=_?_.domNode:null;this.insertItemInDOM(m,v)}for(let u=l.start;u<l.end;u++)this.items[u].row&&this.updateItemInDOM(this.items[u],u);if(typeof o=="number"){let u=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(o)-s+u;this.setScrollTop(m,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let i=t.size;if(!this.setRowHeight&&t.row){let s=t.row.domNode.offsetHeight;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-i}let n=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);let o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,n.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,n.templateData,void 0)),t.size=n.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(n.domNode),this.cache.release(n),t.size-i}getNextToLastElement(e){let t=e[e.length-1];if(!t)return null;let i=this.items[t.end];return!i||!i.row?null:i.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(let e of this.items)if(e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),Ge(this.disposables)}};qs.InstanceCount=0;lg([Ni],qs.prototype,"onMouseClick",null);lg([Ni],qs.prototype,"onMouseDblClick",null);lg([Ni],qs.prototype,"onMouseMiddleClick",null);lg([Ni],qs.prototype,"onMouseDown",null);lg([Ni],qs.prototype,"onContextMenu",null);lg([Ni],qs.prototype,"onTouchStart",null);lg([Ni],qs.prototype,"onTap",null);var cg=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},i9=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},n9=class{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,i){let n=this.renderedElements.findIndex(o=>o.templateData===i);if(n>=0){let o=this.renderedElements[n];this.trait.unrender(i),o.index=t}else{let o={index:t,templateData:i};this.renderedElements.push(o)}this.trait.renderIndex(t,i)}splice(e,t,i){let n=[];for(let o of this.renderedElements)o.index<e?n.push(o):o.index>=e+t&&n.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=n}renderIndexes(e){for(let{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){let t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}},bC=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new M,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new n9(this)}splice(e,t,i){var n;t=Math.max(0,Math.min(t,this.length-e));let o=i.length-t,s=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...i.map((c,d)=>c?d+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=s).map(c=>c+o)],l=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&l>0){let c=(n=this.sortedIndexes.find(d=>d>=e))!==null&&n!==void 0?n:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,i.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(l9),t)}_set(e,t,i){let n=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=uj(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return i_(this.sortedIndexes,e,l9)>=0}dispose(){Ge(this._onChange)}};cg([Ni],bC.prototype,"renderer",null);var r9=class extends bC{constructor(e){super("selected");this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}},tL=class{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,i.map(()=>!1));let n=this.trait.get().map(s=>this.identityProvider.getId(this.view.element(s)).toString()),o=i.map(s=>n.indexOf(this.identityProvider.getId(s).toString())>-1);this.trait.splice(e,t,o)}};function th(r){return r.tagName==="INPUT"||r.tagName==="TEXTAREA"}function dg(r){return r.classList.contains("monaco-editor")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:dg(r.parentElement)}var lj=class{constructor(e,t,i){this.list=e,this.view=t,this.disposables=new G,this.multipleSelectionDisposables=new G,this.onKeyDown.filter(n=>n.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(n=>n.keyCode===9).on(this.onEscape,this,this.disposables),i.multipleSelectionSupport!==!1&&this.onKeyDown.filter(n=>(We?n.metaKey:n.ctrlKey)&&n.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return ye.chain(this.disposables.add(new Bt(this.view.domNode,"keydown")).event).filter(e=>!th(e.target)).map(e=>new kt(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(We?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Pn(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};cg([Ni],lj.prototype,"onKeyDown",null);var Eb;(function(r){r[r.Idle=0]="Idle",r[r.Typing=1]="Typing"})(Eb||(Eb={}));var cj=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=93&&r.keyCode<=102||r.keyCode>=80&&r.keyCode<=90}},o9=class{constructor(e,t,i,n){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.delegate=n,this.enabled=!1,this.state=Eb.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new G,this.disposables=new G,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation=="undefined"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;let e=ye.chain(this.enabledDisposables.add(new Bt(this.view.domNode,"keydown")).event).filter(n=>!th(n.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(n=>new kt(n)).filter(n=>this.delegate.mightProducePrintableCharacter(n)).forEach(n=>{n.stopPropagation(),n.preventDefault()}).map(n=>n.browserEvent.key).event,t=ye.debounce(e,()=>null,800);ye.reduce(ye.any(e,t),(n,o)=>o===null?null:(n||"")+o)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;let t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){let i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));i&&Oi(i)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Eb.Idle,this.triggered=!1;return}let t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===Eb.Idle?1:0;this.state=Eb.Typing;for(let o=0;o<this.list.length;o++){let s=(i+o+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(typeof l=="undefined"||HD(e,l)){this.previouslyFocused=i,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},s9=class{constructor(e,t){this.list=e,this.view=t,this.disposables=new G,ye.chain(this.disposables.add(new Bt(t.domNode,"keydown")).event).filter(n=>!th(n.target)).map(n=>new kt(n)).filter(n=>n.keyCode===2&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&!n.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let i=this.view.domElement(t[0]);if(!i)return;let n=i.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||n.tabIndex===-1)return;let o=window.getComputedStyle(n);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}};function dj(r){return We?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function hj(r){return r.browserEvent.shiftKey}function Lce(r){return r instanceof MouseEvent&&r.button===2}var a9={isSelectionSingleChangeEvent:dj,isSelectionRangeChangeEvent:hj},iL=class{constructor(e){this.list=e,this.disposables=new G,this._onPointer=new M,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||a9),this.mouseSupport=typeof e.options.mouseSupport=="undefined"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(yt.addTarget(e.getHTMLElement()))),ye.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||a9))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){dg(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(dg(e.browserEvent.target))return;let t=typeof e.index=="undefined"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||th(e.browserEvent.target)||dg(e.browserEvent.target))return;let t=e.index;if(typeof t=="undefined"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Lce(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(th(e.browserEvent.target)||dg(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i=="undefined"){let d=this.list.getFocus()[0];i=d??t,this.list.setAnchor(i)}let n=Math.min(i,t),o=Math.max(i,t),s=Pn(n,o+1),a=this.list.getSelection(),l=Oce(uj(a,[i]),i);if(l.length===0)return;let c=uj(s,Tce(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let n=this.list.getSelection(),o=n.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}},nL=class{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&(e.listBackground.isOpaque()?i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):We||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&i.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&i.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&i.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&i.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&i.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=i.join(`
`)}},kce={listFocusBackground:q.fromHex("#7FB0D0"),listActiveSelectionBackground:q.fromHex("#0E639C"),listActiveSelectionForeground:q.fromHex("#FFFFFF"),listActiveSelectionIconForeground:q.fromHex("#FFFFFF"),listFocusAndSelectionBackground:q.fromHex("#094771"),listFocusAndSelectionForeground:q.fromHex("#FFFFFF"),listInactiveSelectionBackground:q.fromHex("#3F3F46"),listInactiveSelectionIconForeground:q.fromHex("#FFFFFF"),listHoverBackground:q.fromHex("#2A2D2E"),listDropBackground:q.fromHex("#383B3D"),treeIndentGuidesStroke:q.fromHex("#a9a9a9"),tableColumnsBorder:q.fromHex("#cccccc").transparent(.2)},Ice={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Oce(r,e){let t=r.indexOf(e);if(t===-1)return[];let i=[],n=t-1;for(;n>=0&&r[n]===e-(t-n);)i.push(r[n--]);for(i.reverse(),n=t;n<r.length&&r[n]===e+(n-t);)i.push(r[n++]);return i}function uj(r,e){let t=[],i=0,n=0;for(;i<r.length||n<e.length;)if(i>=r.length)t.push(e[n++]);else if(n>=e.length)t.push(r[i++]);else if(r[i]===e[n]){t.push(r[i]),i++,n++;continue}else r[i]<e[n]?t.push(r[i++]):t.push(e[n++]);return t}function Tce(r,e){let t=[],i=0,n=0;for(;i<r.length||n<e.length;)if(i>=r.length)t.push(e[n++]);else if(n>=e.length)t.push(r[i++]);else if(r[i]===e[n]){i++,n++;continue}else r[i]<e[n]?t.push(r[i++]):n++;return t}var l9=(r,e)=>r-e,c9=class{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let o=0;for(let s of this.renderers)s.renderElement(e,t,i[o++],n)}disposeElement(e,t,i,n){let o=0;for(let s of this.renderers)s.disposeElement&&s.disposeElement(e,t,i[o],n),o+=1}disposeTemplate(e){let t=0;for(let i of this.renderers)i.disposeTemplate(e[t++])}},d9=class{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){let n=this.accessibilityProvider.getAriaLabel(e);n?i.setAttribute("aria-label",n):i.removeAttribute("aria-label");let o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.setAttribute("aria-level",`${o}`):i.removeAttribute("aria-level")}disposeTemplate(e){}},h9=class{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,i,n){return this.dnd.onDragOver(e,t,i,n)}onDragLeave(e,t,i,n){var o,s;(s=(o=this.dnd).onDragLeave)===null||s===void 0||s.call(o,e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,i,n){this.dnd.drop(e,t,i,n)}},xo=class{constructor(e,t,i,n,o=Ice){var s;this.user=e,this._options=o,this.focus=new bC("focused"),this.anchor=new bC("anchor"),this.eventBufferer=new jm,this._ariaLabel="",this.disposables=new G,this._onDidDispose=new M,this.onDidDispose=this._onDidDispose.event;let a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(s=this._options.accessibilityProvider)===null||s===void 0?void 0:s.getWidgetRole():"list";this.selection=new r9(a!=="listbox"),Un(o,kce,!1);let l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(l.push(new d9(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(d=>new c9(d.templateId,[...l,d]));let c=Object.assign(Object.assign({},o),{dnd:o.dnd&&new h9(this,o.dnd)});if(this.view=new qs(t,i,n,c),this.view.domNode.setAttribute("role",a),o.styleController)this.styleController=o.styleController(this.view.domId);else{let d=un(this.view.domNode);this.styleController=new nL(d,this.view.domId)}if(this.spliceable=new sj([new tL(this.focus,this.view,o.identityProvider),new tL(this.selection,this.view,o.identityProvider),new tL(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new s9(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new lj(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let d=o.keyboardNavigationDelegate||cj;this.typeLabelController=new o9(this,this.view,o.keyboardNavigationLabelProvider,d),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return ye.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return ye.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=ye.chain(this.disposables.add(new Bt(this.view.domNode,"keydown")).event).map(o=>new kt(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(gA).filter(()=>!1).event,i=ye.chain(this.disposables.add(new Bt(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(o=>new kt(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(gA).map(({browserEvent:o})=>{let s=this.getFocus(),a=s.length?s[0]:void 0,l=typeof a!="undefined"?this.view.element(a):void 0,c=typeof a!="undefined"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:o}}).event,n=ye.chain(this.view.onContextMenu).filter(o=>!e).map(({element:o,index:s,browserEvent:a})=>({element:o,index:s,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return ye.any(t,i,n)}get onKeyDown(){return this.disposables.add(new Bt(this.view.domNode,"keydown")).event}get onDidFocus(){return ye.signal(this.disposables.add(new Bt(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new iL(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new eh(this.user,`Invalid start index: ${e}`);if(t<0)throw new eh(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(let i of e)if(i<0||i>=this.length)throw new eh(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e=="undefined"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new eh(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return Ow(this.anchor.get(),void 0)}getAnchorElement(){let e=this.getAnchor();return typeof e=="undefined"?void 0:this.element(e)}setFocus(e,t){for(let i of e)if(i<0||i>=this.length)throw new eh(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;let o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,n);s>-1&&this.setFocus([s],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;let o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,n);s>-1&&this.setFocus([s],i)}focusNextPage(e,t){return i9(this,void 0,void 0,function*(){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;let n=this.view.element(i),o=this.getFocusedElements()[0];if(o!==n){let s=this.findPreviousIndex(i,!1,t);s>-1&&o!==this.view.element(s)?this.setFocus([s],e):this.setFocus([i],e)}else{let s=this.view.getScrollTop();this.view.setScrollTop(s+this.view.renderHeight-this.view.elementHeight(i)),this.view.getScrollTop()!==s&&(this.setFocus([]),yield ma(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return i9(this,void 0,void 0,function*(){let i,n=this.view.getScrollTop();n===0?i=this.view.indexAt(n):i=this.view.indexAfter(n-1);let o=this.view.element(i),s=this.getFocusedElements()[0];if(s!==o){let a=this.findNextIndex(i,!1,t);a>-1&&s!==this.view.element(a)?this.setFocus([a],e):this.setFocus([i],e)}else{let a=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield ma(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;let i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;let n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new eh(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),n=this.view.elementTop(e),o=this.view.elementHeight(e);if(_a(t)){let s=o-this.view.renderHeight;this.view.setScrollTop(s*fo(t,0,1)+n)}else{let s=n+o,a=i+this.view.renderHeight;n<i&&s>=a||(n<i||s>=a&&o>=this.view.renderHeight?this.view.setScrollTop(n):s>=a&&this.view.setScrollTop(s-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new eh(this.user,`Invalid index ${e}`);let t=this.view.getScrollTop(),i=this.view.elementTop(e),n=this.view.elementHeight(e);if(i<t||i+n>t+this.view.renderHeight)return null;let o=n-this.view.renderHeight;return Math.abs((t-i)/o)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;let t=this.focus.get();if(t.length>0){let i;((e=this.accessibilityProvider)===null||e===void 0?void 0:e.getActiveDescendantId)&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};cg([Ni],xo.prototype,"onDidChangeFocus",null);cg([Ni],xo.prototype,"onDidChangeSelection",null);cg([Ni],xo.prototype,"onContextMenu",null);cg([Ni],xo.prototype,"onKeyDown",null);cg([Ni],xo.prototype,"onDidFocus",null);var u9=class{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:H.None}}renderElement(e,t,i,n){if(i.disposable&&i.disposable.dispose(),!i.data)return;let o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,i.data,n);let s=new Di,a=o.resolve(e,s.token);i.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}},m9=class{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function Nce(r,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new m9(r,e.accessibilityProvider)})}var mj=class{constructor(e,t,i,n,o={}){let s=()=>this.model,a=n.map(l=>new u9(l,s));this.list=new xo(e,t,i,a,Nce(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ye.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return ye.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return ye.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Pn(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}};var Rce={separatorBorder:q.transparent},fj=class{constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize=="undefined"}setVisible(e,t){e!==this.visible&&(e?(this.size=fo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}},f9=class extends fj{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},g9=class extends fj{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}},ih;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(ih||(ih={}));var vC;(function(r){r.Distribute={type:"distribute"};function e(i){return{type:"split",index:i}}r.Split=e;function t(i){return{type:"invisible",cachedVisibleSize:i}}r.Invisible=t})(vC||(vC={}));var wC=class extends H{constructor(e,t={}){var i,n;super();this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=ih.Idle,this._onDidSashChange=this._register(new M),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new M),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=Rn(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=Rn(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=X(this.el,oe(".sash-container")),this.viewContainer=oe(".split-view-container"),this.scrollable=new $d(125,Ro),this.scrollableElement=this._register(new Vf(this.viewContainer,{vertical:this.orientation===0?(i=t.scrollbarVisibility)!==null&&i!==void 0?i:1:2,horizontal:this.orientation===1?(n=t.scrollbarVisibility)!==null&&n!==void 0?n:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(o=>{this.viewContainer.scrollTop=o.scrollTop,this.viewContainer.scrollLeft=o.scrollLeft})),X(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Rce),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((o,s)=>{let a=Rn(o.visible)||o.visible?o.size:{type:"invisible",cachedVisibleSize:o.size},l=o.view;this.doAddView(l,a,s,!0)}),this.contentSize=this.viewItems.reduce((o,s)=>o+s.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){let i=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let n=0;n<this.viewItems.length;n++){let o=this.viewItems[n];o.size=fo(Math.round(this.proportions[n]*e),o.minimumSize,o.maximumSize)}else{let n=Pn(this.viewItems.length),o=n.filter(a=>this.viewItems[a].priority===1),s=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:i}){for(let a of this.viewItems)a.enabled=!1;let n=this.sashItems.findIndex(a=>a.sash===e),o=Os(J(document.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),J(document.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{let c=this.viewItems.map(p=>p.size),d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){let _=this.viewItems[n];d=(_.minimumSize-_.size)/2,h=(_.maximumSize-_.size)/2}else{let _=this.viewItems[n+1];d=(_.size-_.maximumSize)/2,h=(_.size-_.minimumSize)/2}let u,m;if(!l){let p=Pn(n,-1),_=Pn(n+1,this.viewItems.length),v=p.reduce((N,F)=>N+(this.viewItems[F].minimumSize-c[F]),0),C=p.reduce((N,F)=>N+(this.viewItems[F].viewMaximumSize-c[F]),0),w=_.length===0?Number.POSITIVE_INFINITY:_.reduce((N,F)=>N+(c[F]-this.viewItems[F].minimumSize),0),S=_.length===0?Number.NEGATIVE_INFINITY:_.reduce((N,F)=>N+(c[F]-this.viewItems[F].viewMaximumSize),0),D=Math.max(v,S),I=Math.min(w,C),A=this.findFirstSnapIndex(p),O=this.findFirstSnapIndex(_);if(typeof A=="number"){let N=this.viewItems[A],F=Math.floor(N.viewMinimumSize/2);u={index:A,limitDelta:N.visible?D-F:D+F,size:N.size}}if(typeof O=="number"){let N=this.viewItems[O],F=Math.floor(N.viewMinimumSize/2);m={index:O,limitDelta:N.visible?I+F:I-F,size:N.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:u,snapAfter:m,disposable:o}};s(t,i)}onSashChange({current:e}){let{index:t,start:i,sizes:n,alt:o,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;let d=e-i,h=this.resize(t,d,n,void 0,void 0,s,a,l,c);if(o){let u=t===this.sashItems.length-1,m=this.viewItems.map(S=>S.size),p=u?t:t+1,_=this.viewItems[p],v=_.size-_.maximumSize,C=_.size-_.minimumSize,w=u?t-1:t+1;this.resize(w,-h,m,void 0,void 0,v,C)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=fo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(this.state!==ih.Idle)throw new Error("Cant modify splitview");if(this.state=ih.Busy,e<0||e>=this.viewItems.length)return;let i=Pn(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],o=i.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=fo(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(n,o),this.state=ih.Idle}distributeViewSizes(){let e=[],t=0;for(let a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);let i=Math.floor(t/e.length);for(let a of e)a.size=fo(i,a.minimumSize,a.maximumSize);let n=Pn(this.viewItems.length),o=n.filter(a=>this.viewItems[a].priority===1),s=n.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==ih.Idle)throw new Error("Cant modify splitview");this.state=ih.Busy;let o=oe(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));let s=e.onDidChange(u=>this.onViewChange(d,u)),a=Re(()=>this.viewContainer.removeChild(o)),l=Os(s,a),c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;let d=this.orientation===0?new f9(o,e,c,l):new g9(o,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){let u={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},m=this.orientation===0?new cn(this.sashContainer,{getHorizontalSashTop:N=>this.getSashPosition(N),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},u),{orientation:1})):new cn(this.sashContainer,{getVerticalSashLeft:N=>this.getSashPosition(N),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},u),{orientation:0})),p=this.orientation===0?N=>({sash:m,start:N.startY,current:N.currentY,alt:N.altKey}):N=>({sash:m,start:N.startX,current:N.currentX,alt:N.altKey}),v=ye.map(m.onDidStart,p)(this.onSashStart,this),w=ye.map(m.onDidChange,p)(this.onSashChange,this),D=ye.map(m.onDidEnd,()=>this.sashItems.findIndex(N=>N.sash===m))(this.onSashEnd,this),I=m.onDidReset(()=>{let N=this.sashItems.findIndex(ie=>ie.sash===m),F=Pn(N,-1),Y=Pn(N+1,this.viewItems.length),K=this.findFirstSnapIndex(F),ee=this.findFirstSnapIndex(Y);typeof K=="number"&&!this.viewItems[K].visible||typeof ee=="number"&&!this.viewItems[ee].visible||this._onDidSashReset.fire(N)}),A=Os(v,w,D,I,m),O={sash:m,disposable:A};this.sashItems.splice(i-1,0,O)}o.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),n||this.relayout([i],h),this.state=ih.Idle,!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){let i=this.viewItems.reduce((n,o)=>n+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),n,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;let d=Pn(e,-1),h=Pn(e+1,this.viewItems.length);if(o)for(let O of o)Nx(d,O),Nx(h,O);if(n)for(let O of n)Tw(d,O),Tw(h,O);let u=d.map(O=>this.viewItems[O]),m=d.map(O=>i[O]),p=h.map(O=>this.viewItems[O]),_=h.map(O=>i[O]),v=d.reduce((O,N)=>O+(this.viewItems[N].minimumSize-i[N]),0),C=d.reduce((O,N)=>O+(this.viewItems[N].maximumSize-i[N]),0),w=h.length===0?Number.POSITIVE_INFINITY:h.reduce((O,N)=>O+(i[N]-this.viewItems[N].minimumSize),0),S=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((O,N)=>O+(i[N]-this.viewItems[N].maximumSize),0),D=Math.max(v,S,s),I=Math.min(w,C,a),A=!1;if(l){let O=this.viewItems[l.index],N=t>=l.limitDelta;A=N!==O.visible,O.setVisible(N,l.size)}if(!A&&c){let O=this.viewItems[c.index],N=t<c.limitDelta;A=N!==O.visible,O.setVisible(N,c.size)}if(A)return this.resize(e,t,i,n,o,s,a);t=fo(t,D,I);for(let O=0,N=t;O<u.length;O++){let F=u[O],Y=fo(m[O]+N,F.minimumSize,F.maximumSize);N-=Y-m[O],F.size=Y}for(let O=0,N=t;O<p.length;O++){let F=p[O],Y=fo(_[O]-N,F.minimumSize,F.maximumSize);N+=Y-_[O],F.size=Y}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((a,l)=>a+l.size,0),i=this.size-t,n=Pn(this.viewItems.length-1,-1),o=n.filter(a=>this.viewItems[a].priority===1),s=n.filter(a=>this.viewItems[a].priority===2);for(let a of s)Nx(n,a);for(let a of o)Tw(n,a);typeof e=="number"&&Tw(n,e);for(let a=0;i!==0&&a<n.length;a++){let l=this.viewItems[n[a]],c=fo(l.size+i,l.minimumSize,l.maximumSize);i-=c-l.size,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;let i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;let o=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;let s=n.map(l=>e=l.maximumSize-l.size>0||e).reverse(),a=0;for(let l=0;l<this.sashItems.length;l++){let{sash:c}=this.sashItems[l];a+=this.viewItems[l].size;let h=!(t[l]&&s[l+1]),u=!(i[l]&&o[l+1]);if(h&&u){let m=Pn(l,-1),p=Pn(l+1,this.viewItems.length),_=this.findFirstSnapIndex(m),v=this.findFirstSnapIndex(p),C=typeof _=="number"&&!this.viewItems[_].visible,w=typeof v=="number"&&!this.viewItems[v].visible;C&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:w&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!u?c.state=1:!h&&u?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let i=this.viewItems[t];if(!!i.visible&&i.snap)return t}for(let t of e){let i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}};var Db=class{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=Db.TemplateId,this.renderedTemplates=new Set;let n=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(let o of e){let s=n.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}renderTemplate(e){let t=X(e,oe(".monaco-table-tr")),i=[],n=[];for(let s=0;s<this.columns.length;s++){let a=this.renderers[s],l=X(t,oe(".monaco-table-td",{"data-col-index":s}));l.style.width=`${this.getColumnSize(s)}px`,i.push(l),n.push(a.renderTemplate(l))}let o={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(o),o}renderElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){let a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,i.cellTemplateData[o],n)}}disposeElement(e,t,i,n){for(let o=0;o<this.columns.length;o++){let s=this.renderers[o];if(s.disposeElement){let l=this.columns[o].project(e);s.disposeElement(l,t,i.cellTemplateData[o],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Li(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};Db.TemplateId="row";function Pce(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return Db.TemplateId}}}var p9=class{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new M,this.onDidLayout=this._onDidLayout.event,this.element=oe(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ye.None}layout(e){this._onDidLayout.fire([this.index,e])}},Lb=class{constructor(e,t,i,n,o,s){this.virtualDelegate=i,this.domId=`table_id_${++Lb.InstanceCount}`,this.cachedHeight=0,this.domNode=X(t,oe(`.monaco-table.${this.domId}`));let a=n.map((d,h)=>new p9(d,h)),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=new wC(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;let c=new Db(n,o,d=>this.splitview.getViewSize(d));this.list=new xo(e,this.domNode,Pce(i),[c],s),this.columnLayoutDisposable=ye.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h)),this.styleElement=un(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}};Lb.InstanceCount=0;var kb;(function(r){r[r.Unknown=0]="Unknown",r[r.Twistie=1]="Twistie",r[r.Element=2]="Element"})(kb||(kb={}));var Tr=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},Ib=class{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};function yC(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function hg(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function gj(r){return typeof r.collapsible=="boolean"}var pj=class{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new jm,this._onDidChangeCollapseState=new M,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new M,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new M,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof n.collapseByDefault=="undefined"?!1:n.collapseByDefault,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren=="undefined"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=ot.empty(),n={}){if(e.length===0)throw new Tr(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n,o,s){var a;n===void 0&&(n=ot.empty()),s===void 0&&(s=(a=o.diffDepth)!==null&&a!==void 0?a:0);let{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,n,o);let c=[...n],d=t[t.length-1],h=new ls({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+i)].map(v=>e.getId(v.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,o);let u=t.slice(0,-1),m=(v,C,w)=>{if(s>0)for(let S=0;S<w;S++)v--,C--,this.spliceSmart(e,[...u,v,0],Number.MAX_SAFE_INTEGER,c[C].children,o,s-1)},p=Math.min(l.children.length,d+i),_=c.length;for(let v of h.changes.sort((C,w)=>w.originalStart-C.originalStart))m(p,_,p-(v.originalStart+v.originalLength)),p=v.originalStart,_=v.modifiedStart-d,this.spliceSimple([...u,p],v.originalLength,ot.slice(c,_,_+v.modifiedLength),o);m(p,_,p)}spliceSimple(e,t,i=ot.empty(),{onDidCreateNode:n,onDidDeleteNode:o,diffIdentityProvider:s}){let{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],u=ot.map(i,O=>this.createTreeNode(O,a,a.visible?1:0,c,h,n)),m=e[e.length-1],p=a.children.length>0,_=0;for(let O=m;O>=0&&O<a.children.length;O--){let N=a.children[O];if(N.visible){_=N.visibleChildIndex;break}}let v=[],C=0,w=0;for(let O of u)v.push(O),w+=O.renderNodeCount,O.visible&&(O.visibleChildIndex=_+C++);let S=zT(a.children,m,t,v);s?a.lastDiffIds?zT(a.lastDiffIds,m,t,v.map(O=>s.getId(O.element).toString())):a.lastDiffIds=a.children.map(O=>s.getId(O.element).toString()):a.lastDiffIds=void 0;let D=0;for(let O of S)O.visible&&D++;if(D!==0)for(let O=m+v.length;O<a.children.length;O++){let N=a.children[O];N.visible&&(N.visibleChildIndex-=D)}if(a.visibleChildrenCount+=C-D,c&&d){let O=S.reduce((N,F)=>N+(F.visible?F.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-O),this.list.splice(l,O,h)}if(S.length>0&&o){let O=N=>{o(N),N.children.forEach(O)};S.forEach(O)}let I=a.children.length>0;p!==I&&this.setCollapsible(e.slice(0,-1),I),this._onDidSplice.fire({insertedNodes:v,deletedNodes:S});let A=a;for(;A;){if(A.visibility===2){this.refilter();break}A=A.parent}}rerender(e){if(e.length===0)throw new Tr(this.user,"Invalid tree location");let{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let i=this.getTreeNode(e);typeof t=="undefined"&&(t=!i.collapsible);let n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){let n=this.getTreeNode(e);typeof t=="undefined"&&(t=!n.collapsed);let o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){let{node:i,listIndex:n,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(i,n,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&s&&!gj(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,i,n){let o=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!o)return o;let s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=s-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(gj(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!gj(t)&&t.recursive)for(let o of e.children)n=this._setNodeCollapseState(o,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,i,n,o,s){let a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed!="undefined",collapsed:typeof e.collapsed=="undefined"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&o.push(a);let c=e.children||ot.empty(),d=n&&l!==0&&!a.collapsed,h=ot.map(c,p=>this.createTreeNode(p,a,l,d,o,s)),u=0,m=1;for(let p of h)a.children.push(p),m+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=u++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=m):(a.renderNodeCount=0,n&&o.pop()),s&&s(a),a}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}let s=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(let c of e.children)a=this._updateNodeAfterFilterChange(c,o,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-s):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):yC(i)?(e.filterData=i.data,hg(i.visibility)):(e.filterData=void 0,hg(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[i,...n]=e;if(i<0||i>t.children.length)throw new Tr(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:i,revealed:n,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new Tr(this.user,"Invalid tree location");let a=t.children[s];return{node:a,listIndex:i,revealed:n,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,o=!0){let[s,...a]=e;if(s<0||s>t.children.length)throw new Tr(this.user,"Invalid tree location");for(let l=0;l<s;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],i+1,n,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:A3(e)[0]}};var _j=Kr("tree-item-expanded",ge.chevronDown),bj=Kr("tree-filter-on-type-on",ge.listFilter),vj=Kr("tree-filter-on-type-off",ge.listSelection),_9=Kr("tree-filter-clear",ge.close),CC=Kr("tree-item-loading",ge.loading);var b9=class extends Hu{constructor(e){super(e.elements.map(t=>t.element));this.data=e}};function wj(r){return r instanceof Hu?new b9(r):r}var v9=class{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=H.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(wj(e),t)}onDragOver(e,t,i,n,o=!0){let s=this.dnd.onDragOver(wj(e),t&&t.element,i,n),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t=="undefined")return s;if(a&&typeof s!="boolean"&&s.autoExpand&&(this.autoExpandDisposable=fa(()=>{let u=this.modelProvider(),m=u.getNodeLocation(t);u.isCollapsed(m)&&u.setCollapsed(m,!1),this.autoExpandNode=void 0},500)),typeof s=="boolean"||!s.accept||typeof s.bubble=="undefined"||s.feedback){if(!o){let u=typeof s=="boolean"?s:s.accept,m=typeof s=="boolean"?void 0:s.effect;return{accept:u,effect:m,feedback:[i]}}return s}if(s.bubble===1){let u=this.modelProvider(),m=u.getNodeLocation(t),p=u.getParentNodeLocation(m),_=u.getNode(p),v=p&&u.getListIndex(p);return this.onDragOver(e,_,v,n,!1)}let l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),h=l.getListRenderCount(c);return Object.assign(Object.assign({},s),{feedback:Pn(d,d+h)})}drop(e,t,i,n){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(wj(e),t&&t.element,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}};function Ace(r,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new v9(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){let i=r(),n=i.getNodeLocation(t),o=i.getParentNodeLocation(n);return i.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}var SC=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}},xC;(function(r){r.None="none",r.OnHover="onHover",r.Always="always"})(xC||(xC={}));var w9=class{constructor(e,t=[]){this._elements=t,this.onDidChange=ye.forEach(e,i=>this._elements=i)}get elements(){return this._elements}},Ob=class{constructor(e,t,i,n,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Ob.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new sN,this.activeIndentNodes=new Set,this.indentGuidesDisposable=H.None,this.disposables=new G,this.templateId=e.templateId,this.updateOptions(o),ye.map(i,s=>s.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent!="undefined"&&(this.indent=fo(e.indent,0,40)),typeof e.renderIndentGuides!="undefined"){let t=e.renderIndentGuides!==xC.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){let i=new G;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements!="undefined"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=X(e,oe(".monaco-tl-row")),i=X(t,oe(".monaco-tl-indent")),n=X(t,oe(".monaco-tl-twistie")),o=X(t,oe(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:n,indentGuidesDisposable:H.None,templateData:s}}renderElement(e,t,i,n){typeof n=="number"&&(this.renderedNodes.set(e,{templateData:i,height:n}),this.renderedElements.set(e.element,e));let o=Ob.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${o}px`,i.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,i),typeof n=="number"&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.templateData,n),typeof n=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);!t||this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);!t||(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._j.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(..._j.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Li(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let i=new G,n=this.modelProvider(),o=e;for(;;){let s=n.getNodeLocation(o),a=n.getParentNodeLocation(s);if(!a)break;let l=n.getNode(a),c=oe(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),i.add(Re(()=>this.renderedIndentGuides.delete(l,c))),o=l}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set,i=this.modelProvider();e.forEach(n=>{let o=i.getNodeLocation(n);try{let s=i.getParentNodeLocation(o);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):s&&t.add(i.getNode(s))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,o=>o.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Ge(this.disposables)}};Ob.DefaultIndent=8;var y9=class{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new G,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){let o=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return o;let s;if(typeof o=="boolean"?s=o?1:0:yC(o)?s=hg(o.visibility):s=o,s===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Ko.Default,visibility:!0};let i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),n=Array.isArray(i)?i:[i];for(let o of n){let s=o&&o.toString();if(typeof s=="undefined")return{data:Ko.Default,visibility:!0};let a=ag(this._pattern,this._lowercasePattern,0,s,s.toLowerCase(),0,!0);if(a)return this._matchCount++,n.length===1?{data:a,visibility:!0}:{data:{label:s,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Ko.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Ge(this.disposables)}},C9=class{constructor(e,t,i,n,o){this.tree=e,this.view=i,this.filter=n,this.keyboardNavigationDelegate=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new M,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new M,this.enabledDisposables=new G,this.disposables=new G,this.domNode=oe(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(J(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=X(i.getHTMLElement(),oe(".monaco-list-type-filter-message")),this.labelDomNode=X(this.domNode,oe("span.label"));let s=X(this.domNode,oe(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=X(s,oe("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(J(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=X(s,oe("button.clear"+_9.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=g("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType!="undefined"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation!="undefined"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;let e=this.enabledDisposables.add(new Bt(this.view.getHTMLElement(),"keydown")),t=ye.chain(e.event).filter(n=>!th(n.target)||n.target===this.filterOnTypeDomNode).filter(n=>n.key!=="Dead"&&!/^Media/.test(n.key)).map(n=>new kt(n)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(n=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(n)&&!(n.keyCode===18||n.keyCode===16||n.keyCode===15||n.keyCode===17)||(this.pattern.length>0||this.triggered)&&(n.keyCode===9||n.keyCode===1)&&!n.altKey&&!n.ctrlKey&&!n.metaKey||n.keyCode===1&&(We?n.altKey&&!n.metaKey:n.ctrlKey)&&!n.shiftKey).forEach(n=>{n.stopPropagation(),n.preventDefault()}).event,i=this.enabledDisposables.add(new Bt(this.clearDomNode,"click"));ye.chain(ye.any(t,i.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){!this._enabled||(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(We?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){let t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,n=>!Ko.isDefault(n.filterData));let i=this.tree.getFocus();if(i.length>0){let n=i[0];this.tree.getRelativeTop(n)===null&&this.tree.reveal(n,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){let e=this.view.getHTMLElement(),{left:t}=ci(e),i=e.clientWidth,n=i/2,o=this.domNode.clientWidth,s=new G,a=this.positionClassName,l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${i-o-6}px`;break}},c=h=>{h.preventDefault();let u=h.clientX-t;h.dataTransfer&&(h.dataTransfer.dropEffect="none"),u<n?a="nw":a="ne",l()},d=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",Ge(s)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),s.add(Re(()=>this.domNode.classList.remove("dragging"))),s.add(J(document,"dragover",h=>c(h))),s.add(J(this.domNode,"dragend",()=>d())),Cl.CurrentDragAndDropData=new bA("vscode-ui"),s.add(Re(()=>Cl.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...vj.classNamesArray),this.filterOnTypeDomNode.classList.add(...bj.classNamesArray),this.filterOnTypeDomNode.title=g("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...bj.classNamesArray),this.filterOnTypeDomNode.classList.add(...vj.classNamesArray),this.filterOnTypeDomNode.title=g("enable filter on type","Enable Filter on Type"))}render(){let e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=g("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=g("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"\u2026"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Ko.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),Ge(this.disposables)}};function S9(r){let e=kb.Unknown;return UO(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=kb.Twistie:UO(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=kb.Element),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function rL(r,e){e(r),r.children.forEach(t=>rL(t,e))}var oL=class{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new M,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var i;!((i=t)===null||i===void 0?void 0:i.__forceEvent)&&zn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>rL(d,c)),this.set([...l.values()]);return}let i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>rL(l,n));let o=new Map,s=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>rL(l,s));let a=[];for(let l of this.nodes){let c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{let h=o.get(c);h&&a.push(h)}}if(this.nodes.length>0&&a.length===0){let l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},x9=class extends iL{constructor(e,t){super(e);this.tree=t}onViewPointer(e){if(th(e.browserEvent.target)||dg(e.browserEvent.target))return;let t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);let i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){let s=this.tree.model,a=s.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),s.setCollapsed(a,void 0,l),o&&n)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}},E9=class extends xo{constructor(e,t,i,n,o,s,a,l){super(e,t,i,n,l);this.focusTrait=o,this.selectionTrait=s,this.anchorTrait=a}createMouseController(e){return new x9(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;let n=[],o=[],s;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(s=e+l)}),n.length>0&&super.setFocus(hf([...super.getFocus(),...n])),o.length>0&&super.setSelection(hf([...super.getSelection(),...o])),typeof s=="number"&&super.setAnchor(s)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e=="undefined"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}},EC=class{constructor(e,t,i,n,o={}){this._options=o,this.eventBufferer=new jm,this.disposables=new G,this._onWillRefilter=new M,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new M;let s=new SC(i),a=new Q0,l=new Q0,c=new w9(l.event);this.renderers=n.map(u=>new Ob(u,()=>this.model,a.event,c,o));for(let u of this.renderers)this.disposables.add(u);let d;o.keyboardNavigationLabelProvider&&(d=new y9(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:d}),this.disposables.add(d)),this.focus=new oL(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new oL(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new oL(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new E9(e,t,s,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Ace(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),a.input=this.model.onDidChangeCollapseState;let h=ye.forEach(this.model.onDidSplice,u=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(u),this.selection.onDidModelSplice(u)})});if(h(()=>null,null,this.disposables),l.input=ye.chain(ye.any(h,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{let u=new Set;for(let m of this.focus.getNodes())u.add(m);for(let m of this.selection.getNodes())u.add(m);return[...u.values()]}).event,o.keyboardSupport!==!1){let u=ye.chain(this.view.onKeyDown).filter(m=>!th(m.target)).map(m=>new kt(m));u.filter(m=>m.keyCode===15).on(this.onLeftArrow,this,this.disposables),u.filter(m=>m.keyCode===17).on(this.onRightArrow,this,this.disposables),u.filter(m=>m.keyCode===10).on(this.onSpace,this,this.disposables)}if(o.keyboardNavigationLabelProvider){let u=o.keyboardNavigationDelegate||cj;this.typeFilterController=new C9(this,this.model,this.view,d,u),this.focusNavigationFilter=m=>this.typeFilterController.shouldAllowFocus(m),this.disposables.add(this.typeFilterController)}this.styleElement=un(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===xC.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ye.map(this.view.onMouseDblClick,S9)}get onPointer(){return ye.map(this.view.onPointer,S9)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick=="undefined"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick=="undefined"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===xC.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){let t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){let i=e.map(o=>this.model.getNode(o));this.selection.set(i,t);let n=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(n,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){let i=e.map(o=>this.model.getNode(o));this.focus.set(i,t);let n=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(n,t,!0)}focusNext(e=1,t=!1,i,n=this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);let i=this.model.getListIndex(e);i!==-1&&this.view.reveal(i,t)}getRelativeTop(e){let t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){let s=this.model.getParentNodeLocation(n);if(!s)return;let a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;let[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let i=t[0],n=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,o)}dispose(){Ge(this.disposables),this.view.dispose()}};var ug=class{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new pj(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(n,o){return i.sorter.compare(n.element,o.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=ot.empty(),i={}){let n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=ot.empty(),i){let n=new Set,o=new Set,s=l=>{var c;if(l.element===null)return;let d=l;if(n.add(d.element),this.nodes.set(d.element,d),this.identityProvider){let h=this.identityProvider.getId(d.element).toString();o.add(h),this.nodesByIdentity.set(h,d)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,d)},a=l=>{var c;if(l.element===null)return;let d=l;if(n.has(d.element)||this.nodes.delete(d.element),this.identityProvider){let h=this.identityProvider.getId(d.element).toString();o.has(h)||this.nodesByIdentity.delete(h)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:s,onDidDeleteNode:a}))}preserveCollapseState(e=ot.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ot.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){let s=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(s)}if(!i)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});let n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible,o=typeof t.collapsed!="undefined"?t.collapsed:i.collapsed;return Object.assign(Object.assign({},t),{collapsible:n,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new Tr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Tr(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new Tr(this.user,`Tree element not found: ${e}`);let i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new Tr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function sL(r){let e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:ot.map(ot.from(r.children),sL),collapsible:r.collapsible,collapsed:r.collapsed}}function aL(r){let e=[r.element],t=r.incompressible||!1,i,n;for(;[n,i]=ot.consume(ot.from(r.children),2),!(n.length!==1||n[0].incompressible);)r=n[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:ot.map(ot.concat(n,i),aL),collapsible:r.collapsible,collapsed:r.collapsed}}function yj(r,e=0){let t;return e<r.element.elements.length-1?t=[yj(r,e+1)]:t=ot.map(ot.from(r.children),i=>yj(i,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function D9(r){return yj(r,0)}function L9(r,e,t){return r.element===e?Object.assign(Object.assign({},r),{children:t}):Object.assign(Object.assign({},r),{children:ot.map(ot.from(r.children),i=>L9(i,e,t))})}var jce=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}}),k9=class{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new ug(e,t,i),this.enabled=typeof i.compressionEnabled=="undefined"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=ot.empty(),i){let n=i.diffIdentityProvider&&jce(i.diffIdentityProvider);if(e===null){let m=ot.map(t,this.enabled?aL:sL);this._setChildren(null,m,{diffIdentityProvider:n,diffDepth:1/0});return}let o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");let s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=D9(s),d=L9(c,e,t),h=(this.enabled?aL:sL)(d),u=l.children.map(m=>m===s?h:m);this._setChildren(l.element,u,{diffIdentityProvider:n,diffDepth:s.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let i=this.model.getNode().children,n=ot.map(i,D9),o=ot.map(n,e?aL:sL);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){let n=new Set,o=a=>{for(let l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},s=a=>{for(let l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:o,onDidDeleteNode:s}))}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e=="undefined")return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){let n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new Tr(this.user,`Tree element not found: ${e}`);return t}},Mce=r=>r[r.length-1],lL=class{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new lL(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}};function Fce(r,e){return{splice(t,i,n){e.splice(t,i,n.map(o=>r.map(o)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function Bce(r,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(r(t),i)}}})}var Cj=class{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||Mce;let n=o=>this.elementMapper(o.elements);this.nodeMapper=new Ib(o=>new lL(n,o)),this.model=new k9(e,Fce(this.nodeMapper,t),Bce(n,i))}get onDidSplice(){return ye.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return ye.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ye.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=ot.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}};var Wce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Tb=class extends EC{constructor(e,t,i,n,o={}){super(e,t,i,n,o)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=ot.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new ug(e,t,i)}},Sj=class{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){let t=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:t}}renderElement(e,t,i,n){let o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};Wce([Ni],Sj.prototype,"compressedTreeNodeProvider",null);function Uce(r,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}})}var DC=class extends Tb{constructor(e,t,i,n,o={}){let s=()=>this,a=n.map(l=>new Sj(s,l));super(e,t,i,a,Uce(s,o))}setChildren(e,t=ot.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new Cj(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled!="undefined"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};var $u=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function xj(r){return Object.assign(Object.assign({},r),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function Ej(r,e){return e.parent?e.parent===r?!0:Ej(r,e.parent):!1}function Vce(r,e){return r===e||Ej(r,e)||Ej(e,r)}var cL=class{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new cL(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},I9=class{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...CC.classNamesArray),!0):(t.classList.remove(...CC.classNamesArray),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function O9(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function T9(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}var N9=class extends Hu{constructor(e){super(e.elements.map(t=>t.element));this.data=e}};function Dj(r){return r instanceof Hu?new N9(r):r}var R9=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(Dj(e),t)}onDragOver(e,t,i,n,o=!0){return this.dnd.onDragOver(Dj(e),t&&t.element,i,n)}drop(e,t,i,n){this.dnd.drop(Dj(e),t&&t.element,i,n)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}};function P9(r){return r&&Object.assign(Object.assign({},r),{collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new R9(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:r.accessibilityProvider&&Object.assign(Object.assign({},r.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>{var t;return!!((t=r.accessibilityProvider)===null||t===void 0?void 0:t.isChecked(e.element))}:void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))}),filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},r.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick=="undefined"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:r.additionalScrollHeight})}function Lj(r,e){e(r),r.children.forEach(t=>Lj(t,e))}var dL=class{constructor(e,t,i,n,o,s={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new M,this._onDidChangeNodeSlowState=new M,this.nodeMapper=new Ib(a=>new cL(a)),this.disposables=new G,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren=="undefined"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,i,n,s),this.root=xj({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return ye.map(this.tree.onDidChangeFocus,O9)}get onDidChangeSelection(){return ye.map(this.tree.onDidChangeSelection,O9)}get onMouseDblClick(){return ye.map(this.tree.onMouseDblClick,T9)}get onPointer(){return ye.map(this.tree.onPointer,T9)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,n,o){let s=new SC(i),a=n.map(c=>new I9(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=P9(o)||{};return new Tb(e,t,s,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return $u(this,void 0,void 0,function*(){this.refreshPromises.forEach(n=>n.cancel()),this.refreshPromises.clear(),this.root.element=e;let i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,i=!1,n,o){return $u(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Tr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ye.toPromise(this._onDidRender.event));let s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,n,o),i)try{this.tree.rerender(s)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){let i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return $u(this,void 0,void 0,function*(){if(typeof this.root.element=="undefined")throw new Tr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ye.toPromise(this._onDidRender.event));let i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(yield this.root.refreshPromise,yield ye.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;let n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield ye.toPromise(this._onDidRender.event)),n})}setSelection(e,t){let i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){let i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Tr(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,n){return $u(this,void 0,void 0,function*(){yield this.refreshNode(e,t,i),this.render(e,i,n)})}refreshNode(e,t,i){return $u(this,void 0,void 0,function*(){let n;return this.subTreeRefreshPromises.forEach((o,s)=>{!n&&Vce(s,e)&&(n=o.then(()=>this.refreshNode(e,t,i)))}),n||this.doRefreshSubTree(e,t,i)})}doRefreshSubTree(e,t,i){return $u(this,void 0,void 0,function*(){let n;e.refreshPromise=new Promise(o=>n=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let o=yield this.doRefreshNode(e,t,i);e.stale=!1,yield K1.settled(o.map(s=>this.doRefreshSubTree(s,t,i)))}finally{n()}})}doRefreshNode(e,t,i){return $u(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(ot.empty());else{let o=ma(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},s=>null),n=this.doGetChildren(e).finally(()=>o.cancel())}try{let o=yield n;return this.setChildren(e,o,t,i)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),co(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=At(()=>$u(this,void 0,void 0,function*(){let i=yield this.dataSource.getChildren(e.element);return this.processChildren(i)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(we))}setChildren(e,t,i,n){let o=[...t];if(e.children.length===0&&o.length===0)return[];let s=new Map,a=new Map;for(let d of e.children)if(s.set(d.element,d),this.identityProvider){let h=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:h})}let l=[],c=o.map(d=>{let h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){let _=xj({element:d,parent:e,hasChildren:h});return h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}let u=this.identityProvider.getId(d).toString(),m=a.get(u);if(m){let _=m.node;return s.delete(_.element),this.nodes.delete(_.element),this.nodes.set(d,_),_.element=d,_.hasChildren=h,i?m.collapsed?(_.children.forEach(v=>Lj(v,C=>this.nodes.delete(C.element))),_.children.splice(0,_.children.length),_.stale=!0):l.push(_):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(_.collapsedByDefault=!1,l.push(_)),_}let p=xj({element:d,parent:e,id:u,hasChildren:h});return n&&n.viewState.focus&&n.viewState.focus.indexOf(u)>-1&&n.focus.push(p),n&&n.viewState.selection&&n.viewState.selection.indexOf(u)>-1&&n.selection.push(p),n&&n.viewState.expanded&&n.viewState.expanded.indexOf(u)>-1?l.push(p):h&&this.collapseByDefault&&!this.collapseByDefault(d)&&(p.collapsedByDefault=!1,l.push(p)),p});for(let d of s.values())Lj(d,h=>this.nodes.delete(h.element));for(let d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,i){let n=e.children.map(s=>this.asTreeElement(s,t)),o=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(s){return i.diffIdentityProvider.getId(s.element)}}});this.tree.setChildren(e===this.root?null:e,n,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:i=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?ot.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}},hL=class{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new hL(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},A9=class{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...CC.classNamesArray),!0):(t.classList.remove(...CC.classNamesArray),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Ge(this.disposables)}};function zce(r){let e=r&&P9(r);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}})})}var kj=class extends dL{constructor(e,t,i,n,o,s,a={}){super(e,t,i,o,s,a);this.compressionDelegate=n,this.compressibleNodeMapper=new Ib(l=>new hL(l)),this.filter=a.filter}createTree(e,t,i,n,o){let s=new SC(i),a=n.map(c=>new A9(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=zce(o)||{};return new DC(e,t,s,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);let i=u=>this.identityProvider.getId(u).toString(),n=u=>{let m=new Set;for(let p of u){let _=this.tree.getCompressedTreeNode(p===this.root?null:p);if(!!_.element)for(let v of _.element.elements)m.add(i(v.element))}return m},o=n(this.tree.getSelection()),s=n(this.tree.getFocus());super.render(e,t);let a=this.getSelection(),l=!1,c=this.getFocus(),d=!1,h=u=>{let m=u.element;if(m)for(let p=0;p<m.elements.length;p++){let _=i(m.elements[p].element),v=m.elements[m.elements.length-1].element;o.has(_)&&a.indexOf(v)===-1&&(a.push(v),l=!0),s.has(_)&&c.indexOf(v)===-1&&(c.push(v),d=!0)}u.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=ot.filter(e,t=>{let i=this.filter.filter(t,1),n=Hce(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}};function Hce(r){return typeof r=="boolean"?r?1:0:yC(r)?hg(r.visibility):hg(r)}var Ij=class extends EC{constructor(e,t,i,n,o,s={}){super(e,t,i,n,s);this.user=e,this.dataSource=o,this.identityProvider=s.identityProvider}createModel(e,t,i){return new ug(e,t,i)}};var LC=new _e("isWindows",bi,g("isWindows","Whether the operating system is Windows")),j9="inputFocus";var Ac=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},bt=function(r,e){return function(t,i){e(t,i,r)}},Yo=Ie("listService"),uL=class{constructor(e){this._themeService=e,this.disposables=new G,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;let n=new nL(un(),"");this.disposables.add(Jd(n,this._themeService))}if(this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");let i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),Os(e.onDidFocus(()=>this._lastFocusedWidget=e),Re(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};uL=Ac([bt(0,ht)],uL);var M9=new _e("listFocus",!0),mL=new _e("listSupportsMultiselect",!0),Oj=fe.and(M9,fe.not(j9)),Tj=new _e("listHasSelectionOrFocus",!1),Nj=new _e("listDoubleSelection",!1),Rj=new _e("listMultiSelection",!1),fL=new _e("listSelectionNavigation",!1),F9="listAutomaticKeyboardNavigation";function gL(r,e){let t=r.createScoped(e.getHTMLElement());return M9.bindTo(t),t}var mg="workbench.list.multiSelectModifier",Pj="workbench.list.openMode",Ys="workbench.list.horizontalScrolling",pL="workbench.list.keyboardNavigation",Aj="workbench.list.automaticKeyboardNavigation",kC="workbench.tree.indent",_L="workbench.tree.renderIndentGuides",Sl="workbench.list.smoothScrolling",jc="workbench.list.mouseWheelScrollSensitivity",Mc="workbench.list.fastScrollSensitivity",bL="workbench.tree.expandMode";function Fc(r){return r.getValue(mg)==="alt"}var B9=class extends H{constructor(e){super();this.configurationService=e,this.useAltAsMultipleSelectionModifier=Fc(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(mg)&&(this.useAltAsMultipleSelectionModifier=Fc(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:dj(e)}isSelectionRangeChangeEvent(e){return hj(e)}};function vL(r,e,t){var i;let n=new G;return[Object.assign(Object.assign({},r),{keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return t.mightProducePrintableCharacter(s)}},smoothScrolling:Boolean(e.getValue(Sl)),mouseWheelScrollSensitivity:e.getValue(jc),fastScrollSensitivity:e.getValue(Mc),multipleSelectionController:(i=r.multipleSelectionController)!==null&&i!==void 0?i:n.add(new B9(e))}),n]}var wL=class extends xo{constructor(e,t,i,n,o,s,a,l,c,d){let h=typeof o.horizontalScrolling!="undefined"?o.horizontalScrolling:Boolean(c.getValue(Ys)),[u,m]=vL(o,c,d);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ks(l.getColorTheme(),pC)),u),{horizontalScrolling:h}));this.disposables.add(m),this.contextKeyService=gL(s,this),this.themeService=l,this.listSupportsMultiSelect=mL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),fL.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=Tj.bindTo(this.contextKeyService),this.listDoubleSelection=Nj.bindTo(this.contextKeyService),this.listMultiSelection=Rj.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Fc(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let _=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||v.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let _=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||v.length>0)})),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(mg)&&(this._useAltAsMultipleSelectionModifier=Fc(c));let v={};if(_.affectsConfiguration(Ys)&&this.horizontalScrolling===void 0){let C=Boolean(c.getValue(Ys));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(_.affectsConfiguration(Sl)){let C=Boolean(c.getValue(Sl));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(_.affectsConfiguration(jc)){let C=c.getValue(jc);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(_.affectsConfiguration(Mc)){let C=c.getValue(Mc);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new jj(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Jd(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};wL=Ac([bt(5,be),bt(6,Yo),bt(7,ht),bt(8,Mt),bt(9,Nt)],wL);var W9=class extends mj{constructor(e,t,i,n,o,s,a,l,c,d){let h=typeof o.horizontalScrolling!="undefined"?o.horizontalScrolling:Boolean(c.getValue(Ys)),[u,m]=vL(o,c,d);super(e,t,i,n,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ks(l.getColorTheme(),pC)),u),{horizontalScrolling:h}));this.disposables=new G,this.disposables.add(m),this.contextKeyService=gL(s,this),this.themeService=l,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=mL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),fL.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this._useAltAsMultipleSelectionModifier=Fc(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(Jd(this,l,o.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(mg)&&(this._useAltAsMultipleSelectionModifier=Fc(c));let v={};if(_.affectsConfiguration(Ys)&&this.horizontalScrolling===void 0){let C=Boolean(c.getValue(Ys));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(_.affectsConfiguration(Sl)){let C=Boolean(c.getValue(Sl));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(_.affectsConfiguration(jc)){let C=c.getValue(jc);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(_.affectsConfiguration(Mc)){let C=c.getValue(Mc);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new jj(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Jd(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};W9=Ac([bt(5,be),bt(6,Yo),bt(7,ht),bt(8,Mt),bt(9,Nt)],W9);var U9=class extends Lb{constructor(e,t,i,n,o,s,a,l,c,d,h){let u=typeof s.horizontalScrolling!="undefined"?s.horizontalScrolling:Boolean(d.getValue(Ys)),[m,p]=vL(s,d,h);super(e,t,i,n,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ks(c.getColorTheme(),pC)),m),{horizontalScrolling:u}));this.disposables=new G,this.disposables.add(p),this.contextKeyService=gL(a,this),this.themeService=c,this.listSupportsMultiSelect=mL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),fL.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=Tj.bindTo(this.contextKeyService),this.listDoubleSelection=Nj.bindTo(this.contextKeyService),this.listMultiSelection=Rj.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Fc(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let v=this.getSelection(),C=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(v.length>0||C.length>0),this.listMultiSelection.set(v.length>1),this.listDoubleSelection.set(v.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let v=this.getSelection(),C=this.getFocus();this.listHasSelectionOrFocus.set(v.length>0||C.length>0)})),this.disposables.add(d.onDidChangeConfiguration(v=>{v.affectsConfiguration(mg)&&(this._useAltAsMultipleSelectionModifier=Fc(d));let C={};if(v.affectsConfiguration(Ys)&&this.horizontalScrolling===void 0){let w=Boolean(d.getValue(Ys));C=Object.assign(Object.assign({},C),{horizontalScrolling:w})}if(v.affectsConfiguration(Sl)){let w=Boolean(d.getValue(Sl));C=Object.assign(Object.assign({},C),{smoothScrolling:w})}if(v.affectsConfiguration(jc)){let w=d.getValue(jc);C=Object.assign(Object.assign({},C),{mouseWheelScrollSensitivity:w})}if(v.affectsConfiguration(Mc)){let w=d.getValue(Mc);C=Object.assign(Object.assign({},C),{fastScrollSensitivity:w})}Object.keys(C).length>0&&this.updateOptions(C)})),this.navigator=new V9(this,Object.assign({configurationService:d},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Jd(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};U9=Ac([bt(6,be),bt(7,Yo),bt(8,ht),bt(9,Mt),bt(10,Nt)],U9);var yL=class extends H{constructor(e,t){var i;super();this.widget=e,this._onDidOpen=this._register(new M),this.onDidOpen=this._onDidOpen.event,this._register(ye.filter(this.widget.onDidChangeSelection,n=>n.browserEvent instanceof KeyboardEvent)(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t==null?void 0:t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Pj))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Pj))!=="doubleClick"}))):this.openOnSingleClick=(i=t==null?void 0:t.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;let t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i,o=!1;this._open(this.getSelectedElement(),i,n,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;let n=t.button===1,o=!0,s=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}onMouseDblClick(e,t){if(!t)return;let i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;let o=!1,s=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}_open(e,t,i,n,o){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:o})}},jj=class extends yL{constructor(e,t){super(e,t);this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},V9=class extends yL{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},z9=class extends yL{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}};function $ce(r,e){let t=!1;return i=>{if(t)return t=!1,!1;let n=e.softDispatch(i,r);return n&&n.enterChord?(t=!0,!1):(t=!1,!0)}}var H9=class extends Tb{constructor(e,t,i,n,o,s,a,l,c,d,h){let{options:u,getAutomaticKeyboardNavigation:m,disposable:p}=IC(t,o,s,c,d,h);super(e,t,i,n,u);this.disposables.add(p),this.internals=new fg(this,o,m,o.overrideStyles,s,a,l,c,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};H9=Ac([bt(5,be),bt(6,Yo),bt(7,ht),bt(8,Mt),bt(9,Nt),bt(10,pn)],H9);var $9=class extends DC{constructor(e,t,i,n,o,s,a,l,c,d,h){let{options:u,getAutomaticKeyboardNavigation:m,disposable:p}=IC(t,o,s,c,d,h);super(e,t,i,n,u);this.disposables.add(p),this.internals=new fg(this,o,m,o.overrideStyles,s,a,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};$9=Ac([bt(5,be),bt(6,Yo),bt(7,ht),bt(8,Mt),bt(9,Nt),bt(10,pn)],$9);var K9=class extends Ij{constructor(e,t,i,n,o,s,a,l,c,d,h,u){let{options:m,getAutomaticKeyboardNavigation:p,disposable:_}=IC(t,s,a,d,h,u);super(e,t,i,n,o,m);this.disposables.add(_),this.internals=new fg(this,s,p,s.overrideStyles,a,l,c,d,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};K9=Ac([bt(6,be),bt(7,Yo),bt(8,ht),bt(9,Mt),bt(10,Nt),bt(11,pn)],K9);var CL=class extends dL{constructor(e,t,i,n,o,s,a,l,c,d,h,u){let{options:m,getAutomaticKeyboardNavigation:p,disposable:_}=IC(t,s,a,d,h,u);super(e,t,i,n,o,m);this.disposables.add(_),this.internals=new fg(this,s,p,s.overrideStyles,a,l,c,d,u),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};CL=Ac([bt(6,be),bt(7,Yo),bt(8,ht),bt(9,Mt),bt(10,Nt),bt(11,pn)],CL);var q9=class extends kj{constructor(e,t,i,n,o,s,a,l,c,d,h,u,m){let{options:p,getAutomaticKeyboardNavigation:_,disposable:v}=IC(t,a,l,h,u,m);super(e,t,i,n,o,s,p);this.disposables.add(v),this.internals=new fg(this,a,_,a.overrideStyles,l,c,d,h,m),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};q9=Ac([bt(7,be),bt(8,Yo),bt(9,ht),bt(10,Mt),bt(11,Nt),bt(12,pn)],q9);function IC(r,e,t,i,n,o){var s;let a=()=>{let p=Boolean(t.getContextKeyValue(F9));return p&&(p=Boolean(i.getValue(Aj))),p},l=o.isScreenReaderOptimized(),c=e.simpleKeyboardNavigation||l?"simple":i.getValue(pL),d=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(i.getValue(Ys)),[h,u]=vL(e,i,n),m=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:u,options:Object.assign(Object.assign({keyboardSupport:!1},h),{indent:typeof i.getValue(kC)=="number"?i.getValue(kC):void 0,renderIndentGuides:i.getValue(_L),smoothScrolling:Boolean(i.getValue(Sl)),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:c==="simple",filterOnType:c==="filter",horizontalScrolling:d,keyboardNavigationEventFilter:$ce(r,n),additionalScrollHeight:m,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(s=e.expandOnlyOnTwistieClick)!==null&&s!==void 0?s:i.getValue(bL)==="doubleClick"})}}var fg=class{constructor(e,t,i,n,o,s,a,l,c){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=gL(o,e),this.listSupportsMultiSelect=mL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),fL.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.hasSelectionOrFocus=Tj.bindTo(this.contextKeyService),this.hasDoubleSelection=Nj.bindTo(this.contextKeyService),this.hasMultiSelection=Rj.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Fc(l);let h=new Set;h.add(F9);let u=()=>{let p=c.isScreenReaderOptimized()?"simple":l.getValue(pL);e.updateOptions({simpleKeyboardNavigation:p==="simple",filterOnType:p==="filter"})};this.updateStyleOverrides(n),this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{let m=e.getSelection(),p=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(m.length>0||p.length>0),this.hasMultiSelection.set(m.length>1),this.hasDoubleSelection.set(m.length===2)})}),e.onDidChangeFocus(()=>{let m=e.getSelection(),p=e.getFocus();this.hasSelectionOrFocus.set(m.length>0||p.length>0)}),l.onDidChangeConfiguration(m=>{let p={};if(m.affectsConfiguration(mg)&&(this._useAltAsMultipleSelectionModifier=Fc(l)),m.affectsConfiguration(kC)){let _=l.getValue(kC);p=Object.assign(Object.assign({},p),{indent:_})}if(m.affectsConfiguration(_L)){let _=l.getValue(_L);p=Object.assign(Object.assign({},p),{renderIndentGuides:_})}if(m.affectsConfiguration(Sl)){let _=Boolean(l.getValue(Sl));p=Object.assign(Object.assign({},p),{smoothScrolling:_})}if(m.affectsConfiguration(pL)&&u(),m.affectsConfiguration(Aj)&&(p=Object.assign(Object.assign({},p),{automaticKeyboardNavigation:i()})),m.affectsConfiguration(Ys)&&t.horizontalScrolling===void 0){let _=Boolean(l.getValue(Ys));p=Object.assign(Object.assign({},p),{horizontalScrolling:_})}if(m.affectsConfiguration(bL)&&t.expandOnlyOnTwistieClick===void 0&&(p=Object.assign(Object.assign({},p),{expandOnlyOnTwistieClick:l.getValue(bL)==="doubleClick"})),m.affectsConfiguration(jc)){let _=l.getValue(jc);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:_})}if(m.affectsConfiguration(Mc)){let _=l.getValue(Mc);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:_})}Object.keys(p).length>0&&e.updateOptions(p)}),this.contextKeyService.onDidChangeContext(m=>{m.affectsSome(h)&&e.updateOptions({automaticKeyboardNavigation:i()})}),c.onDidChangeScreenReaderOptimized(()=>u())),this.navigator=new z9(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){Ge(this.styler),this.styler=e?Jd(this.tree,this.themeService,e):H.None}dispose(){this.disposables=Ge(this.disposables),Ge(this.styler),this.styler=void 0}};fg=Ac([bt(4,be),bt(5,Yo),bt(6,ht),bt(7,Mt),bt(8,pn)],fg);var Kce=ii.as(ya.Configuration);Kce.registerConfiguration({id:"workbench",order:7,title:g("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[mg]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[g("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),g("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:g({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Pj]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:g({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Ys]:{type:"boolean",default:!1,description:g("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[kC]:{type:"number",default:8,minimum:0,maximum:40,description:g("tree indent setting","Controls tree indentation in pixels.")},[_L]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:g("render tree indent guides","Controls whether the tree should render indent guides.")},[Sl]:{type:"boolean",default:!1,description:g("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[jc]:{type:"number",default:1,description:g("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Mc]:{type:"number",default:5,description:g("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[pL]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[g("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),g("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),g("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:g("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[Aj]:{type:"boolean",default:!0,markdownDescription:g("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[bL]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:g("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var _i;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(_i||(_i={}));(function(r){function e(s,a){return a-s}r.compare=e;let t=Object.create(null);t[r.Error]=g("sev.error","Error"),t[r.Warning]=g("sev.warning","Warning"),t[r.Info]=g("sev.info","Info");function i(s){return t[s]||""}r.toString=i;function n(s){switch(s){case mi.Error:return r.Error;case mi.Warning:return r.Warning;case mi.Info:return r.Info;case mi.Ignore:return r.Hint}}r.fromSeverity=n;function o(s){switch(s){case r.Error:return mi.Error;case r.Warning:return mi.Warning;case r.Info:return mi.Info;case r.Hint:return mi.Ignore}}r.toSeverity=o})(_i||(_i={}));var OC;(function(r){let e="";function t(n){return i(n,!0)}r.makeKey=t;function i(n,o){let s=[e];return n.source?s.push(n.source.replace("\xA6","\\\xA6")):s.push(e),n.code?typeof n.code=="string"?s.push(n.code.replace("\xA6","\\\xA6")):s.push(n.code.value.replace("\xA6","\\\xA6")):s.push(e),n.severity!==void 0&&n.severity!==null?s.push(_i.toString(n.severity)):s.push(e),n.message&&o?s.push(n.message.replace("\xA6","\\\xA6")):s.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?s.push(n.startLineNumber.toString()):s.push(e),n.startColumn!==void 0&&n.startColumn!==null?s.push(n.startColumn.toString()):s.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?s.push(n.endLineNumber.toString()):s.push(e),n.endColumn!==void 0&&n.endColumn!==null?s.push(n.endColumn.toString()):s.push(e),s.push(e),s.join("\xA6")}r.makeKeyOptionalMessage=i})(OC||(OC={}));var nh=Ie("markerService");var Y9=class{constructor(){this._byResource=new rn,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let o=this._byOwner.get(t);o||(o=new rn,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){let i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,n=!1,o=this._byResource.get(e);o&&(i=o.delete(t));let s=this._byOwner.get(t);if(s&&(n=s.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){var t,i,n,o;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:ot.empty():ve.isUri(e)?(o=(n=this._byResource.get(e))===null||n===void 0?void 0:n.values())!==null&&o!==void 0?o:ot.empty():ot.map(ot.concat(...this._byOwner.values()),s=>s[1])}},Z9=class{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new rn,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(let t of e){let i=this._data.get(t);i&&this._substract(i);let n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){let t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Xe.inMemory||e.scheme===Xe.walkThrough||e.scheme===Xe.walkThroughSnippet)return t;for(let{severity:i}of this._service.read({resource:e}))i===_i.Error?t.errors+=1:i===_i.Warning?t.warnings+=1:i===_i.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}},rh=class{constructor(){this._onMarkerChanged=new SO({delay:0,merge:rh._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new Y9,this._stats=new Z9(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(let i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(Tx(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{let n=[];for(let o of i){let s=rh._toMarker(e,t,o);s&&n.push(s)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:o,message:s,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:m}=i;if(!!s)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,h=h>0?h:c,{resource:t,owner:e,code:n,severity:o,message:s,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:m}}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){let s=this._data.get(i,t);if(s){let a=[];for(let l of s)if(rh._accept(l,n)){let c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!i){let s=[];for(let a of this._data.values())for(let l of a)if(rh._accept(l,n)){let c=s.push(l);if(o>0&&c===o)return s}return s}else{let s=this._data.values(i??t),a=[];for(let l of s)for(let c of l)if(rh._accept(c,n)){let d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){let t=new rn;for(let i of e)for(let n of i)t.set(n,!0);return Array.from(t.keys())}};var SL=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Nb;(function(r){r[r.None=0]="None",r[r.Initialized=1]="Initialized",r[r.Closed=2]="Closed"})(Nb||(Nb={}));var gg=class extends H{constructor(e,t=Object.create(null)){super();this.database=e,this.options=t,this._onDidChangeStorage=this._register(new M),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Nb.None,this.cache=new Map,this.flushDelayer=new AO(gg.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;(t=e.changed)===null||t===void 0||t.forEach((n,o)=>this.accept(o,n)),(i=e.deleted)===null||i===void 0||i.forEach(n=>this.accept(n,void 0))}accept(e,t){if(this.state===Nb.Closed)return;let i=!1;lr(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire(e)}get(e,t){let i=this.cache.get(e);return lr(i)?t:i}getBoolean(e,t){let i=this.get(e);return lr(i)?t:i==="true"}getNumber(e,t){let i=this.get(e);return lr(i)?t:parseInt(i,10)}set(e,t){return SL(this,void 0,void 0,function*(){if(this.state===Nb.Closed)return;if(lr(t))return this.delete(e);let i=String(t);if(this.cache.get(e)!==i)return this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return SL(this,void 0,void 0,function*(){if(!(this.state===Nb.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return SL(this,void 0,void 0,function*(){if(!this.hasPending)return;let e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}};gg.DEFAULT_FLUSH_DELAY=100;var xL=class{constructor(){this.onDidChangeItemsExternal=ye.None,this.items=new Map}updateItems(e){return SL(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,i)=>this.items.set(i,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}};var EL="__$__targetStorageMarker",Zo=Ie("storageService"),Rb;(function(r){r[r.NONE=0]="NONE",r[r.SHUTDOWN=1]="SHUTDOWN"})(Rb||(Rb={}));var TC=class extends H{constructor(e={flushInterval:TC.DEFAULT_FLUSH_INTERVAL}){super();this.options=e,this._onDidChangeValue=this._register(new Am),this._onDidChangeTarget=this._register(new Am),this._onWillSaveState=this._register(new M),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===EL?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getNumber(e,i)}store(e,t,i,n){if(lr(t)){this.remove(e,i);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,n),(o=this.getStorage(i))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,t,void 0),(i=this.getStorage(t))===null||i===void 0||i.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i){var n,o;let s=this.getKeyTargets(t);typeof i=="number"?s[e]!==i&&(s[e]=i,(n=this.getStorage(t))===null||n===void 0||n.set(EL,JSON.stringify(s))):typeof s[e]=="number"&&(delete s[e],(o=this.getStorage(t))===null||o===void 0||o.set(EL,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){let t=this.get(EL,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}};TC.DEFAULT_FLUSH_INTERVAL=60*1e3;var Mj=class extends TC{constructor(){super();this.globalStorage=this._register(new gg(new xL)),this.workspaceStorage=this._register(new gg(new xL)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}};var G9=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},DL=function(r,e){return function(t,i){e(t,i,r)}},LL=class{constructor(e){this._commandService=e}createMenu(e,t,i){return new Fj(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,t,this)}};LL=G9([DL(0,jt)],LL);var Fj=class Pb{constructor(e,t,i,n,o){this._id=e,this._options=t,this._commandService=i,this._contextKeyService=n,this._menuService=o,this._disposables=new G,this._menuGroups=[],this._contextKeys=new Set,this._build();let s=new dt(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(s),this._disposables.add(tr.onDidChangeMenu(c=>{c.has(e)&&s.schedule()}));let a=this._disposables.add(new G),l=()=>{let c=new dt(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(c),a.add(n.onDidChangeContext(d=>{d.affectsSome(this._contextKeys)&&c.schedule()}))};this._onDidChange=new M({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();let e=tr.getMenuItems(this._id),t;e.sort(Pb._compareMenuItems);for(let i of e){let n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(Pb._fillInKbExprKeys(e.when,this._contextKeys),y_(e)){if(e.command.precondition&&Pb._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){let t=e.command.toggled.condition||e.command.toggled;Pb._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&tr.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){let t=[];for(let i of this._menuGroups){let[n,o]=i,s=[];for(let a of o)if(this._contextKeyService.contextMatchesRules(a.when)){let l=y_(a)?new Da(a.command,a.alt,e,this._contextKeyService,this._commandService):new Sf(a,this._menuService,this._contextKeyService,e);s.push(l)}s.length>0&&t.push([n,s])}return t}static _fillInKbExprKeys(e,t){if(e)for(let i of e.keys())t.add(i)}static _compareMenuItems(e,t){let i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;let a=i.localeCompare(n);if(a!==0)return a}let o=e.order||0,s=t.order||0;return o<s?-1:o>s?1:Pb._compareTitles(y_(e)?e.command.title:e.title,y_(t)?t.command.title:t.title)}static _compareTitles(e,t){let i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};Fj=G9([DL(2,jt),DL(3,be),DL(4,hs)],Fj);var qce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},X9=function(r,e){return function(t,i){e(t,i,r)}},Q9=class extends H{constructor(e){super();this.model=e,this._markersData=new Map,this._register(Re(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){let i=[...this._markersData.keys()];this._markersData.clear();let n=this.model.deltaDecorations(i,t);for(let o=0;o<n.length;o++)this._markersData.set(n[o],e[o]);return i.length!==0||n.length!==0}getMarker(e){return this._markersData.get(e.id)}},kL=class extends H{constructor(e,t){super();this._markerService=t,this._onDidChangeMarker=this._register(new M),this._markerDecorations=new rn,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){let i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{let i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){let t=new Q9(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){let t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Xe.inMemory||e.uri.scheme===Xe.internal||e.uri.scheme===Xe.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri]))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500}),i=t.map(n=>({range:this._createDecorationRange(e.model,n),options:this._createDecorationOption(n)}));e.update(t,i)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let i=L.lift(t);return t.severity===_i.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),e.validateRange(i)}_createDecorationOption(e){let t,i,n,o,s;switch(e.severity){case _i.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case _i.Warning:t="squiggly-warning",i=yi(b8),n=20,s={color:yi(KH),position:kr.Inline};break;case _i.Info:t="squiggly-info",i=yi(v8),n=10;break;case _i.Error:default:t="squiggly-error",i=yi(_8),n=30,s={color:yi($H),position:kr.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Qn.Right},minimap:s,zIndex:n,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};kL=qce([X9(0,Gt),X9(1,nh)],kL);var Yce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},J9=function(r,e){return function(t,i){e(t,i,r)}},IL=class extends H{constructor(e,t){super();this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new M,this._accessibilityModeEnabledContext=Gf.bindTo(this._contextKeyService);let i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire())})),i(),this.onDidChangeScreenReaderOptimized(()=>i())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};IL=Yce([J9(0,be),J9(1,Mt)],IL);var OL=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Bj=class{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return OL(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}let i=document.activeElement,n=document.body.appendChild(oe("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),document.execCommand("copy"),i instanceof HTMLElement&&i.focus(),document.body.removeChild(n)})}readText(e){return OL(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return OL(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return OL(this,void 0,void 0,function*(){this.findText=e})}};var Zce=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},e$=function(r,e){return function(t,i){e(t,i,r)}},TL=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Ab=!1;function NL(r){return r.scheme===Xe.file?r.fsPath:r.path}var t$=0,NC=class{constructor(e,t,i,n,o,s,a){this.id=++t$,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}},Wj=class{constructor(e,t){this.resourceLabel=e,this.reason=t}},Uj=class{constructor(){this.elements=new Map}createMessage(){let e=[],t=[];for(let[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);let i=[];return e.length>0&&i.push(g({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(g({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}},i$=class{constructor(e,t,i,n,o,s,a){this.id=++t$,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new Uj),this.removedResources.has(t)||this.removedResources.set(t,new Wj(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Uj),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Wj(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}},Vj=class{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(let e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(let i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(let i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(let t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){let t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new bE(e,t)}restoreSnapshot(e){let t=e.elements.length,i=!0,n=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,n++){let c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,o=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let a=this._future.length-1;a>=0;a--,n++){let l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,s=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),s!==-1&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){let e=[],t=[];for(let i of this._past)e.push(i.actual);for(let i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}},RL=class{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}},n$=new Vj("","");n$.locked=!0;var RC=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(let t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(let i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=_u.None,i=Ia.None){if(e.type===0){let n=NL(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new NC(e,n,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{let n=new Set,o=[],s=[];for(let a of e.resources){let l=NL(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),o.push(l),s.push(c))}o.length===1?this._pushElement(new NC(e,o[0],s[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new i$(e,o,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}Ab&&this._print("pushElement")}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){let n=e.resourceLabels[t],o=e.strResources[t],s;this._editStacks.has(o)?s=this._editStacks.get(o):(s=new Vj(n,o),this._editStacks.set(o,s)),s.pushElement(e)}}getLastElement(e){let t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){let i=this._editStacks.get(t);if(i.hasFutureElements())return null;let n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let o of i){let s=NL(o.resource),a=this.getUriComparisonKey(o.resource),l=new NC(o,s,a,0,0,0,0);n.set(l.strResource,l)}for(let o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){let i=e.actual.split(),n=new Map;for(let o of i){let s=NL(o.resource),a=this.getUriComparisonKey(o.resource),l=new NC(o,s,a,0,0,0,0);n.set(l.strResource,l)}for(let o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,n)}}removeElements(e){let t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t)),Ab&&this._print("removeElements")}setElementsValidFlag(e,t,i){let n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i),Ab&&this._print("setElementsValidFlag")}createSnapshot(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new bE(e,[])}restoreSnapshot(e){let t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){let i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}Ab&&this._print("restoreSnapshot")}getElements(e){let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let s=o.getClosestPastElement();!s||s.sourceId===e&&(!t||s.sourceOrder>t.sourceOrder)&&(t=s,i=n)}return[t,i]}canUndo(e){if(e instanceof Ia){let[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){we(e);for(let i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(let t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(let t of e.editStacks)t.locked=!0;return()=>{for(let t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,o){let s=this._acquireLocks(i),a;try{a=t()}catch(l){return s(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(s(),n.dispose(),o()),l=>(s(),n.dispose(),this._onError(l,e))):(s(),n.dispose(),o())}_invokeWorkspacePrepare(e){return TL(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo=="undefined")return H.None;let t=e.actual.prepareUndoRedo();return typeof t=="undefined"?H.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo=="undefined")return t(H.None);let i=e.actual.prepareUndoRedo();return i?bp(i)?t(i):i.then(n=>t(n)):t(H.None)}_getAffectedEditStacks(e){let t=[];for(let i of e.strResources)t.push(this._editStacks.get(i)||n$);return new RL(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new PC(this._undo(e,0,!0));for(let o of t.strResources)this.removeElements(o);return this._notificationService.warn(n),new PC}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,g({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,g({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let o=[];for(let a of i.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,g({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));let s=[];for(let a of i.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndUndo(e,t,null,g({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,g({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){let n=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,n,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(let[,t]of this._editStacks){let i=t.getClosestPastElement();if(!!i){if(i===e){let n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,i,n){return TL(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a=yield this._dialogService.show(mi.Info,g("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[g({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",i.editStacks.length),g("nok","Undo this File"),g("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);let l=this._checkWorkspaceUndo(e,t,i,!1);if(l)return l.returnValue;n=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}let s=this._checkWorkspaceUndo(e,t,i,!0);if(s)return o.dispose(),s.returnValue;for(let a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,n))})}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){let n=g({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new RL([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let s=o.getClosestPastElement();!s||s.groupId===e&&(!t||s.groupOrder>t.groupOrder)&&(t=s,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;let[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Ia){let[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;let n=this._editStacks.get(e),o=n.getClosestPastElement();if(!o)return;if(o.groupId){let[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,i)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,i):this._resourceUndo(n,o,i)}finally{Ab&&this._print("undo")}}_confirmAndContinueUndo(e,t,i){return TL(this,void 0,void 0,function*(){if((yield this._dialogService.show(mi.Info,g("confirmDifferentSource","Would you like to undo '{0}'?",i.label),[g("confirmDifferentSource.yes","Yes"),g("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let s=o.getClosestFutureElement();!s||s.sourceId===e&&(!t||s.sourceOrder<t.sourceOrder)&&(t=s,i=n)}return[t,i]}canRedo(e){if(e instanceof Ia){let[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}let t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new PC(this._redo(e));for(let o of t.strResources)this.removeElements(o);return this._notificationService.warn(n),new PC}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,g({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,g({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));let o=[];for(let a of i.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,g({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));let s=[];for(let a of i.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndRedo(e,t,null,g({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,g({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){let i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}_executeWorkspaceRedo(e,t,i){return TL(this,void 0,void 0,function*(){let n;try{n=yield this._invokeWorkspacePrepare(t)}catch(s){return this._onError(s,t)}let o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return n.dispose(),o.returnValue;for(let s of i.editStacks)s.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){let i=g({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new RL([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(let[n,o]of this._editStacks){let s=o.getClosestFutureElement();!s||s.groupId===e&&(!t||s.groupOrder<t.groupOrder)&&(t=s,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;let[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ia){let[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;let t=this._editStacks.get(e),i=t.getClosestFutureElement();if(!!i){if(i.groupId){let[n,o]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{Ab&&this._print("redo")}}}};RC=Zce([e$(0,Sb),e$(1,Vt)],RC);var PC=class{constructor(e){this.returnValue=e}};_o(fc,RC);var Gce=new RegExp(`(\\\\)?\\$\\((${Vn.iconNameExpression}(?:${Vn.iconModifierExpression})?)\\)`,"g");function Aa(r){let e=new Array,t,i=0,n=0;for(;(t=Gce.exec(r))!==null;){n=t.index||0,e.push(r.substring(i,n)),i=(t.index||0)+t[0].length;let[,o,s]=t;e.push(o?`$(${s})`:Xce({id:s}))}return i<r.length&&e.push(r.substring(i)),e}function Xce(r){let e=oe("span");return e.classList.add(...Vn.asClassNameArray(r)),e}var Qce={buttonBackground:q.fromHex("#0E639C"),buttonHoverBackground:q.fromHex("#006BB3"),buttonForeground:q.white},PL=class extends H{constructor(e,t){super();this._onDidClick=this._register(new M),this.options=t||Object.create(null),Un(this.options,Qce,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(yt.addTarget(this._element)),[De.CLICK,Ft.Tap].forEach(i=>{this._register(J(this._element,i,n=>{if(!this.enabled){St.stop(n);return}this._onDidClick.fire(n)}))}),this._register(J(this._element,De.KEY_DOWN,i=>{let n=new kt(i),o=!1;this.enabled&&(n.equals(3)||n.equals(10))?(this._onDidClick.fire(i),o=!0):n.equals(9)&&(this._element.blur(),o=!0),o&&St.stop(n,!0)})),this._register(J(this._element,De.MOUSE_OVER,i=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(J(this._element,De.MOUSE_OUT,i=>{this.applyStyles()})),this.focusTracker=this._register(il(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");let i=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=i?"1px":"",this._element.style.borderStyle=i?"solid":"",this._element.style.borderColor=i}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?pa(this._element,...Aa(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}};var Jce={badgeBackground:q.fromHex("#4D4D4D"),badgeForeground:q.fromHex("#FFFFFF")},jb=class{constructor(e,t){this.count=0,this.options=t||Object.create(null),Un(this.options,Jce,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=X(e,oe(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Dr(this.countFormat,this.count),this.element.title=Dr(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){let e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",i=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}}};var r$="done",o$="active",zj="infinite",s$="discrete",ede={progressBarBackground:q.fromHex("#0E70C0")},Hj=class extends H{constructor(e,t){super();this.options=t||Object.create(null),Un(this.options,ede,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new dt(()=>Wn(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(o$,zj,s$),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(r$),this.element.classList.contains(zj)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(s$,r$),this.element.classList.add(o$,zj),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){let e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}};var Mb=class{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},AL=new Mb("id#");var $j={},tde=new Mb("quick-input-button-icon-");function AC(r){if(!r)return;let e,t=r.dark.toString();return $j[t]?e=$j[t]:(e=tde.nextId(),aw(`.${e}`,`background-image: ${Ns(r.light||r.dark)}`),aw(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Ns(r.dark)}`),$j[t]=e),e}var a$={ctrlCmd:!1,alt:!1},Fb;(function(r){r[r.Blur=1]="Blur",r[r.Gesture=2]="Gesture",r[r.Other=3]="Other"})(Fb||(Fb={}));var Zs;(function(r){r[r.NONE=0]="NONE",r[r.FIRST=1]="FIRST",r[r.SECOND=2]="SECOND",r[r.LAST=3]="LAST"})(Zs||(Zs={}));function l$(r,e={}){let t=jL(e);return t.textContent=r,t}function c$(r,e={}){let t=jL(e);return h$(t,ide(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function jL(r){let e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}var d$=class{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function h$(r,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){let o=document.createElement("a");o.href="#",t.disposables.add(Zt(o,"click",s=>{t.callback(String(e.index),s)})),n=o}else e.type===8?n=document.createElement("br"):e.type===1&&(n=r);n&&r!==n&&r.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(o=>{h$(n,o,t,i)})}function ide(r,e){let t={type:1,children:[]},i=0,n=t,o=[],s=new d$(r);for(;!s.eos();){let a=s.next(),l=a==="\\"&&Kj(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&nde(a,e)&&a===s.peek()){s.advance(),n.type===2&&(n=o.pop());let c=Kj(a,e);if(n.type===c||n.type===5&&c===6)n=o.pop();else{let d={type:c,children:[]};c===5&&(d.index=i,i++),n.children.push(d),o.push(n),n=d}}else if(a===`
`)n.type===2&&(n=o.pop()),n.children.push({type:8});else if(n.type!==2){let c={type:2,content:a};n.children.push(c),o.push(n),n=c}else n.content+=a}return n.type===2&&(n=o.pop()),o.length,t}function nde(r,e){return Kj(r,e)!==0}function Kj(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var qj=class{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};var Yj=class{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new qj(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}};var jC=oe,rde={inputBackground:q.fromHex("#3C3C3C"),inputForeground:q.fromHex("#CCCCCC"),inputValidationInfoBorder:q.fromHex("#55AAFF"),inputValidationInfoBackground:q.fromHex("#063B49"),inputValidationWarningBorder:q.fromHex("#B89500"),inputValidationWarningBackground:q.fromHex("#352A05"),inputValidationErrorBorder:q.fromHex("#BE1100"),inputValidationErrorBackground:q.fromHex("#5A1D1D")},ML=class extends en{constructor(e,t,i){var n;super();this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new M),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new M),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i||Object.create(null),Un(this.options,rde,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(n=this.options.tooltip)!==null&&n!==void 0?n:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=X(e,jC(".monaco-inputbox.idle"));let o=this.options.flexibleHeight?"textarea":"input",s=X(this.element,jC(".ibwrapper"));if(this.input=X(s,jC(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=X(s,jC("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new rb(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),X(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));let a=this._register(new Bt(document,"selectionchange")),l=ye.filter(a.event,()=>{let c=document.getSelection();return(c==null?void 0:c.anchorNode)===s});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Gr(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:sw(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Po(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){let i=parseFloat(this.mirror.style.paddingLeft||"")||0,n=parseFloat(this.mirror.style.paddingRight||"")||0;t=i+n}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let i=this.stylesForType(this.message.type);this.element.style.border=i.border?`1px solid ${i.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Po(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{if(!this.message)return null;e=X(n,jC(".monaco-inputbox-container")),t();let o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?c$(this.message.content,o):l$(this.message.content,o);s.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background?a.background.toString():"",s.style.color=a.foreground?a.foreground.toString():"",s.style.border=a.border?`1px solid ${a.border}`:"",X(e,s),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=g("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=g("alertWarningMessage","Warning: {0}",this.message.content):i=g("alertInfoMessage","Info: {0}",this.message.content),Oi(i),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){let e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",i=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=i?"1px":"",this.element.style.borderStyle=i?"solid":"",this.element.style.borderColor=i}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=sw(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,o=t.value;i!==null&&n!==null&&(this.value=o.substr(0,i)+e+o.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}},MC=class extends ML{constructor(e,t,i){let n=g({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or \u21C5 ${n}`,s=` (\u21C5 ${n})`;super(e,t,i);this.history=new Yj(i.history,100);let a=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){let l=this.placeholder.endsWith(")")?o:s,c=this.placeholder+l;i.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{let l=c=>{if(this.placeholder.endsWith(c)){let d=this.placeholder.slice(0,this.placeholder.length-c.length);return i.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(s)||l(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,yf(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,yf(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}};var ode=oe,Zj=class extends H{constructor(e){super();this.parent=e,this.onKeyDown=t=>J(this.inputBox.inputElement,De.KEY_DOWN,i=>{t(new kt(i))}),this.onMouseDown=t=>J(this.inputBox.inputElement,De.MOUSE_DOWN,i=>{t(new Tn(i))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=X(this.parent,ode(".quick-input-box")),this.inputBox=this._register(new ML(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===mi.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===mi.Info?1:e===mi.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===mi.Info?1:e===mi.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}};var ja=class{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=ja.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&$r(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){let e=[],t=0;for(let i of this.highlights){if(i.end===i.start)continue;if(t<i.start){let s=this.text.substring(t,i.start);e.push(oe("span",void 0,...this.supportIcons?Aa(s):[s])),t=i.end}let n=this.text.substring(i.start,i.end),o=oe("span.highlight",void 0,...this.supportIcons?Aa(n):[n]);i.extraClasses&&o.classList.add(i.extraClasses),e.push(o),t=i.end}if(t<this.text.length){let i=this.text.substring(t);e.push(oe("span",void 0,...this.supportIcons?Aa(i):[i]))}pa(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(o,s)=>{n=o===`\r
`?-1:0,s+=i;for(let a of t)a.end<=s||(a.start>=s&&(a.start+=n),a.end>=s&&(a.end+=n));return i+=n,"\u23CE"})}};var Eo=class{constructor(e="",t=!1){var i,n,o;if(this.value=e,typeof this.value!="string")throw Vr("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(n=t.supportThemeIcons)!==null&&n!==void 0?n:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=sde(this.supportThemeIcons?V6(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}};function pg(r){return Gj(r)?!r.value:Array.isArray(r)?r.every(pg):!0}function Gj(r){return r instanceof Eo?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function sde(r){return r.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function FL(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function u$(r){let e=[],t=r.split("|").map(n=>n.trim());r=t[0];let i=t[1];if(i){let n=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),s=n?n[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(s));l&&e.push(`width="${a}"`),c&&e.push(`height="${s}"`)}return{href:r,dimensions:e}}var Xj=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function m$(r,e){mo(e)?r.title=e:(e==null?void 0:e.markdownNotSupportedFallback)?r.title=e.markdownNotSupportedFallback:r.removeAttribute("title")}var f$=class{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}update(e,t){var i;return Xj(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(e===void 0||mo(e)||e instanceof HTMLElement)n=e;else if(!qm(e.markdown))n=(i=e.markdown)!==null&&i!==void 0?i:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(g("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Di;let o=this._cancellationTokenSource.token;if(n=yield e.markdown(o),this.isDisposed||o.isCancellationRequested)return}this.show(n,t)})}show(e,t){let i=this._hoverWidget;if(this.hasContent(e)){let n={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!i};this._hoverWidget=this.hoverDelegate.showHover(n,t)}i==null||i.dispose()}hasContent(e){return e?Gj(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}};function g$(r,e,t){let i,n,o=(d,h)=>{var u;d&&(n==null||n.dispose(),n=void 0),h&&(i==null||i.dispose(),i=void 0),(u=r.onDidHideHover)===null||u===void 0||u.call(r)},s=(d,h,u)=>new li(()=>Xj(this,void 0,void 0,function*(){(!n||n.isDisposed)&&(n=new f$(r,u||e,d>0),yield n.update(t,h))}),d),a=()=>{if(i)return;let d=new G,h=p=>o(!1,p.fromElement===e);d.add(J(e,De.MOUSE_LEAVE,h,!0));let u=()=>o(!0,!0);d.add(J(e,De.MOUSE_DOWN,u,!0));let m={targetElements:[e],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){let p=_=>m.x=_.x+10;d.add(J(e,De.MOUSE_MOVE,p,!0))}d.add(s(r.delay,!1,m)),i=d},l=J(e,De.MOUSE_OVER,a,!0);return{show:d=>{o(!1,!0),s(0,d)},hide:()=>{o(!0,!0)},update:d=>Xj(this,void 0,void 0,function*(){t=d,yield n==null?void 0:n.update(t)}),dispose:()=>{l.dispose(),o(!0,!0)}}}var BL=class{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}},_g=class extends H{constructor(e,t){super();this.customHovers=new Map,this.domNode=this._register(new BL(X(e,oe(".monaco-icon-label")))),this.labelContainer=X(this.domNode.element,oe(".monaco-icon-label-container"));let i=X(this.labelContainer,oe("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new BL(X(this.labelContainer,oe("span.monaco-icon-description-container")))),(t==null?void 0:t.supportHighlights)||(t==null?void 0:t.supportIcons)?this.nameNode=new _$(i,!!t.supportIcons):this.nameNode=new p$(i),(t==null?void 0:t.supportDescriptionHighlights)?this.descriptionNodeFactory=()=>new ja(X(this.descriptionContainer.element,oe("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new BL(X(this.descriptionContainer.element,oe("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,i){let n=["monaco-icon-label"];i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough")),this.domNode.className=n.join(" "),this.setupHover((i==null?void 0:i.descriptionTitle)?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof ja?(this.descriptionNode.set(t||"",i?i.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,i==null?void 0:i.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(i==null?void 0:i.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){let i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)m$(e,t);else{let n=g$(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}},p$=class{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&$r(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=X(this.container,oe("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){let n=e[i],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;X(this.container,oe("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&X(this.container,oe("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}};function ade(r,e,t){if(!t)return;let i=0;return r.map(n=>{let o={start:i,end:i+n.length},s=t.map(a=>Dn.intersect(o,a)).filter(a=>!Dn.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=o.end+e.length,s})}var _$=class{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&$r(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new ja(X(this.container,oe("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let i=(t==null?void 0:t.separator)||"/",n=ade(e,i,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){let s=e[o],a=n?n[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=oe("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new ja(X(this.container,c),this.supportIcons).set(s,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&X(c,oe("span.label-separator",void 0,i))}}}};var WL=oe,FC=class{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=X(e,WL(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&FC.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(X(this.domNode,WL("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Li(this.domNode),this.keyElements.clear()}renderPart(e,t,i){let n=g_.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,Boolean(i==null?void 0:i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,Boolean(i==null?void 0:i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,Boolean(i==null?void 0:i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,Boolean(i==null?void 0:i.metaKey),n.separator);let o=t.keyLabel;o&&this.renderKey(e,o,Boolean(i==null?void 0:i.keyCode),"")}renderKey(e,t,i,n){X(e,this.createKeyElement(t,i?".highlight":"")),n&&X(e,WL("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){X(e,this.createKeyElement(g("unbound","Unbound")))}createKeyElement(e,t=""){let i=WL("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),i}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(let t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&$r(e.firstPart,t.firstPart)&&$r(e.chordPart,t.chordPart)}};var b$=new el(()=>{let r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});function lde(r,e,t=!1){let i=r||"",n=e||"",o=b$.value.collator.compare(i,n);return b$.value.collatorIsNumeric&&o===0&&i!==n?i<n?-1:1:o}function v$(r,e,t){let i=r.toLowerCase(),n=e.toLowerCase(),o=cde(r,e,t);if(o)return o;let s=i.endsWith(t),a=n.endsWith(t);if(s!==a)return s?-1:1;let l=lde(i,n);return l!==0?l:i.localeCompare(n)}function cde(r,e,t){let i=r.toLowerCase(),n=e.toLowerCase(),o=i.startsWith(t),s=n.startsWith(t);if(o!==s)return o?-1:1;if(o&&s){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}var w$=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},dde=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Bc=oe,y$=class{constructor(e){this.hidden=!1,this._onChecked=new M,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}},Bb=class{get templateId(){return Bb.ID}renderTemplate(e){let t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=X(e,Bc(".quick-input-list-entry"));let i=X(t.entry,Bc("label.quick-input-list-label"));t.toDisposeTemplate.push(Zt(i,De.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=X(i,Bc("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Zt(t.checkbox,De.CHANGE,c=>{t.element.checked=t.checkbox.checked}));let n=X(i,Bc(".quick-input-list-rows")),o=X(n,Bc(".quick-input-list-row")),s=X(n,Bc(".quick-input-list-row"));t.label=new _g(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});let a=X(o,Bc(".quick-input-list-entry-keybinding"));t.keybinding=new FC(a,Wr);let l=X(s,Bc(".quick-input-list-label-meta"));return t.detail=new ja(l,!0),t.separator=X(t.entry,Bc(".quick-input-list-separator")),t.actionBar=new Gr(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){i.toDisposeElement=Ge(i.toDisposeElement),i.element=e,i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked(c=>i.checkbox.checked=c));let{labelHighlights:n,descriptionHighlights:o,detailHighlights:s}=e,a=Object.create(null);a.matches=n||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,i.label.setLabel(e.saneLabel,e.saneDescription,a),i.keybinding.set(e.item.keybinding),i.detail.set(e.saneDetail,s),e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),i.actionBar.clear();let l=e.item.buttons;l&&l.length?(i.actionBar.push(l.map((c,d)=>{let h=c.iconClass||(c.iconPath?AC(c.iconPath):void 0);c.alwaysVisible&&(h=h?`${h} always-visible`:"always-visible");let u=new er(`id-${d}`,"",h,!0,()=>dde(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return u.tooltip=c.tooltip||"",u}),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=Ge(i.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=Ge(e.toDisposeElement),e.toDisposeTemplate=Ge(e.toDisposeTemplate)}};Bb.ID="listelement";var C$=class{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Bb.ID}},Xi;(function(r){r[r.First=1]="First",r[r.Second=2]="Second",r[r.Last=3]="Last",r[r.Next=4]="Next",r[r.Previous=5]="Previous",r[r.NextPage=6]="NextPage",r[r.PreviousPage=7]="PreviousPage"})(Xi||(Xi={}));var BC=class{constructor(e,t,i){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new M,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new M,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new M,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new M,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new M,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new M,this.onKeyDown=this._onKeyDown.event,this._onLeave=new M,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=X(this.parent,Bc(".quick-input-list"));let n=new C$,o=new S$;this.list=i.createList("QuickInput",this.container,n,[new Bb],{identityProvider:{getId:s=>s.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(s=>{let a=new kt(s);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(We?s.metaKey:s.ctrlKey)&&this.list.setFocus(Pn(this.list.length));break;case 16:let l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:let c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(s=>{s.browserEvent.button!==2&&s.browserEvent.preventDefault()})),this.disposables.push(J(this.container,De.CLICK,s=>{(s.x||s.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(s=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(s=>{typeof s.index=="number"&&(s.browserEvent.preventDefault(),this.list.setSelection([s.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ye.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ye.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){let o=e[i];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0,t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0,t=this.elements;for(let i=0,n=t.length;i<n;i++)t[i].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=Ge(this.elementDisposables);let t=i=>this.fireButtonTriggered(i);this.inputElements=e,this.elements=e.reduce((i,n,o)=>{var s,a,l;if(n.type!=="separator"){let c=o&&e[o-1],d=n.label&&n.label.replace(/\r?\n/g," "),h=n.meta&&n.meta.replace(/\r?\n/g," "),u=n.description&&n.description.replace(/\r?\n/g," "),m=n.detail&&n.detail.replace(/\r?\n/g," "),p=n.ariaLabel||[d,u,m].map(_=>PU(_)).filter(_=>!!_).join(", ");i.push(new y$({index:o,item:n,saneLabel:d,saneMeta:h,saneAriaLabel:p,saneDescription:u,saneDetail:m,labelHighlights:(s=n.highlights)===null||s===void 0?void 0:s.label,descriptionHighlights:(a=n.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=n.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return i},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(i=>i.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((i,n,o)=>(i.set(n.item,o),i),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){let t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;let t=new Set;for(let i of e)t.add(i);for(let i of this.elements)i.checked=t.has(i.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Xi.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=Xi.First),e===Xi.Previous&&this.list.getFocus()[0]===0&&(e=Xi.Last),e===Xi.Second&&this.list.length<2&&(e=Xi.First),e){case Xi.First:this.list.focusFirst();break;case Xi.Second:this.list.focusNth(1);break;case Xi.Last:this.list.focusLast();break;case Xi.Next:this.list.focusNext();break;case Xi.Previous:this.list.focusPrevious();break;case Xi.NextPage:this.list.focusNextPage();break;case Xi.PreviousPage:this.list.focusPreviousPage();break}let t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;let n=i.index&&this.inputElements[i.index-1];i.separator=n&&n.type==="separator"?n:void 0});else{let i;this.elements.forEach(n=>{let o=this.matchOnLabel?ol(gC(e,fC(n.saneLabel))):void 0,s=this.matchOnDescription?ol(gC(e,fC(n.saneDescription||""))):void 0,a=this.matchOnDetail?ol(gC(e,fC(n.saneDetail||""))):void 0,l=this.matchOnMeta?ol(gC(e,fC(n.saneMeta||""))):void 0;if(o||s||a||l?(n.labelHighlights=o,n.descriptionHighlights=s,n.detailHighlights=a,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!n.item.alwaysShow),n.separator=void 0,!this.sortByLabel){let c=n.index&&this.inputElements[n.index-1];i=c&&c.type==="separator"?c:i,i&&!n.hidden&&(n.separator=i,i=void 0)}})}let t=this.elements.filter(i=>!i.hidden);if(this.sortByLabel&&e){let i=e.toLowerCase();t.sort((n,o)=>hde(n,o,i))}return this.elementsToIndexes=t.reduce((i,n,o)=>(i.set(n.item,o),i),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(let i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=Ge(this.elementDisposables),this.disposables=Ge(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}};w$([Ni],BC.prototype,"onDidChangeFocus",null);w$([Ni],BC.prototype,"onDidChangeSelection",null);function hde(r,e,t){let i=r.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:v$(r.saneLabel,e.saneLabel,t)}var S$=class{getWidgetAriaLabel(){return g("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}};var x$=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},vs=oe,ude=Kr("quick-input-back",ge.arrowLeft),Qj={iconClass:ude.classNames,tooltip:g("quickInput.back","Back"),handle:-1},WC=class extends H{constructor(e){super();this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=WC.noPromptMessage,this._severity=mi.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new M),this.onDidHideEmitter=this._register(new M),this.onDisposeEmitter=this._register(new M),this.visibleDisposables=this._register(new G),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){let t=this._ignoreFocusOut!==e&&!To;this._ignoreFocusOut=e&&!To,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=Fb.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;let e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");let t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new li,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let n=this.buttons.filter(s=>s===Qj);this.ui.leftActionBar.push(n.map((s,a)=>{let l=new er(`id-${a}`,"",s.iconClass||AC(s.iconPath),!0,()=>x$(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();let o=this.buttons.filter(s=>s!==Qj);this.ui.rightActionBar.push(o.map((s,a)=>{let l=new er(`id-${a}`,"",s.iconClass||AC(s.iconPath),!0,()=>x$(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return l.tooltip=s.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,pa(this.ui.message,...Aa(i))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?g("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==mi.Ignore){let t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};WC.noPromptMessage=g("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");var Wb=class extends WC{constructor(){super(...arguments);this._value="",this.onDidChangeValueEmitter=this._register(new M),this.onWillAcceptEmitter=this._register(new M),this.onDidAcceptEmitter=this._register(new M),this.onDidCustomEmitter=this._register(new M),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Zs.NONE:Zs.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new M),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new M),this.onDidTriggerItemButtonEmitter=this._register(new M),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?a$:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Xi.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Xi.Next),this.canSelectMany&&this.ui.list.domFocus(),St.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Xi.Previous):this.ui.list.focus(Xi.Last),this.canSelectMany&&this.ui.list.domFocus(),St.stop(e,!0);break;case 12:this.ui.list.focus(Xi.NextPage),this.canSelectMany&&this.ui.list.domFocus(),St.stop(e,!0);break;case 11:this.ui.list.focus(Xi.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),St.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Xi.First),St.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Xi.Last),St.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&zn(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&zn(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&zn(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return J(this.ui.container,De.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;let t=new kt(e),i=t.keyCode;this._quickNavigate.keybindings.some(s=>{let[a,l]=s.getParts();return l?!1:a.shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&i===6||a.ctrlKey&&i===5||a.metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);let i={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel||this.placeholder||Wb.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==n&&(this.ui.inputBox.ariaLabel=n),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Zs.NONE:this._itemActivation=Zs.FIRST;break;case Zs.SECOND:this.ui.list.focus(Xi.Second),this._itemActivation=Zs.FIRST;break;case Zs.LAST:this.ui.list.focus(Xi.Last),this._itemActivation=Zs.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Xi.First)),this.keepScrollPosition&&(this.scrollTop=e)}};Wb.DEFAULT_ARIA_LABEL=g("quickInputBox.ariaLabel","Type to narrow down results.");var Ub=class extends H{constructor(e){super();this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new M),this.onDidCustomEmitter=this._register(new M),this.onDidTriggerButtonEmitter=this._register(new M),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new M),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new M),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){let e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(J(window,De.KEY_DOWN,e,!0)),this._register(J(window,De.KEY_UP,e,!0)),this._register(J(window,De.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;let e=X(this.parentElement,vs(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";let t=un(e),i=X(e,vs(".quick-input-titlebar")),n=this._register(new Gr(i));n.domNode.classList.add("quick-input-left-action-bar");let o=X(i,vs(".quick-input-title")),s=this._register(new Gr(i));s.domNode.classList.add("quick-input-right-action-bar");let a=X(e,vs(".quick-input-description")),l=X(e,vs(".quick-input-header")),c=X(l,vs("input.quick-input-check-all"));c.type="checkbox",this._register(Zt(c,De.CHANGE,Y=>{let K=c.checked;O.setAllVisibleChecked(K)})),this._register(J(c,De.CLICK,Y=>{(Y.x||Y.y)&&m.setFocus()}));let d=X(l,vs(".quick-input-description")),h=X(l,vs(".quick-input-and-message")),u=X(h,vs(".quick-input-filter")),m=this._register(new Zj(u));m.setAttribute("aria-describedby",`${this.idPrefix}message`);let p=X(u,vs(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");let _=new jb(p,{countFormat:g({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),v=X(u,vs(".quick-input-count"));v.setAttribute("aria-live","polite");let C=new jb(v,{countFormat:g({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),w=X(l,vs(".quick-input-action")),S=new PL(w);S.label=g("ok","OK"),this._register(S.onDidClick(Y=>{this.onDidAcceptEmitter.fire()}));let D=X(l,vs(".quick-input-action")),I=new PL(D);I.label=g("custom","Custom"),this._register(I.onDidClick(Y=>{this.onDidCustomEmitter.fire()}));let A=X(h,vs(`#${this.idPrefix}message.quick-input-message`)),O=this._register(new BC(e,this.idPrefix+"list",this.options));this._register(O.onChangedAllVisibleChecked(Y=>{c.checked=Y})),this._register(O.onChangedVisibleCount(Y=>{_.setCount(Y)})),this._register(O.onChangedCheckedCount(Y=>{C.setCount(Y)})),this._register(O.onLeave(()=>{setTimeout(()=>{m.setFocus(),this.controller instanceof Wb&&this.controller.canSelectMany&&O.clearFocus()},0)})),this._register(O.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));let N=new Hj(e);N.getContainer().classList.add("quick-input-progress");let F=il(e);return this._register(F),this._register(J(e,De.FOCUS,Y=>{this.previousFocusElement=Y.relatedTarget instanceof HTMLElement?Y.relatedTarget:void 0},!0)),this._register(F.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Fb.Blur),this.previousFocusElement=void 0})),this._register(J(e,De.FOCUS,Y=>{m.setFocus()})),this._register(J(e,De.KEY_DOWN,Y=>{let K=new kt(Y);switch(K.keyCode){case 3:St.stop(Y,!0),this.onDidAcceptEmitter.fire();break;case 9:St.stop(Y,!0),this.hide(Fb.Gesture);break;case 2:if(!K.altKey&&!K.ctrlKey&&!K.metaKey){let ee=[".action-label.codicon"];e.classList.contains("show-checkboxes")?ee.push("input"):ee.push("input[type=text]"),this.getUI().list.isDisplayed()&&ee.push(".monaco-list");let ie=e.querySelectorAll(ee.join(", "));K.shiftKey&&K.target===ie[0]?(St.stop(Y,!0),ie[ie.length-1].focus()):!K.shiftKey&&K.target===ie[ie.length-1]&&(St.stop(Y,!0),ie[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:n,titleBar:i,title:o,description1:a,description2:d,rightActionBar:s,checkAll:c,filterContainer:u,inputBox:m,visibleCountContainer:p,visibleCount:_,countContainer:v,count:C,okContainer:w,ok:S,message:A,customButtonContainer:D,customButton:I,list:O,progressBar:N,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:Y=>this.show(Y),hide:()=>this.hide(),setVisibilities:Y=>this.setVisibilities(Y),setComboboxAccessibility:Y=>this.setComboboxAccessibility(Y),setEnabled:Y=>this.setEnabled(Y),setContextKey:Y=>this.options.setContextKey(Y)},this.updateStyles(),this.ui}pick(e,t={},i=Me.None){return new Promise((n,o)=>{let s=d=>{s=n,t.onKeyMods&&t.onKeyMods(a.keyMods),n(d)};if(i.isCancellationRequested){s(void 0);return}let a=this.createQuickPick(),l,c=[a,a.onDidAccept(()=>{if(a.canSelectMany)s(a.selectedItems.slice()),a.hide();else{let d=a.activeItems[0];d&&(s(d),a.hide())}}),a.onDidChangeActive(d=>{let h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){let h=d[0];h&&(s(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{let h=a.items.indexOf(d.item);if(h!==-1){let u=a.items.slice(),m=u.splice(h,1),p=a.activeItems.filter(v=>v!==m[0]),_=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=u,p&&(a.activeItems=p),a.keepScrollPosition=_}}}))),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Ge(c),s(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(u=>u.type!=="separator"&&u.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(){let e=this.getUI();return new Wb(e)}show(e){let t=this.getUI();this.onShowEmitter.fire();let i=this.controller;this.controller=e,i&&i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(mi.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),pa(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";let n=this.options.backKeybindingLabel();Qj.tooltip=n?g("quickInput.backWithKeybinding","Back ({0})",n):g("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){let t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){let t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(let t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(let t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;let i=this.controller;if(i){let n=!((t=this.ui)===null||t===void 0?void 0:t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",n||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),i.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;let e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Ub.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,contrastBorder:n,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=i?i.toString():"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);let s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));let a=s.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}};Ub.MAX_WIDTH=600;var UL;(function(r){r[r.PRESERVE=0]="PRESERVE",r[r.LAST=1]="LAST"})(UL||(UL={}));var Jj={Quickaccess:"workbench.contributions.quickaccess"},E$=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Re(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Ca([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}};ii.add(Jj.Quickaccess,new E$);var Ku=Ie("quickInputService");var mde=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},D$=function(r,e){return function(t,i){e(t,i,r)}},VL=class extends H{constructor(e,t){super();this.quickInputService=e,this.instantiationService=t,this.registry=ii.as(Jj.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n;let[o,s]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&s&&l===s){e!==s.prefix&&!(i==null?void 0:i.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,s,i);return}if(s&&!(i==null?void 0:i.preserveValue)){let p;if(a&&l&&l!==s){let _=a.value.substr(l.prefix.length);_&&(p=`${s.prefix}${_}`)}if(!p){let _=o==null?void 0:o.defaultFilterValue;_===UL.LAST?p=this.lastAcceptedPickerValues.get(s):typeof _=="string"&&(p=`${s.prefix}${_}`)}typeof p=="string"&&(e=p)}let c=new G,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,s,i),d.placeholder=s==null?void 0:s.placeholder,d.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(i==null?void 0:i.itemActivation)=="number"||(i==null?void 0:i.quickNavigateConfiguration))&&(d.itemActivation=(n=i==null?void 0:i.itemActivation)!==null&&n!==void 0?n:Zs.SECOND),d.contextKey=s==null?void 0:s.contextKey,d.filterValue=p=>p.substring(s?s.prefix.length:0),(s==null?void 0:s.placeholder)&&(d.ariaLabel=s==null?void 0:s.placeholder);let h,u;t&&(h=new Promise(p=>u=p),c.add(os(d.onWillAccept)(p=>{p.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,o,s,e));let m=c.add(new Di);if(o&&c.add(o.provide(d,m.token)),os(d.onDidHide)(()=>{d.selectedItems.length===0&&m.cancel(),c.dispose(),u==null||u(d.selectedItems)}),d.show(),t)return h}adjustValueSelection(e,t,i){var n;let o;(i==null?void 0:i.preserveValue)?o=[e.value.length,e.value.length]:o=[(n=t==null?void 0:t.prefix.length)!==null&&n!==void 0?n:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,i,n){let o=new G,s=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return o.add(Re(()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{let[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):s.value=a})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e){let t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};VL=mde([D$(0,Ku),D$(1,Ue)],VL);var fde=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},UC=function(r,e){return function(t,i){e(t,i,r)}},zL=class extends EN{constructor(e,t,i,n,o){super(i);this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=n,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(VL))),this._quickAccess}createController(e=this.layoutService,t){var i,n;let o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,c,d,h)=>this.instantiationService.createInstance(wL,a,l,c,d,h),styles:this.computeStyles()},s=this._register(new Ub(Object.assign(Object.assign({},o),t)));return s.layout(e.dimension,(n=(i=e.offset)===null||i===void 0?void 0:i.top)!==null&&n!==void 0?n:0),this._register(e.onDidLayout(a=>{var l,c;return s.layout(a,(c=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&c!==void 0?c:0)})),this._register(s.onShow(()=>this.resetContextKeys())),this._register(s.onHide(()=>this.resetContextKeys())),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new _e(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=Me.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Ks(this.theme,{quickInputBackground:yR,quickInputForeground:zz,quickInputTitleBackground:Hz,contrastBorder:Ci,widgetShadow:Oa})),inputBox:Ks(this.theme,{inputForeground:A_,inputBackground:P_,inputBorder:j_,inputValidationInfoBackground:M_,inputValidationInfoForeground:F_,inputValidationInfoBorder:B_,inputValidationWarningBackground:LE,inputValidationWarningForeground:kE,inputValidationWarningBorder:IE,inputValidationErrorBackground:OE,inputValidationErrorForeground:TE,inputValidationErrorBorder:NE}),countBadge:Ks(this.theme,{badgeBackground:Lf,badgeForeground:kf,badgeBorder:Ci}),button:Ks(this.theme,{buttonForeground:Pz,buttonBackground:RE,buttonHoverBackground:Az,buttonBorder:Ci}),progressBar:Ks(this.theme,{progressBarBackground:jz}),keybindingLabel:Ks(this.theme,{keybindingLabelBackground:qz,keybindingLabelForeground:Yz,keybindingLabelBorder:Zz,keybindingLabelBottomBorder:Gz,keybindingLabelShadow:Oa}),list:Ks(this.theme,{listBackground:yR,listInactiveFocusForeground:V_,listInactiveSelectionIconForeground:z_,listInactiveFocusBackground:H_,listFocusOutline:an,listInactiveFocusOutline:an,pickerGroupBorder:Kz,pickerGroupForeground:$z})}}};zL=fde([UC(0,Ue),UC(1,be),UC(2,ht),UC(3,pn),UC(4,zu)],zL);var L$=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},bg=function(r,e){return function(t,i){e(t,i,r)}},eM=class extends zL{constructor(e,t,i,n,o,s){super(t,i,n,o,s);this.host=void 0;let a=vg.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};eM=L$([bg(1,Ue),bg(2,be),bg(3,ht),bg(4,pn),bg(5,zu)],eM);var HL=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){let e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){let i=t=this.instantiationService.createInstance(eM,e);this.mapEditorToService.set(e,t),os(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},i=Me.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}};HL=L$([bg(0,Ue),bg(1,it)],HL);var vg=class{constructor(e){this.editor=e,this.widget=new VC(this.editor)}static get(e){return e.getContribution(vg.ID)}dispose(){this.widget.dispose()}};vg.ID="editor.controller.quickInput";var VC=class{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return VC.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};VC.ID="editor.contrib.quickInputWidget";He(vg.ID,vg);var Rt;(function(r){let e=new kc;class t{constructor(l,c){this._serviceId=l,this._factory=c,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}r.LazyStaticService=t;let i=[];function n(a,l){let c=new t(a,l);return i.push(c),c}function o(a){let l=new kc;for(let[d,h]of y3())l.set(d,h);for(let d in a)a.hasOwnProperty(d)&&l.set(Ie(d),a[d]);i.forEach(d=>l.set(d.id,d.get(a)));let c=new xb(l,!0);return l.set(Ue,c),[l,c]}r.init=o,r.instantiationService=n(Ue,()=>new xb(e,!0));let s=new eE;r.configurationService=n(Mt,()=>s),r.resourceConfigurationService=n(t_,()=>new pN(s)),r.resourcePropertiesService=n(kx,()=>new tE(s)),r.contextService=n(Xx,()=>new b_),r.labelService=n(Rc,()=>new vN),r.telemetryService=n(ml,()=>new _N),r.dialogService=n(Sb,()=>new fN),r.notificationService=n(Vt,()=>new __),r.markerService=n(nh,()=>new rh),r.modeService=n(ui,a=>new ig),r.standaloneThemeService=n(Au,()=>new BA),r.logService=n(hr,()=>new $T(new HT)),r.undoRedoService=n(fc,a=>new RC(r.dialogService.get(a),r.notificationService.get(a))),r.languageConfigurationService=n(bd,a=>new Dw(r.configurationService.get(a),r.modeService.get(a))),r.modelService=n(Gt,a=>new lC(r.configurationService.get(a),r.resourcePropertiesService.get(a),r.standaloneThemeService.get(a),r.logService.get(a),r.undoRedoService.get(a),r.modeService.get(a),r.languageConfigurationService.get(a))),r.markerDecorationsService=n(v_,a=>new kL(r.modelService.get(a),r.markerService.get(a))),r.contextKeyService=n(be,a=>new zD(r.configurationService.get(a))),r.codeEditorService=n(it,a=>new wb(null,r.contextKeyService.get(a),r.standaloneThemeService.get(a))),r.editorProgressService=n(Xr,()=>new p_),r.storageService=n(Zo,()=>new Mj),r.editorWorkerService=n(Jn,a=>new Rx(r.modelService.get(a),r.resourceConfigurationService.get(a),r.logService.get(a)))})(Rt||(Rt={}));var tM=class extends H{constructor(e,t){super();let[i,n]=Rt.init(t);this._serviceCollection=i,this._instantiationService=n;let o=this.get(Mt),s=this.get(Vt),a=this.get(ml),l=this.get(ht),c=this.get(hr),d=this.get(be),h=(v,C)=>{let w=null;return t&&(w=t[v.toString()]),w||(w=C()),this._serviceCollection.set(v,w),w};h(pn,()=>new IL(d,o)),h(Yo,()=>new uL(l));let u=h(jt,()=>new gN(this._instantiationService)),m=h(Nt,()=>this._register(new Gw(d,u,a,s,c,e))),p=h(zu,()=>new wN(Rt.codeEditorService.get(it),e));h(Ku,()=>new HL(n,Rt.codeEditorService.get(it)));let _=h(bs,()=>this._register(new QD(p)));h($o,()=>new Bj),h(Ho,()=>{let v=new XD(a,s,_,m,l);return v.configure({blockMouse:!1}),this._register(v)}),h(hs,()=>new LL(u)),h(h_,()=>new bN(Rt.modelService.get(Gt)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}};function k$(r,e,t){let i=new tM(r,e),n=null;i.has(fn)||(n=new Jx(Rt.modelService.get()),i.set(fn,n)),i.has(cr)||i.set(cr,new gx(i.get(it),i.get(jt)));let o=t(i);return n&&n.setEditor(o),o}function gde(r,e,t){return k$(r,t||{},i=>new OD(r,e,i,i.get(Ue),i.get(it),i.get(jt),i.get(be),i.get(Nt),i.get(bs),i.get(Au),i.get(Vt),i.get(Mt),i.get(pn),i.get(Gt),i.get(ui)))}function pde(r){return Rt.codeEditorService.get().onCodeEditorAdd(e=>{r(e)})}function _de(r,e,t){return k$(r,t||{},i=>new TD(r,e,i,i.get(Ue),i.get(be),i.get(Nt),i.get(bs),i.get(Jn),i.get(it),i.get(Au),i.get(Vt),i.get(Mt),i.get(Ho),i.get(Xr),i.get($o)))}function bde(r,e){return new iT(r,e)}function vde(r,e,t){return IA(Rt.modelService.get(),Rt.modeService.get(),r,e,t)}function wde(r,e){Rt.modelService.get().setMode(r,Rt.modeService.get().create(e))}function yde(r,e,t){r&&Rt.markerService.get().changeOne(e,r.uri,t)}function Cde(r){return Rt.markerService.get().read(r)}function Sde(r){return Rt.markerService.get().onMarkerChanged(r)}function xde(r){return Rt.modelService.get().getModel(r)}function Ede(){return Rt.modelService.get().getModels()}function Dde(r){return Rt.modelService.get().onModelAdded(r)}function Lde(r){return Rt.modelService.get().onModelRemoved(r)}function kde(r){return Rt.modelService.get().onModelModeChanged(e=>{r({model:e.model,oldLanguage:e.oldModeId})})}function Ide(r){return $3(Rt.modelService.get(),r)}function Ode(r,e){let t=Rt.standaloneThemeService.get();return t.registerEditorContainer(r),Bw.colorizeElement(t,Rt.modeService.get(),r,e)}function Tde(r,e,t){return Rt.standaloneThemeService.get().registerEditorContainer(document.body),Bw.colorize(Rt.modeService.get(),r,e,t)}function Nde(r,e,t=4){return Rt.standaloneThemeService.get().registerEditorContainer(document.body),Bw.colorizeModelLine(r,e,t)}function Rde(r){let e=ti.get(r);return e||{getInitialState:()=>of,tokenize:(t,i,n,o)=>BU(r,t,n,o)}}function Pde(r,e){Rt.modeService.get().triggerMode(e);let i=Rde(e),n=sr(r),o=[],s=i.getInitialState();for(let a=0,l=n.length;a<l;a++){let c=n[a],d=i.tokenize(c,!0,s,0);o[a]=d.tokens,s=d.endState}return o}function Ade(r,e){Rt.standaloneThemeService.get().defineTheme(r,e)}function jde(r){Rt.standaloneThemeService.get().setTheme(r)}function Mde(){VV()}function Fde(r,e){return Ke.registerCommand({id:r,handler:e})}function I$(){return{create:gde,onDidCreateEditor:pde,createDiffEditor:_de,createDiffNavigator:bde,createModel:vde,setModelLanguage:wde,setModelMarkers:yde,getModelMarkers:Cde,onDidChangeMarkers:Sde,getModels:Ede,getModel:xde,onDidCreateModel:Dde,onWillDisposeModel:Lde,onDidChangeModelLanguage:kde,createWebWorker:Ide,colorizeElement:Ode,colorize:Tde,colorizeModelLine:Nde,tokenize:Pde,defineTheme:Ade,setTheme:jde,remeasureFonts:Mde,registerCommand:Fde,AccessibilitySupport:s1,ContentWidgetPositionPreference:h1,CursorChangeReason:u1,DefaultEndOfLine:m1,EditorAutoIndentStrategy:g1,EditorOption:p1,EndOfLinePreference:_1,EndOfLineSequence:b1,MinimapPosition:E1,MouseTargetType:D1,OverlayWidgetPositionPreference:L1,OverviewRulerLane:k1,RenderLineNumbersType:I1,RenderMinimap:O1,ScrollbarVisibility:N1,ScrollType:T1,TextEditorCursorBlinkingStyle:M1,TextEditorCursorStyle:F1,TrackedRangeStickiness:B1,WrappingIndent:W1,ConfigurationChangedEvent:Xv,BareFontInfo:Ql,FontInfo:Vp,TextModelResolvedOptions:Gm,FindMatch:dd,EditorType:iu,EditorOptions:lo}}function Bde(r,e){if(!e||!Array.isArray(e))return!1;for(let t of e)if(!r(t))return!1;return!0}function $L(r,e){return typeof r=="boolean"?r:e}function O$(r,e){return typeof r=="string"?r:e}function Wde(r){let e={};for(let t of r)e[t]=!0;return e}function T$(r,e=!1){e&&(r=r.map(function(i){return i.toLowerCase()}));let t=Wde(r);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function iM(r,e){e=e.replace(/@@/g,"");let t=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(o,s){i=!0;let a="";if(typeof r[s]=="string")a=r[s];else if(r[s]&&r[s]instanceof RegExp)a=r[s].source;else throw r[s]===void 0?oi(r,"language definition does not contain attribute '"+s+"', used at: "+e):oi(r,"attribute reference '"+s+"' must be a string, used at: "+e);return mf(a)?"":"(?:"+a+")"}),t++;while(i&&t<5);e=e.replace(/\x01/g,"@");let n=(r.ignoreCase?"i":"")+(r.unicode?"u":"");return new RegExp(e,n)}function Ude(r,e,t,i){if(i<0)return r;if(i<e.length)return e[i];if(i>=100){i=i-100;let n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function Vde(r,e,t,i){let n=-1,o=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(n=parseInt(s[3]),s[2]&&(n=n+100)),o=s[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],l=s[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let d=T$(l.split("|"),r.ignoreCase);c=function(h){return a==="~"?d(h):!d(h)}}else if(a==="@"||a==="!@"){let d=r[l];if(!d)throw oi(r,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Bde(function(u){return typeof u=="string"},d))throw oi(r,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let h=T$(d,r.ignoreCase);c=function(u){return a==="@"?h(u):!h(u)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let d=iM(r,"^"+l+"$");c=function(h){return a==="~"?d.test(h):!d.test(h)}}else c=function(d,h,u,m){return iM(r,"^"+sc(r,l,h,u,m)+"$").test(d)};else if(l.indexOf("$")<0){let d=oc(r,l);c=function(h){return a==="=="?h===d:h!==d}}else{let d=oc(r,l);c=function(h,u,m,p,_){let v=sc(r,d,u,m,p);return a==="=="?h===v:h!==v}}return n===-1?{name:t,value:i,test:function(d,h,u,m){return c(d,d,h,u,m)}}:{name:t,value:i,test:function(d,h,u,m){let p=Ude(d,h,u,n);return c(p||"",d,h,u,m)}}}function nM(r,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw oi(r,"a 'token' attribute must be of type string, in rule: "+e);{let i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw oi(r,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw oi(r,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!J3(r,sc(r,n,"",[],""))))throw oi(r,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,r.usesEmbedded=!0),i}}else if(Array.isArray(t)){let i=[];for(let n=0,o=t.length;n<o;n++)i[n]=nM(r,e,t[n]);return{group:i}}else if(t.cases){let i=[];for(let o in t.cases)if(t.cases.hasOwnProperty(o)){let s=nM(r,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:s,name:o}):o==="@eos"?i.push({test:function(a,l,c,d){return d},value:s,name:o}):i.push(Vde(r,e,o,s))}let n=r.defaultToken;return{test:function(o,s,a,l){for(let c of i)if(!c.test||c.test(o,s,a,l))return c.value;return n}}}else throw oi(r,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}var N$=class{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw oi(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=iM(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=nM(e,this.name,t)}};function R$(r,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=r,t.includeLF=$L(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=$L(e.ignoreCase,!1),t.unicode=$L(e.unicode,!1),t.tokenPostfix=O$(e.tokenPostfix,"."+t.languageId),t.defaultToken=O$(e.defaultToken,"source"),t.usesEmbedded=!1;let i=e;i.languageId=r,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(s,a,l){for(let c of l){let d=c.include;if(d){if(typeof d!="string")throw oi(t,"an 'include' attribute must be a string at: "+s);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw oi(t,"include target '"+d+"' is not defined at: "+s);n(s+"."+d,a,e.tokenizer[d])}else{let h=new N$(s);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){let u=c[1];u.next=c[2],h.setAction(i,u)}else throw oi(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+s);else h.setAction(i,c[1]);else{if(!c.regex)throw oi(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+s);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=$L(c.matchOnlyAtLineStart,!1)),h.setRegex(i,c.regex),h.setAction(i,c.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw oi(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let s in e.tokenizer)if(e.tokenizer.hasOwnProperty(s)){t.start||(t.start=s);let a=e.tokenizer[s];t.tokenizer[s]=new Array,n("tokenizer."+s,t.tokenizer[s],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw oi(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let o=[];for(let s of e.brackets){let a=s;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw oi(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:oc(t,a.open),close:oc(t,a.close)});else throw oi(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function zde(r){qd.registerLanguage(r)}function Hde(){let r=[];return r=r.concat(qd.getLanguages()),r}function $de(r){return Rt.modeService.get().languageIdCodec.encodeLanguageId(r)}function Kde(r,e){let t=Rt.modeService.get().onDidEncounterLanguage(i=>{i===r&&(t.dispose(),e())});return t}function qde(r,e){let t=Rt.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set configuration for unknown language ${r}`);return st.register(t,e,100)}var P$=class{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i,n){if(typeof this._actual.tokenize=="function")return Vb.adaptTokenize(this._languageId,this._actual,e,i,n);throw new Error("Not supported!")}tokenize2(e,t,i){let n=this._actual.tokenizeEncoded(e,i);return new Zh(n.tokens,n.endState)}},Vb=class{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._modeService=i,this._standaloneThemeService=n}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,i){let n=[],o=0;for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.startIndex;s===0?c=0:c<o&&(c=o),n[s]=new ld(c+i,l.scopes,t),o=c}return n}static adaptTokenize(e,t,i,n,o){let s=t.tokenize(i,n),a=Vb._toClassicTokens(s.tokens,e,o),l;return s.endState.equals(n)?l=n:l=s.endState,new Fm(a,l)}tokenize(e,t,i,n){return Vb.adaptTokenize(this._languageId,this._actual,e,i,n)}_toBinaryTokens(e,t,i){let n=e.encodeLanguageId(this._languageId),o=this._standaloneThemeService.getColorTheme().tokenTheme,s=[],a=0,l=0;for(let d=0,h=t.length;d<h;d++){let u=t[d],m=o.match(n,u.scopes);if(a>0&&s[a-1]===m)continue;let p=u.startIndex;d===0?p=0:p<l&&(p=l),s[a++]=p+i,s[a++]=m,l=p}let c=new Uint32Array(a);for(let d=0;d<a;d++)c[d]=s[d];return c}tokenize2(e,t,i,n){let o=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._modeService.languageIdCodec,o.tokens,n),a;return o.endState.equals(i)?a=i:a=o.endState,new Zh(s,a)}};function Yde(r){return"tokenizeEncoded"in r}function A$(r){return r&&typeof r.then=="function"}function Zde(r){if(r){let e=[null];for(let t=1,i=r.length;t<i;t++)e[t]=q.fromHex(r[t]);Rt.standaloneThemeService.get().setColorMapOverride(e)}else Rt.standaloneThemeService.get().setColorMapOverride(null)}function Gde(r,e){let t=Rt.modeService.get().validateLanguageId(r);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${r}`);let i=n=>Yde(n)?new P$(t,n):new Vb(t,n,Rt.modeService.get(),Rt.standaloneThemeService.get());return A$(e)?ti.registerPromise(r,e.then(n=>i(n))):ti.register(r,i(e))}function Xde(r,e){let t=i=>iV(Rt.modeService.get(),Rt.standaloneThemeService.get(),r,R$(r,i));return A$(e)?ti.registerPromise(r,e.then(i=>t(i))):ti.register(r,t(e))}function Qde(r,e){return Xm.register(r,e)}function Jde(r,e){return Qm.register(r,e)}function ehe(r,e){return ll.register(r,e)}function the(r,e){return md.register(r,{provideHover:(t,i,n)=>{let o=t.getWordAtPosition(i);return Promise.resolve(e.provideHover(t,i,n)).then(s=>{if(!!s)return!s.range&&o&&(s.range=new L(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn)),s.range||(s.range=new L(i.lineNumber,i.column,i.lineNumber,i.column)),s})}})}function ihe(r,e){return cl.register(r,e)}function nhe(r,e){return tc.register(r,e)}function rhe(r,e){return Yp.register(r,e)}function ohe(r,e){return fd.register(r,e)}function she(r,e){return ef.register(r,e)}function ahe(r,e){return tf.register(r,e)}function lhe(r,e){return Fs.register(r,e)}function che(r,e,t){return jo.register(r,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(i,n,o,s)=>{let a=Rt.markerService.get().read({resource:i.uri}).filter(l=>L.areIntersectingOrTouching(l,n));return e.provideCodeActions(i,n,{markers:a,only:o.only},s)},resolveCodeAction:e.resolveCodeAction})}function dhe(r,e){return ru.register(r,e)}function hhe(r,e){return Mo.register(r,e)}function uhe(r,e){return nf.register(r,e)}function mhe(r,e){return gd.register(r,e)}function fhe(r,e){return po.register(r,e)}function ghe(r,e){return pd.register(r,e)}function phe(r,e){return ww.register(r,e)}function _he(r,e){return Jm.register(r,e)}function bhe(r,e){return Zp.register(r,e)}function vhe(r,e){return _d.register(r,e)}function whe(r,e){return rf.register(r,e)}function yhe(r,e){return vw.register(r,e)}function Che(r,e){return dl.register(r,e)}function j$(){return{register:zde,getLanguages:Hde,onLanguage:Kde,getEncodedLanguageId:$de,setLanguageConfiguration:qde,setColorMap:Zde,setTokensProvider:Gde,setMonarchTokensProvider:Xde,registerReferenceProvider:Qde,registerRenameProvider:Jde,registerCompletionItemProvider:fhe,registerSignatureHelpProvider:ehe,registerHoverProvider:the,registerDocumentSymbolProvider:ihe,registerDocumentHighlightProvider:nhe,registerLinkedEditingRangeProvider:rhe,registerDefinitionProvider:ohe,registerImplementationProvider:she,registerTypeDefinitionProvider:ahe,registerCodeLensProvider:lhe,registerCodeActionProvider:che,registerDocumentFormattingEditProvider:dhe,registerDocumentRangeFormattingEditProvider:hhe,registerOnTypeFormattingEditProvider:uhe,registerLinkProvider:mhe,registerColorProvider:ghe,registerFoldingRangeProvider:phe,registerDeclarationProvider:_he,registerSelectionRangeProvider:bhe,registerDocumentSemanticTokensProvider:vhe,registerDocumentRangeSemanticTokensProvider:whe,registerInlineCompletionsProvider:yhe,registerInlayHintsProvider:Che,DocumentHighlightKind:f1,CompletionItemKind:l1,CompletionItemTag:c1,CompletionItemInsertTextRule:a1,SymbolKind:A1,SymbolTag:j1,IndentAction:v1,CompletionTriggerKind:d1,SignatureHelpTriggerKind:P1,InlayHintKind:w1,InlineCompletionTriggerKind:y1,FoldingRangeKind:as}}var oh=class{static _handleEolEdits(e,t){let i,n=[];for(let o of t)typeof o.eol=="number"&&(i=o.eol),o.range&&typeof o.text=="string"&&n.push(o);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;let i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();let n=oh._handleEolEdits(e,t);n.length===1&&oh._isFullModelReplaceEdit(e,n[0])?e.executeEdits("formatEditsCommand",n.map(o=>Ut.replace(L.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",n.map(o=>Ut.replaceMove(L.lift(o.range),o.text))),i&&e.pushUndoStop()}};var zC=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}};var xl=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function KL(r){if(r=r.filter(n=>n.range),!r.length)return;let{range:e}=r[0];for(let n=1;n<r.length;n++)e=L.plusRange(e,r[n].range);let{startLineNumber:t,endLineNumber:i}=e;t===i?r.length===1?Oi(g("hint11","Made 1 formatting edit on line {0}",t)):Oi(g("hintn1","Made {0} formatting edits on line {1}",r.length,t)):r.length===1?Oi(g("hint1n","Made 1 formatting edit between lines {0} and {1}",t,i)):Oi(g("hintnn","Made {0} formatting edits between lines {1} and {2}",r.length,t,i))}function M$(r){let e=[],t=new Set,i=ru.ordered(r);for(let o of i)e.push(o),o.extensionId&&t.add(zC.toKey(o.extensionId));let n=Mo.ordered(r);for(let o of n){if(o.extensionId){if(t.has(zC.toKey(o.extensionId)))continue;t.add(zC.toKey(o.extensionId))}e.push({displayName:o.displayName,extensionId:o.extensionId,provideDocumentFormattingEdits(s,a,l){return o.provideDocumentRangeFormattingEdits(s,s.getFullModelRange(),a,l)}})}return e}var sh=class{static setFormatterSelector(e){return{dispose:sh._selectors.unshift(e)}}static select(e,t,i){return xl(this,void 0,void 0,function*(){if(e.length===0)return;let n=ot.first(sh._selectors);if(n)return yield n(e,t,i)})}};sh._selectors=new yn;function rM(r,e,t,i,n,o){return xl(this,void 0,void 0,function*(){let s=r.get(Ue),a=xa(e)?e.getModel():e,l=Mo.ordered(a),c=yield sh.select(l,a,i);c&&(n.report(c),yield s.invokeFunction(She,c,e,t,o))})}function She(r,e,t,i,n){return xl(this,void 0,void 0,function*(){let o=r.get(Jn),s,a;xa(t)?(s=t.getModel(),a=new Yd(t,1|4,void 0,n)):(s=t,a=new pb(t,n));let l=[],c=0;for(let p of r_(i).sort(L.compareRangesUsingStarts))c>0&&L.areIntersectingOrTouching(l[c-1],p)?l[c-1]=L.fromPositions(l[c-1].getStartPosition(),p.getEndPosition()):c=l.push(p);let d=p=>xl(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(s,p,s.getFormattingOptions(),a.token))||[]}),h=(p,_)=>{if(!p.length||!_.length)return!1;let v=p.reduce((C,w)=>L.plusRange(C,w.range),p[0].range);if(!_.some(C=>L.intersectRanges(v,C.range)))return!1;for(let C of p)for(let w of _)if(L.intersectRanges(C.range,w.range))return!0;return!1},u=[],m=[];try{for(let p of l){if(a.token.isCancellationRequested)return!0;m.push(yield d(p))}for(let p=0;p<l.length;++p)for(let _=p+1;_<l.length;++_){if(a.token.isCancellationRequested)return!0;if(h(m[p],m[_])){let v=L.plusRange(l[p],l[_]),C=yield d(v);l.splice(_,1),l.splice(p,1),l.push(v),m.splice(_,1),m.splice(p,1),m.push(C),p=0,_=0}}for(let p of m){if(a.token.isCancellationRequested)return!0;let _=yield o.computeMoreMinimalEdits(s.uri,p);_&&u.push(..._)}}finally{a.dispose()}if(u.length===0)return!1;if(xa(t))oh.execute(t,u,!0),KL(u),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{let[{range:p}]=u,_=new le(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn);s.pushEditOperations([_],u.map(v=>({text:v.text,range:L.lift(v.range),forceMoveMarkers:!0})),v=>{for(let{range:C}of v)if(L.areIntersectingOrTouching(C,_))return[new le(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn)];return null})}return!0})}function F$(r,e,t,i,n){return xl(this,void 0,void 0,function*(){let o=r.get(Ue),s=xa(e)?e.getModel():e,a=M$(s),l=yield sh.select(a,s,t);l&&(i.report(l),yield o.invokeFunction(xhe,l,e,t,n))})}function xhe(r,e,t,i,n){return xl(this,void 0,void 0,function*(){let o=r.get(Jn),s,a;xa(t)?(s=t.getModel(),a=new Yd(t,1|4,void 0,n)):(s=t,a=new pb(t,n));let l;try{let c=yield e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(l=yield o.computeMoreMinimalEdits(s.uri,c),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(xa(t))oh.execute(t,l,i!==2),i!==2&&(KL(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{let[{range:c}]=l,d=new le(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn);s.pushEditOperations([d],l.map(h=>({text:h.text,range:L.lift(h.range),forceMoveMarkers:!0})),h=>{for(let{range:u}of h)if(L.areIntersectingOrTouching(u,d))return[new le(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn)];return null})}return!0})}function Ehe(r,e,t,i,n){return xl(this,void 0,void 0,function*(){let o=Mo.ordered(e);for(let s of o){let a=yield Promise.resolve(s.provideDocumentRangeFormattingEdits(e,t,i,n)).catch(Qt);if(Ji(a))return yield r.computeMoreMinimalEdits(e.uri,a)}})}function Dhe(r,e,t,i){return xl(this,void 0,void 0,function*(){let n=M$(e);for(let o of n){let s=yield Promise.resolve(o.provideDocumentFormattingEdits(e,t,i)).catch(Qt);if(Ji(s))return yield r.computeMoreMinimalEdits(e.uri,s)}})}function oM(r,e,t,i,n){let o=nf.ordered(e);return o.length===0||o[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(o[0].provideOnTypeFormattingEdits(e,t,i,n,Me.None)).catch(Qt).then(s=>r.computeMoreMinimalEdits(e.uri,s))}Ke.registerCommand("_executeFormatRangeProvider",function(r,...e){return xl(this,void 0,void 0,function*(){let[t,i,n]=e;xt(ve.isUri(t)),xt(L.isIRange(i));let o=r.get(fn),s=r.get(Jn),a=yield o.createModelReference(t);try{return Ehe(s,a.object.textEditorModel,L.lift(i),n,Me.None)}finally{a.dispose()}})});Ke.registerCommand("_executeFormatDocumentProvider",function(r,...e){return xl(this,void 0,void 0,function*(){let[t,i]=e;xt(ve.isUri(t));let n=r.get(fn),o=r.get(Jn),s=yield n.createModelReference(t);try{return Dhe(o,s.object.textEditorModel,i,Me.None)}finally{s.dispose()}})});Ke.registerCommand("_executeFormatOnTypeProvider",function(r,...e){return xl(this,void 0,void 0,function*(){let[t,i,n,o]=e;xt(ve.isUri(t)),xt(V.isIPosition(i)),xt(typeof n=="string");let s=r.get(fn),a=r.get(Jn),l=yield s.createModelReference(t);try{return oM(a,l.object.textEditorModel,V.lift(i),n,o)}finally{l.dispose()}})});var sM;lo.wrappingIndent.defaultValue=0;lo.glyphMargin.defaultValue=!1;lo.autoIndent.defaultValue=3;lo.overviewRulerLanes.defaultValue=2;sh.setFormatterSelector((r,e,t)=>Promise.resolve(r[0]));var Qr=U1();Qr.editor=I$();Qr.languages=j$();var qrt=Qr.CancellationTokenSource,Yrt=Qr.Emitter,B$=Qr.KeyCode,W$=Qr.KeyMod,Zrt=Qr.Position,Grt=Qr.Range,Xrt=Qr.Selection,Qrt=Qr.SelectionDirection,Jrt=Qr.MarkerSeverity,eot=Qr.MarkerTag,tot=Qr.Uri,iot=Qr.Token,aM=Qr.editor,HC=Qr.languages;(((sM=ei.MonacoEnvironment)===null||sM===void 0?void 0:sM.globalAPI)||typeof define=="function"&&define.amd)&&(self.monaco=Qr);typeof self.require!="undefined"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var Lhe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},khe=function(r,e){return function(t,i){e(t,i,r)}},qL=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},YL=new _e("selectionAnchorSet",!1),ah=class U${constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=YL.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(U$.ID)}setSelectionAnchor(){if(this.editor.hasModel()){let e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],i=this.editor.deltaDecorations(t,[{range:le.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Eo().appendText(g("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=i[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),Oi(g("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){let t=this.editor.getPosition();this.editor.setSelection(le.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};ah.ID="editor.contrib.selectionAnchorController";ah=Lhe([khe(1,be)],ah);var V$=class extends pe{constructor(){super({id:"editor.action.setSelectionAnchor",label:g("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|32),weight:100}})}run(e,t){return qL(this,void 0,void 0,function*(){ah.get(t).setSelectionAnchor()})}},z$=class extends pe{constructor(){super({id:"editor.action.goToSelectionAnchor",label:g("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:YL})}run(e,t){return qL(this,void 0,void 0,function*(){ah.get(t).goToSelectionAnchor()})}},H$=class extends pe{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:g("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:YL,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|41),weight:100}})}run(e,t){return qL(this,void 0,void 0,function*(){ah.get(t).selectFromAnchorToCursor()})}},$$=class extends pe{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:g("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:YL,kbOpts:{kbExpr:j.editorTextFocus,primary:9,weight:100}})}run(e,t){return qL(this,void 0,void 0,function*(){ah.get(t).cancelSelectionAnchor()})}};He(ah.ID,ah);ae(V$);ae(z$);ae(H$);ae($$);var Ihe=z("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},g("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),K$=class extends pe{constructor(){super({id:"editor.action.jumpToBracket",label:g("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|88,weight:100}})}run(e,t){let i=Ma.get(t);!i||i.jumpToBracket()}},q$=class extends pe{constructor(){super({id:"editor.action.selectToBracket",label:g("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){let n=Ma.get(t);if(!n)return;let o=!0;i&&i.selectBrackets===!1&&(o=!1),n.selectToBracket(o)}},Y$=class{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}},Ma=class extends H{constructor(e){super();this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new dt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Ma.ID)}jumpToBracket(){if(!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{let n=i.getStartPosition(),o=e.matchBracket(n),s=null;if(o)o[0].containsPosition(n)?s=o[1].getStartPosition():o[1].containsPosition(n)&&(s=o[0].getStartPosition());else{let a=e.findEnclosingBrackets(n);if(a)s=a[0].getStartPosition();else{let l=e.findNextBracket(n);l&&l.range&&(s=l.range.getStartPosition())}}return s?new le(s.lineNumber,s.column,s.lineNumber,s.column):new le(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(n=>{let o=n.getStartPosition(),s=t.matchBracket(o);if(!s&&(s=t.findEnclosingBrackets(o),!s)){let c=t.findNextBracket(o);c&&c.range&&(s=t.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(s){s.sort(L.compareRangesUsingStarts);let[c,d]=s;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){let h=a;a=l,l=h}}a&&l&&i.push(new le(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(let i of this._lastBracketsData){let n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}let e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}let t=this._editor.getModel(),i=t.getVersionId(),n=[];this._lastVersionId===i&&(n=this._lastBracketsData);let o=[],s=0;for(let h=0,u=e.length;h<u;h++){let m=e[h];m.isEmpty()&&(o[s++]=m.getStartPosition())}o.length>1&&o.sort(V.compare);let a=[],l=0,c=0,d=n.length;for(let h=0,u=o.length;h<u;h++){let m=o[h];for(;c<d&&n[c].position.isBefore(m);)c++;if(c<d&&n[c].position.equals(m))a[l++]=n[c];else{let p=t.matchBracket(m),_=Ma._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!p&&this._matchBrackets==="always"&&(p=t.findEnclosingBrackets(m,20),_=Ma._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new Y$(m,p,_)}}this._lastBracketsData=a,this._lastVersionId=i}};Ma.ID="editor.contrib.bracketMatchingController";Ma._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=ze.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:yi(Ihe),position:Qn.Center}});Ma._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=ze.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});He(Ma.ID,Ma);ae(q$);ae(K$);Be((r,e)=>{let t=r.getColor(u8);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);let i=r.getColor(HE);i&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${i}; }`)});tr.appendMenuItem(Ce.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:g({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});var lM=class{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let i=this._selection.startLineNumber,n=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&n===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(i)))if(this._isMovingLeft){let s=new L(i,n-1,i,n),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new L(i,o,i,o),a)}else{let s=new L(i,o,i,o+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new L(i,n,i,n),a)}}computeCursorState(e,t){return this._isMovingLeft?new le(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new le(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}};var cM=class extends pe{constructor(e,t){super(t);this.left=e}run(e,t){if(!t.hasModel())return;let i=[],n=t.getSelections();for(let o of n)i.push(new lM(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},Z$=class extends cM{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:g("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:j.writable})}},G$=class extends cM{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:g("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:j.writable})}};ae(Z$);ae(G$);var X$=class extends pe{constructor(){super({id:"editor.action.transposeLetters",label:g("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|50},weight:100}})}run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=[],o=t.getSelections();for(let s of o){if(!s.isEmpty())continue;let a=s.startLineNumber,l=s.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;let d=l===c?s.getPosition():Et.rightPosition(i,s.getPosition().lineNumber,s.getPosition().column),h=Et.leftPosition(i,d),u=Et.leftPosition(i,h),m=i.getValueInRange(L.fromPositions(u,h)),p=i.getValueInRange(L.fromPositions(h,d)),_=L.fromPositions(u,d);n.push(new Yi(_,p+m))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}};ae(X$);var Ohe=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},wg="9_cutcopypaste",The=so||document.queryCommandSupported("cut"),Q$=so||document.queryCommandSupported("copy"),Nhe=typeof navigator.clipboard=="undefined"||Hi?document.queryCommandSupported("paste"):!0;function dM(r){return r.register(),r}var Rhe=The?dM(new hu({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:so?{primary:2048|54,win:{primary:2048|54,secondary:[1024|20]},weight:100}:void 0,menuOpts:[{menuId:Ce.MenubarEditMenu,group:"2_ccp",title:g({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Ce.EditorContext,group:wg,title:g("actions.clipboard.cutLabel","Cut"),when:j.writable,order:1},{menuId:Ce.CommandPalette,group:"",title:g("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Ce.SimpleEditorContext,group:wg,title:g("actions.clipboard.cutLabel","Cut"),when:j.writable,order:1}]})):void 0,Phe=Q$?dM(new hu({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:so?{primary:2048|33,win:{primary:2048|33,secondary:[2048|19]},weight:100}:void 0,menuOpts:[{menuId:Ce.MenubarEditMenu,group:"2_ccp",title:g({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Ce.EditorContext,group:wg,title:g("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Ce.CommandPalette,group:"",title:g("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Ce.SimpleEditorContext,group:wg,title:g("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;tr.appendMenuItem(Ce.MenubarEditMenu,{submenu:Ce.MenubarCopy,title:{value:g("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});tr.appendMenuItem(Ce.EditorContext,{submenu:Ce.EditorContextCopy,title:{value:g("copy as","Copy As"),original:"Copy As"},group:wg,order:3});var hM=Nhe?dM(new hu({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:so?{primary:2048|52,win:{primary:2048|52,secondary:[1024|19]},linux:{primary:2048|52,secondary:[1024|19]},weight:100}:void 0,menuOpts:[{menuId:Ce.MenubarEditMenu,group:"2_ccp",title:g({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Ce.EditorContext,group:wg,title:g("actions.clipboard.pasteLabel","Paste"),when:j.writable,order:4},{menuId:Ce.CommandPalette,group:"",title:g("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Ce.SimpleEditorContext,group:wg,title:g("actions.clipboard.pasteLabel","Paste"),when:j.writable,order:4}]})):void 0,J$=class extends pe{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:g("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(jy.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),jy.forceCopyWithSyntaxHighlighting=!1)}};function eK(r,e){!r||(r.addImplementation(1e4,"code-editor",(t,i)=>{let n=t.get(it).getFocusedCodeEditor();if(n&&n.hasTextFocus()){let o=n.getOption(32),s=n.getSelection();return s&&s.isEmpty()&&!o||document.execCommand(e),!0}return!1}),r.addImplementation(0,"generic-dom",(t,i)=>(document.execCommand(e),!0)))}eK(Rhe,"cut");eK(Phe,"copy");hM&&(hM.addImplementation(1e4,"code-editor",(r,e)=>{let t=r.get(it),i=r.get($o),n=t.getFocusedCodeEditor();return n&&n.hasTextFocus()?!document.execCommand("paste")&&Ya?(()=>Ohe(void 0,void 0,void 0,function*(){let s=yield i.readText();if(s!==""){let a=Mf.INSTANCE.get(s),l=!1,c=null,d=null;a&&(l=n.getOption(32)&&!!a.isFromEmptySelection,c=typeof a.multicursorText!="undefined"?a.multicursorText:null,d=a.mode),n.trigger("keyboard","paste",{text:s,pasteOnNewLine:l,multicursorText:c,mode:d})}}))():!0:!1}),hM.addImplementation(0,"generic-dom",(r,e)=>(document.execCommand("paste"),!0)));Q$&&ae(J$);var qu=class{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};var mt=class{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+mt.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new mt(this.value+mt.sep+e)}};mt.sep=".";mt.None=new mt("@@none@@");mt.Empty=new mt("");mt.QuickFix=new mt("quickfix");mt.Refactor=new mt("refactor");mt.Source=new mt("source");mt.SourceOrganizeImports=mt.Source.append("organizeImports");mt.SourceFixAll=mt.Source.append("fixAll");function tK(r,e){return!(r.include&&!r.include.intersects(e)||r.excludes&&r.excludes.some(t=>nK(e,t,r.include))||!r.includeSourceActions&&mt.Source.contains(e))}function iK(r,e){let t=e.kind?new mt(e.kind):void 0;return!(r.include&&(!t||!r.include.contains(t))||r.excludes&&t&&r.excludes.some(i=>nK(t,i,r.include))||!r.includeSourceActions&&t&&mt.Source.contains(t)||r.onlyIncludePreferredActions&&!e.isPreferred)}function nK(r,e,t){return!(!e.contains(r)||t&&e.contains(t))}var Gs=class{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return!e||typeof e!="object"?new Gs(t.kind,t.apply,!1):new Gs(Gs.getKindFromUser(e,t.kind),Gs.getApplyFromUser(e,t.apply),Gs.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new mt(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}};var uM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},ZL="editor.action.codeAction",XL="editor.action.refactor",QL="editor.action.sourceAction",$C="editor.action.organizeImports",KC="editor.action.fixAll",JL=class{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return uM(this,void 0,void 0,function*(){if(((t=this.provider)===null||t===void 0?void 0:t.resolveCodeAction)&&!this.action.edit){let i;try{i=yield this.provider.resolveCodeAction(this.action,e)}catch(n){Qt(n)}i&&(this.action.edit=i.edit)}return this})}},ek=class extends H{constructor(e,t,i){super();this.documentation=t,this._register(i),this.allActions=[...e].sort(ek.codeActionsComparator),this.validActions=this.allActions.filter(({action:n})=>!n.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:Ji(e.diagnostics)?Ji(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:Ji(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&mt.QuickFix.contains(new mt(e.kind))&&!!e.isPreferred)}},rK={actions:[],documentation:void 0};function qC(r,e,t,i,n){var o;let s=t.filter||{},a={only:(o=s.include)===null||o===void 0?void 0:o.value,trigger:t.type},l=new pb(r,n),c=Ahe(r,s),d=new G,h=c.map(m=>uM(this,void 0,void 0,function*(){try{i.report(m);let p=yield m.provideCodeActions(r,e,a,l.token);if(p&&d.add(p),l.token.isCancellationRequested)return rK;let _=((p==null?void 0:p.actions)||[]).filter(C=>C&&iK(s,C)),v=jhe(m,_,s.include);return{actions:_.map(C=>new JL(C,m)),documentation:v}}catch(p){if(co(p))throw p;return Qt(p),rK}})),u=jo.onDidChange(()=>{let m=jo.all(r);zn(m,c)||l.cancel()});return Promise.all(h).then(m=>{let p=n_(m.map(v=>v.actions)),_=Ca(m.map(v=>v.documentation));return new ek(p,_,d)}).finally(()=>{u.dispose(),l.dispose()})}function Ahe(r,e){return jo.all(r).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(i=>tK(e,new mt(i))):!0)}function jhe(r,e,t){if(!r.documentation)return;let i=r.documentation.map(n=>({kind:new mt(n.kind),command:n.command}));if(t){let n;for(let o of i)o.kind.contains(t)&&(n?n.kind.contains(o.kind)&&(n=o):n=o);if(n)return n==null?void 0:n.command}for(let n of e)if(!!n.kind){for(let o of i)if(o.kind.contains(new mt(n.kind)))return o.command}}Ke.registerCommand("_executeCodeActionProvider",function(r,e,t,i,n){return uM(this,void 0,void 0,function*(){if(!(e instanceof ve))throw Vr();let o=r.get(Gt).getModel(e);if(!o)throw Vr();let s=le.isISelection(t)?le.liftSelection(t):L.isIRange(t)?o.validateRange(t):void 0;if(!s)throw Vr();let a=typeof i=="string"?new mt(i):void 0,l=yield qC(o,s,{type:1,filter:{includeSourceActions:!0,include:a}},Pa.None,Me.None),c=[],d=Math.min(l.validActions.length,typeof n=="number"?n:0);for(let h=0;h<d;h++)c.push(l.validActions[h].resolve(Me.None));try{return yield Promise.all(c),l.validActions.map(h=>h.action)}finally{setTimeout(()=>l.dispose(),100)}})});var Mhe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Fhe=function(r,e){return function(t,i){e(t,i,r)}},Nr=class mM{constructor(e,t){this._messageWidget=new Mi,this._messageListeners=new G,this._editor=e,this._visible=mM.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(mM.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Oi(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new fM(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new li(()=>this.closeMessage(),3e3));let i;this._messageListeners.add(this._editor.onMouseMove(n=>{!n.target.position||(i?i.containsPosition(n.target.position)||this.closeMessage():i=new L(t.lineNumber-3,1,n.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(fM.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(g("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Nr.ID="editor.contrib.messageController";Nr.MESSAGE_VISIBLE=new _e("messageVisible",!1,g("messageVisible","Whether the editor is currently showing an inline message"));Nr=Mhe([Fhe(1,be)],Nr);var Bhe=fi.bindToContribution(Nr.get);ce(new Bhe({id:"leaveEditorMessage",precondition:Nr.MESSAGE_VISIBLE,handler:r=>r.closeMessage(),kbOpts:{weight:100+30,primary:9}}));var fM=class{constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");let o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);let s=document.createElement("div");s.classList.add("message"),s.textContent=n,this._domNode.appendChild(s);let a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t,i=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",i)};return t=setTimeout(i,110),e.getDomNode().addEventListener("animationend",i),e.getDomNode().classList.add("fadeOut"),{dispose:i}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};He(Nr.ID,Nr);Be((r,e)=>{let t=r.getColor(B_);if(t){let o=r.type===qr.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${o}px solid ${t}; }`)}let i=r.getColor(M_);i&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${i}; }`);let n=r.getColor(F_);n&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${n}; }`)});var Whe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},oK=function(r,e){return function(t,i){e(t,i,r)}},Uhe=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},gM=class extends er{constructor(e,t){super(e.command?e.command.id:e.title,Vhe(e.title),void 0,!e.disabled,t);this.action=e}};function Vhe(r){return r.replace(/\r\n|\r|\n/g," ")}var tk=class extends H{constructor(e,t,i,n){super();this._editor=e,this._delegate=t,this._contextMenuService=i,this._visible=!1,this._showingActions=this._register(new Mi),this._keybindingResolver=new YC({getKeybindings:()=>n.getKeybindings()})}get isVisible(){return this._visible}show(e,t,i,n){return Uhe(this,void 0,void 0,function*(){let o=n.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,Hl();this._visible=!0,this._showingActions.value=t;let s=this.getMenuActions(e,o,t.documentation),a=V.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},l=this._keybindingResolver.getResolver(),c=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:d=>d instanceof gM?l(d.action):void 0})})}getMenuActions(e,t,i){var n,o;let s=d=>new gM(d.action,()=>this._delegate.onSelectCodeAction(d)),a=t.map(s),l=[...i],c=this._editor.getModel();if(c&&a.length)for(let d of jo.all(c))d._getAdditionalMenuItems&&l.push(...d._getAdditionalMenuItems({trigger:e.type,only:(o=(n=e.filter)===null||n===void 0?void 0:n.include)===null||o===void 0?void 0:o.value},t.map(h=>h.action)));return l.length&&a.push(new gr,...l.map(d=>s(new JL({title:d.title,command:d},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();let t=this._editor.getScrolledVisiblePosition(e),i=ci(this._editor.getDomNode()),n=i.left+t.left,o=i.top+t.top+t.height;return{x:n,y:o}}};tk=Whe([oK(2,Ho),oK(3,Nt)],tk);var YC=class{constructor(e){this._keybindingProvider=e}getResolver(){let e=new qu(()=>this._keybindingProvider.getKeybindings().filter(t=>YC.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===$C?i={kind:mt.SourceOrganizeImports.value}:t.command===KC&&(i={kind:mt.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Gs.fromUser(i,{kind:mt.None,apply:"never"}))}));return t=>{if(t.kind){let i=this.bestKeybindingForCodeAction(t,e.getValue());return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;let i=new mt(e.kind);return t.filter(n=>n.kind.contains(i)).filter(n=>n.preferred?e.isPreferred:!0).reduceRight((n,o)=>n?n.kind.contains(o.kind)?o:n:o,void 0)}};YC.codeActionCommands=[XL,ZL,QL,$C,KC];var zhe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Hhe=function(r,e){return function(t,i){e(t,i,r)}},ZC;(function(r){r.Hidden={type:0};class e{constructor(i,n,o,s){this.actions=i,this.trigger=n,this.editorPosition=o,this.widgetPosition=s,this.type=1}}r.Showing=e})(ZC||(ZC={}));var GC=class sK extends H{constructor(e,t,i,n){super();this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=n,this._onClick=this._register(new M),this.onClick=this._onClick.event,this._state=ZC.Hidden,this._domNode=document.createElement("div"),this._domNode.className=ge.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{let s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),yt.ignoreTarget(this._domNode),this._register(yW(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();let{top:s,height:a}=ci(this._domNode),l=this._editor.getOption(58),c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:o.posx,y:s+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(J(this._domNode,"mouseenter",o=>{if((o.buttons&1)!=1)return;this.hide();let s=new ms;s.startMonitoring(o.target,o.buttons,fl,()=>{},()=>{s.dispose()})})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();let n=this._editor.getOptions();if(!n.get(56).enabled)return this.hide();let o=this._editor.getModel();if(!o)return this.hide();let{lineNumber:s,column:a}=o.validatePosition(i),l=o.getOptions().tabSize,c=n.get(43),d=o.getLineContent(s),h=Hn.computeIndentLevel(d,l),u=c.spaceWidth*h>22,m=_=>_>2&&this._editor.getTopForLineNumber(_)===this._editor.getTopForLineNumber(_-1),p=s;if(!u){if(s>1&&!m(s-1))p-=1;else if(!m(s+1))p+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new ZC.Showing(e,t,i,{position:{lineNumber:p,column:1},preference:sK._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=ZC.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...ge.lightBulb.classNamesArray),this._domNode.classList.add(...ge.lightbulbAutofix.classNamesArray);let t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=g("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...ge.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...ge.lightBulb.classNamesArray);let e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=g("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=g("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};GC._posPref=[0];GC=zhe([Hhe(3,Nt)],GC);Be((r,e)=>{var t;let i=(t=r.getColor(Yr))===null||t===void 0?void 0:t.transparent(.7),n=r.getColor(dH);n&&e.addRule(`
		.monaco-editor .contentWidgets ${ge.lightBulb.cssSelector} {
			color: ${n};
			background-color: ${i};
		}`);let o=r.getColor(hH);o&&e.addRule(`
		.monaco-editor .contentWidgets ${ge.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${i};
		}`)});var $he=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Khe=function(r,e){return function(t,i){e(t,i,r)}},pM=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},qhe=function(r,e,t,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},Yhe=function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)},ik,nk=class extends H{constructor(e,t,i,n,o){super();this._editor=e,this.delegate=n,this._activeCodeActions=this._register(new Mi),ik.set(this,!1),this._codeActionWidget=new qu(()=>this._register(o.createInstance(tk,this._editor,{onSelectCodeAction:s=>pM(this,void 0,void 0,function*(){this.delegate.applyCodeAction(s,!0)})}))),this._lightBulbWidget=new qu(()=>{let s=this._register(o.createInstance(GC,this._editor,t,i));return this._register(s.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),s})}dispose(){qhe(this,ik,!0,"f"),super.dispose()}update(e){var t,i,n;return pM(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let o;try{o=yield e.actions}catch(s){we(s);return}if(!Yhe(this,ik,"f"))if(this._lightBulbWidget.getValue().update(o,e.trigger,e.position),e.trigger.type===1){if((i=e.trigger.filter)===null||i===void 0?void 0:i.include){let a=this.tryGetValidActionToApply(e.trigger,o);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{o.dispose()}return}if(e.trigger.context){let l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,o);if(l&&l.action.disabled){Nr.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),o.dispose();return}}}let s=!!((n=e.trigger.filter)===null||n===void 0?void 0:n.include);if(e.trigger.context&&(!o.allActions.length||!s&&!o.validActions.length)){Nr.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=o,o.dispose();return}this._activeCodeActions.value=o,this._codeActionWidget.getValue().show(e.trigger,o,e.position,{includeDisabledActions:s})}else this._codeActionWidget.getValue().isVisible?o.dispose():this._activeCodeActions.value=o})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(!!t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(!!t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,i,n){return pM(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,i,n)})}};ik=new WeakMap;nk=$he([Khe(4,Ue)],nk);var _M=function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)},Zhe=function(r,e,t,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},zb,bM=new _e("supportedCodeAction",""),aK=class extends H{constructor(e,t,i,n=250){super();this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new li),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){let t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){let t=this._editor.getModel();!t||e.some(i=>dx(i,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){let t=this._editor.getModel();if(!!t)for(let i of this._markerService.read({resource:t.uri})){let n=t.validateRange(i);if(L.intersectRanges(n,e))return L.lift(n)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&e.type===2){let{lineNumber:n,column:o}=i.getPosition(),s=t.getLineContent(n);if(s.length===0)return;if(o===1){if(/\s/.test(s[0]))return}else if(o===t.getLineMaxColumn(n)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[o-2])&&/\s/.test(s[o-1]))return}return i}_createEventAndSignalChange(e,t){let i=this._editor.getModel();if(!t||!i){this._signalChange(void 0);return}let n=this._getRangeOfMarker(t),o=n?n.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:o};return this._signalChange(s),s}},yg;(function(r){r.Empty={type:0};class e{constructor(i,n,o,s){this.trigger=i,this.rangeOrSelection=n,this.position=o,this._cancellablePromise=s,this.type=1,this.actions=s.catch(a=>{if(co(a))return Ghe;throw a})}cancel(){this._cancellablePromise.cancel()}}r.Triggered=e})(yg||(yg={}));var Ghe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1},vM=class extends H{constructor(e,t,i,n){super();this._editor=e,this._markerService=t,this._progressService=n,this._codeActionOracle=this._register(new Mi),this._state=yg.Empty,this._onDidChangeState=this._register(new M),this.onDidChangeState=this._onDidChangeState.event,zb.set(this,!1),this._supportedCodeActions=bM.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(jo.onDidChange(()=>this._update())),this._update()}dispose(){_M(this,zb,"f")||(Zhe(this,zb,!0,"f"),super.dispose(),this.setState(yg.Empty,!0))}_update(){if(_M(this,zb,"f"))return;this._codeActionOracle.value=void 0,this.setState(yg.Empty);let e=this._editor.getModel();if(e&&jo.has(e)&&!this._editor.getOption(80)){let t=[];for(let i of jo.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new aK(this._editor,this._markerService,i=>{var n;if(!i){this.setState(yg.Empty);return}let o=At(s=>qC(e,i.selection,i.trigger,Pa.None,s));i.trigger.type===1&&((n=this._progressService)===null||n===void 0||n.showWhile(o,250)),this.setState(new yg.Triggered(i.trigger,i.selection,i.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!_M(this,zb,"f")&&this._onDidChangeState.fire(e))}};zb=new WeakMap;var Xhe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},rk=function(r,e){return function(t,i){e(t,i,r)}},lK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function XC(r){return fe.regex(bM.keys()[0],new RegExp("(\\s|^)"+Xn(r.value)+"\\b"))}var wM={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:g("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:g("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[g("args.schema.apply.first","Always apply the first returned code action."),g("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),g("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:g("args.schema.preferred","Controls if only preferred code actions should be returned.")}}},lh=class cK extends H{constructor(e,t,i,n,o){super();this._instantiationService=o,this._editor=e,this._model=this._register(new vM(this._editor,t,i,n)),this._register(this._model.onDidChangeState(s=>this.update(s))),this._ui=new qu(()=>this._register(new nk(e,ch.Id,Sg.Id,{applyCodeAction:(s,a)=>lK(this,void 0,void 0,function*(){try{yield this._applyCodeAction(s)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(cK.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,i){if(!this._editor.hasModel())return;Nr.get(this._editor).closeMessage();let n=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:i,context:{notAvailableMessage:e,position:n}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(Qhe,e,this._editor)}};lh.ID="editor.contrib.quickFixController";lh=Xhe([rk(1,nh),rk(2,be),rk(3,Xr),rk(4,Ue)],lh);function Qhe(r,e,t){return lK(this,void 0,void 0,function*(){let i=r.get(h_),n=r.get(jt),o=r.get(ml),s=r.get(Vt);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Me.None),e.action.edit&&(yield i.apply(gf.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield n.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){let l=Jhe(a);s.error(typeof l=="string"?l:g("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function Jhe(r){return typeof r=="string"?r:r instanceof Error&&typeof r.message=="string"?r.message:void 0}function Cg(r,e,t,i){if(r.hasModel()){let n=lh.get(r);n&&n.manualTriggerAtCurrentPosition(e,t,i)}}var ch=class extends pe{constructor(){super({id:ch.Id,label:g("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:fe.and(j.writable,j.hasCodeActionsProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|84,weight:100}})}run(e,t){return Cg(t,g("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}};ch.Id="editor.action.quickFix";var yM=class extends fi{constructor(){super({id:ZL,precondition:fe.and(j.writable,j.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:wM}]}})}runEditorCommand(e,t,i){let n=Gs.fromUser(i,{kind:mt.Empty,apply:"ifSingle"});return Cg(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?g("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):g("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?g("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):g("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}},CM=class extends pe{constructor(){super({id:XL,label:g("refactor.label","Refactor..."),alias:"Refactor...",precondition:fe.and(j.writable,j.hasCodeActionsProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|48,mac:{primary:256|1024|48},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:fe.and(j.writable,XC(mt.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:wM}]}})}run(e,t,i){let n=Gs.fromUser(i,{kind:mt.Refactor,apply:"never"});return Cg(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?g("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):g("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):n.preferred?g("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):g("editor.action.refactor.noneMessage","No refactorings available"),{include:mt.Refactor.contains(n.kind)?n.kind:mt.None,onlyIncludePreferredActions:n.preferred},n.apply)}},SM=class extends pe{constructor(){super({id:QL,label:g("source.label","Source Action..."),alias:"Source Action...",precondition:fe.and(j.writable,j.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:fe.and(j.writable,XC(mt.Source))},description:{description:"Source Action...",args:[{name:"args",schema:wM}]}})}run(e,t,i){let n=Gs.fromUser(i,{kind:mt.Source,apply:"never"});return Cg(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?g("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):g("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?g("editor.action.source.noneMessage.preferred","No preferred source actions available"):g("editor.action.source.noneMessage","No source actions available"),{include:mt.Source.contains(n.kind)?n.kind:mt.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}},xM=class extends pe{constructor(){super({id:$C,label:g("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:fe.and(j.writable,XC(mt.SourceOrganizeImports)),kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|45,weight:100}})}run(e,t){return Cg(t,g("editor.action.organize.noneMessage","No organize imports action available"),{include:mt.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}},EM=class extends pe{constructor(){super({id:KC,label:g("fixAll.label","Fix All"),alias:"Fix All",precondition:fe.and(j.writable,XC(mt.SourceFixAll))})}run(e,t){return Cg(t,g("fixAll.noneMessage","No fix all action available"),{include:mt.SourceFixAll,includeSourceActions:!0},"ifSingle")}},Sg=class extends pe{constructor(){super({id:Sg.Id,label:g("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:fe.and(j.writable,XC(mt.QuickFix)),kbOpts:{kbExpr:j.editorTextFocus,primary:512|1024|84,mac:{primary:2048|512|84},weight:100}})}run(e,t){return Cg(t,g("editor.action.autoFix.noneMessage","No auto fixes available"),{include:mt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}};Sg.Id="editor.action.autoFix";He(lh.ID,lh);ae(ch);ae(CM);ae(SM);ae(xM);ae(Sg);ae(EM);ce(new yM);var dK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},QC=class{constructor(){this.lenses=[],this._disposables=new G}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(let i of e.lenses)this.lenses.push({symbol:i,provider:t})}};function DM(r,e){return dK(this,void 0,void 0,function*(){let t=Fs.ordered(r),i=new Map,n=new QC,o=t.map((s,a)=>dK(this,void 0,void 0,function*(){i.set(s,a);try{let l=yield Promise.resolve(s.provideCodeLenses(r,e));l&&n.add(l,s)}catch(l){Qt(l)}}));return yield Promise.all(o),n.lenses=n.lenses.sort((s,a)=>s.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:s.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:i.get(s.provider)<i.get(a.provider)?-1:i.get(s.provider)>i.get(a.provider)?1:s.symbol.range.startColumn<a.symbol.range.startColumn?-1:s.symbol.range.startColumn>a.symbol.range.startColumn?1:0),n})}Ke.registerCommand("_executeCodeLensProvider",function(r,...e){let[t,i]=e;xt(ve.isUri(t)),xt(typeof i=="number"||!i);let n=r.get(Gt).getModel(t);if(!n)throw Vr();let o=[],s=new G;return DM(n,Me.None).then(a=>{s.add(a);let l=[];for(let c of a.lenses)i==null||Boolean(c.symbol.command)?o.push(c.symbol):i-- >0&&c.provider.resolveCodeLens&&l.push(Promise.resolve(c.provider.resolveCodeLens(n,c.symbol,Me.None)).then(d=>o.push(d||c.symbol)));return Promise.all(l)}).then(()=>o).finally(()=>{setTimeout(()=>s.dispose(),100)})});var eue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},tue=function(r,e){return function(t,i){e(t,i,r)}},LM=Ie("ICodeLensCache"),kM=class{constructor(e,t){this.lineCount=e,this.data=t}},IM=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Ao(20,.75);let t="codelens/cache";rw(()=>e.remove(t,1));let i="codelens/cache2",n=e.get(i,1,"{}");this._deserialize(n),os(e.onWillSaveState)(o=>{o.reason===Rb.SHUTDOWN&&e.store(i,this._serialize(),1,1)})}put(e,t){let i=t.lenses.map(s=>{var a;return{range:s.symbol.range,command:s.symbol.command&&{id:"",title:(a=s.symbol.command)===null||a===void 0?void 0:a.title}}}),n=new QC;n.add({lenses:i,dispose:()=>{}},this._fakeProvider);let o=new kM(e.getLineCount(),n);this._cache.set(e.uri.toString(),o)}get(e){let t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){let e=Object.create(null);for(let[t,i]of this._cache){let n=new Set;for(let o of i.data.lenses)n.add(o.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{let t=JSON.parse(e);for(let i in t){let n=t[i],o=[];for(let a of n.lines)o.push({range:new L(a,1,a,11)});let s=new QC;s.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(i,new kM(n.lineCount,s))}}catch{}}};IM=eue([tue(0,Zo)],IM);_o(LM,IM);var hK=class{constructor(e,t,i){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}},JC=class{constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${JC._idPool++}`,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let i=[],n=!1;for(let o=0;o<e.length;o++){let s=e[o];if(!!s&&(n=!0,s.command)){let a=Aa(s.command.title.trim());s.command.id?(i.push(oe("a",{id:String(o),title:s.command.tooltip},...a)),this._commands.set(String(o),s.command)):i.push(oe("span",{title:s.command.tooltip},...a)),o+1<e.length&&i.push(oe("span",void 0,"\xA0|\xA0"))}}n?(pa(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):pa(this._domNode,oe("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){let t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};JC._idPool=0;var eS=class{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,n=t.length;i<n;i++)this._addDecorationsCallbacks[i](t[i])}},ok=class{constructor(e,t,i,n,o,s,a){this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];let l,c=[];this._data.forEach((d,h)=>{d.symbol.command&&c.push(d.symbol),n.addDecoration({range:d.symbol.range,options:ze.EMPTY},u=>this._decorationIds[h]=u),l?l=L.plusRange(l,d.symbol.range):l=L.lift(d.symbol.range)}),this._viewZone=new hK(l.startLineNumber-1,s,a),this._viewZoneId=o.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new JC(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{let i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!!(i&&L.isEmpty(n.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,n)=>{t.addDecoration({range:i.symbol.range,options:ze.EMPTY},o=>this._decorationIds[n]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){let i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){let i=e[t];if(i){let{symbol:n}=this._data[t];n.command=i.command||n.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){let e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){let t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}};Be((r,e)=>{let t=r.getColor(h8);t&&(e.addRule(`.monaco-editor .codelens-decoration { color: ${t}; }`),e.addRule(`.monaco-editor .codelens-decoration .codicon { color: ${t}; }`));let i=r.getColor(U_);i&&(e.addRule(`.monaco-editor .codelens-decoration > a:hover { color: ${i} !important; }`),e.addRule(`.monaco-editor .codelens-decoration > a:hover .codicon { color: ${i} !important; }`))});var iue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},OM=function(r,e){return function(t,i){e(t,i,r)}},nue=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Hb=class{constructor(e,t,i,n){this._editor=e,this._commandService=t,this._notificationService=i,this._codeLensCache=n,this._disposables=new G,this._localToDispose=new G,this._lenses=[],this._getCodeLensModelDelays=new nu(Fs,250,2500),this._oldCodeLensModels=new G,this._resolveCodeLensesDelays=new nu(Fs,250,2500),this._resolveCodeLensesScheduler=new dt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(16)||o.hasChanged(15))&&this._updateLensStyle(),o.hasChanged(14)&&this._onModelChange()})),this._disposables.add(Fs.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+Hp(this._editor.getId()).toString(16),this._styleElement=un(Qh(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){let{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(15),n=this._editor.getOption(43),o=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`,a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${s}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;i&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${Qi.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,i??"inherit"),this._editor.getContainerDomNode().style.setProperty(s,n.fontFeatureSettings),this._editor.changeViewZones(l=>{for(let c of this._lenses)c.updateHeight(e,l)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)===null||i===void 0||i.dispose()}_onModelChange(){this._localDispose();let e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;let t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!Fs.has(e)){t&&this._localToDispose.add(fa(()=>{let n=this._codeLensCache.get(e);t===n&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(let n of Fs.all(e))if(typeof n.onDidChange=="function"){let o=n.onDidChange(()=>i.schedule());this._localToDispose.add(o)}let i=new dt(()=>{var n;let o=Date.now();(n=this._getCodeLensModelPromise)===null||n===void 0||n.cancel(),this._getCodeLensModelPromise=At(s=>DM(e,s)),this._getCodeLensModelPromise.then(s=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=s,this._codeLensCache.put(e,s);let a=this._getCodeLensModelDelays.update(e,Date.now()-o);i.delay=a,this._renderCodeLensSymbols(s),this._resolveCodeLensesInViewportSoon()},we)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(i),this._localToDispose.add(Re(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(n=>{this._editor.changeViewZones(o=>{let s=[],a=-1;this._lenses.forEach(c=>{!c.isValid()||a===c.getLineNumber()?s.push(c):(c.update(o),a=c.getLineNumber())});let l=new eS;s.forEach(c=>{c.dispose(l,o),this._lenses.splice(this._lenses.indexOf(c),1)}),l.commit(n)})}),i.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Re(()=>{if(this._editor.getModel()){let n=$s.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(s=>{this._disposeAllLenses(o,s)})}),n.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(n=>{if(n.target.type!==9)return;let o=n.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(let s of this._lenses){let a=s.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){let i=new eS;for(let n of this._lenses)n.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),i=[],n;for(let a of e.lenses){let l=a.symbol.range.startLineNumber;l<1||l>t||(n&&n[n.length-1].symbol.range.startLineNumber===l?n.push(a):(n=[a],i.push(n)))}let o=$s.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{let c=new eS,d=0,h=0;for(;h<i.length&&d<this._lenses.length;){let u=i[h][0].symbol.range.startLineNumber,m=this._lenses[d].getLineNumber();m<u?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):m===u?(this._lenses[d].updateCodeLensSymbols(i[h],c),h++,d++):(this._lenses.splice(d,0,new ok(i[h],this._editor,this._styleClassName,c,l,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;h<i.length;)this._lenses.push(new ok(i[h],this._editor,this._styleClassName,c,l,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;c.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;let t=this._editor.getModel();if(!t)return;let i=[],n=[];if(this._lenses.forEach(a=>{let l=a.computeIfNecessary(t);l&&(i.push(l),n.push(a))}),i.length===0)return;let o=Date.now(),s=At(a=>{let l=i.map((c,d)=>{let h=new Array(c.length),u=c.map((m,p)=>!m.symbol.command&&typeof m.provider.resolveCodeLens=="function"?Promise.resolve(m.provider.resolveCodeLens(t,m.symbol,a)).then(_=>{h[p]=_},Qt):(h[p]=m.symbol,Promise.resolve(void 0)));return Promise.all(u).then(()=>{!a.isCancellationRequested&&!n[d].isDisposed()&&n[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{let a=this._resolveCodeLensesDelays.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{we(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};Hb.ID="css.editor.codeLens";Hb=iue([OM(1,jt),OM(2,Vt),OM(3,LM)],Hb);He(Hb.ID,Hb);ae(class extends pe{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:j.hasCodeLensProvider,label:g("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return nue(this,void 0,void 0,function*(){if(!t.hasModel())return;let i=e.get(Ku),n=e.get(jt),o=e.get(Vt),s=t.getSelection().positionLineNumber,a=t.getContribution(Hb.ID),l=[];for(let d of a.getLenses())if(d.getLineNumber()===s)for(let h of d.getItems()){let{command:u}=h.symbol;u&&l.push({label:u.title,command:u})}if(l.length===0)return;let c=yield i.pick(l,{canPickMany:!1});if(!!c)try{yield n.executeCommand(c.command.id,...c.command.arguments||[])}catch(d){o.error(d)}})}});function uK(r,e){let t=[],n=pd.ordered(r).reverse().map(o=>Promise.resolve(o.provideDocumentColors(r,e)).then(s=>{if(Array.isArray(s))for(let a of s)t.push({colorInfo:a,provider:o})}));return Promise.all(n).then(()=>t)}function TM(r,e,t,i){return Promise.resolve(t.provideColorPresentations(r,e,i))}Ke.registerCommand("_executeDocumentColorProvider",function(r,...e){let[t]=e;if(!(t instanceof ve))throw Vr();let i=r.get(Gt).getModel(t);if(!i)throw Vr();let n=[],s=pd.ordered(i).reverse().map(a=>Promise.resolve(a.provideDocumentColors(i,Me.None)).then(l=>{if(Array.isArray(l))for(let c of l)n.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(s).then(()=>n)});Ke.registerCommand("_executeColorPresentationProvider",function(r,...e){let[t,i]=e,{uri:n,range:o}=i;if(!(n instanceof ve)||!Array.isArray(t)||t.length!==4||!L.isIRange(o))throw Vr();let[s,a,l,c]=t,d=r.get(Gt).getModel(n);if(!d)throw Vr();let h={range:o,color:{red:s,green:a,blue:l,alpha:c}},u=[],p=pd.ordered(d).reverse().map(_=>Promise.resolve(_.provideColorPresentations(d,h,Me.None)).then(v=>{Array.isArray(v)&&u.push(...v)}));return Promise.all(p).then(()=>u)});var rue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},mK=function(r,e){return function(t,i){e(t,i,r)}},oue=500,Yu=class fK extends H{constructor(e,t,i){super();this._editor=e,this._codeEditorService=t,this._configurationService=i,this._localToDispose=this._register(new G),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(pd.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){let e=this._editor.getModel();if(!e)return!1;let t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){let n=i.colorDecorators;if(n&&n.enable!==void 0&&!n.enable)return n.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;let e=this._editor.getModel();!e||!pd.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new li,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},fK.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=At(e=>{let t=this._editor.getModel();return t?uK(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},we)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){let t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:ze.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,n)=>this._colorDatas.set(i,e[n]))}updateColorDecorators(e){let t=[],i={};for(let n=0;n<e.length&&t.length<oue;n++){let{red:o,green:s,blue:a,alpha:l}=e[n].colorInfo.color,c=new ct(Math.round(o*255),Math.round(s*255),Math.round(a*255),l),d=Hp(`rgba(${c.r},${c.g},${c.b},${c.a})`).toString(16),h=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,u="colorBox-"+d;!this._decorationsTypes.has(u)&&!i[u]&&this._codeEditorService.registerDecorationType("color-detector-color",u,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:h},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),i[u]=!0,t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(u,!0)})}this._decorationsTypes.forEach(n=>{i[n]||this._codeEditorService.removeDecorationType(n)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){let t=this._editor.getModel();if(!t)return null;let i=t.getDecorationsInRange(L.fromPositions(e,e)).filter(n=>this._colorDatas.has(n.id));return i.length===0?null:this._colorDatas.get(i[0].id)}};Yu.ID="editor.contrib.colorDetector";Yu.RECOMPUTE_TIME=1e3;Yu=rue([mK(1,it),mK(2,Mt)],Yu);He(Yu.ID,Yu);function NM(r,e){return!!r[e]}var sk=class{constructor(e,t){this.target=e.target,this.hasTriggerModifier=NM(e.event,t.triggerModifier),this.hasSideBySideModifier=NM(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}},RM=class{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=NM(e,t.triggerModifier)}},tS=class{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}};function gK(r){return r==="altKey"?We?new tS(57,"metaKey",6,"altKey"):new tS(5,"ctrlKey",6,"altKey"):We?new tS(6,"altKey",57,"metaKey"):new tS(6,"altKey",5,"ctrlKey")}var iS=class extends H{constructor(e){super();this._onMouseMoveOrRelevantKeyDown=this._register(new M),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new M),this.onExecute=this._onExecute.event,this._onCancel=this._register(new M),this.onCancel=this._onCancel.event,this._editor=e,this._opts=gK(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){let i=gK(this._editor.getOption(69));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new sk(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new sk(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new sk(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new RM(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new RM(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){let t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}};var sue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xg=function(r,e){return function(t,i){e(t,i,r)}},El=class extends Nu{constructor(e,t,i,n,o,s,a,l,c,d){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},n,o,s,a,l,c,d);this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(h=>this._onParentConfigurationChanged(h)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Un(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};El=sue([xg(3,Ue),xg(4,it),xg(5,jt),xg(6,be),xg(7,ht),xg(8,Vt),xg(9,pn)],El);var pK=new q(new ct(0,122,204)),aue={showArrow:!0,showFrame:!0,className:"",frameColor:pK,arrowColor:pK,keepEditorSelection:!1},lue="vs.editor.contrib.zoneWidget",_K=class{constructor(e,t,i,n,o,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this._onDomNodeTop=o,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}},bK=class{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}},nS=class{constructor(e){this._editor=e,this._ruleName=nS._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),Tp(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Tp(this._ruleName),aw(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:L.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}};nS._IdGenerator=new Mb(".arrow-decoration-");var PM=class{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new G,this.container=null,this._isShowing=!1,this.editor=e,this.options=sl(t),Un(this.options,aue,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{let n=this._getWidth(i);this.domNode.style.width=n+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(n)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new nS(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;let i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}this._resizeSash&&this._resizeSash.layout()}get position(){let[e]=this._positionMarkerId;if(!e)return;let t=this.editor.getModel();if(!t)return;let i=t.getDecorationRange(e);if(!!i)return i.getStartPosition()}show(e,t){let i=L.isIRange(e)?L.lift(e):L.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:i,options:ze.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let i=Math.round(e/3);t+=2*i}if(this.options.showFrame){let i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){let i=e.getStartPosition(),n=this.editor.getLayoutInfo(),o=this._getWidth(n);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(n)+"px";let s=document.createElement("div");s.style.overflow="hidden";let a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,d=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(i)),this.options.showFrame&&(d=Math.round(a/9)),this.editor.changeViewZones(m=>{this._viewZone&&m.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new _K(s,i.lineNumber,i.column,t,p=>this._onViewZoneTop(p),p=>this._onViewZoneHeight(p)),this._viewZone.id=m.addZone(this._viewZone),this._overlayWidget=new bK(lue+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){let m=this.options.frameWidth?this.options.frameWidth:d;this.container.style.borderTopWidth=m+"px",this.container.style.borderBottomWidth=m+"px"}let h=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,o),this.options.keepEditorSelection||this.editor.setSelection(e);let u=this.editor.getModel();if(u){let m=e.endLineNumber+1;m<=u.getLineCount()?this.revealLine(m,!1):this.revealLine(u.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){!this.container||(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new cn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let i=(t.currentY-e.startY)/this.editor.getOption(58),n=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+n;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}};var vK=class extends Ea{constructor(e,t){super();this._onDidChangeVisibility=this._register(new M),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=X(e,oe(".monaco-dropdown")),this._label=X(this._element,oe(".dropdown-label"));let i=t.labelRenderer;i||(i=o=>(o.textContent=t.label||"",null));for(let o of[De.CLICK,De.MOUSE_DOWN,Ft.Tap])this._register(J(this.element,o,s=>St.stop(s,!0)));for(let o of[De.MOUSE_DOWN,Ft.Tap])this._register(J(this._label,o,s=>{s instanceof MouseEvent&&s.detail>1||(this.visible?this.hide():this.show())}));this._register(J(this._label,De.KEY_UP,o=>{let s=new kt(o);(s.equals(3)||s.equals(10))&&(St.stop(o,!0),this.visible?this.hide():this.show())}));let n=i(this._label);n&&this._register(n),this._register(yt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}},AM=class extends vK{constructor(e,t){super(e,t);this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};var ak=class extends Ra{constructor(e,t,i,n=Object.create(null)){super(null,e,n);this.actionItem=null,this._onDidChangeVisibility=this._register(new M),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=o=>{this.element=X(o,oe("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new AM(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var s;(s=this.element)===null||s===void 0||s.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;let i=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}};var jM=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Wc=function(r,e){return function(t,i){e(t,i,r)}},wK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function yK(r,e,t,i,n,o,s){let a=r.getActions(e);return due(a,t,!1,typeof i=="string"?c=>c===i:i,n,o,s),cue(a)}function cue(r){let e=new G;for(let[,t]of r)for(let i of t)e.add(i);return e}function due(r,e,t,i=a=>a==="navigation",n=Number.MAX_SAFE_INTEGER,o=()=>!1,s=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);let c=new Set;for(let[d,h]of r){let u;i(d)?(u=a,u.length>0&&s&&u.push(new gr)):(u=l,u.length>0&&u.push(new gr));for(let m of h){t&&(m=m instanceof Da&&m.alt?m.alt:m);let p=u.push(m);m instanceof Ed&&c.add({group:d,action:m,index:p-1})}}for(let{group:d,action:h,index:u}of c){let m=i(d)?a:l,p=h.actions;(p.length<=1||m.length+p.length-2<=n)&&o(h,d,m.length)&&m.splice(u,1,...p)}if(a!==l&&a.length>n){let d=a.splice(n,a.length-n);l.unshift(...d,new gr)}}var Eg=class extends Ic{constructor(e,t,i,n,o){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable});this._keybindingService=i,this._notificationService=n,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Mi),this._altKey=ql.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return wK(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,i=this._altKey.keyStatus.altKey||(bi||ji)&&this._altKey.keyStatus.shiftKey,n=()=>{let o=t&&i;o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{i=o.altKey||(bi||ji)&&o.shiftKey,n()})),this._register(J(e,"mouseleave",o=>{t=!1,n()})),this._register(J(e,"mouseenter",o=>{t=!0,n()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){let e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label,n=t?g("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt){let o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=s&&s.getLabel(),l=a?g("titleAndKb","{0} ({1})",o,a):o;n+=`
[${g_.modifierLabels[Wr].altKey}] ${l}`}this.label.title=n}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;let{element:i,label:n}=this;if(!i||!n)return;let o=this._commandAction.checked&&((t=e.toggled)===null||t===void 0?void 0:t.icon)?e.toggled.icon:e.icon;if(!!o)if(Tt.isThemeIcon(o)){let s=Tt.asClassNameArray(o);n.classList.add(...s),this._itemClassDispose.value=Re(()=>{n.classList.remove(...s)})}else o.light&&n.style.setProperty("--menu-entry-icon-light",Ns(o.light)),o.dark&&n.style.setProperty("--menu-entry-icon-dark",Ns(o.dark)),n.classList.add("icon"),this._itemClassDispose.value=Re(()=>{n.classList.remove("icon"),n.style.removeProperty("--menu-entry-icon-light"),n.style.removeProperty("--menu-entry-icon-dark")})}};Eg=jM([Wc(2,Nt),Wc(3,Vt),Wc(4,be)],Eg);var MM=class extends ak{constructor(e,t,i){var n,o;let s=Object.assign({},t??Object.create(null),{menuAsChild:(n=t==null?void 0:t.menuAsChild)!==null&&n!==void 0?n:!1,classNames:(o=t==null?void 0:t.classNames)!==null&&o!==void 0?o:Tt.isThemeIcon(e.item.icon)?Tt.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},i,s)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");let{icon:t}=this._action.item;t&&!Tt.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",Ns(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",Ns(t.dark)))}}};MM=jM([Wc(2,Ho)],MM);var FM=class extends Ra{constructor(e,t,i,n,o,s,a,l){var c,d,h;super(null,e);this._keybindingService=i,this._notificationService=n,this._contextMenuService=o,this._menuService=s,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let u,m=l.get(this._storageKey,1);m&&(u=e.actions.find(_=>m===_.id)),u||(u=e.actions[0]),this._defaultAction=this._instaService.createInstance(Eg,u,void 0);let p=Object.assign({},t??Object.create(null),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(h=t==null?void 0:t.actionRunner)!==null&&h!==void 0?h:new Ea});this._dropdown=new ak(e,e.actions,this._contextMenuService,p),this._dropdown.actionRunner.onDidRun(_=>{_.action instanceof Da&&this.update(_.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Eg,e,void 0),this._defaultAction.actionRunner=new class extends Ea{runAction(t,i){return wK(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(TW(this._container,oe(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let t=oe(".action-container");this._defaultAction.render(X(this._container,t)),this._register(J(t,De.KEY_DOWN,n=>{let o=new kt(n);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));let i=oe(".dropdown-action-container");this._dropdown.render(X(this._container,i)),this._register(J(i,De.KEY_DOWN,n=>{var o;let s=new kt(n);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};FM=jM([Wc(2,Nt),Wc(3,Vt),Wc(4,Ho),Wc(5,hs),Wc(6,Ue),Wc(7,Zo)],FM);function CK(r,e,t){return e instanceof Da?r.createInstance(Eg,e,void 0):e instanceof Sf?e.item.rememberDefaultAction?r.createInstance(FM,e,t):r.createInstance(MM,e,t):void 0}var SK=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xK=function(r,e){return function(t,i){e(t,i,r)}},BM=Ie("IPeekViewService");_o(BM,class{constructor(){this._widgets=new Map}addExclusiveWidget(r,e){let t=this._widgets.get(r);t&&(t.listener.dispose(),t.widget.dispose());let i=()=>{let n=this._widgets.get(r);n&&n.widget===e&&(n.listener.dispose(),this._widgets.delete(r))};this._widgets.set(r,{widget:e,listener:e.onDidClose(i)})}});var Rr;(function(r){r.inPeekEditor=new _e("inReferenceSearchEditor",!0,g("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),r.notInPeekEditor=r.inPeekEditor.toNegated()})(Rr||(Rr={}));var rS=class{constructor(e,t){e instanceof El&&Rr.inPeekEditor.bindTo(t)}dispose(){}};rS.ID="editor.contrib.referenceController";rS=SK([xK(1,be)],rS);He(rS.ID,rS);function EK(r){let e=r.get(it).getFocusedCodeEditor();return e instanceof El?e.getParentEditor():e}var hue={headerBackgroundColor:q.white,primaryHeadingColor:q.fromHex("#333333"),secondaryHeadingColor:q.fromHex("#6c6c6cb3")},$b=class extends PM{constructor(e,t,i){super(e,t);this.instantiationService=i,this._onDidClose=new M,this.onDidClose=this._onDidClose.event,Un(this.options,hue,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=oe(".head"),this._bodyElement=oe(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){let i=oe(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),Zt(i,"click",s=>this._onTitleClick(s))),X(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=oe("span.filename"),this._secondaryHeading=oe("span.dirname"),this._metaHeading=oe("span.meta"),X(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);let n=oe(".peekview-actions");X(this._headElement,n);let o=this._getActionBarOptions();this._actionbarWidget=new Gr(n,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new er("peekview.close",g("label.close","Close"),ge.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:CK.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Li(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Wn(this._metaHeading)):Nn(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}let i=Math.ceil(this.editor.getOption(58)*1.2),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};$b=SK([xK(2,Ue)],$b);var DK=z("peekViewTitle.background",{dark:si(zo,.1),light:si(zo,.1),hc:null},g("peekViewTitleBackground","Background color of the peek view title area.")),lk=z("peekViewTitleLabel.foreground",{dark:q.white,light:q.black,hc:q.white},g("peekViewTitleForeground","Color of the peek view title.")),ck=z("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},g("peekViewTitleInfoForeground","Color of the peek view title info.")),LK=z("peekView.border",{dark:zo,light:zo,hc:Ci},g("peekViewBorder","Color of the peek view borders and arrow.")),WM=z("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:q.black},g("peekViewResultsBackground","Background color of the peek view result list.")),kK=z("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:q.white},g("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),IK=z("peekViewResult.fileForeground",{dark:q.white,light:"#1E1E1E",hc:q.white},g("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),OK=z("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},g("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),TK=z("peekViewResult.selectionForeground",{dark:q.white,light:"#6C6C6C",hc:q.white},g("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),oS=z("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:q.black},g("peekViewEditorBackground","Background color of the peek view editor.")),NK=z("peekViewEditorGutter.background",{dark:oS,light:oS,hc:oS},g("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),RK=z("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},g("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),PK=z("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},g("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),AK=z("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:an},g("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var uue=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Fa=class{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=AL.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;let t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?g({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",ar(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):g("aria.oneReference","symbol in {0} on line {1} at column {2}",ar(this.uri),this.range.startLineNumber,this.range.startColumn)}},jK=class{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){let i=this._modelReference.object.textEditorModel;if(!i)return;let{startLineNumber:n,startColumn:o,endLineNumber:s,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:n,column:o-t}),c=new L(n,l.startColumn,n,o),d=new L(s,a,s,1073741824),h=i.getValueInRange(c).replace(/^\s+/,""),u=i.getValueInRange(e),m=i.getValueInRange(d).replace(/\s+$/,"");return{value:h+u+m,highlight:{start:h.length,end:h.length+u.length}}}},Zu=class{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new rn}dispose(){Ge(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){let e=this.children.length;return e===1?g("aria.fileReferences.1","1 symbol in {0}, full path {1}",ar(this.uri),this.uri.fsPath):g("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ar(this.uri),this.uri.fsPath)}resolve(e){return uue(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{let i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new jK(i))}catch(i){we(i)}return this})}},vr=class{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new M,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;let[i]=e;e.sort(vr._compareReferences);let n;for(let o of e)if((!n||!Hr.isEqual(n.uri,o.uri,!0))&&(n=new Zu(this,o.uri),this.groups.push(n)),n.children.length===0||vr._compareReferences(o,n.children[n.children.length-1])!==0){let s=new Fa(i===o,n,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),n.children.push(s)}}dispose(){Ge(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new vr(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?g("aria.result.0","No results found"):this.references.length===1?g("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?g("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):g("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.length,s=i.parent.groups.length;return s===1||t&&n+1<o||!t&&n>0?(t?n=(n+1)%o:n=(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%s,i.parent.groups[n].children[0]):(n=(n+s-1)%s,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){let i=this.references.map((n,o)=>({idx:o,prefixLen:nl(n.uri.toString(),e.toString()),offsetDist:Math.abs(n.range.startLineNumber-t.lineNumber)*100+Math.abs(n.range.startColumn-t.column)})).sort((n,o)=>n.prefixLen>o.prefixLen?-1:n.prefixLen<o.prefixLen?1:n.offsetDist<o.offsetDist?-1:n.offsetDist>o.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(let i of this.references)if(i.uri.toString()===e.toString()&&L.containsPosition(i.range,t))return i}firstReference(){for(let e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Hr.compare(e.uri,t.uri)||L.compareRangesUsingStarts(e.range,t.range)}};function dk(r){if(!r)return;typeof r=="string"&&(r=ve.file(r));let e=ar(r)||(r.scheme===Xe.file?r.fsPath:r.path);return bi&&rU(e)?hk(e):e}function hk(r){return GO(r)?r.charAt(0).toUpperCase()+r.slice(1):r}var uk=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},sS=function(r,e){return function(t,i){e(t,i,r)}},mk=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof vr||e instanceof Zu}getChildren(e){if(e instanceof vr)return e.groups;if(e instanceof Zu)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};mk=uk([sS(0,fn)],mk);var UM=class{getHeight(){return 23}getTemplateId(e){return e instanceof Zu?Kb.id:Dg.id}},fk=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Fa){let i=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(i)return i.value}return ar(e.uri)}};fk=uk([sS(0,Nt)],fk);var VM=class{getId(e){return e instanceof Fa?e.id:e.uri}},zM=class extends H{constructor(e,t,i){super();this._uriLabel=t;let n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new _g(n,{supportHighlights:!0})),this.badge=new jb(X(n,oe(".count"))),this._register(Y6(this.badge,i)),e.appendChild(n)}set(e,t){let i=Bp(e.uri);this.file.setLabel(dk(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});let n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(g("referencesCount","{0} references",n)):this.badge.setTitleFormat(g("referenceCount","{0} reference",n))}};zM=uk([sS(1,Rc),sS(2,ht)],zM);var Kb=class MK{constructor(e){this._instantiationService=e,this.templateId=MK.id}renderTemplate(e){return this._instantiationService.createInstance(zM,e)}renderElement(e,t,i){i.set(e.element,hC(e.filterData))}disposeTemplate(e){e.dispose()}};Kb.id="FileReferencesRenderer";Kb=uk([sS(0,Ue)],Kb);var FK=class{constructor(e){this.label=new ja(e,!1)}set(e,t){var i;let n=(i=e.parent.getPreview(e))===null||i===void 0?void 0:i.preview(e.range);if(!n||!n.value)this.label.set(`${ar(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{let{value:o,highlight:s}=n;t&&!Ko.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,hC(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[s]))}}},Dg=class{constructor(){this.templateId=Dg.id}renderTemplate(e){return new FK(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}};Dg.id="OneReferenceRenderer";var HM=class{getWidgetAriaLabel(){return g("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}};var mue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},dh=function(r,e){return function(t,i){e(t,i,r)}},BK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},aS=class{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new G,this._callOnModelChange=new G,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let e=this._editor.getModel();if(!!e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let t=[],i=[];for(let o=0,s=e.children.length;o<s;o++){let a=e.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:aS.DecorationOptions}),i.push(o))}let n=this._editor.deltaDecorations([],t);for(let o=0;o<n.length;o++)this._decorations.set(n[o],e.children[i[o]])}_onDecorationChanged(){let e=[],t=this._editor.getModel();if(!!t){for(let[i,n]of this._decorations){let o=t.getDecorationRange(i);if(!o)continue;let s=!1;if(!L.equalsRange(o,n.range)){if(L.spansMultipleLines(o))s=!0;else{let a=n.range.endColumn-n.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(s=!0)}s?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let i=0,n=e.length;i<n;i++)this._decorations.delete(e[i]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}};aS.DecorationOptions=ze.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var $M=class{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{let n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}},WK=class extends CL{},gk=class extends $b{constructor(e,t,i,n,o,s,a,l,c,d,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s);this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=s,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=d,this._modeService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new G,this._callOnDispose=new G,this._onDidSelectReference=new M,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Wt(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Ge(this._preview),Ge(this._previewNotAvailableMessage),Ge(this._tree),Ge(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){let t=e.getColor(LK)||q.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(DK)||q.transparent,primaryHeadingColor:e.getColor(lk),secondaryHeadingColor:e.getColor(ck)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=X(e,oe("div.messages")),Nn(this._messageContainer),this._splitView=new wC(e,{orientation:1}),this._previewContainer=X(e,oe("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(El,this._previewContainer,t,this.editor),Nn(this._previewContainer),this._previewNotAvailableMessage=new Hn(g("missingPreviewMessage","no preview available"),Hn.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=X(e,oe("div.ref-tree.inline"));let i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new HM,keyboardNavigationLabelProvider:this._instantiationService.createInstance(fk),identityProvider:new VM,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:WM}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Zt(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(WK,"ReferencesWidget",this._treeContainer,new UM,[this._instantiationService.createInstance(Kb),this._instantiationService.createInstance(Dg)],this._instantiationService.createInstance(mk),i),this._splitView.addView({onDidChange:ye.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},vC.Distribute),this._splitView.addView({onDidChange:ye.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},vC.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let n=(o,s)=>{o instanceof Fa&&(s==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:s,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?n(o.element,"side"):o.editorOptions.pinned?n(o.element,"goto"):n(o.element,"show")}),Nn(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Wt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{!this._model||(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=g("noResults","No results"),Wn(this._messageContainer),Promise.resolve(void 0)):(Nn(this._messageContainer),this._decorationsManager=new aS(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{let{event:t,target:i}=e;if(t.detail!==2)return;let n=this._getFocusedReference();!n||this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Wn(this._treeContainer),Wn(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[e]=this._tree.getFocus();if(e instanceof Fa)return e;if(e instanceof Zu&&e.children.length>0)return e.children[0]}revealReference(e){return BK(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return BK(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Xe.inMemory?this.setTitle(hx(e.uri),this._uriLabel.getUriLabel(Bp(e.uri))):this.setTitle(g("peekView.alternateTitle","References"));let i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));let n=yield i;if(!this._model){n.dispose();return}Ge(this._previewModelReference);let o=n.object;if(o){let s=this._preview.getModel()===o.textEditorModel?0:1,a=L.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,s)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()})}};gk=mue([dh(3,ht),dh(4,fn),dh(5,Ue),dh(6,BM),dh(7,Rc),dh(8,fc),dh(9,Nt),dh(10,ui),dh(11,bd)],gk);Be((r,e)=>{let t=r.getColor(RK);t&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${t}; }`);let i=r.getColor(PK);i&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${i}; }`);let n=r.getColor(AK);n&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${n}; box-sizing: border-box; }`);let o=r.getColor(an);o&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${o}; box-sizing: border-box; }`);let s=r.getColor(WM);s&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${s}; }`);let a=r.getColor(kK);a&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);let l=r.getColor(IK);l&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);let c=r.getColor(OK);c&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);let d=r.getColor(TK);d&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${d} !important; }`);let h=r.getColor(oS);h&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {	background-color: ${h};}`);let u=r.getColor(NK);u&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {	background-color: ${u};}`)});var fue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},qb=function(r,e){return function(t,i){e(t,i,r)}},UK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Lg=new _e("referenceSearchVisible",!1,g("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),kg=class KM{constructor(e,t,i,n,o,s,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=s,this._storageService=a,this._configurationService=l,this._disposables=new G,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Lg.bindTo(i)}static get(e){return e.getContribution(KM.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),!!n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let o="peekViewLayout",s=$M.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(gk,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(g("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:c,kind:d}=l;if(!!c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c):this.openReference(c,!1,!0);break}}));let a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(g("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let d=this._editor.getModel().uri,h=new V(e.startLineNumber,e.startColumn),u=this._model.nearestReference(d,h);if(u)return this._widget.setSelection(u).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){!this._widget||(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return UK(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;let t=this._widget.position;if(!t)return;let i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;let n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n),o?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()})}revealReference(e){return UK(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,i;(t=this._widget)===null||t===void 0||t.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;let t=L.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(i=>{var n;if(this._ignoreModelChangeEvent=!1,!i||!this._widget){this.closeWidget();return}if(this._editor===i)this._widget.show(t),this._widget.focusOnReferenceTree();else{let o=KM.get(i),s=this._model.clone();this.closeWidget(),i.focus(),o.toggleWidget(t,At(a=>Promise.resolve(s)),(n=this._peekMode)!==null&&n!==void 0?n:!1)}},i=>{this._ignoreModelChangeEvent=!1,we(i)})}openReference(e,t,i){t||this.closeWidget();let{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,pinned:i}},this._editor,t)}};kg.ID="editor.contrib.referencesController";kg=fue([qb(2,be),qb(3,it),qb(4,Vt),qb(5,Ue),qb(6,Zo),qb(7,Mt)],kg);function Ig(r,e){let t=EK(r);if(!t)return;let i=kg.get(t);i&&e(i)}on.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:wi(2048|41,60),when:fe.or(Lg,Rr.inPeekEditor),handler(r){Ig(r,e=>{e.changeFocusBetweenPreviewAndReferences()})}});on.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:fe.or(Lg,Rr.inPeekEditor),handler(r){Ig(r,e=>{e.goToNextOrPreviousReference(!0)})}});on.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1024|62,secondary:[1024|70],when:fe.or(Lg,Rr.inPeekEditor),handler(r){Ig(r,e=>{e.goToNextOrPreviousReference(!1)})}});Ke.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Ke.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Ke.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Ke.registerCommand("closeReferenceSearch",r=>Ig(r,e=>e.closeWidget()));on.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1024|9],when:fe.and(Rr.inPeekEditor,fe.not("config.editor.stablePeek"))});on.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1024|9],when:fe.and(Lg,fe.not("config.editor.stablePeek"))});on.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2048|18]},when:fe.and(Lg,Oj),handler(r){var e;let i=(e=r.get(Yo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Fa&&Ig(r,n=>n.revealReference(i[0]))}});on.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2048|3,mac:{primary:256|3},when:fe.and(Lg,Oj),handler(r){var e;let i=(e=r.get(Yo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Fa&&Ig(r,n=>n.openReference(i[0],!0,!0))}});Ke.registerCommand("openReference",r=>{var e;let i=(e=r.get(Yo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Fa&&Ig(r,n=>n.openReference(i[0],!1,!0))});var VK=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},lS=function(r,e){return function(t,i){e(t,i,r)}},qM=new _e("hasSymbols",!1,g("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),cS=Ie("ISymbolNavigationService"),YM=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=qM.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){let t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();let i=new ZM(this._editorService),n=i.onDidChange(o=>{if(this._ignoreEditorChange)return;let s=this._editorService.getActiveCodeEditor();if(!s)return;let a=s.getModel(),l=s.getPosition();if(!a||!l)return;let c=!1,d=!1;for(let h of t.references)if(dx(h.uri,a.uri))c=!0,d=d||L.containsPosition(h.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=Os(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:L.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();let t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?g("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):g("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};YM=VK([lS(0,be),lS(1,it),lS(2,Vt),lS(3,Nt)],YM);_o(cS,YM,!0);ce(new class extends fi{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:qM,kbOpts:{weight:100,primary:70}})}runEditorCommand(r,e){return r.get(cS).revealNext(e)}});on.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:qM,primary:9,handler(r){r.get(cS).reset()}});var ZM=class{constructor(e){this._listener=new Map,this._disposables=new G,this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Ge(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Os(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};ZM=VK([lS(0,it)],ZM);var zK=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function dS(r,e,t,i){let o=t.ordered(r).map(s=>Promise.resolve(i(s,r,e)).then(void 0,a=>{Qt(a)}));return Promise.all(o).then(s=>{let a=[];for(let l of s)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function hS(r,e,t){return dS(r,e,fd,(i,n,o)=>i.provideDefinition(n,o,t))}function GM(r,e,t){return dS(r,e,Jm,(i,n,o)=>i.provideDeclaration(n,o,t))}function XM(r,e,t){return dS(r,e,ef,(i,n,o)=>i.provideImplementation(n,o,t))}function QM(r,e,t){return dS(r,e,tf,(i,n,o)=>i.provideTypeDefinition(n,o,t))}function uS(r,e,t,i){return dS(r,e,Xm,(n,o,s)=>zK(this,void 0,void 0,function*(){let a=yield n.provideReferences(o,s,{includeDeclaration:!0},i);if(!t||!a||a.length!==2)return a;let l=yield n.provideReferences(o,s,{includeDeclaration:!1},i);return l&&l.length===1?l:a}))}function mS(r){return zK(this,void 0,void 0,function*(){let e=yield r(),t=new vr(e,""),i=t.references.map(n=>n.link);return t.dispose(),i})}Uo("_executeDefinitionProvider",(r,e)=>mS(()=>hS(r,e,Me.None)));Uo("_executeDeclarationProvider",(r,e)=>mS(()=>GM(r,e,Me.None)));Uo("_executeImplementationProvider",(r,e)=>mS(()=>XM(r,e,Me.None)));Uo("_executeTypeDefinitionProvider",(r,e)=>mS(()=>QM(r,e,Me.None)));Uo("_executeReferenceProvider",(r,e)=>mS(()=>uS(r,e,!1,Me.None)));var Ba=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},JM,eF,tF,iF,nF,rF,oF,sF;tr.appendMenuItem(Ce.EditorContext,{submenu:Ce.EditorContextPeek,title:g("peek.submenu","Peek"),group:"navigation",order:100});var HK=new Set;function Dl(r){let e=new r;return aE(e),HK.add(e.id),e}var Og=class extends pe{constructor(e,t){super(t);this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);let i=e.get(Vt),n=e.get(it),o=e.get(Xr),s=e.get(cS),a=t.getModel(),l=t.getPosition(),c=new Yd(t,1|4),d=Lp(this._getLocationModel(a,l,c.token),c.token).then(h=>Ba(this,void 0,void 0,function*(){if(!h||c.token.isCancellationRequested)return;Oi(h.ariaMessage);let u;if(h.referenceAt(a.uri,l)){let p=this._getAlternativeCommand(t);p!==this.id&&HK.has(p)&&(u=t.getAction(p))}let m=h.references.length;if(m===0){if(!this._configuration.muteMessage){let p=a.getWordAtPosition(l);Nr.get(t).showMessage(this._getNoResultFoundMessage(p),l)}}else if(m===1&&u)u.run();else return this._onResult(n,s,t,h)}),h=>{i.error(h)}).finally(()=>{c.dispose()});return o.showWhile(d,250),d}_onResult(e,t,i,n){return Ba(this,void 0,void 0,function*(){let o=this._getGoToPreference(i);if(!(i instanceof El)&&(this._configuration.openInPeek||o==="peek"&&n.references.length>1))this._openInPeek(i,n);else{let s=n.firstReference(),a=n.references.length>1&&o==="gotoAndPeek",l=yield this._openReference(i,e,s,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,n):n.dispose(),o==="goto"&&t.put(s)}})}_openReference(e,t,i,n,o){return Ba(this,void 0,void 0,function*(){let s;if(jU(i)&&(s=i.targetSelectionRange),s||(s=i.range),!s)return;let a=yield t.openCodeEditor({resource:i.uri,options:{selection:L.collapseToStart(s),selectionRevealType:3}},e,n);if(!!a){if(o){let l=a.getModel(),c=a.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(c,[])},350)}return a}})}_openInPeek(e,t){let i=kg.get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),At(n=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}},Yb=class extends Og{_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield hS(e,t,i),g("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?g("noResultWord","No definition found for '{0}'",e.word):g("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}},$K=Ya&&!H1?2048|70:70;Dl((JM=class aF extends Yb{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:aF.id,label:g("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:fe.and(j.hasDefinitionProvider,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:$K,weight:100},contextMenuOpts:{group:"navigation",order:1.1}});Ke.registerCommandAlias("editor.action.goToDeclaration",aF.id)}},JM.id="editor.action.revealDefinition",JM));Dl((eF=class lF extends Yb{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:lF.id,label:g("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:fe.and(j.hasDefinitionProvider,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,$K),weight:100}});Ke.registerCommandAlias("editor.action.openDeclarationToTheSide",lF.id)}},eF.id="editor.action.revealDefinitionAside",eF));Dl((tF=class cF extends Yb{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:cF.id,label:g("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:fe.and(j.hasDefinitionProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:512|70,linux:{primary:2048|1024|68},weight:100},contextMenuOpts:{menuId:Ce.EditorContextPeek,group:"peek",order:2}});Ke.registerCommandAlias("editor.action.previewDeclaration",cF.id)}},tF.id="editor.action.peekDefinition",tF));var dF=class extends Og{_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield GM(e,t,i),g("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?g("decl.noResultWord","No declaration found for '{0}'",e.word):g("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}};Dl((iF=class KK extends dF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:KK.id,label:g("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:fe.and(j.hasDeclarationProvider,j.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?g("decl.noResultWord","No declaration found for '{0}'",e.word):g("decl.generic.noResults","No declaration found")}},iF.id="editor.action.revealDeclaration",iF));Dl(class extends dF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:g("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:fe.and(j.hasDeclarationProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ce.EditorContextPeek,group:"peek",order:3}})}});var hF=class extends Og{_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield QM(e,t,i),g("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?g("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):g("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}};Dl((nF=class qK extends hF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:qK.ID,label:g("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:fe.and(j.hasTypeDefinitionProvider,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},nF.ID="editor.action.goToTypeDefinition",nF));Dl((rF=class YK extends hF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:YK.ID,label:g("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:fe.and(j.hasTypeDefinitionProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ce.EditorContextPeek,group:"peek",order:4}})}},rF.ID="editor.action.peekTypeDefinition",rF));var uF=class extends Og{_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield XM(e,t,i),g("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?g("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):g("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}};Dl((oF=class ZK extends uF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ZK.ID,label:g("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:fe.and(j.hasImplementationProvider,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|70,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},oF.ID="editor.action.goToImplementation",oF));Dl((sF=class GK extends uF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:GK.ID,label:g("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:fe.and(j.hasImplementationProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|70,weight:100},contextMenuOpts:{menuId:Ce.EditorContextPeek,group:"peek",order:5}})}},sF.ID="editor.action.peekImplementation",sF));var mF=class extends Og{_getNoResultFoundMessage(e){return e?g("references.no","No references found for '{0}'",e.word):g("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}};Dl(class extends mF{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:g("goToReferences.label","Go to References"),alias:"Go to References",precondition:fe.and(j.hasReferenceProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:j.editorTextFocus,primary:1024|70,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield uS(e,t,!0,i),g("ref.title","References"))})}});Dl(class extends mF{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:g("references.action.label","Peek References"),alias:"Peek References",precondition:fe.and(j.hasReferenceProvider,Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ce.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(yield uS(e,t,!1,i),g("ref.title","References"))})}});var XK=class extends Og{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:g("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:fe.and(Rr.notInPeekEditor,j.isInWalkThroughSnippet.toNegated())});this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i){return Ba(this,void 0,void 0,function*(){return new vr(this._references,g("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&g("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}};Ke.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ve},{name:"position",description:"The position at which to start",constraint:V.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(r,e,t,i,n,o,s)=>Ba(void 0,void 0,void 0,function*(){xt(ve.isUri(e)),xt(V.isIPosition(t)),xt(Array.isArray(i)),xt(typeof n=="undefined"||typeof n=="string"),xt(typeof s=="undefined"||typeof s=="boolean");let a=r.get(it),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(xa(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{let d=new class extends XK{_getNoResultFoundMessage(h){return o||super._getNoResultFoundMessage(h)}}({muteMessage:!Boolean(o),openInPeek:Boolean(s),openToSide:!1},i,n);c.get(Ue).invokeFunction(d.run.bind(d),l)})})});Ke.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ve},{name:"position",description:"The position at which to start",constraint:V.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(r,e,t,i,n)=>Ba(void 0,void 0,void 0,function*(){r.get(jt).executeCommand("editor.action.goToLocations",e,t,i,n,void 0,!0)})});Ke.registerCommand({id:"editor.action.findReferences",handler:(r,e,t)=>{xt(ve.isUri(e)),xt(V.isIPosition(t));let i=r.get(it);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(n=>{if(!xa(n)||!n.hasModel())return;let o=kg.get(n);if(!o)return;let s=At(l=>uS(n.getModel(),V.lift(t),!1,l).then(c=>new vr(c,g("ref.title","References")))),a=new L(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(a,s,!1))})}});Ke.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");tr.appendMenuItems([{id:Ce.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:g({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Ce.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:g({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Ce.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:g({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Ce.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:g({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Ce.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:g({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var gue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},QK=function(r,e){return function(t,i){e(t,i,r)}},Gu=class fS{constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new G,this.toUnhookForKeyboard=new G,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let n=new iS(e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown(([o,s])=>{this.startFindDefinitionFromMouse(o,ol(s))})),this.toUnhook.add(n.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},s=>{this.removeLinkDecorations(),we(s)})})),this.toUnhook.add(n.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(fS.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}let i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();let i=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let n=new Ru(this.editor,4|1|2|8);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=At(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!n.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new L(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),new Eo().appendText(g("multipleResults","Click to show {0} definitions.",o.length)));else{let s=o[0];if(!s.uri)return;this.textModelResolverService.createModelReference(s.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}let{object:{textEditorModel:l}}=a,{startLineNumber:c}=s.range;if(c<1||c>l.getLineCount()){a.dispose();return}let d=this.getPreviewValue(l,c,s),h;s.originSelectionRange?h=L.lift(s.originSelectionRange):h=new L(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);let u=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(h,new Eo().appendCodeblock(u||"",d)),a.dispose()})}}).then(void 0,we)}getPreviewValue(e,t,i){let n=i.targetSelectionRange?i.range:this.getPreviewRangeBasedOnBrackets(e,t);return n.endLineNumber-n.startLineNumber>=fS.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,n)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){let l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){let i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+fS.MAX_SOURCE_PREVIEW_LINES),o=t+1;for(;o<n;o++){let s=e.getLineFirstNonWhitespaceColumn(o);if(i===s)break}return new L(t,1,o+1,1)}getPreviewRangeBasedOnBrackets(e,t){let i=Math.min(e.getLineCount(),t+fS.MAX_SOURCE_PREVIEW_LINES),n=[],o=!0,s=e.findNextBracket(new V(t,1));for(;s!==null;){if(n.length===0)n.push(s);else{let d=n[n.length-1];if(d.open[0]===s.open[0]&&d.isOpen&&!s.isOpen?n.pop():n.push(s),n.length===0)if(o)o=!1;else return new L(t,1,s.range.endLineNumber+1,1)}let a=e.getLineMaxColumn(t),l=s.range.endLineNumber,c=s.range.endColumn;if(a===s.range.endColumn&&(l++,c=1),l>i)return new L(t,1,i+1,1);s=e.findNextBracket(new V(l,c))}return new L(t,1,i+1,1)}addDecoration(e,t){let i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&fd.has(this.editor.getModel())}findDefinition(e,t){let i=this.editor.getModel();return i?hS(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{let n=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(i);return new Yb({openToSide:t,openInPeek:n,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(i,this.editor)})}isInPeekEditor(e){let t=e.get(be);return Rr.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};Gu.ID="editor.contrib.gotodefinitionatposition";Gu.MAX_SOURCE_PREVIEW_LINES=8;Gu=gue([QK(1,fn),QK(2,ui)],Gu);He(Gu.ID,Gu);Be((r,e)=>{let t=r.getColor(U_);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});var pk=oe,gS=class extends H{constructor(){super();this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new yl(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}},pS=class extends H{constructor(e,t,i){super();this.actionContainer=X(e,pk("div.action-container")),this.action=X(this.actionContainer,pk("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&X(this.action,pk(`span.icon.${t.iconClass}`));let n=X(this.action,pk("span"));n.textContent=i?`${t.label} (${i})`:t.label,this._register(J(this.actionContainer,De.MOUSE_DOWN,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,i){return new pS(e,t,i)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}};var fF=class{constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new M,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new M,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new M,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}};var Ll=oe,JK=class extends H{constructor(e,t,i){super();this.model=t,this.domNode=Ll(".colorpicker-header"),X(e,this.domNode),this.pickedColorNode=X(this.domNode,Ll(".picked-color"));let n=g("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",n);let o=X(this.domNode,Ll(".original-color"));o.style.backgroundColor=q.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(Fd)||q.white,this._register(Be((s,a)=>{this.backgroundColor=s.getColor(Fd)||q.white})),this._register(J(this.pickedColorNode,De.CLICK,()=>this.model.selectNextColorPresentation())),this._register(J(o,De.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=q.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=q.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Ll(".codicon.codicon-color-mode"))}},eq=class extends H{constructor(e,t,i){super();this.model=t,this.pixelRatio=i,this.domNode=Ll(".colorpicker-body"),X(e,this.domNode),this.saturationBox=new tq(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new iq(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new nq(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){let i=this.model.color.hsva;this.model.color=new q(new ka(i.h,e,t,i.a))}onDidOpacityChange(e){let t=this.model.color.hsva;this.model.color=new q(new ka(t.h,t.s,t.v,e))}onDidHueChange(e){let t=this.model.color.hsva,i=(1-e)*360;this.model.color=new q(new ka(i===360?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}},tq=class extends H{constructor(e,t,i){super();this.model=t,this.pixelRatio=i,this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new M,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Ll(".saturation-wrap"),X(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",X(this.domNode,this.canvas),this.selection=Ll(".saturation-selection"),X(this.domNode,this.selection),this.layout(),this._register(Y1(this.domNode,n=>this.onMouseDown(n))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new ms);let t=ci(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,fl,n=>this.onDidChangePosition(n.posx-t.left,n.posy-t.top),()=>null);let i=MO(document,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){let i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();let e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){let e=this.model.color.hsva,t=new q(new ka(e.h,1,1,1)),i=this.canvas.getContext("2d"),n=i.createLinearGradient(0,0,this.canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");let o=i.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=q.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}},gF=class extends H{constructor(e,t){super();this.model=t,this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new M,this.onColorFlushed=this._onColorFlushed.event,this.domNode=X(e,Ll(".strip")),this.overlay=X(this.domNode,Ll(".overlay")),this.slider=X(this.domNode,Ll(".slider")),this.slider.style.top="0px",this._register(Y1(this.domNode,i=>this.onMouseDown(i))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){let t=this._register(new ms),i=ci(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,fl,o=>this.onDidChangeTop(o.posy-i.top),()=>null);let n=MO(document,()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){let t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}},iq=class extends gF{constructor(e,t){super(e,t);this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){let{r:t,g:i,b:n}=e.rgba,o=new q(new ct(t,i,n,1)),s=new q(new ct(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}},nq=class extends gF{constructor(e,t){super(e,t);this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}},pF=class extends en{constructor(e,t,i,n){super();this.model=t,this.pixelRatio=i,this._register(z1(()=>this.layout()));let o=Ll(".colorpicker-widget");e.appendChild(o);let s=new JK(o,this.model,n);this.body=new eq(o,this.model,this.pixelRatio),this._register(s),this._register(this.body)}layout(){this.body.layout()}};var pue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},_ue=function(r,e){return function(t,i){e(t,i,r)}},rq=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},oq=class{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},_k=class{constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}computeSync(e,t){return[]}computeAsync(e,t,i){return rq(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];let n=Yu.get(this._editor);for(let o of t){if(o.options.description!=="color-detector-color")continue;let s=n.getColorData(o.range.getStartPosition());if(s)return[yield this._createColorHover(this._editor.getModel(),s.colorInfo,s.provider)]}return[]})}_createColorHover(e,t,i){return rq(this,void 0,void 0,function*(){let n=e.getValueInRange(t.range),{red:o,green:s,blue:a,alpha:l}=t.color,c=new ct(Math.round(o*255),Math.round(s*255),Math.round(a*255),l),d=new q(c),h=yield TM(e,t,i,Me.None),u=new fF(d,[],0);return u.colorPresentations=h||[],u.guessColorPresentation(d,n),new oq(this,L.lift(t.range),u,i)})}renderHoverParts(e,t,i){if(e.length===0||!this._editor.hasModel())return H.None;let n=new G,o=e[0],s=this._editor.getModel(),a=o.model,l=n.add(new pF(t,a,this._editor.getOption(127),this._themeService)),c=new L(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn),d=()=>{let u,m;if(a.presentation.textEdit){u=[a.presentation.textEdit],m=new L(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);let p=this._editor.getModel()._setTrackedRange(null,m,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u),m=this._editor.getModel()._getTrackedRange(p)||m}else u=[{identifier:null,range:c,text:a.presentation.label,forceMoveMarkers:!1}],m=c.setEndPosition(c.endLineNumber,c.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u);a.presentation.additionalTextEdits&&(u=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",u),this._hover.hide()),this._editor.pushUndoStop(),c=m},h=u=>TM(s,{range:c,color:{red:u.rgba.r/255,green:u.rgba.g/255,blue:u.rgba.b/255,alpha:u.rgba.a}},o.provider,Me.None).then(m=>{a.colorPresentations=m||[]});return n.add(a.onColorFlushed(u=>{h(u).then(d)})),n.add(a.onDidChangeColor(h)),this._hover.setColorPicker(l),n}};_k=pue([_ue(2,ht)],_k);var _S=class{constructor(e,t,i,n,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new dt(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new dt(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new dt(()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=n}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=At(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):we(e)}_onProgress(e){this._progressCallback(e)}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}};var bk=class{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}},bS=class{constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}};function bue(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var vue=Object.hasOwnProperty,sq=Object.setPrototypeOf,wue=Object.isFrozen,yue=Object.getPrototypeOf,Cue=Object.getOwnPropertyDescriptor,Go=Object.freeze,hh=Object.seal,Sue=Object.create,aq=typeof Reflect!="undefined"&&Reflect,vk=aq.apply,_F=aq.construct;vk||(vk=function(e,t,i){return e.apply(t,i)});Go||(Go=function(e){return e});hh||(hh=function(e){return e});_F||(_F=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(bue(t))))});var xue=kl(Array.prototype.forEach),lq=kl(Array.prototype.pop),vS=kl(Array.prototype.push),Tg=kl(String.prototype.toLowerCase),cq=kl(String.prototype.match),Xu=kl(String.prototype.replace),Eue=kl(String.prototype.indexOf),Due=kl(String.prototype.trim),uh=kl(RegExp.prototype.test),dq=Lue(TypeError);function kl(r){return function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return vk(r,e,i)}}function Lue(r){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return _F(r,t)}}function Jt(r,e){sq&&sq(r,null);for(var t=e.length;t--;){var i=e[t];if(typeof i=="string"){var n=Tg(i);n!==i&&(wue(e)||(e[t]=n),i=n)}r[i]=!0}return r}function Ng(r){var e=Sue(null),t=void 0;for(t in r)vk(vue,r,[t])&&(e[t]=r[t]);return e}function wk(r,e){for(;r!==null;){var t=Cue(r,e);if(t){if(t.get)return kl(t.get);if(typeof t.value=="function")return kl(t.value)}r=yue(r)}function i(n){return console.warn("fallback value for",n),null}return i}var hq=Go(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),bF=Go(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vF=Go(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kue=Go(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),wF=Go(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Iue=Go(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),uq=Go(["#text"]),mq=Go(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),yF=Go(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fq=Go(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yk=Go(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Oue=hh(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Tue=hh(/<%[\s\S]*|[\s\S]*%>/gm),Nue=hh(/^data-[\-\w.\u00B7-\uFFFF]/),Rue=hh(/^aria-[\-\w]+$/),Pue=hh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Aue=hh(/^(?:\w+script|data):/i),jue=hh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function Uc(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}else return Array.from(r)}var Mue=function(){return typeof window=="undefined"?null:window},Fue=function(e,t){if((typeof e=="undefined"?"undefined":wS(e))!=="object"||typeof e.createPolicy!="function")return null;var i=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(i=t.currentScript.getAttribute(n));var o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function gq(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mue(),e=function(R){return gq(R)};if(e.version="2.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;var t=r.document,i=r.document,n=r.DocumentFragment,o=r.HTMLTemplateElement,s=r.Node,a=r.Element,l=r.NodeFilter,c=r.NamedNodeMap,d=c===void 0?r.NamedNodeMap||r.MozNamedAttrMap:c,h=r.Text,u=r.Comment,m=r.DOMParser,p=r.trustedTypes,_=a.prototype,v=wk(_,"cloneNode"),C=wk(_,"nextSibling"),w=wk(_,"childNodes"),S=wk(_,"parentNode");if(typeof o=="function"){var D=i.createElement("template");D.content&&D.content.ownerDocument&&(i=D.content.ownerDocument)}var I=Fue(p,t),A=I&&Qe?I.createHTML(""):"",O=i,N=O.implementation,F=O.createNodeIterator,Y=O.createDocumentFragment,K=O.getElementsByTagName,ee=t.importNode,ie={};try{ie=Ng(i).documentMode?i.documentMode:{}}catch{}var Ee={};e.isSupported=typeof S=="function"&&N&&typeof N.createHTMLDocument!="undefined"&&ie!==9;var Le=Oue,Te=Tue,Ne=Nue,Fe=Rue,ue=Aue,ni=jue,Xt=Pue,zt=null,ri=Jt({},[].concat(Uc(hq),Uc(bF),Uc(vF),Uc(wF),Uc(uq))),pt=null,Ai=Jt({},[].concat(Uc(mq),Uc(yF),Uc(fq),Uc(yk))),qn=null,jr=null,dn=!0,hi=!0,ro=!1,ut=!1,Ve=!1,na=!1,kn=!1,wr=!1,oo=!1,Ss=!0,Qe=!1,Do=!0,Dh=!0,Qc=!1,Al={},xs=null,Ha=Jt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ht=null,Lh=Jt({},["audio","video","img","source","image","track"]),Jo=null,kh=Jt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ih="http://www.w3.org/1998/Math/MathML",dm="http://www.w3.org/2000/svg",Es="http://www.w3.org/1999/xhtml",jl=Es,Oh=!1,es=null,$a=i.createElement("form"),Th=function(R){es&&es===R||((!R||(typeof R=="undefined"?"undefined":wS(R))!=="object")&&(R={}),R=Ng(R),zt="ALLOWED_TAGS"in R?Jt({},R.ALLOWED_TAGS):ri,pt="ALLOWED_ATTR"in R?Jt({},R.ALLOWED_ATTR):Ai,Jo="ADD_URI_SAFE_ATTR"in R?Jt(Ng(kh),R.ADD_URI_SAFE_ATTR):kh,Ht="ADD_DATA_URI_TAGS"in R?Jt(Ng(Lh),R.ADD_DATA_URI_TAGS):Lh,xs="FORBID_CONTENTS"in R?Jt({},R.FORBID_CONTENTS):Ha,qn="FORBID_TAGS"in R?Jt({},R.FORBID_TAGS):{},jr="FORBID_ATTR"in R?Jt({},R.FORBID_ATTR):{},Al="USE_PROFILES"in R?R.USE_PROFILES:!1,dn=R.ALLOW_ARIA_ATTR!==!1,hi=R.ALLOW_DATA_ATTR!==!1,ro=R.ALLOW_UNKNOWN_PROTOCOLS||!1,ut=R.SAFE_FOR_TEMPLATES||!1,Ve=R.WHOLE_DOCUMENT||!1,wr=R.RETURN_DOM||!1,oo=R.RETURN_DOM_FRAGMENT||!1,Ss=R.RETURN_DOM_IMPORT!==!1,Qe=R.RETURN_TRUSTED_TYPE||!1,kn=R.FORCE_BODY||!1,Do=R.SANITIZE_DOM!==!1,Dh=R.KEEP_CONTENT!==!1,Qc=R.IN_PLACE||!1,Xt=R.ALLOWED_URI_REGEXP||Xt,jl=R.NAMESPACE||Es,ut&&(hi=!1),oo&&(wr=!0),Al&&(zt=Jt({},[].concat(Uc(uq))),pt=[],Al.html===!0&&(Jt(zt,hq),Jt(pt,mq)),Al.svg===!0&&(Jt(zt,bF),Jt(pt,yF),Jt(pt,yk)),Al.svgFilters===!0&&(Jt(zt,vF),Jt(pt,yF),Jt(pt,yk)),Al.mathMl===!0&&(Jt(zt,wF),Jt(pt,fq),Jt(pt,yk))),R.ADD_TAGS&&(zt===ri&&(zt=Ng(zt)),Jt(zt,R.ADD_TAGS)),R.ADD_ATTR&&(pt===Ai&&(pt=Ng(pt)),Jt(pt,R.ADD_ATTR)),R.ADD_URI_SAFE_ATTR&&Jt(Jo,R.ADD_URI_SAFE_ATTR),R.FORBID_CONTENTS&&(xs===Ha&&(xs=Ng(xs)),Jt(xs,R.FORBID_CONTENTS)),Dh&&(zt["#text"]=!0),Ve&&Jt(zt,["html","head","body"]),zt.table&&(Jt(zt,["tbody"]),delete qn.tbody),Go&&Go(R),es=R)},hm=Jt({},["mi","mo","mn","ms","mtext"]),Qg=Jt({},["foreignobject","desc","title","annotation-xml"]),Nh=Jt({},bF);Jt(Nh,vF),Jt(Nh,kue);var Ml=Jt({},wF);Jt(Ml,Iue);var Jg=function(R){var E=S(R);(!E||!E.tagName)&&(E={namespaceURI:Es,tagName:"template"});var re=Tg(R.tagName),de=Tg(E.tagName);if(R.namespaceURI===dm)return E.namespaceURI===Es?re==="svg":E.namespaceURI===Ih?re==="svg"&&(de==="annotation-xml"||hm[de]):Boolean(Nh[re]);if(R.namespaceURI===Ih)return E.namespaceURI===Es?re==="math":E.namespaceURI===dm?re==="math"&&Qg[de]:Boolean(Ml[re]);if(R.namespaceURI===Es){if(E.namespaceURI===dm&&!Qg[de]||E.namespaceURI===Ih&&!hm[de])return!1;var ke=Jt({},["title","style","font","a","script"]);return!Ml[re]&&(ke[re]||!Nh[re])}return!1},ts=function(R){vS(e.removed,{element:R});try{R.parentNode.removeChild(R)}catch{try{R.outerHTML=A}catch{R.remove()}}},ep=function(R,E){try{vS(e.removed,{attribute:E.getAttributeNode(R),from:E})}catch{vS(e.removed,{attribute:null,from:E})}if(E.removeAttribute(R),R==="is"&&!pt[R])if(wr||oo)try{ts(E)}catch{}else try{E.setAttribute(R,"")}catch{}},Ds=function(R){var E=void 0,re=void 0;if(kn)R="<remove></remove>"+R;else{var de=cq(R,/^[\r\n\t ]+/);re=de&&de[0]}var ke=I?I.createHTML(R):R;if(jl===Es)try{E=new m().parseFromString(ke,"text/html")}catch{}if(!E||!E.documentElement){E=N.createDocument(jl,"template",null);try{E.documentElement.innerHTML=Oh?"":ke}catch{}}var Je=E.body||E.documentElement;return R&&re&&Je.insertBefore(i.createTextNode(re),Je.childNodes[0]||null),jl===Es?K.call(E,Ve?"html":"body")[0]:Ve?E.documentElement:Je},ra=function(R){return F.call(R.ownerDocument||R,R,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},vt=function(R){return R instanceof h||R instanceof u?!1:typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof d)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"},is=function(R){return(typeof s=="undefined"?"undefined":wS(s))==="object"?R instanceof s:R&&(typeof R=="undefined"?"undefined":wS(R))==="object"&&typeof R.nodeType=="number"&&typeof R.nodeName=="string"},ne=function(R,E,re){!Ee[R]||xue(Ee[R],function(de){de.call(e,E,re,es)})},Q=function(R){var E=void 0;if(ne("beforeSanitizeElements",R,null),vt(R)||cq(R.nodeName,/[\u0080-\uFFFF]/))return ts(R),!0;var re=Tg(R.nodeName);if(ne("uponSanitizeElement",R,{tagName:re,allowedTags:zt}),!is(R.firstElementChild)&&(!is(R.content)||!is(R.content.firstElementChild))&&uh(/<[/\w]/g,R.innerHTML)&&uh(/<[/\w]/g,R.textContent)||re==="select"&&uh(/<template/i,R.innerHTML))return ts(R),!0;if(!zt[re]||qn[re]){if(Dh&&!xs[re]){var de=S(R)||R.parentNode,ke=w(R)||R.childNodes;if(ke&&de)for(var Je=ke.length,$e=Je-1;$e>=0;--$e)de.insertBefore(v(ke[$e],!0),C(R))}return ts(R),!0}return R instanceof a&&!Jg(R)||(re==="noscript"||re==="noembed")&&uh(/<\/no(script|embed)/i,R.innerHTML)?(ts(R),!0):(ut&&R.nodeType===3&&(E=R.textContent,E=Xu(E,Le," "),E=Xu(E,Te," "),R.textContent!==E&&(vS(e.removed,{element:R.cloneNode()}),R.textContent=E)),ne("afterSanitizeElements",R,null),!1)},te=function(R,E,re){if(Do&&(E==="id"||E==="name")&&(re in i||re in $a))return!1;if(!(hi&&!jr[E]&&uh(Ne,E))){if(!(dn&&uh(Fe,E))){if(!pt[E]||jr[E])return!1;if(!Jo[E]){if(!uh(Xt,Xu(re,ni,""))){if(!((E==="src"||E==="xlink:href"||E==="href")&&R!=="script"&&Eue(re,"data:")===0&&Ht[R])){if(!(ro&&!uh(ue,Xu(re,ni,"")))){if(re)return!1}}}}}}return!0},f=function(R){var E=void 0,re=void 0,de=void 0,ke=void 0;ne("beforeSanitizeAttributes",R,null);var Je=R.attributes;if(!!Je){var $e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt};for(ke=Je.length;ke--;){E=Je[ke];var rt=E,ft=rt.name,qe=rt.namespaceURI;if(re=Due(E.value),de=Tg(ft),$e.attrName=de,$e.attrValue=re,$e.keepAttr=!0,$e.forceKeepAttr=void 0,ne("uponSanitizeAttribute",R,$e),re=$e.attrValue,!$e.forceKeepAttr&&(ep(ft,R),!!$e.keepAttr)){if(uh(/\/>/i,re)){ep(ft,R);continue}ut&&(re=Xu(re,Le," "),re=Xu(re,Te," "));var hn=R.nodeName.toLowerCase();if(!!te(hn,de,re))try{qe?R.setAttributeNS(qe,ft,re):R.setAttribute(ft,re),lq(e.removed)}catch{}}}ne("afterSanitizeAttributes",R,null)}},W=function U(R){var E=void 0,re=ra(R);for(ne("beforeSanitizeShadowDOM",R,null);E=re.nextNode();)ne("uponSanitizeShadowNode",E,null),!Q(E)&&(E.content instanceof n&&U(E.content),f(E));ne("afterSanitizeShadowDOM",R,null)};return e.sanitize=function(U,R){var E=void 0,re=void 0,de=void 0,ke=void 0,Je=void 0;if(Oh=!U,Oh&&(U="<!-->"),typeof U!="string"&&!is(U)){if(typeof U.toString!="function")throw dq("toString is not a function");if(U=U.toString(),typeof U!="string")throw dq("dirty is not a string, aborting")}if(!e.isSupported){if(wS(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof U=="string")return r.toStaticHTML(U);if(is(U))return r.toStaticHTML(U.outerHTML)}return U}if(na||Th(R),e.removed=[],typeof U=="string"&&(Qc=!1),!Qc)if(U instanceof s)E=Ds("<!---->"),re=E.ownerDocument.importNode(U,!0),re.nodeType===1&&re.nodeName==="BODY"||re.nodeName==="HTML"?E=re:E.appendChild(re);else{if(!wr&&!ut&&!Ve&&U.indexOf("<")===-1)return I&&Qe?I.createHTML(U):U;if(E=Ds(U),!E)return wr?null:A}E&&kn&&ts(E.firstChild);for(var $e=ra(Qc?U:E);de=$e.nextNode();)de.nodeType===3&&de===ke||Q(de)||(de.content instanceof n&&W(de.content),f(de),ke=de);if(ke=null,Qc)return U;if(wr){if(oo)for(Je=Y.call(E.ownerDocument);E.firstChild;)Je.appendChild(E.firstChild);else Je=E;return Ss&&(Je=ee.call(t,Je,!0)),Je}var rt=Ve?E.outerHTML:E.innerHTML;return ut&&(rt=Xu(rt,Le," "),rt=Xu(rt,Te," ")),I&&Qe?I.createHTML(rt):rt},e.setConfig=function(U){Th(U),na=!0},e.clearConfig=function(){es=null,na=!1},e.isValidAttribute=function(U,R,E){es||Th({});var re=Tg(U),de=Tg(R);return te(re,de,E)},e.addHook=function(U,R){typeof R=="function"&&(Ee[U]=Ee[U]||[],vS(Ee[U],R))},e.removeHook=function(U){Ee[U]&&lq(Ee[U])},e.removeHooks=function(U){Ee[U]&&(Ee[U]=[])},e.removeAllHooks=function(){Ee={}},e}var Vc=gq();var Fft=Vc.version,Bft=Vc.isSupported,pq=Vc.sanitize,Wft=Vc.setConfig,Uft=Vc.clearConfig,Vft=Vc.isValidAttribute,CF=Vc.addHook,SF=Vc.removeHook,zft=Vc.removeHooks,Hft=Vc.removeAllHooks;var zc;(function(){function r(e){zc=e()}r.amd=!0,function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof r=="function"&&r.amd?r(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.marked=t())}(this,function(){"use strict";function e(ne,Q){for(var te=0;te<Q.length;te++){var f=Q[te];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(ne,f.key,f)}}function t(ne,Q,te){return Q&&e(ne.prototype,Q),te&&e(ne,te),ne}function i(ne,Q){if(!!ne){if(typeof ne=="string")return n(ne,Q);var te=Object.prototype.toString.call(ne).slice(8,-1);if(te==="Object"&&ne.constructor&&(te=ne.constructor.name),te==="Map"||te==="Set")return Array.from(ne);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return n(ne,Q)}}function n(ne,Q){(Q==null||Q>ne.length)&&(Q=ne.length);for(var te=0,f=new Array(Q);te<Q;te++)f[te]=ne[te];return f}function o(ne,Q){var te=typeof Symbol!="undefined"&&ne[Symbol.iterator]||ne["@@iterator"];if(te)return(te=te.call(ne)).next.bind(te);if(Array.isArray(ne)||(te=i(ne))||Q&&ne&&typeof ne.length=="number"){te&&(ne=te);var f=0;return function(){return f>=ne.length?{done:!0}:{done:!1,value:ne[f++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(ne){s.exports.defaults=ne}s.exports={defaults:a(),getDefaults:a,changeDefaults:l};var c=/[&<>"']/,d=/[&<>"']/g,h=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},p=function(Q){return m[Q]};function _(ne,Q){if(Q){if(c.test(ne))return ne.replace(d,p)}else if(h.test(ne))return ne.replace(u,p);return ne}var v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function C(ne){return ne.replace(v,function(Q,te){return te=te.toLowerCase(),te==="colon"?":":te.charAt(0)==="#"?te.charAt(1)==="x"?String.fromCharCode(parseInt(te.substring(2),16)):String.fromCharCode(+te.substring(1)):""})}var w=/(^|[^\[])\^/g;function S(ne,Q){ne=ne.source||ne,Q=Q||"";var te={replace:function(W,U){return U=U.source||U,U=U.replace(w,"$1"),ne=ne.replace(W,U),te},getRegex:function(){return new RegExp(ne,Q)}};return te}var D=/[^\w:]/g,I=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function A(ne,Q,te){if(ne){var f;try{f=decodeURIComponent(C(te)).replace(D,"").toLowerCase()}catch{return null}if(f.indexOf("javascript:")===0||f.indexOf("vbscript:")===0||f.indexOf("data:")===0)return null}Q&&!I.test(te)&&(te=K(Q,te));try{te=encodeURI(te).replace(/%25/g,"%")}catch{return null}return te}var O={},N=/^[^:]+:\/*[^/]*$/,F=/^([^:]+:)[\s\S]*$/,Y=/^([^:]+:\/*[^/]*)[\s\S]*$/;function K(ne,Q){O[" "+ne]||(N.test(ne)?O[" "+ne]=ne+"/":O[" "+ne]=Le(ne,"/",!0)),ne=O[" "+ne];var te=ne.indexOf(":")===-1;return Q.substring(0,2)==="//"?te?Q:ne.replace(F,"$1")+Q:Q.charAt(0)==="/"?te?Q:ne.replace(Y,"$1")+Q:ne+Q}var ee={exec:function(){}};function ie(ne){for(var Q=1,te,f;Q<arguments.length;Q++){te=arguments[Q];for(f in te)Object.prototype.hasOwnProperty.call(te,f)&&(ne[f]=te[f])}return ne}function Ee(ne,Q){var te=ne.replace(/\|/g,function(U,R,E){for(var re=!1,de=R;--de>=0&&E[de]==="\\";)re=!re;return re?"|":" |"}),f=te.split(/ \|/),W=0;if(f[0].trim()||f.shift(),f[f.length-1].trim()||f.pop(),f.length>Q)f.splice(Q);else for(;f.length<Q;)f.push("");for(;W<f.length;W++)f[W]=f[W].trim().replace(/\\\|/g,"|");return f}function Le(ne,Q,te){var f=ne.length;if(f===0)return"";for(var W=0;W<f;){var U=ne.charAt(f-W-1);if(U===Q&&!te)W++;else if(U!==Q&&te)W++;else break}return ne.substr(0,f-W)}function Te(ne,Q){if(ne.indexOf(Q[1])===-1)return-1;for(var te=ne.length,f=0,W=0;W<te;W++)if(ne[W]==="\\")W++;else if(ne[W]===Q[0])f++;else if(ne[W]===Q[1]&&(f--,f<0))return W;return-1}function Ne(ne){ne&&ne.sanitize&&!ne.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Fe(ne,Q){if(Q<1)return"";for(var te="";Q>1;)Q&1&&(te+=ne),Q>>=1,ne+=ne;return te+ne}var ue={escape:_,unescape:C,edit:S,cleanUrl:A,resolveUrl:K,noopTest:ee,merge:ie,splitCells:Ee,rtrim:Le,findClosingBracket:Te,checkSanitizeDeprecation:Ne,repeatString:Fe},ni=s.exports.defaults,Xt=ue.rtrim,zt=ue.splitCells,ri=ue.escape,pt=ue.findClosingBracket;function Ai(ne,Q,te,f){var W=Q.href,U=Q.title?ri(Q.title):null,R=ne[1].replace(/\\([\[\]])/g,"$1");if(ne[0].charAt(0)!=="!"){f.state.inLink=!0;var E={type:"link",raw:te,href:W,title:U,text:R,tokens:f.inlineTokens(R,[])};return f.state.inLink=!1,E}else return{type:"image",raw:te,href:W,title:U,text:ri(R)}}function qn(ne,Q){var te=ne.match(/^(\s+)(?:```)/);if(te===null)return Q;var f=te[1];return Q.split(`
`).map(function(W){var U=W.match(/^\s+/);if(U===null)return W;var R=U[0];return R.length>=f.length?W.slice(f.length):W}).join(`
`)}var jr=function(){function ne(te){this.options=te||ni}var Q=ne.prototype;return Q.space=function(f){var W=this.rules.block.newline.exec(f);if(W)return W[0].length>1?{type:"space",raw:W[0]}:{raw:`
`}},Q.code=function(f){var W=this.rules.block.code.exec(f);if(W){var U=W[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:W[0],codeBlockStyle:"indented",text:this.options.pedantic?U:Xt(U,`
`)}}},Q.fences=function(f){var W=this.rules.block.fences.exec(f);if(W){var U=W[0],R=qn(U,W[3]||"");return{type:"code",raw:U,lang:W[2]?W[2].trim():W[2],text:R}}},Q.heading=function(f){var W=this.rules.block.heading.exec(f);if(W){var U=W[2].trim();if(/#$/.test(U)){var R=Xt(U,"#");(this.options.pedantic||!R||/ $/.test(R))&&(U=R.trim())}var E={type:"heading",raw:W[0],depth:W[1].length,text:U,tokens:[]};return this.lexer.inline(E.text,E.tokens),E}},Q.hr=function(f){var W=this.rules.block.hr.exec(f);if(W)return{type:"hr",raw:W[0]}},Q.blockquote=function(f){var W=this.rules.block.blockquote.exec(f);if(W){var U=W[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:W[0],tokens:this.lexer.blockTokens(U,[]),text:U}}},Q.list=function(f){var W=this.rules.block.list.exec(f);if(W){var U,R,E,re,de,ke,Je,$e,rt,ft,qe=W[1].trim(),hn=qe.length>1,$t={type:"list",raw:"",ordered:hn,start:hn?+qe.slice(0,-1):"",loose:!1,items:[]};qe=hn?"\\d{1,9}\\"+qe.slice(-1):"\\"+qe,this.options.pedantic&&(qe=hn?qe:"[*+-]");for(var Mr=new RegExp("^( {0,3}"+qe+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");f&&!(this.rules.block.hr.test(f)||!(W=Mr.exec(f)));){rt=W[2].split(`
`),this.options.pedantic?(re=2,ft=rt[0].trimLeft()):(re=W[2].search(/[^ ]/),re=W[1].length+(re>4?1:re),ft=rt[0].slice(re-W[1].length)),ke=!1,U=W[0],!rt[0]&&/^ *$/.test(rt[1])&&(U=W[1]+rt.slice(0,2).join(`
`)+`
`,$t.loose=!0,rt=[]);var Rh=new RegExp("^ {0,"+Math.min(3,re-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(de=1;de<rt.length;de++){if($e=rt[de],this.options.pedantic&&($e=$e.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Rh.test($e)){U=W[1]+rt.slice(0,de).join(`
`)+`
`;break}if(!ke){$e.trim()||(ke=!0),$e.search(/[^ ]/)>=re?ft+=`
`+$e.slice(re):ft+=`
`+$e;continue}if($e.search(/[^ ]/)>=re||!$e.trim()){ft+=`
`+$e.slice(re);continue}else{U=W[1]+rt.slice(0,de).join(`
`)+`
`;break}}$t.loose||(Je?$t.loose=!0:/\n *\n *$/.test(U)&&(Je=!0)),this.options.gfm&&(R=/^\[[ xX]\] /.exec(ft),R&&(E=R[0]!=="[ ] ",ft=ft.replace(/^\[[ xX]\] +/,""))),$t.items.push({type:"list_item",raw:U,task:!!R,checked:E,loose:!1,text:ft}),$t.raw+=U,f=f.slice(U.length)}$t.items[$t.items.length-1].raw=U.trimRight(),$t.items[$t.items.length-1].text=ft.trimRight(),$t.raw=$t.raw.trimRight();var _n=$t.items.length;for(de=0;de<_n;de++)this.lexer.state.top=!1,$t.items[de].tokens=this.lexer.blockTokens($t.items[de].text,[]),$t.items[de].tokens.some(function(Fl){return Fl.type==="space"})&&($t.loose=!0,$t.items[de].loose=!0);return $t}},Q.html=function(f){var W=this.rules.block.html.exec(f);if(W){var U={type:"html",raw:W[0],pre:!this.options.sanitizer&&(W[1]==="pre"||W[1]==="script"||W[1]==="style"),text:W[0]};return this.options.sanitize&&(U.type="paragraph",U.text=this.options.sanitizer?this.options.sanitizer(W[0]):ri(W[0]),U.tokens=[],this.lexer.inline(U.text,U.tokens)),U}},Q.def=function(f){var W=this.rules.block.def.exec(f);if(W){W[3]&&(W[3]=W[3].substring(1,W[3].length-1));var U=W[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:U,raw:W[0],href:W[2],title:W[3]}}},Q.table=function(f){var W=this.rules.block.table.exec(f);if(W){var U={type:"table",header:zt(W[1]).map(function(Je){return{text:Je}}),align:W[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:W[3]?W[3].replace(/\n$/,"").split(`
`):[]};if(U.header.length===U.align.length){U.raw=W[0];var R=U.align.length,E,re,de,ke;for(E=0;E<R;E++)/^ *-+: *$/.test(U.align[E])?U.align[E]="right":/^ *:-+: *$/.test(U.align[E])?U.align[E]="center":/^ *:-+ *$/.test(U.align[E])?U.align[E]="left":U.align[E]=null;for(R=U.rows.length,E=0;E<R;E++)U.rows[E]=zt(U.rows[E],U.header.length).map(function(Je){return{text:Je}});for(R=U.header.length,re=0;re<R;re++)U.header[re].tokens=[],this.lexer.inlineTokens(U.header[re].text,U.header[re].tokens);for(R=U.rows.length,re=0;re<R;re++)for(ke=U.rows[re],de=0;de<ke.length;de++)ke[de].tokens=[],this.lexer.inlineTokens(ke[de].text,ke[de].tokens);return U}}},Q.lheading=function(f){var W=this.rules.block.lheading.exec(f);if(W){var U={type:"heading",raw:W[0],depth:W[2].charAt(0)==="="?1:2,text:W[1],tokens:[]};return this.lexer.inline(U.text,U.tokens),U}},Q.paragraph=function(f){var W=this.rules.block.paragraph.exec(f);if(W){var U={type:"paragraph",raw:W[0],text:W[1].charAt(W[1].length-1)===`
`?W[1].slice(0,-1):W[1],tokens:[]};return this.lexer.inline(U.text,U.tokens),U}},Q.text=function(f){var W=this.rules.block.text.exec(f);if(W){var U={type:"text",raw:W[0],text:W[0],tokens:[]};return this.lexer.inline(U.text,U.tokens),U}},Q.escape=function(f){var W=this.rules.inline.escape.exec(f);if(W)return{type:"escape",raw:W[0],text:ri(W[1])}},Q.tag=function(f){var W=this.rules.inline.tag.exec(f);if(W)return!this.lexer.state.inLink&&/^<a /i.test(W[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(W[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:W[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(W[0]):ri(W[0]):W[0]}},Q.link=function(f){var W=this.rules.inline.link.exec(f);if(W){var U=W[2].trim();if(!this.options.pedantic&&/^</.test(U)){if(!/>$/.test(U))return;var R=Xt(U.slice(0,-1),"\\");if((U.length-R.length)%2==0)return}else{var E=pt(W[2],"()");if(E>-1){var re=W[0].indexOf("!")===0?5:4,de=re+W[1].length+E;W[2]=W[2].substring(0,E),W[0]=W[0].substring(0,de).trim(),W[3]=""}}var ke=W[2],Je="";if(this.options.pedantic){var $e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ke);$e&&(ke=$e[1],Je=$e[3])}else Je=W[3]?W[3].slice(1,-1):"";return ke=ke.trim(),/^</.test(ke)&&(this.options.pedantic&&!/>$/.test(U)?ke=ke.slice(1):ke=ke.slice(1,-1)),Ai(W,{href:ke&&ke.replace(this.rules.inline._escapes,"$1"),title:Je&&Je.replace(this.rules.inline._escapes,"$1")},W[0],this.lexer)}},Q.reflink=function(f,W){var U;if((U=this.rules.inline.reflink.exec(f))||(U=this.rules.inline.nolink.exec(f))){var R=(U[2]||U[1]).replace(/\s+/g," ");if(R=W[R.toLowerCase()],!R||!R.href){var E=U[0].charAt(0);return{type:"text",raw:E,text:E}}return Ai(U,R,U[0],this.lexer)}},Q.emStrong=function(f,W,U){U===void 0&&(U="");var R=this.rules.inline.emStrong.lDelim.exec(f);if(!!R&&!(R[3]&&U.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var E=R[1]||R[2]||"";if(!E||E&&(U===""||this.rules.inline.punctuation.exec(U))){var re=R[0].length-1,de,ke,Je=re,$e=0,rt=R[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(rt.lastIndex=0,W=W.slice(-1*f.length+re);(R=rt.exec(W))!=null;)if(de=R[1]||R[2]||R[3]||R[4]||R[5]||R[6],!!de){if(ke=de.length,R[3]||R[4]){Je+=ke;continue}else if((R[5]||R[6])&&re%3&&!((re+ke)%3)){$e+=ke;continue}if(Je-=ke,!(Je>0)){if(ke=Math.min(ke,ke+Je+$e),Math.min(re,ke)%2){var ft=f.slice(1,re+R.index+ke);return{type:"em",raw:f.slice(0,re+R.index+ke+1),text:ft,tokens:this.lexer.inlineTokens(ft,[])}}var qe=f.slice(2,re+R.index+ke-1);return{type:"strong",raw:f.slice(0,re+R.index+ke+1),text:qe,tokens:this.lexer.inlineTokens(qe,[])}}}}}},Q.codespan=function(f){var W=this.rules.inline.code.exec(f);if(W){var U=W[2].replace(/\n/g," "),R=/[^ ]/.test(U),E=/^ /.test(U)&&/ $/.test(U);return R&&E&&(U=U.substring(1,U.length-1)),U=ri(U,!0),{type:"codespan",raw:W[0],text:U}}},Q.br=function(f){var W=this.rules.inline.br.exec(f);if(W)return{type:"br",raw:W[0]}},Q.del=function(f){var W=this.rules.inline.del.exec(f);if(W)return{type:"del",raw:W[0],text:W[2],tokens:this.lexer.inlineTokens(W[2],[])}},Q.autolink=function(f,W){var U=this.rules.inline.autolink.exec(f);if(U){var R,E;return U[2]==="@"?(R=ri(this.options.mangle?W(U[1]):U[1]),E="mailto:"+R):(R=ri(U[1]),E=R),{type:"link",raw:U[0],text:R,href:E,tokens:[{type:"text",raw:R,text:R}]}}},Q.url=function(f,W){var U;if(U=this.rules.inline.url.exec(f)){var R,E;if(U[2]==="@")R=ri(this.options.mangle?W(U[0]):U[0]),E="mailto:"+R;else{var re;do re=U[0],U[0]=this.rules.inline._backpedal.exec(U[0])[0];while(re!==U[0]);R=ri(U[0]),U[1]==="www."?E="http://"+R:E=R}return{type:"link",raw:U[0],text:R,href:E,tokens:[{type:"text",raw:R,text:R}]}}},Q.inlineText=function(f,W){var U=this.rules.inline.text.exec(f);if(U){var R;return this.lexer.state.inRawBlock?R=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(U[0]):ri(U[0]):U[0]:R=ri(this.options.smartypants?W(U[0]):U[0]),{type:"text",raw:U[0],text:R}}},ne}(),dn=ue.noopTest,hi=ue.edit,ro=ue.merge,ut={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:dn,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};ut._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,ut._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ut.def=hi(ut.def).replace("label",ut._label).replace("title",ut._title).getRegex(),ut.bullet=/(?:[*+-]|\d{1,9}[.)])/,ut.listItemStart=hi(/^( *)(bull) */).replace("bull",ut.bullet).getRegex(),ut.list=hi(ut.list).replace(/bull/g,ut.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ut.def.source+")").getRegex(),ut._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ut._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ut.html=hi(ut.html,"i").replace("comment",ut._comment).replace("tag",ut._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ut.paragraph=hi(ut._paragraph).replace("hr",ut.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ut._tag).getRegex(),ut.blockquote=hi(ut.blockquote).replace("paragraph",ut.paragraph).getRegex(),ut.normal=ro({},ut),ut.gfm=ro({},ut.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ut.gfm.table=hi(ut.gfm.table).replace("hr",ut.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ut._tag).getRegex(),ut.pedantic=ro({},ut.normal,{html:hi(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ut._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:dn,paragraph:hi(ut.normal._paragraph).replace("hr",ut.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ut.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Ve={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:dn,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:dn,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Ve._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Ve.punctuation=hi(Ve.punctuation).replace(/punctuation/g,Ve._punctuation).getRegex(),Ve.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ve.escapedEmSt=/\\\*|\\_/g,Ve._comment=hi(ut._comment).replace("(?:-->|$)","-->").getRegex(),Ve.emStrong.lDelim=hi(Ve.emStrong.lDelim).replace(/punct/g,Ve._punctuation).getRegex(),Ve.emStrong.rDelimAst=hi(Ve.emStrong.rDelimAst,"g").replace(/punct/g,Ve._punctuation).getRegex(),Ve.emStrong.rDelimUnd=hi(Ve.emStrong.rDelimUnd,"g").replace(/punct/g,Ve._punctuation).getRegex(),Ve._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ve._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ve._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ve.autolink=hi(Ve.autolink).replace("scheme",Ve._scheme).replace("email",Ve._email).getRegex(),Ve._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ve.tag=hi(Ve.tag).replace("comment",Ve._comment).replace("attribute",Ve._attribute).getRegex(),Ve._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ve._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ve._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ve.link=hi(Ve.link).replace("label",Ve._label).replace("href",Ve._href).replace("title",Ve._title).getRegex(),Ve.reflink=hi(Ve.reflink).replace("label",Ve._label).getRegex(),Ve.reflinkSearch=hi(Ve.reflinkSearch,"g").replace("reflink",Ve.reflink).replace("nolink",Ve.nolink).getRegex(),Ve.normal=ro({},Ve),Ve.pedantic=ro({},Ve.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:hi(/^!?\[(label)\]\((.*?)\)/).replace("label",Ve._label).getRegex(),reflink:hi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ve._label).getRegex()}),Ve.gfm=ro({},Ve.normal,{escape:hi(Ve.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ve.gfm.url=hi(Ve.gfm.url,"i").replace("email",Ve.gfm._extended_email).getRegex(),Ve.breaks=ro({},Ve.gfm,{br:hi(Ve.br).replace("{2,}","*").getRegex(),text:hi(Ve.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var na={block:ut,inline:Ve},kn=jr,wr=s.exports.defaults,oo=na.block,Ss=na.inline,Qe=ue.repeatString;function Do(ne){return ne.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Dh(ne){var Q="",te,f,W=ne.length;for(te=0;te<W;te++)f=ne.charCodeAt(te),Math.random()>.5&&(f="x"+f.toString(16)),Q+="&#"+f+";";return Q}var Qc=function(){function ne(te){this.tokens=[],this.tokens.links=Object.create(null),this.options=te||wr,this.options.tokenizer=this.options.tokenizer||new kn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var f={block:oo.normal,inline:Ss.normal};this.options.pedantic?(f.block=oo.pedantic,f.inline=Ss.pedantic):this.options.gfm&&(f.block=oo.gfm,this.options.breaks?f.inline=Ss.breaks:f.inline=Ss.gfm),this.tokenizer.rules=f}ne.lex=function(f,W){var U=new ne(W);return U.lex(f)},ne.lexInline=function(f,W){var U=new ne(W);return U.inlineTokens(f)};var Q=ne.prototype;return Q.lex=function(f){f=f.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(f,this.tokens);for(var W;W=this.inlineQueue.shift();)this.inlineTokens(W.src,W.tokens);return this.tokens},Q.blockTokens=function(f,W){var U=this;W===void 0&&(W=[]),this.options.pedantic&&(f=f.replace(/^ +$/gm,""));for(var R,E,re,de;f;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Je){return(R=Je.call({lexer:U},f,W))?(f=f.substring(R.raw.length),W.push(R),!0):!1}))){if(R=this.tokenizer.space(f)){f=f.substring(R.raw.length),R.type&&W.push(R);continue}if(R=this.tokenizer.code(f)){f=f.substring(R.raw.length),E=W[W.length-1],E&&(E.type==="paragraph"||E.type==="text")?(E.raw+=`
`+R.raw,E.text+=`
`+R.text,this.inlineQueue[this.inlineQueue.length-1].src=E.text):W.push(R);continue}if(R=this.tokenizer.fences(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.heading(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.hr(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.blockquote(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.list(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.html(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.def(f)){f=f.substring(R.raw.length),E=W[W.length-1],E&&(E.type==="paragraph"||E.type==="text")?(E.raw+=`
`+R.raw,E.text+=`
`+R.raw,this.inlineQueue[this.inlineQueue.length-1].src=E.text):this.tokens.links[R.tag]||(this.tokens.links[R.tag]={href:R.href,title:R.title});continue}if(R=this.tokenizer.table(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.lheading(f)){f=f.substring(R.raw.length),W.push(R);continue}if(re=f,this.options.extensions&&this.options.extensions.startBlock&&function(){var Je=1/0,$e=f.slice(1),rt=void 0;U.options.extensions.startBlock.forEach(function(ft){rt=ft.call({lexer:this},$e),typeof rt=="number"&&rt>=0&&(Je=Math.min(Je,rt))}),Je<1/0&&Je>=0&&(re=f.substring(0,Je+1))}(),this.state.top&&(R=this.tokenizer.paragraph(re))){E=W[W.length-1],de&&E.type==="paragraph"?(E.raw+=`
`+R.raw,E.text+=`
`+R.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=E.text):W.push(R),de=re.length!==f.length,f=f.substring(R.raw.length);continue}if(R=this.tokenizer.text(f)){f=f.substring(R.raw.length),E=W[W.length-1],E&&E.type==="text"?(E.raw+=`
`+R.raw,E.text+=`
`+R.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=E.text):W.push(R);continue}if(f){var ke="Infinite loop on byte: "+f.charCodeAt(0);if(this.options.silent){console.error(ke);break}else throw new Error(ke)}}return this.state.top=!0,W},Q.inline=function(f,W){this.inlineQueue.push({src:f,tokens:W})},Q.inlineTokens=function(f,W){var U=this;W===void 0&&(W=[]);var R,E,re,de=f,ke,Je,$e;if(this.tokens.links){var rt=Object.keys(this.tokens.links);if(rt.length>0)for(;(ke=this.tokenizer.rules.inline.reflinkSearch.exec(de))!=null;)rt.includes(ke[0].slice(ke[0].lastIndexOf("[")+1,-1))&&(de=de.slice(0,ke.index)+"["+Qe("a",ke[0].length-2)+"]"+de.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ke=this.tokenizer.rules.inline.blockSkip.exec(de))!=null;)de=de.slice(0,ke.index)+"["+Qe("a",ke[0].length-2)+"]"+de.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ke=this.tokenizer.rules.inline.escapedEmSt.exec(de))!=null;)de=de.slice(0,ke.index)+"++"+de.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;f;)if(Je||($e=""),Je=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(qe){return(R=qe.call({lexer:U},f,W))?(f=f.substring(R.raw.length),W.push(R),!0):!1}))){if(R=this.tokenizer.escape(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.tag(f)){f=f.substring(R.raw.length),E=W[W.length-1],E&&R.type==="text"&&E.type==="text"?(E.raw+=R.raw,E.text+=R.text):W.push(R);continue}if(R=this.tokenizer.link(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.reflink(f,this.tokens.links)){f=f.substring(R.raw.length),E=W[W.length-1],E&&R.type==="text"&&E.type==="text"?(E.raw+=R.raw,E.text+=R.text):W.push(R);continue}if(R=this.tokenizer.emStrong(f,de,$e)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.codespan(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.br(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.del(f)){f=f.substring(R.raw.length),W.push(R);continue}if(R=this.tokenizer.autolink(f,Dh)){f=f.substring(R.raw.length),W.push(R);continue}if(!this.state.inLink&&(R=this.tokenizer.url(f,Dh))){f=f.substring(R.raw.length),W.push(R);continue}if(re=f,this.options.extensions&&this.options.extensions.startInline&&function(){var qe=1/0,hn=f.slice(1),$t=void 0;U.options.extensions.startInline.forEach(function(Mr){$t=Mr.call({lexer:this},hn),typeof $t=="number"&&$t>=0&&(qe=Math.min(qe,$t))}),qe<1/0&&qe>=0&&(re=f.substring(0,qe+1))}(),R=this.tokenizer.inlineText(re,Do)){f=f.substring(R.raw.length),R.raw.slice(-1)!=="_"&&($e=R.raw.slice(-1)),Je=!0,E=W[W.length-1],E&&E.type==="text"?(E.raw+=R.raw,E.text+=R.text):W.push(R);continue}if(f){var ft="Infinite loop on byte: "+f.charCodeAt(0);if(this.options.silent){console.error(ft);break}else throw new Error(ft)}}return W},t(ne,null,[{key:"rules",get:function(){return{block:oo,inline:Ss}}}]),ne}(),Al=s.exports.defaults,xs=ue.cleanUrl,Ha=ue.escape,Ht=function(){function ne(te){this.options=te||Al}var Q=ne.prototype;return Q.code=function(f,W,U){var R=(W||"").match(/\S*/)[0];if(this.options.highlight){var E=this.options.highlight(f,R);E!=null&&E!==f&&(U=!0,f=E)}return f=f.replace(/\n$/,"")+`
`,R?'<pre><code class="'+this.options.langPrefix+Ha(R,!0)+'">'+(U?f:Ha(f,!0))+`</code></pre>
`:"<pre><code>"+(U?f:Ha(f,!0))+`</code></pre>
`},Q.blockquote=function(f){return`<blockquote>
`+f+`</blockquote>
`},Q.html=function(f){return f},Q.heading=function(f,W,U,R){return this.options.headerIds?"<h"+W+' id="'+this.options.headerPrefix+R.slug(U)+'">'+f+"</h"+W+`>
`:"<h"+W+">"+f+"</h"+W+`>
`},Q.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Q.list=function(f,W,U){var R=W?"ol":"ul",E=W&&U!==1?' start="'+U+'"':"";return"<"+R+E+`>
`+f+"</"+R+`>
`},Q.listitem=function(f){return"<li>"+f+`</li>
`},Q.checkbox=function(f){return"<input "+(f?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Q.paragraph=function(f){return"<p>"+f+`</p>
`},Q.table=function(f,W){return W&&(W="<tbody>"+W+"</tbody>"),`<table>
<thead>
`+f+`</thead>
`+W+`</table>
`},Q.tablerow=function(f){return`<tr>
`+f+`</tr>
`},Q.tablecell=function(f,W){var U=W.header?"th":"td",R=W.align?"<"+U+' align="'+W.align+'">':"<"+U+">";return R+f+"</"+U+`>
`},Q.strong=function(f){return"<strong>"+f+"</strong>"},Q.em=function(f){return"<em>"+f+"</em>"},Q.codespan=function(f){return"<code>"+f+"</code>"},Q.br=function(){return this.options.xhtml?"<br/>":"<br>"},Q.del=function(f){return"<del>"+f+"</del>"},Q.link=function(f,W,U){if(f=xs(this.options.sanitize,this.options.baseUrl,f),f===null)return U;var R='<a href="'+Ha(f)+'"';return W&&(R+=' title="'+W+'"'),R+=">"+U+"</a>",R},Q.image=function(f,W,U){if(f=xs(this.options.sanitize,this.options.baseUrl,f),f===null)return U;var R='<img src="'+f+'" alt="'+U+'"';return W&&(R+=' title="'+W+'"'),R+=this.options.xhtml?"/>":">",R},Q.text=function(f){return f},ne}(),Lh=function(){function ne(){}var Q=ne.prototype;return Q.strong=function(f){return f},Q.em=function(f){return f},Q.codespan=function(f){return f},Q.del=function(f){return f},Q.html=function(f){return f},Q.text=function(f){return f},Q.link=function(f,W,U){return""+U},Q.image=function(f,W,U){return""+U},Q.br=function(){return""},ne}(),Jo=function(){function ne(){this.seen={}}var Q=ne.prototype;return Q.serialize=function(f){return f.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Q.getNextSafeSlug=function(f,W){var U=f,R=0;if(this.seen.hasOwnProperty(U)){R=this.seen[f];do R++,U=f+"-"+R;while(this.seen.hasOwnProperty(U))}return W||(this.seen[f]=R,this.seen[U]=0),U},Q.slug=function(f,W){W===void 0&&(W={});var U=this.serialize(f);return this.getNextSafeSlug(U,W.dryrun)},ne}(),kh=Ht,Ih=Lh,dm=Jo,Es=s.exports.defaults,jl=ue.unescape,Oh=function(){function ne(te){this.options=te||Es,this.options.renderer=this.options.renderer||new kh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ih,this.slugger=new dm}ne.parse=function(f,W){var U=new ne(W);return U.parse(f)},ne.parseInline=function(f,W){var U=new ne(W);return U.parseInline(f)};var Q=ne.prototype;return Q.parse=function(f,W){W===void 0&&(W=!0);var U="",R,E,re,de,ke,Je,$e,rt,ft,qe,hn,$t,Mr,Rh,_n,Fl,tp,um,ip,m0=f.length;for(R=0;R<m0;R++){if(qe=f[R],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[qe.type]&&(ip=this.options.extensions.renderers[qe.type].call({parser:this},qe),ip!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(qe.type))){U+=ip||"";continue}switch(qe.type){case"space":continue;case"hr":{U+=this.renderer.hr();continue}case"heading":{U+=this.renderer.heading(this.parseInline(qe.tokens),qe.depth,jl(this.parseInline(qe.tokens,this.textRenderer)),this.slugger);continue}case"code":{U+=this.renderer.code(qe.text,qe.lang,qe.escaped);continue}case"table":{for(rt="",$e="",de=qe.header.length,E=0;E<de;E++)$e+=this.renderer.tablecell(this.parseInline(qe.header[E].tokens),{header:!0,align:qe.align[E]});for(rt+=this.renderer.tablerow($e),ft="",de=qe.rows.length,E=0;E<de;E++){for(Je=qe.rows[E],$e="",ke=Je.length,re=0;re<ke;re++)$e+=this.renderer.tablecell(this.parseInline(Je[re].tokens),{header:!1,align:qe.align[re]});ft+=this.renderer.tablerow($e)}U+=this.renderer.table(rt,ft);continue}case"blockquote":{ft=this.parse(qe.tokens),U+=this.renderer.blockquote(ft);continue}case"list":{for(hn=qe.ordered,$t=qe.start,Mr=qe.loose,de=qe.items.length,ft="",E=0;E<de;E++)_n=qe.items[E],Fl=_n.checked,tp=_n.task,Rh="",_n.task&&(um=this.renderer.checkbox(Fl),Mr?_n.tokens.length>0&&_n.tokens[0].type==="paragraph"?(_n.tokens[0].text=um+" "+_n.tokens[0].text,_n.tokens[0].tokens&&_n.tokens[0].tokens.length>0&&_n.tokens[0].tokens[0].type==="text"&&(_n.tokens[0].tokens[0].text=um+" "+_n.tokens[0].tokens[0].text)):_n.tokens.unshift({type:"text",text:um}):Rh+=um),Rh+=this.parse(_n.tokens,Mr),ft+=this.renderer.listitem(Rh,tp,Fl);U+=this.renderer.list(ft,hn,$t);continue}case"html":{U+=this.renderer.html(qe.text);continue}case"paragraph":{U+=this.renderer.paragraph(this.parseInline(qe.tokens));continue}case"text":{for(ft=qe.tokens?this.parseInline(qe.tokens):qe.text;R+1<m0&&f[R+1].type==="text";)qe=f[++R],ft+=`
`+(qe.tokens?this.parseInline(qe.tokens):qe.text);U+=W?this.renderer.paragraph(ft):ft;continue}default:{var Jc='Token with "'+qe.type+'" type was not found.';if(this.options.silent){console.error(Jc);return}else throw new Error(Jc)}}}return U},Q.parseInline=function(f,W){W=W||this.renderer;var U="",R,E,re,de=f.length;for(R=0;R<de;R++){if(E=f[R],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[E.type]&&(re=this.options.extensions.renderers[E.type].call({parser:this},E),re!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(E.type))){U+=re||"";continue}switch(E.type){case"escape":{U+=W.text(E.text);break}case"html":{U+=W.html(E.text);break}case"link":{U+=W.link(E.href,E.title,this.parseInline(E.tokens,W));break}case"image":{U+=W.image(E.href,E.title,E.text);break}case"strong":{U+=W.strong(this.parseInline(E.tokens,W));break}case"em":{U+=W.em(this.parseInline(E.tokens,W));break}case"codespan":{U+=W.codespan(E.text);break}case"br":{U+=W.br();break}case"del":{U+=W.del(this.parseInline(E.tokens,W));break}case"text":{U+=W.text(E.text);break}default:{var ke='Token with "'+E.type+'" type was not found.';if(this.options.silent){console.error(ke);return}else throw new Error(ke)}}}return U},ne}(),es=Qc,$a=Oh,Th=jr,hm=Ht,Qg=Lh,Nh=Jo,Ml=ue.merge,Jg=ue.checkSanitizeDeprecation,ts=ue.escape,ep=s.exports.getDefaults,Ds=s.exports.changeDefaults,ra=s.exports.defaults;function vt(ne,Q,te){if(typeof ne=="undefined"||ne===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ne!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ne)+", string expected");if(typeof Q=="function"&&(te=Q,Q=null),Q=Ml({},vt.defaults,Q||{}),Jg(Q),te){var f=Q.highlight,W;try{W=es.lex(ne,Q)}catch(re){return te(re)}var U=function(de){var ke;if(!de)try{Q.walkTokens&&vt.walkTokens(W,Q.walkTokens),ke=$a.parse(W,Q)}catch(Je){de=Je}return Q.highlight=f,de?te(de):te(null,ke)};if(!f||f.length<3||(delete Q.highlight,!W.length))return U();var R=0;vt.walkTokens(W,function(re){re.type==="code"&&(R++,setTimeout(function(){f(re.text,re.lang,function(de,ke){if(de)return U(de);ke!=null&&ke!==re.text&&(re.text=ke,re.escaped=!0),R--,R===0&&U()})},0))}),R===0&&U();return}try{var E=es.lex(ne,Q);return Q.walkTokens&&vt.walkTokens(E,Q.walkTokens),$a.parse(E,Q)}catch(re){if(re.message+=`
Please report this to https://github.com/markedjs/marked.`,Q.silent)return"<p>An error occurred:</p><pre>"+ts(re.message+"",!0)+"</pre>";throw re}}vt.options=vt.setOptions=function(ne){return Ml(vt.defaults,ne),Ds(vt.defaults),vt},vt.getDefaults=ep,vt.defaults=ra,vt.use=function(){for(var ne=this,Q=arguments.length,te=new Array(Q),f=0;f<Q;f++)te[f]=arguments[f];var W=Ml.apply(void 0,[{}].concat(te)),U=vt.defaults.extensions||{renderers:{},childTokens:{}},R;te.forEach(function(E){if(E.extensions&&(R=!0,E.extensions.forEach(function(de){if(!de.name)throw new Error("extension name required");if(de.renderer){var ke=U.renderers?U.renderers[de.name]:null;ke?U.renderers[de.name]=function(){for(var Je=arguments.length,$e=new Array(Je),rt=0;rt<Je;rt++)$e[rt]=arguments[rt];var ft=de.renderer.apply(this,$e);return ft===!1&&(ft=ke.apply(this,$e)),ft}:U.renderers[de.name]=de.renderer}if(de.tokenizer){if(!de.level||de.level!=="block"&&de.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");U[de.level]?U[de.level].unshift(de.tokenizer):U[de.level]=[de.tokenizer],de.start&&(de.level==="block"?U.startBlock?U.startBlock.push(de.start):U.startBlock=[de.start]:de.level==="inline"&&(U.startInline?U.startInline.push(de.start):U.startInline=[de.start]))}de.childTokens&&(U.childTokens[de.name]=de.childTokens)})),E.renderer&&function(){var de=vt.defaults.renderer||new hm,ke=function(rt){var ft=de[rt];de[rt]=function(){for(var qe=arguments.length,hn=new Array(qe),$t=0;$t<qe;$t++)hn[$t]=arguments[$t];var Mr=E.renderer[rt].apply(de,hn);return Mr===!1&&(Mr=ft.apply(de,hn)),Mr}};for(var Je in E.renderer)ke(Je);W.renderer=de}(),E.tokenizer&&function(){var de=vt.defaults.tokenizer||new Th,ke=function(rt){var ft=de[rt];de[rt]=function(){for(var qe=arguments.length,hn=new Array(qe),$t=0;$t<qe;$t++)hn[$t]=arguments[$t];var Mr=E.tokenizer[rt].apply(de,hn);return Mr===!1&&(Mr=ft.apply(de,hn)),Mr}};for(var Je in E.tokenizer)ke(Je);W.tokenizer=de}(),E.walkTokens){var re=vt.defaults.walkTokens;W.walkTokens=function(de){E.walkTokens.call(ne,de),re&&re(de)}}R&&(W.extensions=U),vt.setOptions(W)})},vt.walkTokens=function(ne,Q){for(var te=function(){var R=W.value;switch(Q(R),R.type){case"table":{for(var E=o(R.header),re;!(re=E()).done;){var de=re.value;vt.walkTokens(de.tokens,Q)}for(var ke=o(R.rows),Je;!(Je=ke()).done;)for(var $e=Je.value,rt=o($e),ft;!(ft=rt()).done;){var qe=ft.value;vt.walkTokens(qe.tokens,Q)}break}case"list":{vt.walkTokens(R.items,Q);break}default:vt.defaults.extensions&&vt.defaults.extensions.childTokens&&vt.defaults.extensions.childTokens[R.type]?vt.defaults.extensions.childTokens[R.type].forEach(function(hn){vt.walkTokens(R[hn],Q)}):R.tokens&&vt.walkTokens(R.tokens,Q)}},f=o(ne),W;!(W=f()).done;)te()},vt.parseInline=function(ne,Q){if(typeof ne=="undefined"||ne===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ne!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ne)+", string expected");Q=Ml({},vt.defaults,Q||{}),Jg(Q);try{var te=es.lexInline(ne,Q);return Q.walkTokens&&vt.walkTokens(te,Q.walkTokens),$a.parseInline(te,Q)}catch(f){if(f.message+=`
Please report this to https://github.com/markedjs/marked.`,Q.silent)return"<p>An error occurred:</p><pre>"+ts(f.message+"",!0)+"</pre>";throw f}},vt.Parser=$a,vt.parser=$a.parse,vt.Renderer=hm,vt.TextRenderer=Qg,vt.Lexer=es,vt.lexer=es.lex,vt.Tokenizer=Th,vt.Slugger=Nh,vt.parse=vt;var is=vt;return is})})();var Kft=zc.Parser,qft=zc.parser,_q=zc.Renderer,Yft=zc.TextRenderer,Zft=zc.Lexer,Gft=zc.lexer,Xft=zc.Tokenizer,Qft=zc.Slugger,bq=zc.parse;function vq(r,e={},t={}){var i;let n=new G,o=!1,s=n.add(new Di),a=jL(e),l=function(_){let v;try{v=hw(decodeURIComponent(_))}catch{}return v?(v=pU(v,C=>{if(r.uris&&r.uris[C])return ve.revive(r.uris[C])}),encodeURIComponent(JSON.stringify(v))):_},c=function(_,v){let C=r.uris&&r.uris[_];if(!C)return _;let w=ve.revive(C);return v?_.startsWith(Xe.data+":")?_:q1.asBrowserUri(w).toString(!0):ve.parse(_).toString()===w.toString()?_:(w.query&&(w=w.with({query:l(w.query)})),w.toString())},d,h=new Promise(_=>d=_),u=new _q;if(u.image=(_,v,C)=>{let w=[],S=[];if(_){({href:_,dimensions:w}=u$(_)),_=c(_,!0);try{let D=ve.parse(_);e.baseUrl&&D.scheme===Xe.file&&(_=XO(e.baseUrl,_).toString())}catch{}S.push(`src="${_}"`)}return C&&S.push(`alt="${C}"`),v&&S.push(`title="${v}"`),w.length&&(S=S.concat(w)),"<img "+S.join(" ")+">"},u.link=(_,v,C)=>(_===C&&(C=FL(C)),_=c(_,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(_)||(_=XO(e.baseUrl,_).toString())),v=FL(v),_=FL(_),!_||_.match(/^data:|javascript:/i)||_.match(/^command:/i)&&!r.isTrusted||_.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?C:(_=_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${_}" title="${v||_}">${C}</a>`)),u.paragraph=_=>`<p>${_}</p>`,e.codeBlockRenderer&&(u.code=(_,v)=>{let C=e.codeBlockRenderer(v,_),w=AL.nextId();return Lp(Promise.all([C,h]),s.token).then(S=>{var D;if(!o&&S){let I=a.querySelector(`div[data-code="${w}"]`);I&&pa(I,S[0]),(D=e.asyncRenderCallback)===null||D===void 0||D.call(e)}}).catch(()=>{}),`<div class="code" data-code="${w}">${Np(_)}</div>`}),e.actionHandler){let _=e.actionHandler.disposables.add(new Bt(a,"click")),v=e.actionHandler.disposables.add(new Bt(a,"auxclick"));e.actionHandler.disposables.add(ye.any(_.event,v.event)(C=>{let w=new Tn(C);if(!w.leftButton&&!w.middleButton)return;let S=w.target;if(!(S.tagName!=="A"&&(S=S.parentElement,!S||S.tagName!=="A")))try{let D=S.dataset.href;D&&e.actionHandler.callback(D,w)}catch(D){we(D)}finally{w.preventDefault()}}))}r.supportHtml||(t.sanitizer=_=>(r.isTrusted?_.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?_:"",t.sanitize=!0,t.silent=!0),t.renderer=u;let m=(i=r.value)!==null&&i!==void 0?i:"";m.length>1e5&&(m=`${m.substr(0,1e5)}\u2026`),r.supportThemeIcons&&(m=z6(m));let p=bq(m,t);if(r.supportThemeIcons&&(p=Aa(p).map(v=>typeof v=="string"?v:v.outerHTML).join("")),a.innerHTML=Bue(r,p),d(),e.asyncRenderCallback)for(let _ of a.getElementsByTagName("img")){let v=n.add(J(_,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,s.cancel(),n.dispose()}}}function Bue(r,e){let{config:t,allowedSchemes:i}=Wue(r);CF("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}});let n=document.createElement("a");CF("afterSanitizeAttributes",o=>{for(let s of["href","src"])o.hasAttribute(s)&&(n.href=o.getAttribute(s),i.includes(n.protocol.replace(/:$/,""))||o.removeAttribute(s))});try{return pq(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{SF("uponSanitizeAttribute"),SF("afterSanitizeAttributes")}}function Wue(r){let e=[Xe.http,Xe.https,Xe.mailto,Xe.data,Xe.file,Xe.vscodeFileResource,Xe.vscodeRemote,Xe.vscodeRemoteResource];return r.isTrusted&&e.push(Xe.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var Uue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},wq=function(r,e){return function(t,i){e(t,i,r)}},Vue=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},xF,Xs=class yq{constructor(e,t,i){this._options=e,this._modeService=t,this._openerService=i,this._onDidRenderAsync=new M,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};let n=new G;return{element:n.add(vq(e,Object.assign(Object.assign({},this._getRenderOptions(e,n)),t),i)).element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(i,n)=>Vue(this,void 0,void 0,function*(){var o,s,a,l;let c;i?c=this._modeService.getModeIdForLanguageName(i):this._options.editor&&(c=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),c||(c="plaintext"),this._modeService.triggerMode(c);let d=(s=yield ti.getPromise(c))!==null&&s!==void 0?s:void 0,h=document.createElement("span");if(h.innerHTML=(l=(a=yq._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(n,this._modeService.languageIdCodec,d))!==null&&l!==void 0?l:GP(n,this._modeService.languageIdCodec,d),this._options.editor){let u=this._options.editor.getOption(43);Ti.applyFontInfoSlow(h,u)}else this._options.codeBlockFontFamily&&(h.style.fontFamily=this._options.codeBlockFontFamily);return h}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>this._openerService.open(i,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(we),disposables:t}}}};Xs._ttpTokenizer=(xF=window.trustedTypes)===null||xF===void 0?void 0:xF.createPolicy("tokenizeToString",{createHTML(r,e,t){return GP(r,e,t)}});Xs=Uue([wq(1,ui),wq(2,cr)],Xs);function EF(r,e,t){let n=md.ordered(r).map(o=>Promise.resolve(o.provideHover(r,e,t)).then(s=>s&&zue(s)?s:void 0,s=>{Qt(s)}));return Promise.all(n).then(Ca)}Uo("_executeHoverProvider",(r,e)=>EF(r,e,Me.None));function zue(r){let e=typeof r.range!="undefined",t=typeof r.contents!="undefined"&&r.contents&&r.contents.length>0;return e&&t}var Hue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},DF=function(r,e){return function(t,i){e(t,i,r)}},$ue=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Cq=oe,yS=class{constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Ck=class{constructor(e,t,i,n,o){this._editor=e,this._hover=t,this._modeService=i,this._openerService=n,this._configurationService=o}createLoadingMessage(e){return new yS(this,e.range,[new Eo().appendText(g("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),s=[];for(let d of t){let h=d.range.startLineNumber===n?d.range.startColumn:1,u=d.range.endLineNumber===n?d.range.endColumn:o,m=d.options.hoverMessage;if(!m||pg(m))continue;let p=new L(e.range.startLineNumber,h,e.range.startLineNumber,u);s.push(new yS(this,p,r_(m)))}let a=i.getLineLength(n),l=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return typeof c=="number"&&a>=c&&s.push(new yS(this,e.range,[{value:g("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),s}computeAsync(e,t,i){return $ue(this,void 0,void 0,function*(){if(!this._editor.hasModel()||e.type!==1)return Promise.resolve([]);let n=this._editor.getModel();if(!md.has(n))return Promise.resolve([]);let o=yield EF(n,new V(e.range.startLineNumber,e.range.startColumn),i),s=[];for(let a of o){if(pg(a.contents))continue;let l=a.range?L.lift(a.range):e.range;s.push(new yS(this,l,a.contents))}return s})}renderHoverParts(e,t,i){let n=new G;for(let o of e)for(let s of o.contents){if(pg(s))continue;let a=Cq("div.hover-row.markdown-hover"),l=X(a,Cq("div.hover-contents")),c=n.add(new Xs({editor:this._editor},this._modeService,this._openerService));n.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));let d=n.add(c.render(s));l.appendChild(d.element),t.appendChild(a)}return n}};Ck=Hue([DF(2,ui),DF(3,cr),DF(4,Mt)],Ck);var Sq=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xq=function(r,e){return function(t,i){e(t,i,r)}},LF=class{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}},kF=class Eq{constructor(e,t){this._markerService=t,this._onDidChange=new M,this.onDidChange=this._onDidChange.event,this._dispoables=new G,this._markers=[],this._nextIdx=-1,ve.isUri(e)?this._resourceFilter=n=>n.toString()===e.toString():e&&(this._resourceFilter=e);let i=()=>{this._markers=this._markerService.read({resource:ve.isUri(e)?e:void 0,severities:_i.Error|_i.Warning|_i.Info}),typeof e=="function"&&(this._markers=this._markers.filter(n=>this._resourceFilter(n.resource))),this._markers.sort(Eq._compareMarker)};i(),this._dispoables.add(t.onMarkerChanged(n=>{(!this._resourceFilter||n.some(o=>this._resourceFilter(o)))&&(i(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){let e=this._markers[this._nextIdx];return e&&new LF(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex(s=>s.resource.toString()===e.uri.toString());o<0&&(o=i_(this._markers,{resource:e.uri},(s,a)=>eu(s.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let s=o;s<this._markers.length;s++){let a=L.lift(this._markers[s]);if(a.isEmpty()){let l=e.getWordAtPosition(a.getStartPosition());l&&(a=new L(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=s,n=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;let n=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(n=>n.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(L.containsPosition(this._markers[i],t))return new LF(this._markers[i],i+1,this._markers.length)}}static _compareMarker(e,t){let i=eu(e.resource.toString(),t.resource.toString());return i===0&&(i=_i.compare(e.severity,t.severity)),i===0&&(i=L.compareRangesUsingStarts(e,t)),i}};kF=Sq([xq(1,nh)],kF);var IF=Ie("IMarkerNavigationService"),OF=class{constructor(e){this._markerService=e,this._provider=new yn}getMarkerList(e){for(let t of this._provider){let i=t.getMarkerList(e);if(i)return i}return new kF(e,this._markerService)}};OF=Sq([xq(0,nh)],OF);_o(IF,OF,!0);var Sk;(function(r){function e(t){switch(t){case mi.Ignore:return"severity-ignore "+ge.info.classNames;case mi.Info:return ge.info.classNames;case mi.Warning:return ge.warning.classNames;case mi.Error:return ge.error.classNames;default:return""}}r.className=e})(Sk||(Sk={}));Be((r,e)=>{let t=r.getColor(QH);if(t){let o=ge.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}let i=r.getColor(JH);if(i){let o=ge.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${i};
			}
		`)}let n=r.getColor(e8);if(n){let o=ge.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${n};
			}
		`)}});var Kue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zb=function(r,e){return function(t,i){e(t,i,r)}},Dq=class{constructor(e,t,i,n,o){this._openerService=n,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new G,this._editor=t;let s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(Zt(this._relatedBlock,"click",a=>{a.preventDefault();let l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new rb(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Ge(this._disposables)}update(e){let{source:t,message:i,relatedInformation:n,code:o}=e,s=((t==null?void 0:t.length)||0)+"()".length;o&&(typeof o=="string"?s+=o.length:s+=o.value.length);let a=sr(i);this._lines=a.length,this._longestLineLength=0;for(let u of a)this._longestLineLength=Math.max(u.length+s,this._longestLineLength);Li(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(let u of a)l=document.createElement("div"),l.innerText=u,u===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){let u=document.createElement("span");if(u.classList.add("details"),l.appendChild(u),t){let m=document.createElement("span");m.innerText=t,m.classList.add("source"),u.appendChild(m)}if(o)if(typeof o=="string"){let m=document.createElement("span");m.innerText=`(${o})`,m.classList.add("code"),u.appendChild(m)}else{this._codeLink=oe("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=p=>{this._openerService.open(o.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()};let m=X(this._codeLink,oe("span"));m.innerText=o.value,u.appendChild(this._codeLink)}}if(Li(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Ji(n)){let u=this._relatedBlock.appendChild(document.createElement("div"));u.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(let m of n){let p=document.createElement("div"),_=document.createElement("a");_.classList.add("filename"),_.innerText=`${dk(m.resource)}(${m.startLineNumber}, ${m.startColumn}): `,_.title=this._labelService.getUriLabel(m.resource),this._relatedDiagnostics.set(_,m);let v=document.createElement("span");v.innerText=m.message,p.appendChild(_),p.appendChild(v),this._lines+=1,u.appendChild(p)}}let c=this._editor.getOption(43),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case _i.Error:t=g("Error","Error");break;case _i.Warning:t=g("Warning","Warning");break;case _i.Info:t=g("Info","Info");break;case _i.Hint:t=g("Hint","Hint");break}let i=g("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),n=this._editor.getModel();return n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1&&(i=`${n.getLineContent(e.startLineNumber)}, ${i}`),i}},Rg=class Lq extends $b{constructor(e,t,i,n,o,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o);this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new G,this._onDidSelectRelatedInformation=new M,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=_i.Warning,this._backgroundColor=q.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Gue);let t=TF,i=que;this._severity===_i.Warning?(t=NF,i=Yue):this._severity===_i.Info&&(t=RF,i=Zue);let n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(lk),secondaryHeadingColor:e.getColor(ck)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(n=>this.editor.focus()));let t=[],i=this._menuService.createMenu(Lq.TitleMenu,this._contextKeyService);yK(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=X(e,oe(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Dq(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=L.lift(e),o=this.editor.getPosition(),s=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(s,this.computeRequiredHeight());let a=this.editor.getModel();if(a){let l=i>1?g("problems","{0} of {1} problems",t,i):g("change","{0} of {1} problem",t,i);this.setTitle(ar(a.uri),l)}this._icon.className=`codicon ${Sk.className(_i.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};Rg.TitleMenu=new Ce("gotoErrorTitleMenu");Rg=Kue([Zb(1,ht),Zb(2,cr),Zb(3,hs),Zb(4,Ue),Zb(5,be),Zb(6,Rc)],Rg);var kq=K_(Nf,PE),Iq=K_(Ta,Rf),Oq=K_(zo,W_),TF=z("editorMarkerNavigationError.background",{dark:kq,light:kq,hc:Ci},g("editorMarkerNavigationError","Editor marker navigation widget error color.")),que=z("editorMarkerNavigationError.headerBackground",{dark:si(TF,.1),light:si(TF,.1),hc:null},g("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),NF=z("editorMarkerNavigationWarning.background",{dark:Iq,light:Iq,hc:Ci},g("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Yue=z("editorMarkerNavigationWarning.headerBackground",{dark:si(NF,.1),light:si(NF,.1),hc:"#0C141F"},g("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),RF=z("editorMarkerNavigationInfo.background",{dark:Oq,light:Oq,hc:Ci},g("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Zue=z("editorMarkerNavigationInfo.headerBackground",{dark:si(RF,.1),light:si(RF,.1),hc:null},g("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Gue=z("editorMarkerNavigation.background",{dark:Yr,light:Yr,hc:Yr},g("editorMarkerNavigationBackground","Editor marker navigation widget background."));Be((r,e)=>{let t=r.getColor(_c);t&&e.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${t}; }`);let i=r.getColor(bc);i&&e.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${i}; }`)});var Xue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},xk=function(r,e){return function(t,i){e(t,i,r)}},Tq=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},mh=class Ek{constructor(e,t,i,n,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=o,this._sessionDispoables=new G,this._editor=e,this._widgetVisible=Pq.bindTo(this._contextKeyService)}static get(e){return e.getContribution(Ek.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Rg,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var n,o,s;(!((n=this._model)===null||n===void 0?void 0:n.selected)||!L.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,i.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:L.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){let t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new V(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Tq(this,void 0,void 0,function*(){if(this._editor.hasModel()){let i=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(i.move(e,this._editor.getModel(),this._editor.getPosition()),!i.selected)return;if(i.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();let n=yield this._editorService.openCodeEditor({resource:i.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:i.selected.marker}},this._editor);n&&(Ek.get(n).close(),Ek.get(n).nagivate(e,t))}else this._widget.showAtMarker(i.selected.marker,i.selected.index,i.selected.total)}})}};mh.ID="editor.contrib.markerController";mh=Xue([xk(1,IF),xk(2,be),xk(3,it),xk(4,Ue)],mh);var CS=class extends pe{constructor(e,t,i){super(i);this._next=e,this._multiFile=t}run(e,t){return Tq(this,void 0,void 0,function*(){t.hasModel()&&mh.get(t).nagivate(this._next,this._multiFile)})}},Il=class extends CS{constructor(){super(!0,!1,{id:Il.ID,label:Il.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:512|66,weight:100},menuOpts:{menuId:Rg.TitleMenu,title:Il.LABEL,icon:Gi("marker-navigation-next",ge.arrowDown,g("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};Il.ID="editor.action.marker.next";Il.LABEL=g("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var Pg=class extends CS{constructor(){super(!1,!1,{id:Pg.ID,label:Pg.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:1024|512|66,weight:100},menuOpts:{menuId:Rg.TitleMenu,title:Il.LABEL,icon:Gi("marker-navigation-previous",ge.arrowUp,g("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};Pg.ID="editor.action.marker.prev";Pg.LABEL=g("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var Nq=class extends CS{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:g("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:66,weight:100},menuOpts:{menuId:Ce.MenubarGoMenu,title:g({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}},Rq=class extends CS{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:g("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:1024|66,weight:100},menuOpts:{menuId:Ce.MenubarGoMenu,title:g({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}};He(mh.ID,mh);ae(Il);ae(Pg);ae(Nq);ae(Rq);var Pq=new _e("markersNavigationVisible",!1),Que=fi.bindToContribution(mh.get);ce(new Que({id:"closeMarkersNavigation",precondition:Pq,handler:r=>r.close(),kbOpts:{weight:100+50,kbExpr:j.focus,primary:9,secondary:[1024|9]}}));var Jue=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Aq=function(r,e){return function(t,i){e(t,i,r)}},Wa=oe,jq=class{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Mq={type:1,filter:{include:mt.QuickFix}},Dk=class{constructor(e,t,i,n){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=n,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),s=[];for(let a of t){let l=a.range.startLineNumber===n?a.range.startColumn:1,c=a.range.endLineNumber===n?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(i.uri,a);if(!d)continue;let h=new L(e.range.startLineNumber,l,e.range.startLineNumber,c);s.push(new jq(this,h,d))}return s}renderHoverParts(e,t,i){if(!e.length)return H.None;let n=new G;e.forEach(s=>t.appendChild(this.renderMarkerHover(s,n)));let o=e.length===1?e[0]:e.sort((s,a)=>_i.compare(s.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(o,i,n),n}renderMarkerHover(e,t){let i=Wa("div.hover-row"),n=X(i,Wa("div.marker.hover-contents")),{source:o,message:s,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(n);let c=X(n,Wa("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=s,o||a)if(a&&typeof a!="string"){let d=Wa("span");if(o){let p=X(d,Wa("span"));p.innerText=o}let h=X(d,Wa("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(J(h,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));let u=X(h,Wa("span"));u.innerText=a.value;let m=X(n,d);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{let d=X(n,Wa("span"));d.style.opacity="0.6",d.style.paddingLeft="6px",d.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(Ji(l))for(let{message:d,resource:h,startLineNumber:u,startColumn:m}of l){let p=X(n,Wa("div"));p.style.marginTop="8px";let _=X(p,Wa("a"));_.innerText=`${ar(h)}(${u}, ${m}): `,_.style.cursor="pointer",t.add(J(_,"click",C=>{C.stopPropagation(),C.preventDefault(),this._openerService&&this._openerService.open(h,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:u,startColumn:m}}}).catch(we)}));let v=X(p,Wa("span"));v.innerText=d,this._editor.applyFontInfo(v)}return i}renderMarkerStatusbar(e,t,i){if((e.marker.severity===_i.Error||e.marker.severity===_i.Warning||e.marker.severity===_i.Info)&&t.addAction({label:g("view problem","View Problem"),commandId:Il.ID,run:()=>{this._hover.hide(),mh.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){let n=t.append(Wa("div"));this.recentMarkerCodeActionsInfo&&(OC.makeKey(this.recentMarkerCodeActionsInfo.marker)===OC.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=g("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);let o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?H.None:i.add(fa(()=>n.textContent=g("checkingForQuickFixes","Checking for quick fixes..."),200));n.textContent||(n.textContent=String.fromCharCode(160));let s=this.getCodeActions(e.marker);i.add(Re(()=>s.cancel())),s.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),n.textContent=g("noQuickFixes","No quick fixes available");return}n.style.display="none";let l=!1;i.add(Re(()=>{l||a.dispose()})),t.addAction({label:g("quick fixes","Quick Fix..."),commandId:ch.Id,run:c=>{l=!0;let d=lh.get(this._editor),h=ci(c);this._hover.hide(),d.showCodeActions(Mq,a,{x:h.left+6,y:h.top+h.height+6})}})},we)}}getCodeActions(e){return At(t=>qC(this._editor.getModel(),new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Mq,Pa.None,t))}};Dk=Jue([Aq(2,v_),Aq(3,cr)],Dk);Be((r,e)=>{let t=r.getColor(_c);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);let i=r.getColor(bc);i&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${i}; }`)});var Lk="editor.action.inlineSuggest.commit";var SS=class{constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}renderForScreenReader(e){if(this.parts.length===0)return"";let t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return eme(i,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}},Fq=class{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}};function eme(r,e){let t=new Fq(r),i=e.map(n=>{let o=L.lift(n.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:n.text}});i.sort((n,o)=>o.startOffset-n.startOffset);for(let n of i)r=r.substring(0,n.startOffset)+n.text+r.substring(n.endOffset);return r}var kk=class{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}},xS=class extends H{constructor(e){super();this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}};function Bq(r,e){return r===e?!0:!r||!e?!1:r.range.equalsRange(e.range)&&r.text===e.text&&r.command===e.command}function Ik(r,e,t,i,n=0){if(r.range.startLineNumber!==r.range.endLineNumber)return;let o=e.getLineContent(r.range.startLineNumber),s=Lt(o).length;if(r.range.startColumn-1<=s){let m=Lt(r.text).length,p=o.substring(r.range.startColumn-1,s),_=L.fromPositions(r.range.getStartPosition().delta(0,p.length),r.range.getEndPosition()),v=r.text.startsWith(p)?r.text.substring(p.length):r.text.substring(m);r={range:_,text:v,command:r.command}}let l=e.getValueInRange(r.range),c=tme(l,r.text);if(!c)return;let d=r.range.startLineNumber,h=new Array;if(t==="prefix"){let m=c.filter(p=>p.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==l.length)return}let u=r.text.length-n;for(let m of c){let p=r.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===r.range.startLineNumber&&p<i.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;let _=m.modifiedStart+m.modifiedLength,v=Math.max(m.modifiedStart,Math.min(_,u)),C=r.text.substring(m.modifiedStart,v),w=r.text.substring(v,Math.max(m.modifiedStart,_));if(C.length>0){let S=sr(C);h.push(new kk(p,S,!1))}if(w.length>0){let S=sr(w);h.push(new kk(p,S,!0))}}return new SS(d,h,0)}var Hc;function tme(r,e){if((Hc==null?void 0:Hc.originalValue)===r&&(Hc==null?void 0:Hc.newValue)===e)return Hc==null?void 0:Hc.changes;{let t=ime(r,e);return Hc={originalValue:r,newValue:e,changes:t},t}}function ime(r,e){if(r.length>5e3||e.length>5e3)return;function t(l){let c=0;for(let d=0,h=l.length;d<h;d++){let u=l.charCodeAt(d);u>c&&(c=u)}return c}let i=Math.max(t(r),t(e));function n(l){if(l<0)throw new Error("unexpected");return i+l+1}function o(l){let c=0,d=0,h=new Int32Array(l.length);for(let u=0,m=l.length;u<m;u++){let p=d*100+c;l[u]==="("?(h[u]=n(2*p),c++):l[u]===")"?(h[u]=n(2*p+1),c===1&&d++,c=Math.max(c-1,0)):h[u]=l.charCodeAt(u)}return h}let s=o(r),a=o(e);return new ls({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}var nme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},rme=function(r,e){return function(t,i){e(t,i,r)}},fh=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Ok=class extends H{constructor(e,t,i){super();this.editor=e,this.cache=t,this.commandService=i,this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Mi),this.active=!1,this.disposed=!1,this._register(i.onDidExecuteCommand(n=>{new Set([Jw.id,ey.id,Lu.Tab.id,Lu.DeleteLeft.id,Lu.DeleteRight.id,Lk,"acceptSelectedSuggestion"]).has(n.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(n=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Re(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){!this.editor.getOption(54).enabled||this.session&&this.session.isValid||this.trigger(go.Automatic)}trigger(e){if(this.completionSession.value){e===go.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new Wq(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return fh(this,void 0,void 0,function*(){let t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Ok=nme([rme(2,jt)],Ok);var Wq=class extends xS{constructor(e,t,i,n,o,s){super(e);this.triggerPosition=t,this.shouldUpdate=i,this.commandService=n,this.cache=o,this.initialTriggerKind=s,this.minReservedLineCount=0,this.updateOperation=this._register(new Mi),this.updateSoon=this._register(new dt(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=go.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{let l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;let c=l.sourceProvider;c.handleItemDidShow&&c.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(Re(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(vw.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;let e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(!!this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return fh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();let t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){let i=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[i].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return fh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();let t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){let i=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[i].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return fh(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===go.Explicit?yield this.updateOperation.value.promise:yield this.update(go.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==go.Explicit&&(yield this.update(go.Explicit))})}hasMultipleInlineCompletions(){var e;return fh(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){let e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Ik(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){let e=this.currentCachedCompletion;if(!!e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return fh(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;let t=this.editor.getPosition(),i=At(o=>fh(this,void 0,void 0,function*(){let s;try{s=yield AF(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},o)}catch(a){we(a);return}o.isCancellationRequested||(this.cache.setValue(this.editor,s,e),this.onDidChangeEmitter.fire())})),n=new Tk(i,e);this.updateOperation.value=n,yield i,this.updateOperation.value===n&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;let e=this.currentCompletion;e&&this.commit(e)}commit(e){let t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[Ut.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Qt):t==null||t.dispose(),this.onDidChangeEmitter.fire()}},Tk=class{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}},PF=class extends H{constructor(e,t,i,n){super();this.triggerKind=n;let o=e.deltaDecorations([],t.items.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._register(Re(()=>{e.deltaDecorations(o,[])})),this.completions=t.items.map((s,a)=>new Uq(s,o[a])),this._register(e.onDidChangeModelContent(()=>{let s=!1,a=e.getModel();for(let l of this.completions){let c=a.getDecorationRange(l.decorationId);if(!c){we(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(c)||(s=!0,l.synchronizedRange=c)}s&&i()})),this._register(t)}},Uq=class{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}};function ome(r,e){let t=e.getWordAtPosition(r),i=e.getLineMaxColumn(r.lineNumber);return t?new L(r.lineNumber,t.startColumn,r.lineNumber,i):L.fromPositions(r,r.with(void 0,i))}function AF(r,e,t,i=Me.None){return fh(this,void 0,void 0,function*(){let n=ome(r,e),o=vw.all(e),s=yield Promise.all(o.map(l=>fh(this,void 0,void 0,function*(){let c=yield l.provideInlineCompletions(e,r,t,i);return{completions:c,provider:l,dispose:()=>{c&&l.freeInlineCompletions(c)}}}))),a=new Map;for(let l of s){let c=l.completions;if(c)for(let d of c.items.map(h=>({text:h.text,range:h.range?L.lift(h.range):n,command:h.command,sourceProvider:l.provider,sourceInlineCompletions:c,sourceInlineCompletion:h})))d.range.startLineNumber===d.range.endLineNumber&&a.set(JSON.stringify({text:d.text,range:d.range}),d)}return{items:[...a.values()],dispose:()=>{for(let l of s)l.dispose()}}})}function Gb(r,e){if(!e)return e;let t=r.getValueInRange(e.range),i=nl(t,e.text),n=r.getOffsetAt(e.range.getStartPosition())+i,o=r.getPositionAt(n),s=t.substr(i),a=Vm(s,e.text),l=r.getPositionAt(Math.max(n,r.getOffsetAt(e.range.getEndPosition())-a));return{range:L.fromPositions(o,l),text:e.text.substr(i,e.text.length-i-a)}}var Qs=class{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,i=this.value.charCodeAt(e),n;if(n=Qs._table[i],typeof n=="number")return this.pos+=1,{type:n,pos:e,len:1};if(Qs.isDigitCharacter(i)){n=8;do t+=1,i=this.value.charCodeAt(e+t);while(Qs.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}if(Qs.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(e+ ++t);while(Qs.isVariableCharacter(i)||Qs.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}n=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof Qs._table[i]=="undefined"&&!Qs.isDigitCharacter(i)&&!Qs.isVariableCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}};Qs._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};var Ag=class{constructor(){this._children=[]}appendChild(e){return e instanceof Pr&&this._children[this._children.length-1]instanceof Pr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.slice(0);o.splice(n,1,...t),i._children=o,function s(a,l){for(let c of a)c.parent=l,s(c.children,c)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof ES)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}},Pr=class extends Ag{constructor(e){super();this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Pr(this.value)}},jF=class extends Ag{},ws=class extends jF{constructor(e){super();this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof jg?this._children[0]:void 0}clone(){let e=new ws(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}},jg=class extends Ag{constructor(){super(...arguments);this.options=[]}appendChild(e){return e instanceof Pr&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new jg;return this.options.forEach(e.appendChild,e),e}},Nk=class extends Ag{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(e){let t=this,i=!1,n=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(o=>o instanceof Ua&&Boolean(o.elseValue))&&(n=this._replace([])),n}_replace(e){let t="";for(let i of this._children)if(i instanceof Ua){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){let e=new Nk;return e.regexp=new RegExp(this.regexp.source,""+(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}},Ua=class extends Ag{constructor(e,t,i,n){super();this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map((i,n)=>n===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):e}clone(){return new Ua(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Xb=class extends jF{constructor(e){super();this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Pr(t)],!0):!1}clone(){let e=new Xb(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}};function Vq(r,e){let t=[...r];for(;t.length>0;){let i=t.shift();if(!e(i))break;t.unshift(...i.children)}}var ES=class extends Ag{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(i){return i instanceof ws&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(n=>n===e?(i=!0,!1):(t+=n.len(),!0)),i?t:-1}fullLen(e){let t=0;return Vq([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:i}=e;for(;i;)i instanceof ws&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Xb&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new ES;return this._children=this.children.map(t=>t.clone()),e}walk(e){Vq(this.children,e)}},gh=class{constructor(){this._scanner=new Qs,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){this._scanner.text(e),this._token=this._scanner.next();let n=new ES;for(;this._parse(n););let o=new Map,s=[],a=0;n.walk(l=>(l instanceof ws&&(a+=1,l.isFinalTabstop?o.set(0,void 0):!o.has(l.index)&&l.children.length>0?o.set(l.index,l.children):s.push(l)),!0));for(let l of s){let c=o.get(l.index);if(c){let d=new ws(l.index);d.transform=l.transform;for(let h of c)d.appendChild(h.clone());n.replace(l,[d])}}return i||(i=a>0&&t),!o.has(0)&&i&&n.appendChild(new ws(0)),n}_accept(e,t){if(e===void 0||this._token.type===e){let i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let n=this._scanner.next();if(n.type!==0&&n.type!==4&&n.type!==5)return!1}this._token=this._scanner.next()}let i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Pr(t)),!0):!1}_parseTabstopOrVariableName(e){let t,i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new ws(Number(t)):new Xb(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t,i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);let o=new ws(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Pr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new jg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseChoiceElement(e){let t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let n;if((n=this._accept(5,!0))?n=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||n:n=this._accept(void 0,!0),!n)return this._backTo(t),!1;i.push(n)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Pr(i.join(""))),!0)}_parseComplexVariable(e){let t,i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);let o=new Xb(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Pr("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseTransform(e){let t=new Nk,i="",n="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,i+=o;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Pr(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,n)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);let n=this._accept(8,!0);if(n)if(i){if(this._accept(4))return e.appendChild(new Ua(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Ua(Number(n))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Ua(Number(n),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Ua(Number(n),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Ua(Number(n),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Ua(Number(n),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Ua(Number(n),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Pr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Kn=new Uint8Array(16),Jr=[];for(let r=0;r<256;r++)Jr.push(r.toString(16).padStart(2,"0"));var MF;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?MF=crypto.getRandomValues.bind(crypto):MF=function(r){for(let e=0;e<r.length;e++)r[e]=Math.floor(Math.random()*256);return r};function zq(){MF(Kn),Kn[6]=Kn[6]&15|64,Kn[8]=Kn[8]&63|128;let r=0,e="";return e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+="-",e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+="-",e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+="-",e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+="-",e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e+=Jr[Kn[r++]],e}var FF="code-workspace";function BF(r){let e=r;return typeof(e==null?void 0:e.id)=="string"&&ve.isUri(e.uri)}function Hq(r){if(r.configuration)return{id:r.id,configPath:r.configuration};if(r.folders.length===1)return{id:r.id,uri:r.folders[0].uri}}var WF=class{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let i=t.resolve(e);if(i!==void 0)return i}}},UF=class{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){let{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){let o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,n=o.multiline)}if(i&&n&&e.snippet){let o=this._model.getLineContent(this._selection.startLineNumber),s=Lt(o,0,this._selection.startColumn-1),a=s;e.snippet.walk(c=>c===e?!1:(c instanceof Pr&&(a=Lt(sr(c.value).pop())),!0));let l=nl(a,s);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,d,h)=>`${d}${a.substr(l)}${h}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){let i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}},VF=class{constructor(e,t){this._labelService=e,this._model=t}resolve(e){let{name:t}=e;if(t==="TM_FILENAME")return $l(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){let i=$l(this._model.uri.fsPath),n=i.lastIndexOf(".");return n<=0?i:i.slice(0,n)}else{if(t==="TM_DIRECTORY")return r1(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(Bp(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}},zF=class{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if(e.name!=="CLIPBOARD")return;let t=this._readClipboardText();if(!!t){if(this._spread){let i=t.split(/\r\n|\n|\r/).filter(n=>!tx(n));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}},HF=class{constructor(e,t){this._model=e,this._selection=t}resolve(e){let{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=st.getComments(i);if(!!n){if(t==="LINE_COMMENT")return n.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return n.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return n.blockCommentEndToken||void 0}}},Va=class{constructor(){this._date=new Date}resolve(e){let{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Va.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Va.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Va.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Va.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}};Va.dayNames=[g("Sunday","Sunday"),g("Monday","Monday"),g("Tuesday","Tuesday"),g("Wednesday","Wednesday"),g("Thursday","Thursday"),g("Friday","Friday"),g("Saturday","Saturday")];Va.dayNamesShort=[g("SundayShort","Sun"),g("MondayShort","Mon"),g("TuesdayShort","Tue"),g("WednesdayShort","Wed"),g("ThursdayShort","Thu"),g("FridayShort","Fri"),g("SaturdayShort","Sat")];Va.monthNames=[g("January","January"),g("February","February"),g("March","March"),g("April","April"),g("May","May"),g("June","June"),g("July","July"),g("August","August"),g("September","September"),g("October","October"),g("November","November"),g("December","December")];Va.monthNamesShort=[g("JanuaryShort","Jan"),g("FebruaryShort","Feb"),g("MarchShort","Mar"),g("AprilShort","Apr"),g("MayShort","May"),g("JuneShort","Jun"),g("JulyShort","Jul"),g("AugustShort","Aug"),g("SeptemberShort","Sep"),g("OctoberShort","Oct"),g("NovemberShort","Nov"),g("DecemberShort","Dec")];var $F=class{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=Hq(this._workspaceService.getWorkspace());if(!!t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(BF(e))return $l(e.uri.path);let t=$l(e.configPath.path);return t.endsWith(FF)&&(t=t.substr(0,t.length-FF.length-1)),t}_resoveWorkspacePath(e){if(BF(e))return hk(e.uri.fsPath);let t=$l(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?hk(i):"/"}},KF=class{resolve(e){let{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return zq()}};Be((r,e)=>{function t(i){let n=r.getColor(i);return n?n.toString():"transparent"}e.addRule(`.monaco-editor .snippet-placeholder { background-color: ${t(UH)}; outline-color: ${t(VH)}; }`),e.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${t(zH)}; outline-color: ${t(HH)}; }`)});var Js=class{constructor(e,t,i,n){this._editor=e,this._snippet=t,this._offset=i,this._snippetLineLeadingWhitespace=n,this._nestingLevel=1,this._placeholderGroups=VT(t.placeholders,ws.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let e=this._editor.getModel();this._editor.changeDecorations(t=>{for(let i of this._snippet.placeholders){let n=this._snippet.offset(i),o=this._snippet.fullLen(i),s=L.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+o)),a=i.isFinalTabstop?Js._decor.inactiveFinal:Js._decor.inactive,l=t.addDecoration(s,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let n=[];for(let o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){let s=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(s),l=this._editor.getModel().getValueInRange(a),c=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);n.push(Ut.replace(a,c.join(this._editor.getModel().getEOL())))}n.length>0&&this._editor.executeEdits("snippet.placeholderTransform",n)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);let i=this._editor.getModel().changeDecorations(n=>{let o=new Set,s=[];for(let a of this._placeholderGroups[this._placeholderGroupsIdx]){let l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);s.push(new le(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),n.changeDecorationOptions(l,a.isFinalTabstop?Js._decor.activeFinal:Js._decor.active),o.add(a);for(let d of this._snippet.enclosingPlaceholders(a)){let h=this._placeholderDecorations.get(d);n.changeDecorationOptions(h,d.isFinalTabstop?Js._decor.activeFinal:Js._decor.active),o.add(d)}}for(let[a,l]of this._placeholderDecorations)o.has(a)||n.changeDecorationOptions(l,a.isFinalTabstop?Js._decor.inactiveFinal:Js._decor.inactive);return s});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof ws){let i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let i;for(let n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));let o=this._placeholderDecorations.get(n),s=this._editor.getModel().getDecorationRange(o);if(!s){e.delete(n.index);break}i.push(s)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){let t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(let n of this._placeholderGroups[this._placeholderGroupsIdx]){let o=e.shift();console.assert(!o._placeholderDecorations);let s=o._snippet.placeholderInfo.last.index;for(let l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=n.index+(s+1)/this._nestingLevel:l.index=n.index+l.index/this._nestingLevel;this._snippet.replace(n,o._snippet.children);let a=this._placeholderDecorations.get(n);i.removeDecoration(a),this._placeholderDecorations.delete(n);for(let l of o._snippet.placeholders){let c=o._snippet.offset(l),d=o._snippet.fullLen(l),h=L.fromPositions(t.getPositionAt(o._offset+c),t.getPositionAt(o._offset+c+d)),u=i.addDecoration(h,Js._decor.inactive);this._placeholderDecorations.set(l,u)}}this._placeholderGroups=VT(this._snippet.placeholders,ws.compareByIndex)})}};Js._decor={active:ze.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:ze.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:ze.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:ze.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var $q={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},ea=class{constructor(e,t,i=$q){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=i}static adjustWhitespace(e,t,i,n,o){let s=e.getLineContent(t.lineNumber),a=Lt(s,0,t.column-1),l;return i.walk(c=>{if(!(c instanceof Pr)||c.parent instanceof jg)return!0;let d=c.value.split(/\r\n|\r|\n/);if(n){let u=i.offset(c);if(u===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??i.toString();let m=l.charCodeAt(u-1);(m===10||m===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let m=1;m<d.length;m++)d[m]=e.normalizeIndentation(a+d[m])}let h=d.join(e.getEOL());return h!==c.value&&(c.parent.replace(c,[new Pr(h)]),l=void 0),!0}),a}static adjustSelection(e,t,i,n){if(i!==0||n!==0){let{positionLineNumber:o,positionColumn:s}=t,a=s-i,l=s+n,c=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=le.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,i,n,o,s,a,l){let c=[],d=[];if(!e.hasModel())return{edits:c,snippets:d};let h=e.getModel(),u=e.invokeWithinContext(D=>D.get(Xx)),m=e.invokeWithinContext(D=>new VF(D.get(Rc),h)),p=()=>a,_=0,v=h.getValueInRange(ea.adjustSelection(h,e.getSelection(),i,0)),C=h.getValueInRange(ea.adjustSelection(h,e.getSelection(),0,n)),w=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),S=e.getSelections().map((D,I)=>({selection:D,idx:I})).sort((D,I)=>L.compareRangesUsingStarts(D.selection,I.selection));for(let{selection:D,idx:I}of S){let A=ea.adjustSelection(h,D,i,0),O=ea.adjustSelection(h,D,0,n);v!==h.getValueInRange(A)&&(A=D),C!==h.getValueInRange(O)&&(O=D);let N=D.setStartPosition(A.startLineNumber,A.startColumn).setEndPosition(O.endLineNumber,O.endColumn),F=new gh().parse(t,!0,o),Y=N.getStartPosition(),K=ea.adjustWhitespace(h,Y,F,s||I>0&&w!==h.getLineFirstNonWhitespaceColumn(D.positionLineNumber),!0);F.resolveVariables(new WF([m,new zF(p,I,S.length,e.getOption(70)==="spread"),new UF(h,D,I,l),new HF(h,D),new Va,new $F(u),new KF]));let ee=h.getOffsetAt(Y)+_;_+=F.toString().length-h.getValueLengthInRange(N),c[I]=Ut.replace(N,F.toString()),c[I].identifier={major:I,minor:0},d[I]=new Js(e,F,ee,K)}return{edits:c,snippets:d}}dispose(){Ge(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:e,snippets:t}=ea.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,i=>this._snippets[0].hasPlaceholder?this._move(!0):i.filter(n=>!!n.identifier).map(n=>le.fromPositions(n.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=$q){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:i,snippets:n}=ea.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",i,o=>{for(let s of this._snippets)s.merge(n);return console.assert(n.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):o.filter(s=>!!s.identifier).map(s=>le.fromPositions(s.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let i of this._snippets){let n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let i of this._snippets){let n=i.computePossibleSelections();if(t.size===0)for(let[o,s]of n){s.sort(L.compareRangesUsingStarts);for(let a of e)if(s[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,s)=>{o.push(...n.get(s))})}e.sort(L.compareRangesUsingStarts);for(let[i,n]of t){if(n.length!==e.length){t.delete(i);continue}n.sort(L.compareRangesUsingStarts);for(let o=0;o<n.length;o++)if(!n[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};var DS=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},gt={Visible:new _e("suggestWidgetVisible",!1,g("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new _e("suggestWidgetDetailsVisible",!1,g("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new _e("suggestWidgetMultipleSuggestions",!1,g("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new _e("suggestionMakesTextEdit",!0,g("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new _e("acceptSuggestionOnEnter",!0,g("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new _e("suggestionHasInsertAndReplaceRange",!1,g("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new _e("suggestionInsertMode",void 0,{type:"string",description:g("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new _e("suggestionCanResolve",!1,g("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},$c=new Ce("suggestWidgetStatusBar"),Kq=class{constructor(e,t,i,n){this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=Ko.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),L.isIRange(t.range)?(this.editStart=new V(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new V(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new V(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new V(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new V(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new V(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range.insert)||L.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof n.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return DS(this,void 0,void 0,function*(){if(!this._resolveCache){let t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._isResolved=!0,t.dispose()},i=>{co(i)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}},Qb=class{constructor(e=2,t=new Set,i=new Set,n=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=n}};Qb.default=new Qb;var LS;function qq(){return LS}var Yq=class{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}};function qF(r,e,t=Qb.default,i={triggerKind:0},n=Me.None){return DS(this,void 0,void 0,function*(){let o=new or(!0);e=e.clone();let s=r.getWordAtPosition(e),a=s?new L(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn):L.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},c=[],d=new G,h=[],u=!1,m=(_,v,C)=>{var w,S,D;if(!!v){for(let I of v.suggestions)if(!t.kindFilter.has(I.kind)){if(!t.showDeprecated&&((w=I==null?void 0:I.tags)===null||w===void 0?void 0:w.includes(1)))continue;I.range||(I.range=l),I.sortText||(I.sortText=typeof I.label=="string"?I.label:I.label.label),!u&&I.insertTextRules&&I.insertTextRules&4&&(u=gh.guessNeedsClipboard(I.insertText)),c.push(new Kq(e,I,v,_))}bp(v)&&d.add(v),h.push({providerName:(S=_._debugDisplayName)!==null&&S!==void 0?S:"unkown_provider",elapsedProvider:(D=v.duration)!==null&&D!==void 0?D:-1,elapsedOverall:C.elapsed()})}},p=(()=>DS(this,void 0,void 0,function*(){if(!LS||t.kindFilter.has(27)||t.providerFilter.size>0&&!t.providerFilter.has(LS))return;let _=new or(!0),v=yield LS.provideCompletionItems(r,e,i,n);m(LS,v,_)}))();for(let _ of po.orderedGroups(r)){let v=c.length;if(yield Promise.all(_.map(C=>DS(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(C)))try{let w=new or(!0),S=yield C.provideCompletionItems(r,e,i,n);m(C,S,w)}catch(w){Qt(w)}}))),v!==c.length||n.isCancellationRequested)break}return yield p,n.isCancellationRequested?(d.dispose(),Promise.reject(Hl())):new Yq(c.sort(ZF(t.snippetSortOrder)),u,{entries:h,elapsed:o.elapsed()},d)})}function YF(r,e){if(r.sortTextLow&&e.sortTextLow){if(r.sortTextLow<e.sortTextLow)return-1;if(r.sortTextLow>e.sortTextLow)return 1}return r.completion.label<e.completion.label?-1:r.completion.label>e.completion.label?1:r.completion.kind-e.completion.kind}function sme(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return YF(r,e)}function ame(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return YF(r,e)}var Rk=new Map;Rk.set(0,sme);Rk.set(2,ame);Rk.set(1,YF);function ZF(r){return Rk.get(r)}Ke.registerCommand("_executeCompletionItemProvider",(r,...e)=>DS(void 0,void 0,void 0,function*(){let[t,i,n,o]=e;xt(ve.isUri(t)),xt(V.isIPosition(i)),xt(typeof n=="string"||!n),xt(typeof o=="number"||!o);let s=yield r.get(fn).createModelReference(t);try{let a={incomplete:!1,suggestions:[]},l=[],c=yield qF(s.object.textEditorModel,V.lift(i),void 0,{triggerCharacter:n,triggerKind:n?1:0});for(let d of c.items)l.length<(o??0)&&l.push(d.resolve(Me.None)),a.incomplete=a.incomplete||d.container.incomplete,a.suggestions.push(d.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{s.dispose()}}));var GF=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};po.register("*",GF);function Zq(r,e){setTimeout(()=>{GF.onlyOnceSuggestions.push(...e),r.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(GF))},0)}var lme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Gq=function(r,e){return function(t,i){e(t,i,r)}},Xq={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},An=class kS{constructor(e,t,i){this._editor=e,this._logService=t,this._snippetListener=new G,this._modelVersionId=-1,this._inSnippet=kS.InSnippetMode.bindTo(i),this._hasNextTabstop=kS.HasNextTabstop.bindTo(i),this._hasPrevTabstop=kS.HasPrevTabstop.bindTo(i)}static get(e){return e.getContribution(kS.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t=="undefined"?Xq:Object.assign(Object.assign({},Xq),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){!this._editor.hasModel()||(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new ea(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(i=>le.fromPositions(i.getStartPosition())));let[t]=e.options;Zq(this._editor,e.options.map((i,n)=>({kind:13,label:i.value,insertText:i.value,sortText:"a".repeat(n+1),range:L.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};An.ID="snippetController2";An.InSnippetMode=new _e("inSnippetMode",!1,g("inSnippetMode","Whether the editor in current in snippet mode"));An.HasNextTabstop=new _e("hasNextTabstop",!1,g("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));An.HasPrevTabstop=new _e("hasPrevTabstop",!1,g("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));An=lme([Gq(1,hr),Gq(2,be)],An);He(An.ID,An);var Pk=fi.bindToContribution(An.get);ce(new Pk({id:"jumpToNextSnippetPlaceholder",precondition:fe.and(An.InSnippetMode,An.HasNextTabstop),handler:r=>r.next(),kbOpts:{weight:100+30,kbExpr:j.editorTextFocus,primary:2}}));ce(new Pk({id:"jumpToPrevSnippetPlaceholder",precondition:fe.and(An.InSnippetMode,An.HasPrevTabstop),handler:r=>r.prev(),kbOpts:{weight:100+30,kbExpr:j.editorTextFocus,primary:1024|2}}));ce(new Pk({id:"leaveSnippet",precondition:An.InSnippetMode,handler:r=>r.cancel(!0),kbOpts:{weight:100+30,kbExpr:j.editorTextFocus,primary:9,secondary:[1024|9]}}));ce(new Pk({id:"acceptSnippet",precondition:An.InSnippetMode,handler:r=>r.finish()}));var cme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Qq=function(r,e){return function(t,i){e(t,i,r)}},Ak=class{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;let n=i[0].score[0];for(let o=0;o<i.length;o++){let{score:s,completion:a}=i[o];if(s[0]!==n)break;if(a.preselect)return o}return 0}},XF=class extends Ak{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}},Jq=class extends Ak{constructor(){super("recentlyUsed");this._cache=new Ao(300,.66),this._seq=0}memorize(e,t,i){let n=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;let n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);let o=i[0].score[0],s=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===o;c++){let d=`${e.getLanguageId()}/${i[c].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===i[c].completion.kind&&h.insertText===i[c].completion.insertText&&(l=h.touch,a=c),i[c].completion.preselect&&s===-1)return s=c}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(let[i,n]of e)n.touch=t,n.type=typeof n.type=="number"?n.type:mT(n.type),this._cache.set(i,n);this._seq=this._cache.size}},eY=class extends Ak{constructor(){super("recentlyUsedByPrefix");this._trie=Gl.forStrings(),this._seq=0}memorize(e,t,i){let{word:n}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${n}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);let o=`${e.getLanguageId()}/${n}`,s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(let a=0;a<i.length;a++){let{kind:l,insertText:c}=i[a].completion;if(l===s.type&&c===s.insertText)return a}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(let[t,i]of e)i.type=typeof i.type=="number"?i.type:mT(i.type),this._trie.set(t,i)}}},IS=class jk{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new G,this._persistSoon=new dt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===Rb.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;let n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((i=this._strategy)===null||i===void 0?void 0:i.name)!==n){this._saveState();let o=jk._strategyCtors.get(n)||XF;this._strategy=new o;try{let a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${jk._storagePrefix}/${n}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){let t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${jk._storagePrefix}/${this._strategy.name}`,i,t,1)}}};IS._strategyCtors=new Map([["recentlyUsedByPrefix",eY],["recentlyUsed",Jq],["first",XF]]);IS._storagePrefix="suggest/memories";IS=cme([Qq(0,Zo),Qq(1,Mt)],IS);var QF=Ie("ISuggestMemories");_o(QF,IS,!0);var dme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},hme=function(r,e){return function(t,i){e(t,i,r)}},Jb=class tY{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=tY.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){let e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){let t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let i=this._editor.getModel(),n=this._editor.getSelection(),o=i.getWordAtPosition(n.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===n.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};Jb.AtEnd=new _e("atEndOfWord",!1);Jb=dme([hme(1,be)],Jb);var ume=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},mme=function(r,e){return function(t,i){e(t,i,r)}},Qu=class Mk{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Mk.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(Mk._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let n=i;for(;n=(n+t.items.length+(e?1:-1))%t.items.length,!(n===i||!t.items[n].completion.additionalTextEdits););return n}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(!!this._model)try{this._ignore=!0,this._index=Mk._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Qu.OtherSuggestions=new _e("hasOtherSuggestions",!1);Qu=ume([mme(1,be)],Qu);var JF=class{constructor(e,t,i){this._disposables=new G,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(n=>{if(this._active&&!t.isFrozen()){let o=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!Ji(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new rc;for(let i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}};var fme=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},eo=class{provideSelectionRanges(e,t){return fme(this,void 0,void 0,function*(){let i=[];for(let n of t){let o=[];i.push(o);let s=new Map;yield new Promise(a=>eo._bracketsRightYield(a,0,e,n,s)),yield new Promise(a=>eo._bracketsLeftYield(a,0,e,n,s,o))}return i})}static _bracketsRightYield(e,t,i,n,o){let s=new Map,a=Date.now();for(;;){if(t>=eo._maxRounds){e();break}if(!n){e();break}let l=i.findNextBracket(n);if(!l){e();break}if(Date.now()-a>eo._maxDuration){setTimeout(()=>eo._bracketsRightYield(e,t+1,i,n,o));break}let d=l.close[0];if(l.isOpen){let h=s.has(d)?s.get(d):0;s.set(d,h+1)}else{let h=s.has(d)?s.get(d):0;if(h-=1,s.set(d,Math.max(0,h)),h<0){let u=o.get(d);u||(u=new yn,o.set(d,u)),u.push(l.range)}}n=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,o,s){let a=new Map,l=Date.now();for(;;){if(t>=eo._maxRounds&&o.size===0){e();break}if(!n){e();break}let c=i.findPrevBracket(n);if(!c){e();break}if(Date.now()-l>eo._maxDuration){setTimeout(()=>eo._bracketsLeftYield(e,t+1,i,n,o,s));break}let h=c.close[0];if(c.isOpen){let u=a.has(h)?a.get(h):0;if(u-=1,a.set(h,Math.max(0,u)),u<0){let m=o.get(h);if(m){let p=m.shift();m.size===0&&o.delete(h);let _=L.fromPositions(c.range.getEndPosition(),p.getStartPosition()),v=L.fromPositions(c.range.getStartPosition(),p.getEndPosition());s.push({range:_}),s.push({range:v}),eo._addBracketLeading(i,v,s)}}}else{let u=a.has(h)?a.get(h):0;a.set(h,u+1)}n=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;let n=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(n);o!==0&&o!==t.startColumn&&(i.push({range:L.fromPositions(new V(n,o),t.getEndPosition())}),i.push({range:L.fromPositions(new V(n,1),t.getEndPosition())}));let s=n-1;if(s>0){let a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(i.push({range:L.fromPositions(new V(s,a),t.getEndPosition())}),i.push({range:L.fromPositions(new V(s,1),t.getEndPosition())}))}}};eo._maxDuration=30;eo._maxRounds=2;var gme=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},za=class{static create(e,t){return gme(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return za.None;let i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return za.None;let[o]=yield new eo().provideSelectionRanges(i,[n]);if(o.length===0)return za.None;let s=yield e.computeWordRanges(i.uri,o[0].range);if(!s)return za.None;let a=i.getWordUntilPosition(n);return delete s[a.word],new class extends za{distance(l,c){if(!n.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;let d=typeof c.label=="string"?c.label:c.label.label,h=s[d];if(Tx(h))return 2<<20;let u=i_(h,L.fromPositions(l),L.compareRangesUsingStarts),m=u>=0?h[u]:h[Math.max(0,~u-1)],p=o.length;for(let _ of o){if(!L.containsRange(_.range,m))break;p-=1}return p}}})}};za.None=new class extends za{distance(){return 0}};var ph=class{constructor(e,t,i,n,o,s,a){this.clipboardText=a,this._snippetCompareFn=ph._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=o,this._refilterKind=1,this._lineContext=i,s==="top"?this._snippetCompareFn=ph._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=ph._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();let e=new Set;for(let[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){let t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;let e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext,n="",o="",s=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||s.length>2e3?ag:U6;for(let c=0;c<s.length;c++){let d=s[c];if(d.isInvalid)continue;this._providerInfo.set(d.provider,Boolean(d.container.incomplete));let h=d.position.column-d.editStart.column,u=h+i-(d.position.column-this._column);if(n.length!==u&&(n=u===0?"":t.slice(-u),o=n.toLowerCase()),d.word=n,u===0)d.score=Ko.Default;else{let m=0;for(;m<h;){let p=n.charCodeAt(m);if(p===32||p===9)m+=1;else break}if(m>=u)d.score=Ko.Default;else if(typeof d.completion.filterText=="string"){let p=l(n,o,m,d.completion.filterText,d.filterTextLow,0,!1);if(!p)continue;cw(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=M6(n,o,m,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{let p=l(n,o,m,d.textLabel,d.labelLow,0,!1);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?Ox(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return ph._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return ph._compareCompletionItems(e,t)}};var pme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ev=function(r,e){return function(t,i){e(t,i,r)}},_me=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Mg=class{constructor(e,t,i,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=n}static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),i=e.getPosition();t.tokenizeIfCheap(i.lineNumber);let n=t.getWordAtPosition(i);return!(!n||n.endColumn!==i.column||!isNaN(Number(n.word)))}};function bme(r,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;let i=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return i!==void 0?Boolean(i):!1}function vme(r,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;let i=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return i!==void 0?Boolean(i):!1}var Fk=class iY{constructor(e,t,i,n,o,s,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=o,this._contextKeyService=s,this._configurationService=a,this._toDispose=new G,this._quickSuggestDelay=10,this._triggerCharacterListener=new G,this._triggerQuickSuggest=new li,this._state=0,this._completionDisposables=new G,this._onDidCancel=new M,this._onDidTrigger=new M,this._onDidSuggest=new M,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new le(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(po.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(c=>{this._onCursorChange(c)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){Ge(this._triggerCharacterListener),Ge([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;let e=new Map;for(let i of po.all(this._editor.getModel()))for(let n of i.triggerCharacters||[]){let o=e.get(n);o||(o=new Set,o.add(qq()),e.set(n,o)),o.add(i)}let t=i=>{if(!vme(this._editor,this._contextKeyService,this._configurationService)||Mg.shouldAutoTrigger(this._editor))return;if(!i){let s=this._editor.getPosition();i=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let n="";cd(i.charCodeAt(i.length-1))?ki(i.charCodeAt(i.length-2))&&(n=i.substr(i.length-2)):n=i.charAt(i.length-1);let o=e.get(n);if(o){let s=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:n},Boolean(this._completionModel),o,s)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!po.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&An.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!Mg.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(78);if(i!==!1){if(i!==!0){e.tokenizeIfCheap(t.lineNumber);let n=e.getLineTokens(t.lineNumber),o=n.getStandardTokenType(n.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(i.other&&o===0||i.comments&&o===1||i.strings&&o===2))return}!bme(this._editor,this._contextKeyService,this._configurationService)||!po.has(e)||this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getPosition(),i=new Mg(e,t,this._state===2,!1);this._onNewContext(i)})}trigger(e,t=!1,i,n){var o;if(!this._editor.hasModel())return;let s=this._editor.getModel(),a=e.auto,l=new Mg(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Di;let d=this._editor.getOption(100),h=1;switch(d){case"top":h=0;break;case"bottom":h=2;break}let{itemKind:u,showDeprecated:m}=iY._createSuggestFilter(this._editor),p=za.create(this._editorWorkerService,this._editor),_=qF(s,this._editor.getPosition(),new Qb(h,u,i,m),c,this._requestToken.token);Promise.all([_,p]).then(([v,C])=>_me(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let S=n==null?void 0:n.clipboardText;if(!S&&v.needsClipboard&&(S=yield this._clipboardService.readText()),this._state===0)return;let D=this._editor.getModel(),I=v.items;if(n){let O=ZF(h);I=I.concat(n.items).sort(O)}let A=new Mg(D,this._editor.getPosition(),a,e.shy);this._completionModel=new ph(I,this._context.column,{leadingLineContent:A.leadingLineContent,characterCountDelta:A.column-this._context.column},C,this._editor.getOption(105),this._editor.getOption(100),S),this._completionDisposables.add(v.disposable),this._onNewContext(A),this._reportDurationsTelemetry(v.durations)})).catch(we)}_reportDurationsTelemetry(e){this._telemetryGate++%230==0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){let t=new Set;e.getOption(100)==="none"&&t.add(27);let n=e.getOption(105);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(!!this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Lt(e.leadingLineContent)!==Lt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(!!this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){let t=new Set(po.all(this._editor.getModel()));for(let n of this._completionModel.allProvider)t.delete(n);let i=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:i,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){let{incomplete:t}=this._completionModel,i=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:i,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(Mg.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:i})}}}}};Fk=pme([ev(1,Jn),ev(2,$o),ev(3,ml),ev(4,hr),ev(5,be),ev(6,Mt)],Fk);var tv=class{constructor(e,t){this._disposables=new G,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;let i=e.getSelections(),n=i.length,o=!1;for(let a=0;a<n;a++)if(!i[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];let s=e.getModel();for(let a=0;a<n;a++){let l=i[a];if(s.getValueLengthInRange(l)>tv._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(i=>{!this._empty&&!i.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};tv._maxSelectionLength=51200;var wme=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},e2=function(r,e){return function(t,i){e(t,i,r)}},Bk=class extends Eg{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=g("ddd","{0} ({1})",this._action.label,Bk.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}},Wk=class{constructor(e,t,i,n){this._menuService=i,this._contextKeyService=n,this._menuDisposables=new G,this.element=X(e,oe(".suggest-status-bar"));let o=s=>s instanceof Da?t.createInstance(Bk,s,void 0):void 0;this._leftActions=new Gr(this.element,{actionViewItemProvider:o}),this._rightActions=new Gr(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){let e=this._menuService.createMenu($c,this._contextKeyService),t=()=>{let i=[],n=[];for(let[o,s]of e.getActions())o==="left"?i.push(...s):n.push(...s);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Wk=wme([e2(1,Ue),e2(2,hs),e2(3,be)],Wk);var yme=z("symbolIcon.arrayForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Cme=z("symbolIcon.booleanForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Sme=z("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},g("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xme=z("symbolIcon.colorForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Eme=z("symbolIcon.constantForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Dme=z("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},g("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Lme=z("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},g("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kme=z("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},g("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ime=z("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},g("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ome=z("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},g("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tme=z("symbolIcon.fileForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nme=z("symbolIcon.folderForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Rme=z("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},g("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pme=z("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},g("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ame=z("symbolIcon.keyForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jme=z("symbolIcon.keywordForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Mme=z("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},g("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Fme=z("symbolIcon.moduleForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bme=z("symbolIcon.namespaceForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wme=z("symbolIcon.nullForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ume=z("symbolIcon.numberForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vme=z("symbolIcon.objectForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zme=z("symbolIcon.operatorForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hme=z("symbolIcon.packageForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$me=z("symbolIcon.propertyForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kme=z("symbolIcon.referenceForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qme=z("symbolIcon.snippetForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Yme=z("symbolIcon.stringForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zme=z("symbolIcon.structForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gme=z("symbolIcon.textForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xme=z("symbolIcon.typeParameterForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qme=z("symbolIcon.unitForeground",{dark:Pe,light:Pe,hc:Pe},g("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jme=z("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},g("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));Be((r,e)=>{let t=r.getColor(yme);t&&e.addRule(`${ge.symbolArray.cssSelector} { color: ${t}; }`);let i=r.getColor(Cme);i&&e.addRule(`${ge.symbolBoolean.cssSelector} { color: ${i}; }`);let n=r.getColor(Sme);n&&e.addRule(`${ge.symbolClass.cssSelector} { color: ${n}; }`);let o=r.getColor(Mme);o&&e.addRule(`${ge.symbolMethod.cssSelector} { color: ${o}; }`);let s=r.getColor(xme);s&&e.addRule(`${ge.symbolColor.cssSelector} { color: ${s}; }`);let a=r.getColor(Eme);a&&e.addRule(`${ge.symbolConstant.cssSelector} { color: ${a}; }`);let l=r.getColor(Dme);l&&e.addRule(`${ge.symbolConstructor.cssSelector} { color: ${l}; }`);let c=r.getColor(Lme);c&&e.addRule(`
			${ge.symbolValue.cssSelector},${ge.symbolEnum.cssSelector} { color: ${c}; }`);let d=r.getColor(kme);d&&e.addRule(`${ge.symbolEnumMember.cssSelector} { color: ${d}; }`);let h=r.getColor(Ime);h&&e.addRule(`${ge.symbolEvent.cssSelector} { color: ${h}; }`);let u=r.getColor(Ome);u&&e.addRule(`${ge.symbolField.cssSelector} { color: ${u}; }`);let m=r.getColor(Tme);m&&e.addRule(`${ge.symbolFile.cssSelector} { color: ${m}; }`);let p=r.getColor(Nme);p&&e.addRule(`${ge.symbolFolder.cssSelector} { color: ${p}; }`);let _=r.getColor(Rme);_&&e.addRule(`${ge.symbolFunction.cssSelector} { color: ${_}; }`);let v=r.getColor(Pme);v&&e.addRule(`${ge.symbolInterface.cssSelector} { color: ${v}; }`);let C=r.getColor(Ame);C&&e.addRule(`${ge.symbolKey.cssSelector} { color: ${C}; }`);let w=r.getColor(jme);w&&e.addRule(`${ge.symbolKeyword.cssSelector} { color: ${w}; }`);let S=r.getColor(Fme);S&&e.addRule(`${ge.symbolModule.cssSelector} { color: ${S}; }`);let D=r.getColor(Bme);D&&e.addRule(`${ge.symbolNamespace.cssSelector} { color: ${D}; }`);let I=r.getColor(Wme);I&&e.addRule(`${ge.symbolNull.cssSelector} { color: ${I}; }`);let A=r.getColor(Ume);A&&e.addRule(`${ge.symbolNumber.cssSelector} { color: ${A}; }`);let O=r.getColor(Vme);O&&e.addRule(`${ge.symbolObject.cssSelector} { color: ${O}; }`);let N=r.getColor(zme);N&&e.addRule(`${ge.symbolOperator.cssSelector} { color: ${N}; }`);let F=r.getColor(Hme);F&&e.addRule(`${ge.symbolPackage.cssSelector} { color: ${F}; }`);let Y=r.getColor($me);Y&&e.addRule(`${ge.symbolProperty.cssSelector} { color: ${Y}; }`);let K=r.getColor(Kme);K&&e.addRule(`${ge.symbolReference.cssSelector} { color: ${K}; }`);let ee=r.getColor(qme);ee&&e.addRule(`${ge.symbolSnippet.cssSelector} { color: ${ee}; }`);let ie=r.getColor(Yme);ie&&e.addRule(`${ge.symbolString.cssSelector} { color: ${ie}; }`);let Ee=r.getColor(Zme);Ee&&e.addRule(`${ge.symbolStruct.cssSelector} { color: ${Ee}; }`);let Le=r.getColor(Gme);Le&&e.addRule(`${ge.symbolText.cssSelector} { color: ${Le}; }`);let Te=r.getColor(Xme);Te&&e.addRule(`${ge.symbolTypeParameter.cssSelector} { color: ${Te}; }`);let Ne=r.getColor(Qme);Ne&&e.addRule(`${ge.symbolUnit.cssSelector} { color: ${Ne}; }`);let Fe=r.getColor(Jme);Fe&&e.addRule(`${ge.symbolVariable.cssSelector} { color: ${Fe}; }`)});var OS=class{constructor(){this._onDidWillResize=new M,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new M,this.onDidResize=this._onDidResize.event,this._sashListener=new G,this._size=new Wt(0,0),this._minSize=new Wt(0,0),this._maxSize=new Wt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new cn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new cn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new cn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:tC.North}),this._southSash=new cn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:tC.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(ye.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(ye.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ye.any(this._eastSash.onDidReset,this._westSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ye.any(this._northSash.onDidReset,this._southSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){let{height:i,width:n}=this._minSize,{height:o,width:s}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(n,Math.min(s,t));let a=new Wt(t,e);Wt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}};var efe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},tfe=function(r,e){return function(t,i){e(t,i,r)}};function TS(r){return!!r&&Boolean(r.completion.documentation||r.completion.detail&&r.completion.detail!==r.completion.label)}var Uk=class{constructor(e,t){this._editor=e,this._onDidClose=new M,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new M,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new G,this._renderDisposeable=new G,this._borderWidth=1,this._size=new Wt(330,0),this.domNode=oe(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Xs,{editor:e}),this._body=oe(".body"),this._scrollbar=new yl(this._body,{}),X(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=X(this._body,oe(".header")),this._close=X(this._header,oe("span"+ge.close.cssSelector)),this._close.title=g("details.close","Close"),this._type=X(this._header,oe("p.type")),this._docs=X(this._body,oe("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let e=this._editor.getOptions(),t=e.get(43),i=t.getMassagedFontFamily(Gn?Qi.fontFamily:null),n=e.get(106)||t.fontSize,o=e.get(107)||t.lineHeight,s=t.fontWeight,a=`${n}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/n}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){let e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=g("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,n;this._renderDisposeable.clear();let{detail:o,documentation:s}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(i=e.word)!==null&&i!==void 0?i:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(n=e.completion.commitCharacters)===null||n===void 0?void 0:n.join("")}
`,s=new Eo().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!TS(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){let a=o.length>1e5?`${o.substr(0,1e5)}\u2026`:o;this._type.textContent=a,this._type.title=a,Wn(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Li(this._type),this._type.title="",Nn(this._type),this.domNode.classList.add("no-type");if(Li(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),Li(this._docs);let a=this._markdownRenderer.render(s);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){let i=new Wt(e,t);Wt.equals(i,this._size)||(this._size=i,xW(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Uk=efe([tfe(1,Ue)],Uk);var t2=class{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new G,this._added=!1,this._resizable=new OS,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,n,o=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,n=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&n){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(s=n.width-a.dimension.width,l=!0),a.north&&(o=n.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+o,left:i.left+s})}a.done&&(i=void 0,n=void 0,o=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;let i=ci(e);this._anchorBox=i,this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size)}_placeAtAnchor(e,t){var i;let n=Xh(document.body),o=this.widget.getLayoutInfo(),s=new Wt(220,2*o.lineHeight),a=e.top,l=function(){let w=n.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),S=-o.borderWidth+e.left+e.width,D=new Wt(w,n.height-e.top-o.borderHeight-o.verticalPadding),I=D.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:S,fit:w-t.width,maxSizeTop:D,maxSizeBottom:I,minSize:s.with(Math.min(w,s.width))}}(),c=function(){let w=e.left-o.borderWidth-o.horizontalPadding,S=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),D=new Wt(w,n.height-e.top-o.borderHeight-o.verticalPadding),I=D.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:S,fit:w-t.width,maxSizeTop:D,maxSizeBottom:I,minSize:s.with(Math.min(w,s.width))}}(),d=function(){let w=e.left,S=-o.borderWidth+e.top+e.height,D=new Wt(e.width-o.borderHeight,n.height-e.top-e.height-o.verticalPadding);return{top:S,left:w,fit:D.height-t.height,maxSizeBottom:D,maxSizeTop:D,minSize:s.with(D.width)}}(),h=[l,c,d],u=(i=h.find(w=>w.fit>=0))!==null&&i!==void 0?i:h.sort((w,S)=>S.fit-w.fit)[0],m=e.top+e.height-o.borderHeight,p,_=t.height,v=Math.max(u.maxSizeTop.height,u.maxSizeBottom.height);_>v&&(_=v);let C;_<=u.maxSizeTop.height?(p=!0,C=u.maxSizeTop):(p=!1,C=u.maxSizeBottom),this._applyTopLeft({left:u.left,top:p?u.top:m-_}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!p,u===l,p,u!==l),this._resizable.minSize=u.minSize,this._resizable.maxSize=C,this._resizable.layout(_,Math.min(C.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}};var Ol;(function(r){r[r.FILE=0]="FILE",r[r.FOLDER=1]="FOLDER",r[r.ROOT_FOLDER=2]="ROOT_FOLDER"})(Ol||(Ol={}));function NS(r,e,t,i){let n=i===Ol.ROOT_FOLDER?["rootfolder-icon"]:i===Ol.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===Xe.data?o=Xl.parseMetaData(t).get(Xl.META_DATA_LABEL):o=nY(hx(t).toLowerCase()),i===Ol.FOLDER)n.push(`${o}-name-folder-icon`);else{if(o){if(n.push(`${o}-name-file-icon`),o.length<=255){let a=o.split(".");for(let l=1;l<a.length;l++)n.push(`${a.slice(l).join(".")}-ext-file-icon`)}n.push("ext-file-icon")}let s=ife(r,e,t);s&&n.push(`${nY(s)}-lang-file-icon`)}}return n}function ife(r,e,t){if(!t)return null;let i=null;if(t.scheme===Xe.data){let o=Xl.parseMetaData(t).get(Xl.META_DATA_MIME);o&&(i=e.getModeId(o))}else{let n=r.getModel(t);n&&(i=n.getLanguageId())}return i&&i!==Lc?i:e.getModeIdByFilepathOrFirstLine(t)}function nY(r){return r.replace(/[\11\12\14\15\40]/g,"/")}var nfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},i2=function(r,e){return function(t,i){e(t,i,r)}},RS;function n2(r){return`suggest-aria-id:${r}`}var rfe=Gi("suggest-more-info",ge.chevronRight,g("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),ofe=new(RS=class Vk{extract(e,t){if(e.textLabel.match(Vk._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Vk._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){let i=Vk._regexRelaxed.exec(e.completion.documentation);if(i&&(i.index===0||i.index+i[0].length===e.completion.documentation.length))return t[0]=i[0],!0}return!1}},RS._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,RS._regexStrict=new RegExp(`^${RS._regexRelaxed.source}$`,"i"),RS),zk=class{constructor(e,t,i,n){this._editor=e,this._modelService=t,this._modeService=i,this._themeService=n,this._onDidToggleDetails=new M,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){let t=Object.create(null);t.disposables=new G,t.root=e,t.root.classList.add("show-file-icons"),t.icon=X(e,oe(".icon")),t.colorspan=X(t.icon,oe("span.colorspan"));let i=X(e,oe(".contents")),n=X(i,oe(".main"));t.iconContainer=X(n,oe(".icon-label.codicon")),t.left=X(n,oe("span.left")),t.right=X(n,oe("span.right")),t.iconLabel=new _g(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=X(t.left,oe("span.signature-label")),t.qualifierLabel=X(t.left,oe("span.qualifier-label")),t.detailsLabel=X(t.right,oe("span.details-label")),t.readMore=X(t.right,oe("span.readMore"+Tt.asCSSSelector(rfe))),t.readMore.title=g("readMore","Read More");let o=()=>{let s=this._editor.getOptions(),a=s.get(43),l=a.getMassagedFontFamily(Gn?Qi.fontFamily:null),c=a.fontFeatureSettings,d=s.get(106)||a.fontSize,h=s.get(107)||a.lineHeight,u=a.fontWeight,m=`${d}px`,p=`${h}px`;t.root.style.fontSize=m,t.root.style.fontWeight=u,n.style.fontFamily=l,n.style.fontFeatureSettings=c,n.style.lineHeight=p,t.icon.style.height=p,t.icon.style.width=p,t.readMore.style.height=p,t.readMore.style.width=p};return o(),t.disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(106)||s.hasChanged(107))&&o()})),t}renderElement(e,t,i){let{completion:n}=e;i.root.id=n2(t),i.colorspan.style.backgroundColor="";let o={labelEscapeNewLines:!0,matches:hC(e.score)},s=[];if(n.kind===19&&ofe.extract(e,s))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=s[0];else if(n.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";let a=NS(this._modelService,this._modeService,ve.from({scheme:"fake",path:e.textLabel}),Ol.FILE),l=NS(this._modelService,this._modeService,ve.from({scheme:"fake",path:n.detail}),Ol.FILE);o.extraClasses=a.length>l.length?a:l}else n.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=n_([NS(this._modelService,this._modeService,ve.from({scheme:"fake",path:e.textLabel}),Ol.FOLDER),NS(this._modelService,this._modeService,ve.from({scheme:"fake",path:n.detail}),Ol.FOLDER)])):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...AU(n.kind).split(" ")));n.tags&&n.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),typeof n.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=r2(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=r2(n.label.detail||""),i.detailsLabel.textContent=r2(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Wn(i.detailsLabel):Nn(i.detailsLabel),TS(e)?(i.right.classList.add("can-expand-details"),Wn(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Nn(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};zk=nfe([i2(1,Gt),i2(2,ui),i2(3,ht)],zk);function r2(r){return r.replace(/\r\n|\r|\n/g,"")}var sfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Hk=function(r,e){return function(t,i){e(t,i,r)}},afe=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},lfe=z("editorSuggestWidget.background",{dark:Zr,light:Zr,hc:Zr},g("editorSuggestWidgetBackground","Background color of the suggest widget.")),cfe=z("editorSuggestWidget.border",{dark:Md,light:Md,hc:Md},g("editorSuggestWidgetBorder","Border color of the suggest widget.")),dfe=z("editorSuggestWidget.foreground",{dark:Na,light:Na,hc:Na},g("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),hfe=z("editorSuggestWidget.selectedForeground",{dark:V_,light:V_,hc:V_},g("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),ufe=z("editorSuggestWidget.selectedIconForeground",{dark:z_,light:z_,hc:z_},g("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),mfe=z("editorSuggestWidget.selectedBackground",{dark:H_,light:H_,hc:H_},g("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),ffe=z("editorSuggestWidget.highlightForeground",{dark:bl,light:bl,hc:bl},g("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),gfe=z("editorSuggestWidget.focusHighlightForeground",{dark:BE,light:BE,hc:BE},g("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),rY=class{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof El}`}restore(){var e;let t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{let i=JSON.parse(t);if(Wt.is(i))return Wt.lift(i)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}},iv=class o2{constructor(e,t,i,n,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new li,this._disposables=new G,this._onDidSelect=new M,this._onDidFocus=new M,this._onDidHide=new M,this._onDidShow=new M,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new M,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new OS,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new oY(this,e),this._persistedSize=new rY(t,e);class s{constructor(m,p,_=!1,v=!1){this.persistedSize=m,this.currentSize=p,this.persistHeight=_,this.persistWidth=v}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(u=>{var m,p,_,v;if(this._resize(u.dimension.width,u.dimension.height),a&&(a.persistHeight=a.persistHeight||!!u.north||!!u.south,a.persistWidth=a.persistWidth||!!u.east||!!u.west),!!u.done){if(a){let{itemHeight:C,defaultSize:w}=this.getLayoutInfo(),S=Math.round(C/2),{width:D,height:I}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-I)<=S)&&(I=(p=(m=a.persistedSize)===null||m===void 0?void 0:m.height)!==null&&p!==void 0?p:w.height),(!a.persistWidth||Math.abs(a.currentSize.width-D)<=S)&&(D=(v=(_=a.persistedSize)===null||_===void 0?void 0:_.width)!==null&&v!==void 0?v:w.width),this._persistedSize.store(new Wt(D,I))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=X(this.element.domNode,oe(".message")),this._listElement=X(this.element.domNode,oe(".tree"));let l=o.createInstance(Uk,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new t2(l,this.editor);let c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);c();let d=o.createInstance(zk,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new xo("SuggestWidget",this._listElement,{getHeight:u=>this.getLayoutInfo().itemHeight,getTemplateId:u=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:u=>{if(u.isResolved&&this._isDetailsVisible()){let{documentation:m,detail:p}=u.completion,_=Dr("{0}{1}",p||"",m?typeof m=="string"?m:m.value:"");return g("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",u.textLabel,_)}else return u.textLabel},getWidgetAriaLabel:()=>g("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=o.createInstance(Wk,this.element.domNode);let h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);h(),this._disposables.add(Jd(this._list,n,{listInactiveFocusBackground:mfe,listInactiveFocusOutline:an})),this._disposables.add(n.onDidColorThemeChange(u=>this._onThemeChange(u))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onTap(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onDidChangeSelection(u=>this._onListSelection(u))),this._disposables.add(this._list.onDidChangeFocus(u=>this._onListFocus(u))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(u=>{u.hasChanged(105)&&(h(),c())})),this._ctxSuggestWidgetVisible=gt.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=gt.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=gt.MultipleSuggestions.bindTo(i),this._disposables.add(Zt(this._details.widget.domNode,"keydown",u=>{this._onDetailsKeydown.fire(u)})),this._disposables.add(this.editor.onMouseDown(u=>this._onEditorMouseDown(u)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element=="undefined"||typeof e.index=="undefined"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){let t=e.getColor(lfe);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());let i=e.getColor(cfe);i&&(this.element.domNode.style.borderColor=i.toString(),this._messageElement.style.borderColor=i.toString(),this._status.element.style.borderTopColor=i.toString(),this._details.widget.domNode.style.borderColor=i.toString(),this._detailsBorderColor=i.toString());let n=e.getColor(pc);n&&(this._detailsFocusBorderColor=n.toString()),this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;let i=e.elements[0],n=e.indexes[0];i!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(n),this._currentSuggestionDetails=At(o=>afe(this,void 0,void 0,function*(){let s=fa(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);o.onCancellationRequested(()=>s.dispose());let a=yield i.resolve(o);return s.dispose(),a})),this._currentSuggestionDetails.then(()=>{n>=this._list.length||i!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[i]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:n2(n)}))}).catch(we)),this._onDidFocus.fire({item:i,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Nn(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=o2.LOADING_MESSAGE,Nn(this._listElement,this._status.element),Wn(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=o2.NO_SUGGESTIONS_MESSAGE,Nn(this._listElement,this._status.element),Wn(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Nn(this._messageElement),Wn(this._listElement,this._status.element),this._show();break;case 4:Nn(this._messageElement),Wn(this._listElement,this._status.element),this._show();break;case 5:Nn(this._messageElement),Wn(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=fa(()=>this._setState(1),t)))}showSuggestions(e,t,i,n){var o,s;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(s=this._currentSuggestionDetails)===null||s===void 0||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}let a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(n?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(TS(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let t=this._persistedSize.restore(),i=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,i,n;if(!this.editor.hasModel()||!this.editor.getDomNode())return;let o=Xh(document.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,l=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Wt(l,a),this._contentWidget.setPreference(2);else{let c=o.width-s.borderHeight-2*s.horizontalPadding;l>c&&(l=c);let d=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:l,h=s.statusBarHeight+this._list.contentHeight+s.borderHeight,u=s.itemHeight+s.statusBarHeight,m=ci(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),_=m.top+p.top+p.height,v=Math.min(o.height-_-s.verticalPadding,h),C=m.top+p.top-s.verticalPadding,w=Math.min(C,h),S=Math.min(Math.max(w,v)+s.borderHeight,h);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<u&&(a=u),a>S&&(a=S);let D=150;a>v||this._forceRenderingAbove&&C>D?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),S=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),S=v),this.element.preferredSize=new Wt(d,s.defaultSize.height),this.element.maxSize=new Wt(c,S),this.element.minSize=new Wt(220,u),this._cappedHeight=a===h?{wanted:(n=(i=this._cappedHeight)===null||i===void 0?void 0:i.wanted)!==null&&n!==void 0?n:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){let{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);let{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){let e=this.editor.getOption(43),t=fo(this.editor.getOption(107)||e.lineHeight,8,1e3),i=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Wt(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};iv.LOADING_MESSAGE=g("suggestWidget.loading","Loading...");iv.NO_SUGGESTIONS_MESSAGE=g("suggestWidget.noSuggestions","No suggestions.");iv=sfe([Hk(1,Zo),Hk(2,be),Hk(3,ht),Hk(4,Ue)],iv);var oY=class{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new Wt(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}};Be((r,e)=>{let t=r.getColor(ffe);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${t}; }`);let i=r.getColor(gfe);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${i}; }`);let n=r.getColor(dfe);n&&e.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${n}; }`);let o=r.getColor(hfe);o&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${o}; }`);let s=r.getColor(ufe);s&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${s}; }`);let a=r.getColor(_c);a&&e.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);let l=r.getColor(bc);l&&e.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);let c=r.getColor(R_);c&&e.addRule(`.monaco-editor .suggest-details code { background-color: ${c}; }`)});var pfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},PS=function(r,e){return function(t,i){e(t,i,r)}},_fe=!1,sY=class{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){let n=e.getOffsetAt(t),o=e.getPositionAt(n+1);this._marker=e.deltaDecorations([],[{range:L.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){let t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}},ta=class aY{constructor(e,t,i,n,o,s){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=o,this._logService=s,this._lineSuffix=new Mi,this._toDispose=new G,this._selectors=new lY(d=>d.priority),this.editor=e,this.model=o.createInstance(Fk,this.editor);let a=gt.InsertMode.bindTo(n);a.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new el(()=>{let d=this._instantiationService.createInstance(iv,this.editor);this._toDispose.add(d),this._toDispose.add(d.onDidSelect(_=>this._insertSuggestion(_,0),this));let h=new JF(this.editor,d,_=>this._insertSuggestion(_,2));this._toDispose.add(h),this._toDispose.add(this.model.onDidSuggest(_=>{_.completionModel.items.length===0&&h.reset()}));let u=gt.MakesTextEdit.bindTo(this._contextKeyService),m=gt.HasInsertAndReplaceRange.bindTo(this._contextKeyService),p=gt.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Re(()=>{u.reset(),m.reset(),p.reset()})),this._toDispose.add(d.onDidFocus(({item:_})=>{let v=this.editor.getPosition(),C=_.editStart.column,w=v.column,S=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&w-C===_.completion.insertText.length&&(S=this.editor.getModel().getValueInRange({startLineNumber:v.lineNumber,startColumn:C,endLineNumber:v.lineNumber,endColumn:w})!==_.completion.insertText),u.set(S),m.set(!V.equals(_.editInsertEnd,_.editReplaceEnd)),p.set(Boolean(_.provider.resolveCompletionItem)||Boolean(_.completion.documentation)||_.completion.detail!==_.completion.label)})),this._toDispose.add(d.onDetailsKeyDown(_=>{if(_.toKeybinding().equals(new ua(!0,!1,!1,!1,33))||We&&_.toKeybinding().equals(new ua(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeybinding().isModifierKey()||this.editor.focus()})),d})),this._overtypingCapturer=this._toDispose.add(new el(()=>this._toDispose.add(new tv(this.editor,this.model)))),this._alternatives=this._toDispose.add(new el(()=>this._toDispose.add(new Qu(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(Jb,e)),this._toDispose.add(this.model.onDidTrigger(d=>{this.widget.value.showTriggered(d.auto,d.shy?250:50),this._lineSuffix.value=new sY(this.editor.getModel(),d.position)})),this._toDispose.add(this.model.onDidSuggest(d=>{if(!d.shy){let h=-1;for(let u of this._selectors.itemsOrderedByPriorityDesc)if(h=u.select(this.editor.getModel(),this.editor.getPosition(),d.completionModel.items),h!==-1)break;h===-1&&(h=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),d.completionModel.items)),this.widget.value.showSuggestions(d.completionModel,h,d.isFrozen,d.auto)}})),this._toDispose.add(this.model.onDidCancel(d=>{d.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{_fe||(this.model.cancel(),this.model.clear())}));let l=gt.AcceptSuggestionsOnEnter.bindTo(n),c=()=>{let d=this.editor.getOption(1);l.set(d==="on"||d==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(e){return e.getContribution(aY.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let i=this.editor.getModel(),n=i.getAlternativeVersionId(),{item:o}=e,s=[],a=new Di;t&1||this.editor.pushUndoStop();let l=this.getOverwriteInfo(o,Boolean(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){let d=$s.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(h=>Ut.replace(L.lift(h.range),h.text))),d.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){let d=new or(!0),h,u=i.onDidChangeContent(v=>{if(v.isFlush){a.cancel(),u.dispose();return}for(let C of v.changes){let w=L.getEndPosition(C.range);(!h||V.isBefore(w,h))&&(h=w)}}),m=t;t|=2;let p=!1,_=this.editor.onWillType(()=>{_.dispose(),p=!0,m&2||this.editor.pushUndoStop()});s.push(o.resolve(a.token).then(()=>{if(!o.completion.additionalTextEdits||a.token.isCancellationRequested||h&&o.completion.additionalTextEdits.some(C=>V.isBefore(h,L.getStartPosition(C.range))))return!1;p&&this.editor.pushUndoStop();let v=$s.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(C=>Ut.replace(L.lift(C.range),C.text))),v.restoreRelativeVerticalPositionOfCursor(this.editor),(p||!(m&2))&&this.editor.pushUndoStop(),!0}).then(v=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",d.elapsed(),v),u.dispose(),_.dispose()}))}let{insertText:c}=o.completion;o.completion.insertTextRules&4||(c=gh.escape(c)),An.get(this.editor).insert(c,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===nv.id?this.model.trigger({auto:!0,shy:!1},!0):(s.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(we)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,d=>{for(a.cancel();i.canUndo();){n!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(d,1|2|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(s).finally(()=>{this.model.clear(),a.dispose()})}getOverwriteInfo(e,t){xt(this.editor.hasModel());let i=this.editor.getOption(105).insertMode==="replace";t&&(i=!i);let n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:n+s,overwriteAfter:o+a}}_alertCompletionItem(e){if(Ji(e.completion.additionalTextEdits)){let t=g("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Oi(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},n=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;let s=this.editor.getPosition(),a=o.editStart.column,l=s.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:l})!==o.completion.insertText};ye.once(this.model.onDidTrigger)(o=>{let s=[];ye.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Ge(s),i()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(Ge(s),a.items.length===0){i();return}let l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!n(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},4|1|2)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let i=this.widget.value.getFocusedItem(),n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){!this.widget.isInitialized||this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};ta.ID="editor.contrib.suggestController";ta=pfe([PS(1,QF),PS(2,jt),PS(3,be),PS(4,Ue),PS(5,hr)],ta);var lY=class{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}},nv=class extends pe{constructor(){super({id:nv.id,label:g("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:fe.and(j.writable,j.hasCompletionItemProvider),kbOpts:{kbExpr:j.textInputFocus,primary:2048|10,secondary:[2048|39],mac:{primary:256|10,secondary:[512|9,2048|39]},weight:100}})}run(e,t){let i=ta.get(t);!i||i.triggerSuggest()}};nv.id="editor.action.triggerSuggest";He(ta.ID,ta);ae(nv);var ia=100+90,Xo=fi.bindToContribution(ta.get);ce(new Xo({id:"acceptSelectedSuggestion",precondition:gt.Visible,handler(r){r.acceptSelectedSuggestion(!0,!1)}}));on.registerKeybindingRule({id:"acceptSelectedSuggestion",when:fe.and(gt.Visible,j.textInputFocus),primary:2,weight:ia});on.registerKeybindingRule({id:"acceptSelectedSuggestion",when:fe.and(gt.Visible,j.textInputFocus,gt.AcceptSuggestionsOnEnter,gt.MakesTextEdit),primary:3,weight:ia});tr.appendMenuItem($c,{command:{id:"acceptSelectedSuggestion",title:g("accept.insert","Insert")},group:"left",order:1,when:gt.HasInsertAndReplaceRange.toNegated()});tr.appendMenuItem($c,{command:{id:"acceptSelectedSuggestion",title:g("accept.insert","Insert")},group:"left",order:1,when:fe.and(gt.HasInsertAndReplaceRange,gt.InsertMode.isEqualTo("insert"))});tr.appendMenuItem($c,{command:{id:"acceptSelectedSuggestion",title:g("accept.replace","Replace")},group:"left",order:1,when:fe.and(gt.HasInsertAndReplaceRange,gt.InsertMode.isEqualTo("replace"))});ce(new Xo({id:"acceptAlternativeSelectedSuggestion",precondition:fe.and(gt.Visible,j.textInputFocus),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:1024|3,secondary:[1024|2]},handler(r){r.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:$c,group:"left",order:2,when:fe.and(gt.HasInsertAndReplaceRange,gt.InsertMode.isEqualTo("insert")),title:g("accept.replace","Replace")},{menuId:$c,group:"left",order:2,when:fe.and(gt.HasInsertAndReplaceRange,gt.InsertMode.isEqualTo("replace")),title:g("accept.insert","Insert")}]}));Ke.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");ce(new Xo({id:"hideSuggestWidget",precondition:gt.Visible,handler:r=>r.cancelSuggestWidget(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:9,secondary:[1024|9]}}));ce(new Xo({id:"selectNextSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectNextSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:18,secondary:[2048|18],mac:{primary:18,secondary:[2048|18,256|44]}}}));ce(new Xo({id:"selectNextPageSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectNextPageSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:12,secondary:[2048|12]}}));ce(new Xo({id:"selectLastSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectLastSuggestion()}));ce(new Xo({id:"selectPrevSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectPrevSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:16,secondary:[2048|16],mac:{primary:16,secondary:[2048|16,256|46]}}}));ce(new Xo({id:"selectPrevPageSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectPrevPageSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:11,secondary:[2048|11]}}));ce(new Xo({id:"selectFirstSuggestion",precondition:fe.and(gt.Visible,gt.MultipleSuggestions),handler:r=>r.selectFirstSuggestion()}));ce(new Xo({id:"toggleSuggestionDetails",precondition:gt.Visible,handler:r=>r.toggleSuggestionDetails(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:2048|10,secondary:[2048|39],mac:{primary:256|10,secondary:[2048|39]}},menuOpts:[{menuId:$c,group:"right",order:1,when:fe.and(gt.DetailsVisible,gt.CanResolve),title:g("detail.more","show less")},{menuId:$c,group:"right",order:1,when:fe.and(gt.DetailsVisible.toNegated(),gt.CanResolve),title:g("detail.less","show more")}]}));ce(new Xo({id:"toggleExplainMode",precondition:gt.Visible,handler:r=>r.toggleExplainMode(),kbOpts:{weight:100,primary:2048|85}}));ce(new Xo({id:"toggleSuggestionFocus",precondition:gt.Visible,handler:r=>r.toggleSuggestionFocus(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:2048|512|10,mac:{primary:256|512|10}}}));ce(new Xo({id:"insertBestCompletion",precondition:fe.and(j.textInputFocus,fe.equals("config.editor.tabCompletion","on"),Jb.AtEnd,gt.Visible.toNegated(),Qu.OtherSuggestions.toNegated(),An.InSnippetMode.toNegated()),handler:(r,e)=>{r.triggerSuggestAndAcceptBest(mn(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:ia,primary:2}}));ce(new Xo({id:"insertNextSuggestion",precondition:fe.and(j.textInputFocus,fe.equals("config.editor.tabCompletion","on"),Qu.OtherSuggestions,gt.Visible.toNegated(),An.InSnippetMode.toNegated()),handler:r=>r.acceptNextSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:2}}));ce(new Xo({id:"insertPrevSuggestion",precondition:fe.and(j.textInputFocus,fe.equals("config.editor.tabCompletion","on"),Qu.OtherSuggestions,gt.Visible.toNegated(),An.InSnippetMode.toNegated()),handler:r=>r.acceptPrevSuggestion(),kbOpts:{weight:ia,kbExpr:j.textInputFocus,primary:1024|2}}));ae(class extends pe{constructor(){super({id:"editor.action.resetSuggestSize",label:g("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(r,e){ta.get(e).resetWidgetSize()}});function cY(r,e){return{object:r,dispose:()=>e==null?void 0:e.dispose()}}function dY(r,e){return(t,i)=>e(r(t),r(i))}function hY(){return(r,e)=>r-e}function uY(r,e){let t;for(let i of r)(t===void 0||e(i,t)>0)&&(t=i);return t}var s2=class extends H{constructor(e,t){super();this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new dt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(n=>{n.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(n=>{n.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let i=ta.get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(s,a,l)=>{let c=this.editor.getModel(),d=Gb(c,this.suggestControllerPreselector());if(!d)return-1;let h=V.lift(a),u=l.map((p,_)=>{let v=mY(i,h,p,this.isShiftKeyPressed),C=Gb(c,v);if(!C)return;let w=bfe(d.range,C.range)&&d.text.startsWith(C.text);return{index:_,valid:w,prefixLength:C.text.length,suggestItem:p}}).filter(p=>p&&p.valid),m=uY(u,dY(p=>p.prefixLength,hY()));return m?m.index:-1}}));let n=!1,o=()=>{n||(n=!0,this._register(i.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(i.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(i.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ye.once(i.model.onDidTrigger)(s=>{o()}))}this.update(this._isActive)}get state(){if(!!this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){let t=this.getInlineCompletion(),i=!1;Bq(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getInlineCompletion(){let e=ta.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;let t=e.widget.value.getFocusedItem();if(!!t)return mY(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){let e=ta.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){let e=ta.get(this.editor);e&&e.forceRenderingAbove()}};function bfe(r,e){return r.startLineNumber===e.startLineNumber&&r.startColumn===e.startColumn&&(r.endLineNumber<e.endLineNumber||r.endLineNumber===e.endLineNumber&&r.endColumn<=e.endColumn)}function mY(r,e,t,i){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{text:"",range:L.fromPositions(e,e)};let{insertText:n}=t.completion;if(t.completion.insertTextRules&4){let s=new gh().parse(n),a=r.editor.getModel();if(s.children.length>100)return;ea.adjustWhitespace(a,e,s,!0,!0),n=s.toString()}let o=r.getOverwriteInfo(t,i);return{text:n,range:L.fromPositions(e.delta(0,-o.overwriteBefore),e.delta(0,Math.max(o.overwriteAfter,0)))}}var fY=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},a2=class extends xS{constructor(e,t){super(e);this.cache=t,this.suggestionInlineCompletionSource=this._register(new s2(this.editor,()=>{var i,n;return(n=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||n===void 0?void 0:n.toLiveInlineCompletion()})),this.updateOperation=this._register(new Mi),this.updateCacheSoon=this._register(new dt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);let n=this.ghostText;n&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,vfe(n.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(Re(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return fY(this,void 0,void 0,function*(){let e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;let t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},i=this.editor.getPosition(),n=At(s=>fY(this,void 0,void 0,function*(){let a;try{a=yield AF(i,this.editor.getModel(),{triggerKind:go.Automatic,selectedSuggestionInfo:t},s)}catch(l){we(l);return}s.isCancellationRequested||(this.cache.setValue(this.editor,a,go.Automatic),this.onDidChangeEmitter.fire())})),o=new Tk(n,go.Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;let i=this.suggestionInlineCompletionSource.state,n=Gb(this.editor.getModel(),i==null?void 0:i.selectedItemAsInlineCompletion),o=Gb(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),s=o&&n&&o.text.startsWith(n.text)&&o.range.equalsRange(n.range)?o:n||o,a=n?((s==null?void 0:s.text.length)||0)-n.text.length:0;return(d=>{let h=this.editor.getOptions().get(105).previewMode;return d?Ik(d,this.editor.getModel(),h,this.editor.getPosition(),a)||new SS(d.range.endLineNumber,[],this.minReservedLineCount):void 0})(s)}};function vfe(r){return r.reduce((e,t)=>e+t,0)}var wfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},yfe=function(r,e){return function(t,i){e(t,i,r)}},Cfe=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},gY=class extends H{constructor(){super(...arguments);this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Mi)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?cY(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}},$k=class extends gY{constructor(e,t){super();this.editor=e,this.commandService=t,this.sharedCache=this._register(new pY),this.suggestWidgetAdapterModel=this._register(new a2(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new Ok(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;let i=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return i?i.parts.some(n=>e.containsPosition(new V(i.lineNumber,n.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(go.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return Cfe(this,void 0,void 0,function*(){let t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};$k=wfe([yfe(1,jt)],$k);var pY=class extends H{constructor(){super(...arguments);this.onDidChangeEmitter=new M,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Mi)}get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new PF(e,t,()=>this.onDidChangeEmitter.fire(),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}};var _Y=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},AS=function(r,e){return function(t,i){e(t,i,r)}},l2,bY=(l2=window.trustedTypes)===null||l2===void 0?void 0:l2.createPolicy("editorGhostText",{createHTML:r=>r}),Kk=class extends H{constructor(e,t,i,n){super();this.editor=e,this.model=t,this.instantiationService=i,this.modeService=n,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(c2,this.editor)),this.additionalLinesWidget=this._register(new wY(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(104)||o.hasChanged(87)||o.hasChanged(82)||o.hasChanged(44)||o.hasChanged(43)||o.hasChanged(58))&&this.update()})),this._register(Re(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;let t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}let i=new Array,n=new Array;function o(c,d){if(n.length>0){let h=n[n.length-1];d&&h.decorations.push(new ur(h.content.length+1,h.content.length+1+c[0].length,d,0)),h.content+=c[0],c=c.slice(1)}for(let h of c)n.push({content:h,decorations:d?[new ur(1,h.length+1,d,0)]:[]})}let s=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(let c of t.parts){let d=c.lines;a===void 0?(i.push({column:c.column,text:d[0],preview:c.preview}),d=d.slice(1)):o([s.substring(l,c.column-1)],void 0),d.length>0&&(o(d,"ghost-text"),a===void 0&&c.column<=s.length&&(a=c.column)),l=c.column-1}a!==void 0&&o([s.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,i,a!==void 0?{column:a,length:s.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),t.parts.some(c=>c.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new V(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,i){let n=this.editor.getOption(43),o=document.createElement("div");o.className="suggest-preview-additional-widget",Ti.applyFontInfoSlow(o,n);let s=document.createElement("span");s.className="content-spacer",s.append(t),o.append(s);let a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("\u23CE  "),o.append(a);let l=new G,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${i} lines\u2026`),l.add(Zt(c,"mousedown",d=>{var h;(h=this.model)===null||h===void 0||h.setExpanded(!0),d.preventDefault(),this.editor.focus()})),o.append(c),new yY(this.editor,e,o,l)}};Kk=_Y([AS(2,Ue),AS(3,ui)],Kk);var c2=class{constructor(e,t,i,n){this.editor=e,this.codeEditorService=t,this.themeService=i,this.contextKeyService=n,this.decorationIds=[],this.disposableStore=new G}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,i){this.disposableStore.clear();let n=this.themeService.getColorTheme(),o=n.getColor(IR),s,a;o&&(s=String(o.rgba.a),a=q.Format.CSS.format(vY(o)));let l=n.getColor(kR),c;l&&(c=`2px dashed ${l}`);let d=this.editor.getModel();if(!d)return;let{tabSize:h}=d.getOptions(),u=d.getLineContent(e)||"",m=0,p="",_=new Array;i&&_.push({range:L.fromPositions(new V(e,i.column),new V(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});let v=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),C=v===void 0?!0:!!v;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(w=>{p+=u.substring(m,w.column-1),m=w.column-1;let S=C?w.text:this.renderSingleLineText(w.text,p,h,!1),D=this.disposableStore.add(Efe(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:S,opacity:s,color:a,border:c,fontWeight:w.preview?"bold":"normal"}}));return{range:L.fromPositions(new V(e,w.column)),options:C?{description:"ghost-text",after:{content:S,inlineClassName:w.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},D.resolve())}}).concat(_))}renderSingleLineText(e,t,i,n){let o=t+e,s=_t.visibleColumnsByColumns(o,i),a="",l=t.length+1;for(let c of e){if(c==="	"){let d=s[l+1]-s[l];if(n){a+="\u2192";for(let h=1;h<d;h++)a+="\xA0"}else for(let h=0;h<d;h++)a+="\xA0"}else c===" "?n?a+="\xB7":a+="\xA0":a+=c;l+=1}return a}};c2=_Y([AS(1,it),AS(2,ht),AS(3,be)],c2);function vY(r){let{r:e,b:t,g:i}=r.rgba;return new q(new ct(e,i,t,255))}var wY=class{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){let n=this.editor.getModel();if(!n)return;let{tabSize:o}=n.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);let a=Math.max(t.length,i);if(a>0){let l=document.createElement("div");Sfe(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}};function Sfe(r,e,t,i,n){let o=i.get(29),s=i.get(104),a="none",l=i.get(82),c=i.get(44),d=i.get(43),h=i.get(58),u=wa(1e4);u.appendASCIIString('<div class="suggest-preview-text">');for(let _=0,v=t.length;_<v;_++){let C=t[_],w=C.content;u.appendASCIIString('<div class="view-line'),u.appendASCIIString('" style="top:'),u.appendASCIIString(String(_*h)),u.appendASCIIString('px;width:1000000px;">');let S=jp(w),D=tu(w),I=Vi.createEmpty(w,n);uf(new Bs(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,w,!1,S,D,0,I,C.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,s,a,l,c!==Zn.OFF,null),u),u.appendASCIIString("</div>")}u.appendASCIIString("</div>"),Ti.applyFontInfoSlow(r,d);let m=u.build(),p=bY?bY.createHTML(m):m;r.innerHTML=p}var xfe=0;function Efe(r,e,t,i){let n=t+xfe++;return r.registerDecorationType(e,n,i),{dispose(){r.removeDecorationType(n)},resolve(){return r.resolveDecorationOptions(n,!0)}}}var yY=class extends H{constructor(e,t,i,n){super();this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(n),this._register(Re(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}};Be((r,e)=>{let t=r.getColor(IR);if(t){let n=String(t.rgba.a),o=q.Format.CSS.format(vY(t));e.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${n} !important; color: ${o} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${n} !important; color: ${o} !important; }`)}let i=r.getColor(kR);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var CY=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},d2=function(r,e){return function(t,i){e(t,i,r)}},qk=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Ln=class SY extends H{constructor(e,t){super();this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Mi),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(i=>{i.hasChanged(105)&&this.updateModelController(),i.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(SY.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){let e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(h2,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return((i=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||i===void 0?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return qk(this,void 0,void 0,function*(){let t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Ln.inlineSuggestionVisible=new _e("inlineSuggestionVisible",!1,g("inlineSuggestionVisible","Whether an inline suggestion is visible"));Ln.inlineSuggestionHasIndentation=new _e("inlineSuggestionHasIndentation",!1,g("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));Ln.inlineSuggestionHasIndentationLessThanTabSize=new _e("inlineSuggestionHasIndentationLessThanTabSize",!0,g("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));Ln.ID="editor.contrib.ghostTextController";Ln=CY([d2(1,Ue)],Ln);var xY=class{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=Ln.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Ln.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Ln.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}},h2=class extends H{constructor(e,t,i){super();this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new xY(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance($k,this.editor)),this.widget=this._register(this.instantiationService.createInstance(Kk,this.editor,this.model)),this._register(Re(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,i=!0,n=this.model.inlineCompletionsModel.ghostText;if(!!this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){let{column:o,lines:s}=n.parts[0],a=s[0],l=this.editor.getModel().getLineIndentColumn(n.lineNumber);if(o<=l){let d=Wi(a);d===-1&&(d=a.length-1),t=d>0;let h=this.editor.getModel().getOptions().tabSize;i=_t.visibleColumnFromColumn(a,d+1,h)<h}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};h2=CY([d2(1,Ue),d2(2,be)],h2);var EY=fi.bindToContribution(Ln.get),rv=new EY({id:Lk,precondition:Ln.inlineSuggestionVisible,handler(r){r.commit(),r.editor.focus()}});ce(rv);on.registerKeybindingRule({primary:2,weight:200,id:rv.id,when:fe.and(rv.precondition,j.tabMovesFocus.toNegated(),Ln.inlineSuggestionHasIndentationLessThanTabSize)});ce(new EY({id:"editor.action.inlineSuggest.hide",precondition:Ln.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(r){r.hide()}}));var Ju=class extends pe{constructor(){super({id:Ju.ID,label:g("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:fe.and(j.writable,Ln.inlineSuggestionVisible),kbOpts:{weight:100,primary:512|89}})}run(e,t){return qk(this,void 0,void 0,function*(){let i=Ln.get(t);i&&(i.showNextInlineCompletion(),t.focus())})}};Ju.ID="editor.action.inlineSuggest.showNext";var em=class extends pe{constructor(){super({id:em.ID,label:g("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:fe.and(j.writable,Ln.inlineSuggestionVisible),kbOpts:{weight:100,primary:512|87}})}run(e,t){return qk(this,void 0,void 0,function*(){let i=Ln.get(t);i&&(i.showPreviousInlineCompletion(),t.focus())})}};em.ID="editor.action.inlineSuggest.showPrevious";var DY=class extends pe{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:g("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:j.writable})}run(e,t){return qk(this,void 0,void 0,function*(){let i=Ln.get(t);i&&i.trigger()})}};He(Ln.ID,Ln);ae(DY);ae(Ju);ae(em);var Dfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ov=function(r,e){return function(t,i){e(t,i,r)}},LY=class{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}},Yk=class{constructor(e,t,i,n,o,s,a,l){this._editor=e,this._hover=t,this._commandService=i,this._menuService=n,this._contextKeyService=o,this._modeService=s,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){let t=Ln.get(this._editor);if(!t)return null;if(e.target.type===8){let i=e.target.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new bS(1e3,this,L.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new bS(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new bS(1e3,this,e.target.range):null}computeSync(e,t){let i=Ln.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new LY(this,e.range,i)]:[]}renderHoverParts(e,t,i){let n=new G,o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,n);let s=n.add(this._menuService.createMenu(Ce.InlineCompletionsActions,this._contextKeyService)),a=i.addAction({label:g("showNextInlineSuggestion","Next"),commandId:Ju.ID,run:()=>this._commandService.executeCommand(Ju.ID)}),l=i.addAction({label:g("showPreviousInlineSuggestion","Previous"),commandId:em.ID,run:()=>this._commandService.executeCommand(em.ID)});i.addAction({label:g("acceptInlineSuggestion","Accept"),commandId:rv.id,run:()=>this._commandService.executeCommand(rv.id)});let c=[a,l];for(let d of c)d.setEnabled(!1);o.hasMultipleSuggestions().then(d=>{for(let h of c)h.setEnabled(d)});for(let[d,h]of s.getActions())for(let u of h)u instanceof Da&&i.addAction({label:u.label,commandId:u.item.id,run:()=>this._commandService.executeCommand(u.item.id)});return n}renderScreenReaderText(e,t,i){var n,o;let s=oe,a=s("div.hover-row.markdown-hover"),l=X(a,s("div.hover-contents")),c=i.add(new Xs({editor:this._editor},this._modeService,this._openerService)),d=u=>{i.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));let m=g("inlineSuggestionFollows","Suggestion:"),p=i.add(c.render(new Eo().appendText(m).appendCodeblock("text",u)));l.replaceChildren(p.element)},h=(o=(n=e.controller.activeModel)===null||n===void 0?void 0:n.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(h){let u=this._editor.getModel().getLineContent(h.lineNumber);d(h.renderForScreenReader(u))}t.appendChild(a)}};Yk=Dfe([ov(2,jt),ov(3,hs),ov(4,be),ov(5,ui),ov(6,cr),ov(7,pn)],Yk);var kY=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zk=function(r,e){return function(t,i){e(t,i,r)}},IY=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},OY=oe,u2=class extends H{constructor(e){super();this._keybindingService=e,this._hasContent=!1,this.hoverElement=OY("div.hover-row.status-bar"),this.actionsElement=X(this.hoverElement,OY("div.actions"))}get hasContent(){return this._hasContent}addAction(e){let t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(pS.render(this.actionsElement,e,i))}append(e){let t=X(this.actionsElement,e);return this._hasContent=!0,t}};u2=kY([Zk(0,Nt)],u2);var jS=class{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];let i=e.getModel(),n=t.range.startLineNumber,o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(s=>{if(s.options.isWholeLine)return!0;let a=s.range.startLineNumber===n?s.range.startColumn:1,l=s.range.endLineNumber===n?s.range.endColumn:o;return!(a>t.range.startColumn||t.range.endColumn>l)})}computeAsync(e){return IY(this,void 0,void 0,function*(){let t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);let i=jS._getLineDecorations(this._editor,t),n=yield Promise.all(this._participants.map(o=>this._computeAsync(o,i,t,e)));return n_(n)})}_computeAsync(e,t,i,n){return IY(this,void 0,void 0,function*(){return e.computeAsync?e.computeAsync(i,t,n):[]})}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];let e=jS._getLineDecorations(this._editor,this._anchor),t=[];for(let i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Ca(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(let e of this._participants)if(e.createLoadingMessage){let t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}},_h=class m2 extends en{constructor(e,t,i,n,o){super();this._hoverVisibleKey=t,this._keybindingService=n,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[i.createInstance(_k,e,this),i.createInstance(Ck,e,this),i.createInstance(Yk,e,this),i.createInstance(Dk,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new gS),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,s=>{s.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new jS(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new _S(this._computer,s=>this._withResult(s,!0),null,s=>this._withResult(s,!1),this._editor.getOption(52).delay),this._register(Zt(this.getDomNode(),De.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(Zt(this.getDomNode(),De.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(ti.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return m2.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){let t=e.target.type;if(t===6)return!0;if(t===7){let i=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,n=e.target.detail;if(n&&!n.isAfterLines&&typeof n.horizontalDistanceToText=="number"&&n.horizontalDistanceToText<i)return!0}return!1}maybeShowAt(e){var t;let i=[];for(let n of this._participants)if(typeof n.suggestHoverAnchor=="function"){let o=n.suggestHoverAnchor(e);o&&i.push(o)}if(this._shouldShowAt(e)&&e.target.range){let o=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn==1?new L(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new bk(0,o))}return i.length===0?!1:(i.sort((n,o)=>o.priority-n.priority),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(gt.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){let e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${i/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new bk(0,e),t,i)}_startShowingAt(e,t,i){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{let n=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(n.length===0)this.hide();else{if(n.length===this._messages.length)return;this._renderMessages(e,n)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let i=1073741824,n=t[0].range,o=null,s=document.createDocumentFragment(),a=new G,l=new Map;for(let d of t)i=Math.min(i,d.range.startColumn),n=L.plusRange(n,d.range),d.forceShowAtRange&&(o=d.range),l.has(d.owner)||l.set(d.owner,[]),l.get(d.owner).push(d);let c=a.add(new u2(this._keybindingService));for(let[d,h]of l)a.add(d.renderHoverParts(h,s,c));c.hasContent&&s.appendChild(c.hoverElement),this._renderDisposable=a,s.hasChildNodes()&&(o?this._showAt(o.getStartPosition(),o,this._shouldFocus):this._showAt(new V(e.range.startLineNumber,i),n,this._shouldFocus),this._updateContents(s)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,n?[{range:n,options:m2._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};_h.ID="editor.contrib.modesContentHoverWidget";_h._DECORATION_OPTIONS=ze.register({description:"content-hover-highlight",className:"hoverHighlight"});_h=kY([Zk(2,Ue),Zk(3,Nt),Zk(4,be)],_h);var TY=oe,NY=class{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){let e=n=>({value:n}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(let n of t){if(!n.options.glyphMarginClassName)continue;let o=n.options.glyphMarginHoverMessage;!o||pg(o)||i.push(...r_(o).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}},bh=class extends en{constructor(e,t,i=mU){super();this._renderDisposeables=this._register(new G),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new gS),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Xs({editor:this._editor},t,i)),this._computer=new NY(this._editor),this._hoverOperation=new _S(this._computer,n=>this._withResult(n),void 0,n=>this._withResult(n),300),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return bh.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));let t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),o=this._editor.getOption(58),s=this._hover.containerDomNode.clientHeight,a=i-n-(s-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),!!this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();let i=document.createDocumentFragment();for(let n of t){let o=TY("div.hover-row.markdown-hover"),s=X(o,TY("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(n.value));s.appendChild(a.element),i.appendChild(o)}this._updateContents(i),this._showAt(e)}};bh.ID="editor.contrib.modesGlyphHoverWidget";var Lfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Gk=function(r,e){return function(t,i){e(t,i,r)}},vh=class RY{constructor(e,t,i,n,o){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=n,this._toUnhook=new G,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=j.hoverVisible.bindTo(o)}static get(e){return e.getContribution(RY.ID)}_hookEvents(){let e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(i=>this._onEditorMouseDown(i))),this._toUnhook.add(this._editor.onMouseUp(i=>this._onEditorMouseUp(i))),this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(i=>this._onEditorMouseMove(i))),this._toUnhook.add(this._editor.onKeyDown(i=>this._onKeyDown(i)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(i=>this._onEditorScrollChanged(i)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;let t=e.target.type;if(t===9&&e.target.detail===_h.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===bh.ID||(t!==12&&e.target.detail!==bh.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,n,o,s;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===_h.ID||this._isHoverSticky&&!((i=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||i===void 0?void 0:i.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===_h.ID&&((n=this._contentWidget)===null||n===void 0?void 0:n.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===bh.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a===2&&e.target.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._glyphWidget||(this._glyphWidget=new bh(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(i=this._contentWidget)===null||i===void 0||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(_h,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};vh.ID="editor.contrib.hover";vh=Lfe([Gk(1,Ue),Gk(2,cr),Gk(3,ui),Gk(4,be)],vh);var PY=class extends pe{constructor(){super({id:"editor.action.showHover",label:g({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|39),weight:100}})}run(e,t){if(!t.hasModel())return;let i=vh.get(t);if(!i)return;let n=t.getPosition(),o=new L(n.lineNumber,n.column,n.lineNumber,n.column),s=t.getOption(2)===2;i.showContentHover(o,1,s)}},AY=class extends pe{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:g({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let i=vh.get(t);if(!i)return;let n=t.getPosition();if(!n)return;let o=new L(n.lineNumber,n.column,n.lineNumber,n.column);Gu.get(t).startFindDefinitionFromCursor(n).then(()=>{i.showContentHover(o,1,!0)})}};He(vh.ID,vh);ae(PY);ae(AY);Be((r,e)=>{let t=r.getColor(rH);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);let i=r.getColor(Fd);i&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${i}; }`);let n=r.getColor(jE);n&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${n.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${n.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${n.transparent(.5)}; }`));let o=r.getColor(_c);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);let s=r.getColor(bc);s&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);let a=r.getColor(AE);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);let l=r.getColor(oH);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);let c=r.getColor(R_);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});var Xk=class extends H{constructor(e){super();this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))||!e.target.range)return;let o=this._editor.getContribution(vh.ID);if(!o.isColorPickerVisible()){let s=new L(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);o.showContentHover(s,0,!1)}}};Xk.ID="editor.contrib.colorContribution";He(Xk.ID,Xk);var Tl=class{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;let n=t.length,o=e.length;if(i+n>o)return!1;for(let s=0;s<n;s++){let a=e.charCodeAt(i+s),l=t.charCodeAt(s);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,o,s){let a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,h=o.getLineContent(a),u=o.getLineContent(c),m=h.lastIndexOf(t,l-1+t.length),p=u.indexOf(i,d-1-i.length);if(m!==-1&&p!==-1)if(a===c)h.substring(m+t.length,p).indexOf(i)>=0&&(m=-1,p=-1);else{let v=h.substring(m+t.length),C=u.substring(0,p);(v.indexOf(i)>=0||C.indexOf(i)>=0)&&(m=-1,p=-1)}let _;m!==-1&&p!==-1?(n&&m+t.length<h.length&&h.charCodeAt(m+t.length)===32&&(t=t+" "),n&&p>0&&u.charCodeAt(p-1)===32&&(i=" "+i,p-=1),_=Tl._createRemoveBlockCommentOperations(new L(a,m+t.length+1,c,p+1),t,i)):(_=Tl._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=_.length===1?i:null);for(let v of _)s.addTrackedEditOperation(v.range,v.text)}static _createRemoveBlockCommentOperations(e,t,i){let n=[];return L.isEmpty(e)?n.push(Ut.delete(new L(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(Ut.delete(new L(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(Ut.delete(new L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){let o=[];return L.isEmpty(e)?o.push(Ut.replace(new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(Ut.insert(new V(e.startLineNumber,e.startColumn),t+(n?" ":""))),o.push(Ut.insert(new V(e.endLineNumber,e.endColumn),(n?" ":"")+i))),o}getEditOperations(e,t){let i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenizeIfCheap(i);let o=e.getLanguageIdAtPosition(i,n),s=st.getComments(o);!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){let i=t.getInverseEditOperations();if(i.length===2){let n=i[0],o=i[1];return new le(n.range.endLineNumber,n.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{let n=i[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new le(n.endLineNumber,n.endColumn+o,n.endLineNumber,n.endColumn+o)}}};var Nl=class{constructor(e,t,i,n,o,s){this._selection=e,this._tabSize=t,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,i){e.tokenizeIfCheap(t);let n=e.getLanguageIdAtPosition(t,1),o=st.getComments(n),s=o?o.lineCommentToken:null;if(!s)return null;let a=[];for(let l=0,c=i-t+1;l<c;l++)a[l]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,i,n,o,s,a){let l=!0,c;e===0?c=!0:e===1?c=!1:c=!0;for(let d=0,h=n.length;d<h;d++){let u=n[d],m=o+d;if(m===o&&a){u.ignore=!0;continue}let p=i.getLineContent(m),_=Wi(p);if(_===-1){u.ignore=s,u.commentStrOffset=p.length;continue}if(l=!1,u.ignore=!1,u.commentStrOffset=_,c&&!Tl._haystackHasNeedleAtOffset(p,u.commentStr,_)&&(e===0?c=!1:e===1||(u.ignore=!0)),c&&t){let v=_+u.commentStrLength;v<p.length&&p.charCodeAt(v)===32&&(u.commentStrLength+=1)}}if(e===0&&l){c=!1;for(let d=0,h=n.length;d<h;d++)n[d].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:n}}static _gatherPreflightData(e,t,i,n,o,s,a){let l=Nl._gatherPreflightCommentStrings(i,n,o);return l===null?{supported:!1}:Nl._analyzeLines(e,t,i,l,n,s,a)}_executeLineComments(e,t,i,n){let o;i.shouldRemoveComments?o=Nl._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(Nl._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));let s=new V(n.positionLineNumber,n.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),L.isEmpty(o[a].range)&&L.getStartPosition(o[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let o=t.startLineNumber,s=t.endLineNumber,a=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(o).lastIndexOf(i,a-1),c=e.getLineContent(s).indexOf(n,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(o).indexOf(n,l+i.length),s=o),l===-1&&c!==-1&&(l=e.getLineContent(s).lastIndexOf(i,c),o=s),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(o).indexOf(i),l!==-1&&(c=e.getLineContent(o).indexOf(n,l+i.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(s).charCodeAt(c-1)===32&&(n=" "+n,c-=1),l!==-1&&c!==-1?Tl._createRemoveBlockCommentOperations(new L(o,l+i.length+1,s,c+1),i,n):null}_executeBlockComment(e,t,i){e.tokenizeIfCheap(i.startLineNumber);let n=e.getLanguageIdAtPosition(i.startLineNumber,1),o=st.getComments(n);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;let s=o.blockCommentStartToken,a=o.blockCommentEndToken,l=this._attemptRemoveBlockComment(e,i,s,a);if(!l){if(i.isEmpty()){let c=e.getLineContent(i.startLineNumber),d=Wi(c);d===-1&&(d=c.length),l=Tl._createAddBlockCommentOperations(new L(i.startLineNumber,d+1,i.startLineNumber,c.length+1),s,a,this._insertSpace)}else l=Tl._createAddBlockCommentOperations(new L(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),s,a,this._insertSpace);l.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(i);for(let c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new L(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=Nl._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new le(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let i=[];for(let n=0,o=e.length;n<o;n++){let s=e[n];s.ignore||i.push(Ut.delete(new L(t+n,s.commentStrOffset+1,t+n,s.commentStrOffset+s.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){let i=[],n=this._insertSpace?" ":"";for(let o=0,s=e.length;o<s;o++){let a=e[o];a.ignore||i.push(Ut.insert(new V(t+o,a.commentStrOffset+1),a.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let o=1073741824,s,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;let d=e.getLineContent(i+l),h=0;for(let u=0,m=t[l].commentStrOffset;h<o&&u<m;u++)h=Nl.nextVisibleColumn(h,n,d.charCodeAt(u)===9,1);h<o&&(o=h)}o=Math.floor(o/n)*n;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;let d=e.getLineContent(i+l),h=0;for(s=0,a=t[l].commentStrOffset;h<o&&s<a;s++)h=Nl.nextVisibleColumn(h,n,d.charCodeAt(s)===9,1);h>o?t[l].commentStrOffset=s-1:t[l].commentStrOffset=s}}};var Qk=class extends pe{constructor(e,t){super(t);this._type=e}run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=[],o=i.getOptions(),s=t.getOption(19),a=t.getSelections().map((c,d)=>({selection:c,index:d,ignoreFirstLine:!1}));a.sort((c,d)=>L.compareRangesUsingStarts(c.selection,d.selection));let l=a[0];for(let c=1;c<a.length;c++){let d=a[c];l.selection.endLineNumber===d.selection.startLineNumber&&(l.index<d.index?d.ignoreFirstLine=!0:(l.ignoreFirstLine=!0,l=d))}for(let c of a)n.push(new Nl(c.selection,o.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,c.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},jY=class extends Qk{constructor(){super(0,{id:"editor.action.commentLine",label:g("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|85,weight:100},menuOpts:{menuId:Ce.MenubarEditMenu,group:"5_insert",title:g({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}},MY=class extends Qk{constructor(){super(1,{id:"editor.action.addCommentLine",label:g("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|33),weight:100}})}},FY=class extends Qk{constructor(){super(2,{id:"editor.action.removeCommentLine",label:g("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|51),weight:100}})}},BY=class extends pe{constructor(){super({id:"editor.action.blockComment",label:g("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|31,linux:{primary:2048|1024|31},weight:100},menuOpts:{menuId:Ce.MenubarEditMenu,group:"5_insert",title:g({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;let i=t.getOption(19),n=[],o=t.getSelections();for(let s of o)n.push(new Tl(s,i.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};ae(jY);ae(MY);ae(FY);ae(BY);var kfe=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},MS=function(r,e){return function(t,i){e(t,i,r)}},sv=class WY{constructor(e,t,i,n,o,s){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=o,this._menuService=s,this._toDispose=new G,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){let l=this._contextViewService.getContextViewElement(),c=a.srcElement;c.shadowRoot&&ga(l)===c.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(WY.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let i=!1;for(let n of this._editor.getSelections())if(n.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}let t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?Ce.SimpleEditorContext:Ce.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let i=[],n=this._menuService.createMenu(t,this._contextKeyService),o=n.getActions({arg:e.uri});n.dispose();for(let s of o){let[,a]=s,l=0;for(let c of a)if(c instanceof Sf){let d=this._getMenuActions(e,c.item.submenu);d.length>0&&(i.push(new Ed(c.id,c.label,d)),l++)}else i.push(c),l++;l&&i.push(new gr)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let i=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=ci(this._editor.getDomNode()),a=s.left+o.left,l=s.top+o.top+o.height;t={x:a,y:l}}let n=this._editor.getOption(113)&&!To;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:n?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{let s=this._keybindingFor(o);if(s)return new Ic(o,o,{label:!0,keybinding:s.getLabel(),isMenu:!0});let a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new Ic(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:i})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};sv.ID="editor.contrib.contextmenu";sv=kfe([MS(1,Ho),MS(2,bs),MS(3,be),MS(4,Nt),MS(5,hs)],sv);var UY=class extends pe{constructor(){super({id:"editor.action.showContextMenu",label:g("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:1024|68,weight:100}})}run(e,t){sv.get(t).showContextMenu()}};He(sv.ID,sv);ae(UY);var Jk=class{constructor(e){this.selections=e}equals(e){let t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}},eI=class{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}},tm=class extends H{constructor(e){super();this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;let i=new Jk(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new eI(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(tm.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new eI(new Jk(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new eI(new Jk(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};tm.ID="editor.contrib.cursorUndoRedoController";var VY=class extends pe{constructor(){super({id:"cursorUndo",label:g("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:2048|51,weight:100}})}run(e,t,i){tm.get(t).cursorUndo()}},zY=class extends pe{constructor(){super({id:"cursorRedo",label:g("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){tm.get(t).cursorRedo()}};He(tm.ID,tm);ae(VY);ae(zY);var f2=class{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){let i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new le(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new le(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new le(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new le(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new le(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}};function av(r){return We?r.altKey:r.ctrlKey}var Kc=class extends H{constructor(e){super();this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(av(e)&&(this._modifierPressed=!0),this._mouseDown&&av(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(av(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Kc.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let n=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(n.length===1)this._dragSelection=n[0];else return}av(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new V(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){let n=this._editor.getSelection();if(n){let{selectionStartLineNumber:o,selectionStartColumn:s}=n;i=[new le(o,s,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(n=>n.containsPosition(t)?new le(t.lineNumber,t.column,t.lineNumber,t.column):n);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(av(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Kc.ID,new f2(this._dragSelection,t,av(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:Kc._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};Kc.ID="editor.contrib.dragAndDrop";Kc.TRIGGER_KEY_VALUE=We?6:5;Kc._DECORATION_OPTIONS=ze.register({description:"dnd-target",className:"dnd-target"});He(Kc.ID,Kc);var nr=class{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){let t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(let i of t){let n=i.options;if(n===nr._FIND_MATCH_DECORATION||n===nr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,o=this._decorations.length;n<o;n++){let s=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(s)){t=this._decorations[n],i=n+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(n=>{if(this._highlightedDecorationId!==null&&(n.changeDecorationOptions(this._highlightedDecorationId,nr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,n.changeDecorationOptions(this._highlightedDecorationId,nr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){let s=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);o=new L(o.startLineNumber,o.startColumn,s,a)}this._rangeHighlightDecorationId=n.addDecoration(o,nr._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let n=nr._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){n=nr._FIND_MATCH_NO_OVERVIEW_DECORATION;let a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c)),h=e[0].range.startLineNumber,u=e[0].range.endLineNumber;for(let m=1,p=e.length;m<p;m++){let _=e[m].range;u+d>=_.startLineNumber?_.endLineNumber>u&&(u=_.endLineNumber):(o.push({range:new L(h,1,u,1),options:nr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=_.startLineNumber,u=_.endLineNumber)}o.push({range:new L(h,1,u,1),options:nr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,l=e.length;a<l;a++)s[a]={range:e[a].range,options:n};this._decorations=i.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),(t==null?void 0:t.length)&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,nr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(!(!n||n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){let n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};nr._CURRENT_FIND_MATCH_DECORATION=ze.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:yi(WE),position:Qn.Center},minimap:{color:yi(xR),position:kr.Inline}});nr._FIND_MATCH_DECORATION=ze.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:yi(WE),position:Qn.Center},minimap:{color:yi(xR),position:kr.Inline}});nr._FIND_MATCH_NO_OVERVIEW_DECORATION=ze.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});nr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=ze.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:yi(WE),position:Qn.Center}});nr._RANGE_HIGHLIGHT_DECORATION=ze.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});nr._FIND_SCOPE_DECORATION=ze.register({description:"find-scope",className:"findScope",isWholeLine:!0});var g2=class{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let i=[];for(let s=0;s<this._ranges.length;s++)i.push({range:this._ranges[s],text:this._replaceStrings[s]});i.sort((s,a)=>L.compareRangesUsingStarts(s.range,a.range));let n=[],o=i[0];for(let s=1;s<i.length;s++)o.range.endLineNumber===i[s].range.startLineNumber&&o.range.endColumn===i[s].range.startColumn?(o.range=o.range.plusRange(i[s].range),o.text=o.text+i[s].text):(n.push(o),o=i[s]);n.push(o);for(let s of n)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}};function p2(r,e){if(r&&r[0]!==""){let t=HY(r,e,"-"),i=HY(r,e,"_");return t&&!i?$Y(r,e,"-"):!t&&i?$Y(r,e,"_"):r[0].toUpperCase()===r[0]?e.toUpperCase():r[0].toLowerCase()===r[0]?e.toLowerCase():zW(r[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):r[0][0].toUpperCase()!==r[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function HY(r,e,t){return r[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&r[0].split(t).length===e.split(t).length}function $Y(r,e,t){let i=e.split(t),n=r[0].split(t),o="";return i.forEach((s,a)=>{o+=p2([n[a]],s)+t}),o.slice(0,-1)}var _2=class{constructor(e){this.staticValue=e,this.kind=0}},KY=class{constructor(e){this.pieces=e,this.kind=1}},im=class{constructor(e){!e||e.length===0?this._state=new _2(""):e.length===1&&e[0].staticValue!==null?this._state=new _2(e[0].staticValue):this._state=new KY(e)}static fromStaticValue(e){return new im([nm.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?p2(e,this._state.staticValue):this._state.staticValue;let i="";for(let n=0,o=this._state.pieces.length;n<o;n++){let s=this._state.pieces[n];if(s.staticValue!==null){i+=s.staticValue;continue}let a=im._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let l=[],c=s.caseOps.length,d=0;for(let h=0,u=a.length;h<u;h++){if(d>=c){l.push(a.slice(h));break}switch(s.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}},nm=class{constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}static staticValue(e){return new nm(e,-1,null)}static caseOps(e,t){return new nm(null,e,t)}},qY=class{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=nm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=nm.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=nm.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new im(this._result)}};function YY(r){if(!r||r.length===0)return new im(null);let e=[],t=new qY(r);for(let i=0,n=r.length;i<n;i++){let o=r.charCodeAt(i);if(o===92){if(i++,i>=n)break;let s=r.charCodeAt(i);switch(s){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(s));break}continue}if(o===36){if(i++,i>=n)break;let s=r.charCodeAt(i);if(s===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(s===48||s===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(i+1<n){let l=r.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}var rm=new _e("findWidgetVisible",!1),lv=new _e("findInputFocussed",!1),FS=new _e("replaceInputFocussed",!1),BS={primary:512|33,mac:{primary:2048|512|33}},WS={primary:512|53,mac:{primary:2048|512|53}},US={primary:512|48,mac:{primary:2048|512|48}},VS={primary:512|42,mac:{primary:2048|512|42}},zS={primary:512|46,mac:{primary:2048|512|46}},ai={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},qc=19999,Ife=240,Fg=class{constructor(e,t){this._toDispose=new G,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new li,this._decorations=new nr(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new dt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Ge(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||!this._editor.hasModel()||(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Ife)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t!="undefined"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new L(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let n=this._findMatches(i,!1,qc);this._decorations.set(n,i);let o=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(o);if(s===0&&n.length>0){let a=Ix(n.map(l=>l.range),l=>L.compareRangesUsingStarts(l,o)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||n===1?(i===1?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new V(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){let d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<qc){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;let i=this._decorations.getFindScope(),n=Fg._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());let{lineNumber:o,column:s}=e,a=this._editor.getModel(),l=new V(o,s),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),!!c){if(!t&&!n.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new V(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){let i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<qc){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),s=Fg._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:l}=e,c=this._editor.getModel(),d=new V(a,l),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return i&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),h?!n&&!s.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,i,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?YY(this._state.replaceString):im.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new Yi(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new V(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){let n=(e||[null]).map(o=>Fg._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,i)}replaceAll(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=qc?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){let t=new hc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let h="mu";i.ignoreCase&&(h+="i"),i.global&&(h+="g"),i=new RegExp(i.source,h)}let n=this._editor.getModel(),o=n.getValue(1),s=n.getFullModelRange(),a=this._getReplacePattern(),l,c=this._state.preserveCase;a.hasReplacementPatterns||c?l=o.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=o.replace(i,a.buildReplaceString(null,c));let d=new Ff(s,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){let t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let s=0,a=i.length;s<a;s++)n[s]=t.buildReplaceString(i[s].matches,this._state.preserveCase);let o=new g2(this._editor.getSelection(),i.map(s=>s.range),n);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),i=this._findMatches(e,!1,1073741824).map(o=>new le(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),n=this._editor.getSelection();for(let o=0,s=i.length;o<s;o++)if(i[o].equalsRange(n)){i=[n].concat(i.slice(0,o)).concat(i.slice(o+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}};var Ofe={inputActiveOptionBorder:q.fromHex("#007ACC00"),inputActiveOptionForeground:q.fromHex("#FFFFFF"),inputActiveOptionBackground:q.fromHex("#0E639C50")},wh=class extends en{constructor(e){super();this._onChange=this._register(new M),this.onChange=this._onChange.event,this._onKeyDown=this._register(new M),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},Ofe),e),this._checked=this._opts.isChecked;let t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Vn.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}};var Tfe=g("caseDescription","Match Case"),Nfe=g("wordsDescription","Match Whole Word"),Rfe=g("regexDescription","Use Regular Expression"),HS=class extends wh{constructor(e){super({icon:ge.caseSensitive,title:Tfe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},$S=class extends wh{constructor(e){super({icon:ge.wholeWord,title:Nfe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},KS=class extends wh{constructor(e){super({icon:ge.regex,title:Rfe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};var cv=class extends en{constructor(e,t,i,n){super();this._hideSoon=this._register(new dt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");let o=n.getColorTheme().getColor(xy),s=n.getColorTheme().getColor(Dy),a=n.getColorTheme().getColor(Ey);this.caseSensitive=this._register(new HS({appendTitle:this._keybindingLabelFor(ai.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new $S({appendTitle:this._keybindingLabelFor(ai.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new KS({appendTitle:this._keybindingLabelFor(ai.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(Op(this._domNode,l=>this._onMouseOut())),this._register(J(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(n.getColorTheme()),this._register(n.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return cv.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){!this._isVisible||(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(xy),inputActiveOptionForeground:e.getColor(Dy),inputActiveOptionBackground:e.getColor(Ey)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}};cv.ID="editor.contrib.findOptionsWidget";Be((r,e)=>{let t=r.getColor(Zr);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);let i=r.getColor(wc);i&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${i}; }`);let n=r.getColor(Oa);n&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${n}; }`);let o=r.getColor(Ci);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function tI(r,e){return r===1?!0:r===2?!1:e}var b2=class extends H{constructor(){super();this._onFindReplaceStateChange=this._register(new M),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return tI(this._isRegexOverride,this._isRegex)}get wholeWord(){return tI(this._wholeWordOverride,this._wholeWord)}get matchCase(){return tI(this._matchCaseOverride,this._matchCase)}get preserveCase(){return tI(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),typeof i!="undefined"&&(L.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var n;let o={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1,a=this.isRegex,l=this.wholeWord,c=this.matchCase,d=this.preserveCase;typeof e.searchString!="undefined"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,s=!0),typeof e.replaceString!="undefined"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,s=!0),typeof e.isRevealed!="undefined"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,s=!0),typeof e.isReplaceRevealed!="undefined"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,s=!0),typeof e.isRegex!="undefined"&&(this._isRegex=e.isRegex),typeof e.wholeWord!="undefined"&&(this._wholeWord=e.wholeWord),typeof e.matchCase!="undefined"&&(this._matchCase=e.matchCase),typeof e.preserveCase!="undefined"&&(this._preserveCase=e.preserveCase),typeof e.searchScope!="undefined"&&(((n=e.searchScope)===null||n===void 0?void 0:n.every(h=>{var u;return(u=this._searchScope)===null||u===void 0?void 0:u.some(m=>!L.equalsRange(m,h))}))||(this._searchScope=e.searchScope,o.searchScope=!0,s=!0)),typeof e.loop!="undefined"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride!="undefined"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride!="undefined"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride!="undefined"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride!="undefined"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,o.isRegex=!0),l!==this.wholeWord&&(s=!0,o.wholeWord=!0),c!==this.matchCase&&(s=!0,o.matchCase=!0),d!==this.preserveCase&&(s=!0,o.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=qc}};var Pfe=g("defaultLabel","input"),v2=class extends en{constructor(e,t,i,n){super();this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new M),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new M),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new M),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new M),this._onKeyUp=this._register(new M),this._onCaseSensitiveKeyDown=this._register(new M),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new M),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||Pfe,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;let o=n.appendCaseSensitiveLabel||"",s=n.appendWholeWordsLabel||"",a=n.appendRegexLabel||"",l=n.history||[],c=!!n.flexibleHeight,d=!!n.flexibleWidth,h=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new MC(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:n.showHistoryHint,flexibleHeight:c,flexibleWidth:d,flexibleMaxHeight:h})),this.regex=this._register(new KS({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(p=>{this._onRegexKeyDown.fire(p)})),this.wholeWords=this._register(new $S({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new HS({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(p=>{this._onCaseSensitiveKeyDown.fire(p)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let _=u.indexOf(document.activeElement);if(_>=0){let v=-1;p.equals(17)?v=(_+1)%u.length:p.equals(15)&&(_===0?v=u.length-1:v=_-1),p.equals(9)?(u[_].blur(),this.inputBox.focus()):v>=0&&u[v].focus(),St.stop(p,!0)}}});let m=document.createElement("div");m.className="controls",m.style.display=this._showOptionButtons?"block":"none",m.appendChild(this.caseSensitive.domNode),m.appendChild(this.wholeWords.domNode),m.appendChild(this.regex.domNode),this.domNode.appendChild(m),e&&e.appendChild(this.domNode),this._register(J(this.inputBox.inputElement,"compositionstart",p=>{this.imeSessionInProgress=!0})),this._register(J(this.inputBox.inputElement,"compositionend",p=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){let e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);let t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}};var Afe=g("defaultLabel","input"),jfe=g("label.preserveCaseCheckbox","Preserve Case"),ZY=class extends wh{constructor(e){super({icon:ge.preserveCase,title:jfe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},w2=class extends en{constructor(e,t,i,n){super();this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new M),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new M),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new M),this._onInput=this._register(new M),this._onKeyUp=this._register(new M),this._onPreserveCaseKeyDown=this._register(new M),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||Afe,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;let o=n.appendPreserveCaseLabel||"",s=n.history||[],a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new MC(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:s,showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new ZY({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(u=>{this._onDidOptionChange.fire(u),!u&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(u=>{this._onPreserveCaseKeyDown.fire(u)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let d=[this.preserveCase.domNode];this.onkeydown(this.domNode,u=>{if(u.equals(15)||u.equals(17)||u.equals(9)){let m=d.indexOf(document.activeElement);if(m>=0){let p=-1;u.equals(17)?p=(m+1)%d.length:u.equals(15)&&(m===0?p=d.length-1:p=m-1),u.equals(9)?(d[m].blur(),this.inputBox.focus()):p>=0&&d[p].focus(),St.stop(u,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){let e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);let t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}};var GY=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},XY=function(r,e){return function(t,i){e(t,i,r)}},qS="historyNavigationWidget",QY="historyNavigationForwardsEnabled",JY="historyNavigationBackwardsEnabled";function Mfe(r,e,t){new _e(t,e).bindTo(r)}function Ffe(r,e){return r.createScoped(e.target)}function eZ(r,e){return r.getContext(document.activeElement).getValue(e)}function tZ(r,e){let t=Ffe(r,e);Mfe(t,e,qS);let i=new _e(QY,!0).bindTo(t),n=new _e(JY,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:n}}var iI=class extends v2{constructor(e,t,i,n,o=!1){super(e,t,o,i);this._register(tZ(n,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};iI=GY([XY(3,be)],iI);var nI=class extends w2{constructor(e,t,i,n,o=!1){super(e,t,o,i);this._register(tZ(n,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};nI=GY([XY(3,be)],nI);on.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:fe.and(fe.has(qS),fe.equals(JY,!0),gt.Visible.isEqualTo(!1)),primary:16,secondary:[512|16],handler:r=>{let e=eZ(r.get(be),qS);e&&e.historyNavigator.showPreviousValue()}});on.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:fe.and(fe.has(qS),fe.equals(QY,!0),gt.Visible.isEqualTo(!1)),primary:18,secondary:[512|18],handler:r=>{let e=eZ(r.get(be),qS);e&&e.historyNavigator.showNextValue()}});function y2(r){var e,t;return((e=r.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=r.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var Bfe=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Wfe=Gi("find-selection",ge.selection,g("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),iZ=Gi("find-collapsed",ge.chevronRight,g("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),nZ=Gi("find-expanded",ge.chevronDown,g("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Ufe=Gi("find-replace",ge.replace,g("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Vfe=Gi("find-replace-all",ge.replaceAll,g("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),zfe=Gi("find-previous-match",ge.arrowUp,g("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Hfe=Gi("find-next-match",ge.arrowDown,g("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),$fe=g("label.find","Find"),Kfe=g("placeholder.find","Find"),qfe=g("label.previousMatchButton","Previous Match"),Yfe=g("label.nextMatchButton","Next Match"),Zfe=g("label.toggleSelectionFind","Find in Selection"),Gfe=g("label.closeButton","Close"),Xfe=g("label.replace","Replace"),Qfe=g("placeholder.replace","Replace"),Jfe=g("label.replaceButton","Replace"),ege=g("label.replaceAllButton","Replace All"),tge=g("label.toggleReplaceButton","Toggle Replace"),ige=g("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",qc),nge=g("label.matchesLocation","{0} of {1}"),rZ=g("label.noResults","No results"),Yc=419,rge=275,oge=rge-54,YS=69,sge=33,oZ="ctrlEnterReplaceAll.windows.donotask",sZ=We?256:2048,rI=class{constructor(e){this.afterLineNumber=e,this.heightInPx=sge,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}};function aZ(r,e,t){let i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){r.stopPropagation();return}}function lZ(r,e,t){let i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){r.stopPropagation();return}}var dv=class extends en{constructor(e,t,i,n,o,s,a,l,c){super();this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=o,this._contextKeyService=s,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(oZ,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new zr(500),this._register(Re(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(d=>this._onStateChanged(d))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(d=>{if(d.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),d.hasChanged(129)&&this._tryUpdateWidgetWidth(),d.hasChanged(2)&&this.updateAccessibilitySupport(),d.hasChanged(35)){let h=this._codeEditor.getOption(35).addExtraSpaceOnTop;h&&!this._viewZone&&(this._viewZone=new rI(0),this._showViewZone()),!h&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>Bfe(this,void 0,void 0,function*(){if(this._isVisible){let d=yield this._controller.getGlobalBufferTerm();d&&d!==this._state.searchString&&(this._state.change({searchString:d},!1),this._findInput.select())}}))),this._findInputFocused=lv.bindTo(s),this._findFocusTracker=this._register(il(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=FS.bindTo(s),this._replaceFocusTracker=this._register(il(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new rI(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{!this._isVisible||(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(d=>{if(d.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return dv.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Po(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,we)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=YS+"px",this._state.matchesCount>=qc?this._matchesCount.title=ige:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=qc&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=Dr(nge,i,t)}else e=rZ;this._matchesCount.appendChild(document.createTextNode(e)),Oi(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),YS=Math.max(YS,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===rZ)return i===""?g("ariaSearchNoResultEmpty","{0} found",e):g("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){let n=g("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${n}`:n}return g("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":let i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break;default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){let i=this._codeEditor.getDomNode();if(i){let n=ci(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=n.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);let l=X1(this._domNode).left;s>l&&(t=!1);let c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());n.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;let i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(n=>{i.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new rI(0));let i=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){let o=this._getHeight();if(o===i.heightInPx)return;let s=o-i.heightInPx;i.heightInPx=o,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;i.heightInPx=o,this._viewZoneId=n.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(xy),inputActiveOptionBackground:e.getColor(Ey),inputActiveOptionForeground:e.getColor(Dy),inputBackground:e.getColor(P_),inputForeground:e.getColor(A_),inputBorder:e.getColor(j_),inputValidationInfoBackground:e.getColor(M_),inputValidationInfoForeground:e.getColor(F_),inputValidationInfoBorder:e.getColor(B_),inputValidationWarningBackground:e.getColor(LE),inputValidationWarningForeground:e.getColor(kE),inputValidationWarningBorder:e.getColor(IE),inputValidationErrorBackground:e.getColor(OE),inputValidationErrorForeground:e.getColor(TE),inputValidationErrorBorder:e.getColor(NE)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!Ip(this._domNode))return;let e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");let i=e.width,n=e.minimap.minimapWidth,o=!1,s=!1,a=!1;if(this._resized&&Po(this._domNode)>Yc){this._domNode.style.maxWidth=`${i-28-n-15}px`,this._replaceInput.width=Po(this._findInput.domNode);return}if(Yc+28+n>=i&&(s=!0),Yc+28+n-YS>=i&&(a=!0),Yc+28+n-YS>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",s),!a&&!o&&(this._domNode.style.maxWidth=`${i-28-n-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Po(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){let e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(!!this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));let i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!L.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(sZ|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2048|18)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return aZ(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return lZ(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(sZ|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{bi&&so&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(g("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(oZ,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1024|2)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2048|18)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return aZ(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return lZ(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){let e=!0,t=!0;this._findInput=this._register(new iI(null,this._contextViewProvider,{width:oge,label:$fe,placeholder:Kfe,appendCaseSensitiveLabel:this._keybindingLabelFor(ai.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ai.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ai.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>y2(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1024|2)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),ji&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Bg({label:qfe+this._keybindingLabelFor(ai.PreviousMatchFindAction),icon:zfe,onTrigger:()=>{this._codeEditor.getAction(ai.PreviousMatchFindAction).run().then(void 0,we)}})),this._nextBtn=this._register(new Bg({label:Yfe+this._keybindingLabelFor(ai.NextMatchFindAction),icon:Hfe,onTrigger:()=>{this._codeEditor.getAction(ai.NextMatchFindAction).run().then(void 0,we)}}));let i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);let n=document.createElement("div");n.className="find-actions",i.appendChild(n),n.appendChild(this._matchesCount),n.appendChild(this._prevBtn.domNode),n.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new wh({icon:Wfe,title:Zfe+this._keybindingLabelFor(ai.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),n.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Bg({label:Gfe+this._keybindingLabelFor(ai.CloseFindWidgetCommand),icon:K7,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),n.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new nI(null,void 0,{label:Xfe,placeholder:Qfe,appendPreserveCaseLabel:this._keybindingLabelFor(ai.TogglePreserveCaseCommand),history:[],flexibleHeight:e,flexibleWidth:t,flexibleMaxHeight:118,showHistoryHint:()=>y2(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new Bg({label:Jfe+this._keybindingLabelFor(ai.ReplaceOneAction),icon:Ufe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1024|2)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new Bg({label:ege+this._keybindingLabelFor(ai.ReplaceAllAction),icon:Vfe,onTrigger:()=>{this._controller.replaceAll()}}));let o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);let s=document.createElement("div");s.className="replace-actions",o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Bg({label:tge,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Po(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Yc}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(o),this._resizeSash=new cn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Yc;this._register(this._resizeSash.onDidStart(()=>{a=Po(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let c=a+l.startX-l.currentX;if(c<Yc)return;let d=parseFloat(G1(this._domNode).maxWidth)||0;c>d||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Po(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let l=Po(this._domNode);if(l<Yc)return;let c=Yc;if(!this._resized||l===Yc){let d=this._codeEditor.getLayoutInfo();c=d.width-28-d.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=Po(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};dv.ID="editor.contrib.findWidget";var Bg=class extends en{constructor(e){super();this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Tt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,i=>{this._opts.onTrigger(),i.preventDefault()}),this.onkeydown(this._domNode,i=>{if(i.equals(10)||i.equals(3)){this._opts.onTrigger(),i.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(i)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Tt.asClassNameArray(iZ)),this._domNode.classList.add(...Tt.asClassNameArray(nZ))):(this._domNode.classList.remove(...Tt.asClassNameArray(nZ)),this._domNode.classList.add(...Tt.asClassNameArray(iZ)))}};Be((r,e)=>{let t=(p,_)=>{_&&e.addRule(`.monaco-editor ${p} { background-color: ${_}; }`)};t(".findMatch",r.getColor(Iy)),t(".currentFindMatch",r.getColor(Jz)),t(".findScope",r.getColor(eH));let i=r.getColor(Zr);t(".find-widget",i);let n=r.getColor(Oa);n&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);let o=r.getColor(iH);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);let s=r.getColor(tH);s&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${s}; padding: 1px; box-sizing: border-box; }`);let a=r.getColor(nH);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; }`);let l=r.getColor(Ci);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);let c=r.getColor(wc);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);let d=r.getColor(Nz);d&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${d}; }`);let h=r.getColor(Vz);if(h)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${h}; }`);else{let p=r.getColor(Md);p&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${p}; }`)}let u=r.getColor(WH);u&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${u} !important;
		}
	`);let m=r.getColor(pc);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var cZ=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Zc=function(r,e){return function(t,i){e(t,i,r)}},hv=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},age=524288;function C2(r,e="single",t=!1){if(!r.hasModel())return null;let i=r.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){let n=r.getConfiguredWordAtPosition(i.getStartPosition());if(n&&t===!1)return n.word}else if(r.getModel().getValueLengthInRange(i)<age)return r.getModel().getValueInRange(i)}return null}var Qo=class dZ extends H{constructor(e,t,i,n){super();this._editor=e,this._findWidgetVisible=rm.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new zr(500),this._state=this._register(new b2),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(dZ.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!lv.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Xn(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return hv(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){let i=C2(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=Xn(i):t.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let i=C2(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(t.searchString=i)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let i=this._editor.getSelections();i.some(n=>!n.isEmpty())&&(t.searchScope=i)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new Fg(this._editor,this._state))})}start(e){return this._start(e)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return hv(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Qo.ID="editor.contrib.findController";Qo=cZ([Zc(1,be),Zc(2,Zo),Zc(3,$o)],Qo);var S2=class extends Qo{constructor(e,t,i,n,o,s,a,l){super(e,i,a,l);this._contextViewService=t,this._keybindingService=n,this._themeService=o,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e){let t=Object.create(null,{_start:{get:()=>super._start}});return hv(this,void 0,void 0,function*(){this._widget||this._createFindWidget();let i=this._editor.getSelection(),n=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":n=!!i&&i.startLineNumber!==i.endLineNumber;break;default:break}e.updateSearchScope=n,yield t._start.call(this,e),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new dv(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new cv(this._editor,this._state,this._keybindingService,this._themeService))}};S2=cZ([Zc(1,bs),Zc(2,be),Zc(3,Nt),Zc(4,ht),Zc(5,Vt),Zc(6,Zo),Zc(7,$o)],S2);var lge=LN(new sE({id:ai.StartFindAction,label:g("startFindAction","Find"),alias:"Find",precondition:fe.or(j.focus,fe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2048|36,weight:100},menuOpts:{menuId:Ce.MenubarEditMenu,group:"3_find",title:g({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));lge.addImplementation(0,(r,e,t)=>{let i=Qo.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});var hZ=class extends pe{constructor(){super({id:ai.StartFindWithSelection,label:g("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2048|35},weight:100}})}run(e,t){return hv(this,void 0,void 0,function*(){let i=Qo.get(t);i&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),i.setGlobalBufferTerm(i.getState().searchString))})}},x2=class extends pe{run(e,t){return hv(this,void 0,void 0,function*(){let i=Qo.get(t);i&&!this._run(i)&&(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(i))})}},uZ=class extends x2{constructor(){super({id:ai.NextMatchFindAction,label:g("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:j.focus,primary:61,mac:{primary:2048|37,secondary:[61]},weight:100},{kbExpr:fe.and(j.focus,lv),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}},mZ=class extends x2{constructor(){super({id:ai.PreviousMatchFindAction,label:g("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:j.focus,primary:1024|61,mac:{primary:2048|1024|37,secondary:[1024|61]},weight:100},{kbExpr:fe.and(j.focus,lv),primary:1024|3,weight:100}]})}_run(e){return e.moveToPrevMatch()}},E2=class extends pe{run(e,t){return hv(this,void 0,void 0,function*(){let i=Qo.get(t);if(!i)return;let n=t.getOption(35).seedSearchStringFromSelection==="selection",o=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(o=C2(t,"single",n)),o&&i.setSearchString(o),this._run(i)||(yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:n,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(i))})}},fZ=class extends E2{constructor(){super({id:ai.NextSelectionMatchFindAction,label:g("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:2048|61,weight:100}})}_run(e){return e.moveToNextMatch()}},gZ=class extends E2{constructor(){super({id:ai.PreviousSelectionMatchFindAction,label:g("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:2048|1024|61,weight:100}})}_run(e){return e.moveToPrevMatch()}},cge=LN(new sE({id:ai.StartFindReplaceAction,label:g("startReplace","Replace"),alias:"Replace",precondition:fe.or(j.focus,fe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2048|38,mac:{primary:2048|512|36},weight:100},menuOpts:{menuId:Ce.MenubarEditMenu,group:"3_find",title:g({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));cge.addImplementation(0,(r,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;let i=Qo.get(e);if(!i)return!1;let n=e.getSelection(),o=i.isFindInputFocused(),s=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!o,a=o||s?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});He(Qo.ID,S2);ae(hZ);ae(uZ);ae(mZ);ae(fZ);ae(gZ);var Rl=fi.bindToContribution(Qo.get);ce(new Rl({id:ai.CloseFindWidgetCommand,precondition:rm,handler:r=>r.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:fe.and(j.focus,fe.not("isComposing")),primary:9,secondary:[1024|9]}}));ce(new Rl({id:ai.ToggleCaseSensitiveCommand,precondition:void 0,handler:r=>r.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:BS.primary,mac:BS.mac,win:BS.win,linux:BS.linux}}));ce(new Rl({id:ai.ToggleWholeWordCommand,precondition:void 0,handler:r=>r.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:WS.primary,mac:WS.mac,win:WS.win,linux:WS.linux}}));ce(new Rl({id:ai.ToggleRegexCommand,precondition:void 0,handler:r=>r.toggleRegex(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:US.primary,mac:US.mac,win:US.win,linux:US.linux}}));ce(new Rl({id:ai.ToggleSearchScopeCommand,precondition:void 0,handler:r=>r.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:VS.primary,mac:VS.mac,win:VS.win,linux:VS.linux}}));ce(new Rl({id:ai.TogglePreserveCaseCommand,precondition:void 0,handler:r=>r.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:zS.primary,mac:zS.mac,win:zS.win,linux:zS.linux}}));ce(new Rl({id:ai.ReplaceOneAction,precondition:rm,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:2048|1024|22}}));ce(new Rl({id:ai.ReplaceOneAction,precondition:rm,handler:r=>r.replace(),kbOpts:{weight:100+5,kbExpr:fe.and(j.focus,FS),primary:3}}));ce(new Rl({id:ai.ReplaceAllAction,precondition:rm,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:2048|512|3}}));ce(new Rl({id:ai.ReplaceAllAction,precondition:rm,handler:r=>r.replaceAll(),kbOpts:{weight:100+5,kbExpr:fe.and(j.focus,FS),primary:void 0,mac:{primary:2048|3}}}));ce(new Rl({id:ai.SelectAllMatchesAction,precondition:rm,handler:r=>r.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:j.focus,primary:512|3}}));var pZ=65535,Pl=16777215,_Z=4278190080,yh=class{constructor(e,t,i){if(e.length!==t.length||e.length>pZ)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(i,n)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=i&&this.getEndLineNumber(o)>=n};for(let i=0,n=this._startIndexes.length;i<n;i++){let o=this._startIndexes[i],s=this._endIndexes[i];if(o>Pl||s>Pl)throw new Error("startLineNumber or endLineNumber must not exceed "+Pl);for(;e.length>0&&!t(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((a&255)<<24),this._endIndexes[i]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Pl}getEndLineNumber(e){return this._endIndexes[e]&Pl}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return(this._collapseStates[t]&1<<i)!=0}setCollapsed(e,t){let i=e/32|0,n=e%32,o=this._collapseStates[i];t?this._collapseStates[i]=o|1<<n:this._collapseStates[i]=o&~(1<<n)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new bZ(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&_Z)>>>24)+((this._endIndexes[e]&_Z)>>>16);return t===pZ?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){let n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}},bZ=class{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}};var D2=class{constructor(e,t){this._updateEventEmitter=new M,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new yh(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,n)=>i.regionIndex-n.regionIndex);let t={};this._decorationProvider.changeDecorations(i=>{let n=0,o=-1,s=-1,a=l=>{for(;n<l;){let c=this._regions.getEndLineNumber(n),d=this._regions.isCollapsed(n);c<=o&&i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(d,c<=s)),d&&c>s&&(s=c),n++}};for(let l of e){let c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);let h=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,h),o=Math.max(o,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],n=(h,u)=>{for(let m of t)if(h<m&&m<=u)return!0;return!1},o=-1,s=(h,u)=>{let m=e.getStartLineNumber(h),p=e.getEndLineNumber(h);u||(u=e.isCollapsed(h)),u&&n(m,p)&&(u=!1),e.setCollapsed(h,u);let _=this._textModel.getLineMaxColumn(m),v={startLineNumber:m,startColumn:Math.max(_-1,1),endLineNumber:m,endColumn:_};i.push({range:v,options:this._decorationProvider.getDecorationOption(u,p<=o)}),u&&p>o&&(o=p)},a=0,l=()=>{for(;a<this._regions.length;){let h=this._regions.isCollapsed(a);if(a++,h)return a-1}return-1},c=0,d=l();for(;d!==-1&&c<e.length;){let h=this._textModel.getDecorationRange(this._editorDecorationIds[d]);if(h){let u=h.startLineNumber;if(h.startColumn===Math.max(h.endColumn-1,1)&&this._textModel.getLineMaxColumn(u)===h.endColumn)for(;c<e.length;){let m=e.getStartLineNumber(c);if(u>=m)s(c,u===m),c++;else break}}d=l()}for(;c<e.length;)s(c,!1),c++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let n=i.startLineNumber,o=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:n,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let n=this.getRegionAtLine(i.startLineNumber);n&&!n.isCollapsed&&t.push(n)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let n=this._regions.findRange(e),o=1;for(;n>=0;){let s=this._regions.toRegion(n);(!t||t(s,o))&&i.push(s),o++,n=s.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){let s=[];for(let a=n,l=this._regions.length;a<l;a++){let c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;s.length>0&&!c.containedBy(s[s.length-1]);)s.pop();s.push(c),t(c,s.length)&&i.push(c)}else break}}else for(let s=n,a=this._regions.length;s<a;s++){let l=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<o)(!t||t(l))&&i.push(l);else break}return i}};function vZ(r,e,t){let i=[];for(let n of t){let o=r.getRegionAtLine(n);if(o){let s=!o.isCollapsed;if(i.push(o),e>1){let a=r.getRegionsInside(o,(l,c)=>l.isCollapsed!==s&&c<e);i.push(...a)}}}r.toggleCollapseState(i)}function Wg(r,e,t=Number.MAX_VALUE,i){let n=[];if(i&&i.length>0)for(let o of i){let s=r.getRegionAtLine(o);if(s&&(s.isCollapsed!==e&&n.push(s),t>1)){let a=r.getRegionsInside(s,(l,c)=>l.isCollapsed!==e&&c<t);n.push(...a)}}else{let o=r.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);n.push(...o)}r.toggleCollapseState(n)}function L2(r,e,t,i){let n=[];for(let o of i){let s=r.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);n.push(...s)}r.toggleCollapseState(n)}function wZ(r,e,t){let i=[];for(let n of t){let o=r.getAllRegionsAtLine(n,s=>s.isCollapsed!==e);o.length>0&&i.push(o[0])}r.toggleCollapseState(i)}function yZ(r,e,t,i){let n=(s,a)=>a===e&&s.isCollapsed!==t&&!i.some(l=>s.containsLine(l)),o=r.getRegionsInside(null,n);r.toggleCollapseState(o)}function k2(r,e,t){let i=[];for(let s of t)i.push(r.getAllRegionsAtLine(s,void 0)[0]);let n=s=>i.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,o=r.getRegionsInside(null,n);r.toggleCollapseState(o)}function oI(r,e,t){let i=r.textModel,n=r.regions,o=[];for(let s=n.length-1;s>=0;s--)if(t!==n.isCollapsed(s)){let a=n.getStartLineNumber(s);e.test(i.getLineContent(a))&&o.push(n.toRegion(s))}r.toggleCollapseState(o)}function sI(r,e,t){let i=r.regions,n=[];for(let o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&e===i.getType(o)&&n.push(i.toRegion(o));r.toggleCollapseState(n)}function CZ(r,e){let t=null,i=e.getRegionAtLine(r);if(i!==null&&(t=i.startLineNumber,r===t)){let n=i.parentIndex;n!==-1?t=e.regions.getStartLineNumber(n):t=null}return t}function SZ(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){if(r!==t.startLineNumber)return t.startLineNumber;{let i=t.parentIndex,n=0;for(i!==-1&&(n=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<r)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function xZ(r,e){let t=e.getRegionAtLine(r);if(t!==null&&t.startLineNumber===r){let i=t.parentIndex,n=0;if(i!==-1)n=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;n=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>r)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}var I2=class{constructor(e){this._updateEventEmitter=new M,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,n=0,o=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;let l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);o<=l&&c<=s||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===l&&this._hiddenRanges[n].endLineNumber===c?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new L(l,1,c,1))),o=l,s=c)}(e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new L(i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return EZ(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,n=null,o=s=>((!n||!dge(s,n))&&(n=EZ(this._hiddenRanges,s)),n?n.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let l=e[s],c=o(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);let d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[s]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}};function dge(r,e){return r>=e.startLineNumber&&r<=e.endLineNumber}function EZ(r,e){let t=Ix(r,i=>e<i.startLineNumber)-1;return t>=0&&r[t].endLineNumber>=e?r[t]:null}var hge=5e3,uge="indent",O2=class{constructor(e){this.editorModel=e,this.id=uge}dispose(){}compute(e){let t=st.getFoldingRules(this.editorModel.getLanguageId()),i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(mge(this.editorModel,i,n))}},DZ=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>Pl||t>Pl)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let n=this._length-1,o=0;n>=0;n--,o++)t[o]=this._startIndexes[n],i[o]=this._endIndexes[n];return new yh(t,i)}else{let t=0,i=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){i=a;break}t+=l}}let n=e.getOptions().tabSize,o=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let c=this._startIndexes[a],d=e.getLineContent(c),h=Hn.computeIndentLevel(d,n);(h<i||h===i&&t++<this._foldingRangesLimit)&&(o[l]=c,s[l]=this._endIndexes[a],l++)}return new yh(o,s)}}};function mge(r,e,t,i=hge){let n=r.getOptions().tabSize,o=new DZ(i),s;t&&(s=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=r.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=r.getLineCount();c>0;c--){let d=r.getLineContent(c),h=Hn.computeIndentLevel(d,n),u=a[a.length-1];if(h===-1){e&&(u.endAbove=c);continue}let m;if(s&&(m=d.match(s)))if(m[1]){let p=a.length-1;for(;p>0&&a[p].indent!==-2;)p--;if(p>0){a.length=p+1,u=a[p],o.insertFirst(c,u.line,h),u.line=c,u.indent=h,u.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(u.indent>h){do a.pop(),u=a[a.length-1];while(u.indent>h);let p=u.endAbove-1;p-c>=1&&o.insertFirst(c,p,h)}u.indent===h?u.endAbove=c:a.push({indent:h,endAbove:c,line:c})}return o.toIndentRanges(r)}var fge=5e3,gge={},T2="syntax",N2=class{constructor(e,t,i,n=fge){this.editorModel=e,this.providers=t,this.limit=n,this.id=T2;for(let o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new G),this.disposables.add(o.onDidChange(i)))}compute(e){return pge(this.providers,this.editorModel,e).then(t=>t?R2(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}};function pge(r,e,t){let i=null,n=r.map((o,s)=>Promise.resolve(o.provideFoldingRanges(e,gge,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);let l=e.getLineCount();for(let c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:s,kind:c.kind})}},Qt));return Promise.all(n).then(o=>i)}var LZ=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>Pl||t>Pl)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new yh(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let a=this._nestingLevelCounts[s];if(a){if(a+e>this._foldingRangesLimit){t=s;break}e+=a}}let i=new Uint32Array(this._foldingRangesLimit),n=new Uint32Array(this._foldingRangesLimit),o=[];for(let s=0,a=0;s<this._length;s++){let l=this._nestingLevels[s];(l<t||l===t&&e++<this._foldingRangesLimit)&&(i[a]=this._startIndexes[s],n[a]=this._endIndexes[s],o[a]=this._types[s],a++)}return new yh(i,n,o)}}};function R2(r,e){let t=r.sort((s,a)=>{let l=s.start-a.start;return l===0&&(l=s.rank-a.rank),l}),i=new LZ(e),n,o=[];for(let s of t)if(!n)n=s,i.add(s.start,s.end,s.kind&&s.kind.value,o.length);else if(s.start>n.start)if(s.end<=n.end)o.push(n),n=s,i.add(s.start,s.end,s.kind&&s.kind.value,o.length);else{if(s.start>n.end){do n=o.pop();while(n&&s.start>n.end);n&&o.push(n),n=s}i.add(s.start,s.end,s.kind&&s.kind.value,o.length)}return i.toIndentRanges()}var P2="init",A2=class{constructor(e,t,i,n){if(this.editorModel=e,this.id=P2,t.length){let o=s=>({range:{startLineNumber:s.startLineNumber,startColumn:0,endLineNumber:s.endLineNumber,endColumn:e.getLineLength(s.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(i,n)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let i of this.decorationIds){let n=this.editorModel.getDecorationRange(i);n&&t.push({start:n.startLineNumber,end:n.endLineNumber,rank:1})}return Promise.resolve(R2(t,Number.MAX_VALUE))}};var aI=Gi("folding-expanded",ge.chevronDown,g("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),lI=Gi("folding-collapsed",ge.chevronRight,g("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),ys=class{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?ys.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?ys.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ys.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?ys.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:ys.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}};ys.COLLAPSED_VISUAL_DECORATION=ze.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Tt.asClassName(lI)});ys.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ze.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Tt.asClassName(lI)});ys.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ze.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Tt.asClassName(aI)});ys.EXPANDED_VISUAL_DECORATION=ze.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Tt.asClassName(aI)});ys.HIDDEN_RANGE_DECORATION=ze.register({description:"folding-hidden-range-decoration",stickiness:1});var _ge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},bge=function(r,e){return function(t,i){e(t,i,r)}},to=new _e("foldingEnabled",!1),uv=class kZ extends H{constructor(e,t){super();this.contextKeyService=t,this.localToDispose=this._register(new G),this.editor=e;let i=this.editor.getOptions();this._isEnabled=i.get(37),this._useFoldingProviders=i.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=i.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new ys(e),this.foldingDecorationProvider.autoHideFoldingControls=i.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=i.get(39),this.foldingEnabled=to.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(n=>{if(n.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),n.hasChanged(98)||n.hasChanged(39)){let o=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=o.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=o.get(39),this.onModelContentChanged()}n.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),n.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),n.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(kZ.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===T2||e.provider===P2)&&(this.foldingStateMemento=e);let i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){let n=this.getFoldingModel();n&&n.then(o=>{if(o){this._restoringViewState=!0;try{o.applyMemento(i)}finally{this._restoringViewState=!1}}}).then(void 0,we)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new D2(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new I2(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new zr(200),this.cursorChangedScheduler=new dt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(ww.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new O2(e),this._useFoldingProviders&&this.foldingModel){let t=ww.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new A2(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new N2(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let e=this.foldingModel;if(!e)return null;let t=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=At(n=>t.compute(n));return i.then(n=>{if(n&&i===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let l=n.setCollapsedAllOfType(as.Imports.value,!0);l&&(o=$s.capture(this.editor),this._currentModelHasFoldedImports=l)}let s=this.editor.getSelections(),a=s?s.map(l=>l.startLineNumber):[];e.update(n,a),o&&o.restore(this.editor)}return e})}).then(void 0,e=>(we(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let e=this.getFoldingModel();!e||e.then(t=>{if(t){let i=this.editor.getSelections();if(i&&i.length>0){let n=[];for(let o of i){let s=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&n.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}n.length&&(t.toggleCollapseState(n),this.reveal(i[0].getPosition()))}}}).then(void 0,we)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;let t=e.target.range,i=!1;switch(e.target.type){case 4:let n=e.target.detail,o=e.target.element.offsetLeft;if(n.offsetX-o<5)return;i=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){let t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,o=e.target.range;if(!(!o||o.startLineNumber!==i)){if(n){if(e.target.type!==4)return}else{let s=this.editor.getModel();if(!s||o.startColumn!==s.getLineMaxColumn(i))return}t.then(s=>{if(s){let a=s.getRegionAtLine(i);if(a&&a.startLineNumber===i){let l=a.isCollapsed;if(n||l){let c=e.event.altKey,d=[];if(c){let h=m=>!m.containedBy(a)&&!a.containedBy(m),u=s.getRegionsInside(null,h);for(let m of u)m.isCollapsed&&d.push(m);d.length===0&&(d=u)}else{let h=e.event.middleButton||e.event.shiftKey;if(h)for(let u of s.getRegionsInside(a))u.isCollapsed===l&&d.push(u);(l||!h||d.length===0)&&d.push(a)}s.toggleCollapseState(d),this.reveal({lineNumber:i,column:1})}}}}).then(void 0,we)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};uv.ID="editor.contrib.folding";uv=_ge([bge(1,be)],uv);var io=class extends pe{runEditorCommand(e,t,i){let n=uv.get(t);if(!n)return;let o=n.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(s=>{if(s){this.invoke(n,s,t,i);let a=t.getSelection();a&&n.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}};function IZ(r){if(!Rn(r)){if(!mn(r))return!1;let e=r;if(!Rn(e.levels)&&!_a(e.levels)||!Rn(e.direction)&&!mo(e.direction)||!Rn(e.selectionLines)&&(!ux(e.selectionLines)||!e.selectionLines.every(_a)))return!1}return!0}var OZ=class extends io{constructor(){super({id:"editor.unfold",label:g("unfoldAction.label","Unfold"),alias:"Unfold",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|89,mac:{primary:2048|512|89},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:IZ,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=n&&n.levels||1,s=this.getLineNumbers(n,i);n&&n.direction==="up"?L2(t,!1,o,s):Wg(t,!1,o,s)}},TZ=class extends io{constructor(){super({id:"editor.unfoldRecursively",label:g("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|89),weight:100}})}invoke(e,t,i,n){Wg(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}},NZ=class extends io{constructor(){super({id:"editor.fold",label:g("foldAction.label","Fold"),alias:"Fold",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|87,mac:{primary:2048|512|87},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:IZ,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){let o=this.getLineNumbers(n,i),s=n&&n.levels,a=n&&n.direction;typeof s!="number"&&typeof a!="string"?wZ(t,!0,o):a==="up"?L2(t,!0,s||1,o):Wg(t,!0,s||1,o)}},RZ=class extends io{constructor(){super({id:"editor.toggleFold",label:g("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|42),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);vZ(t,1,n)}},PZ=class extends io{constructor(){super({id:"editor.foldRecursively",label:g("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|87),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);Wg(t,!0,Number.MAX_VALUE,n)}},AZ=class extends io{constructor(){super({id:"editor.foldAllBlockComments",label:g("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|85),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())sI(t,as.Comment.value,!0);else{let n=i.getModel();if(!n)return;let o=st.getComments(n.getLanguageId());if(o&&o.blockCommentStartToken){let s=new RegExp("^\\s*"+Xn(o.blockCommentStartToken));oI(t,s,!0)}}}},jZ=class extends io{constructor(){super({id:"editor.foldAllMarkerRegions",label:g("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|29),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())sI(t,as.Region.value,!0);else{let n=i.getModel();if(!n)return;let o=st.getFoldingRules(n.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);oI(t,s,!0)}}}},MZ=class extends io{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:g("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|30),weight:100}})}invoke(e,t,i){if(t.regions.hasTypes())sI(t,as.Region.value,!1);else{let n=i.getModel();if(!n)return;let o=st.getFoldingRules(n.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);oI(t,s,!1)}}}},FZ=class extends io{constructor(){super({id:"editor.foldAllExcept",label:g("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|83),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);k2(t,!0,n)}},BZ=class extends io{constructor(){super({id:"editor.unfoldAllExcept",label:g("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|81),weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);k2(t,!1,n)}},WZ=class extends io{constructor(){super({id:"editor.foldAll",label:g("foldAllAction.label","Fold All"),alias:"Fold All",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|21),weight:100}})}invoke(e,t,i){Wg(t,!0)}},UZ=class extends io{constructor(){super({id:"editor.unfoldAll",label:g("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|40),weight:100}})}invoke(e,t,i){Wg(t,!1)}},om=class extends io{getFoldingLevel(){return parseInt(this.id.substr(om.ID_PREFIX.length))}invoke(e,t,i){yZ(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};om.ID_PREFIX="editor.foldLevel";om.ID=r=>om.ID_PREFIX+r;var VZ=class extends io{constructor(){super({id:"editor.gotoParentFold",label:g("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let o=CZ(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}},zZ=class extends io{constructor(){super({id:"editor.gotoPreviousFold",label:g("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let o=SZ(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}},HZ=class extends io{constructor(){super({id:"editor.gotoNextFold",label:g("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:to,kbOpts:{kbExpr:j.editorTextFocus,weight:100}})}invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let o=xZ(n[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}};He(uv.ID,uv);ae(OZ);ae(TZ);ae(NZ);ae(PZ);ae(WZ);ae(UZ);ae(AZ);ae(jZ);ae(MZ);ae(FZ);ae(BZ);ae(RZ);ae(VZ);ae(zZ);ae(HZ);for(let r=1;r<=7;r++)aE(new om({id:om.ID(r),label:g("foldLevelAction.label","Fold Level {0}",r),alias:`Fold Level ${r}`,precondition:to,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|21+r),weight:100}}));var vge=z("editor.foldBackground",{light:si(yc,.3),dark:si(yc,.3),hc:null},g("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),wge=z("editorGutter.foldingControlForeground",{dark:DE,light:DE,hc:DE},g("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));Be((r,e)=>{let t=r.getColor(vge);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);let i=r.getColor(wge);i&&e.addRule(`
		.monaco-editor .cldr${Tt.asCSSSelector(aI)},
		.monaco-editor .cldr${Tt.asCSSSelector(lI)} {
			color: ${i} !important;
		}
		`)});var $Z=class extends pe{constructor(){super({id:"editor.action.fontZoomIn",label:g("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){js.setZoomLevel(js.getZoomLevel()+1)}},KZ=class extends pe{constructor(){super({id:"editor.action.fontZoomOut",label:g("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){js.setZoomLevel(js.getZoomLevel()-1)}},qZ=class extends pe{constructor(){super({id:"editor.action.fontZoomReset",label:g("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){js.setZoomLevel(0)}};ae($Z);ae(KZ);ae(qZ);var YZ=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},ZZ=function(r,e){return function(t,i){e(t,i,r)}},j2=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},ZS=class{constructor(e,t){this._workerService=t,this._callOnDispose=new G,this._callOnModel=new G,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(nf.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;let e=this._editor.getModel(),[t]=nf.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new rc;for(let n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(n=>{let o=n.charCodeAt(n.length-1);i.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let t=this._editor.getModel(),i=this._editor.getPosition(),n=!1,o=this._editor.onDidChangeModelContent(s=>{if(s.isFlush){n=!0,o.dispose();return}for(let a=0,l=s.changes.length;a<l;a++)if(s.changes[a].range.endLineNumber<=i.lineNumber){n=!0,o.dispose();return}});oM(this._workerService,t,i,e,t.getFormattingOptions()).then(s=>{o.dispose(),!n&&Ji(s)&&(oh.execute(this._editor,s,!0),KL(s))},s=>{throw o.dispose(),s})}};ZS.ID="editor.contrib.autoFormat";ZS=YZ([ZZ(1,Jn)],ZS);var GS=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new G,this._callOnModel=new G,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(Mo.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),!!this.editor.getOption(47)&&(!this.editor.hasModel()||!Mo.has(this.editor.getModel())||this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e))))}_trigger(e){!this.editor.hasModel()||this.editor.getSelections().length>1||this._instantiationService.invokeFunction(rM,this.editor,e,2,Pa.None,Me.None).catch(we)}};GS.ID="editor.contrib.formatOnPaste";GS=YZ([ZZ(1,Ue)],GS);var GZ=class extends pe{constructor(){super({id:"editor.action.formatDocument",label:g("formatDocument.label","Format Document"),alias:"Format Document",precondition:fe.and(j.notInCompositeEditor,j.writable,j.hasDocumentFormattingProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|36,linux:{primary:2048|1024|39},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return j2(this,void 0,void 0,function*(){if(t.hasModel()){let i=e.get(Ue);yield e.get(Xr).showWhile(i.invokeFunction(F$,t,1,Pa.None,Me.None),250)}})}},XZ=class extends pe{constructor(){super({id:"editor.action.formatSelection",label:g("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:fe.and(j.writable,j.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|36),weight:100},contextMenuOpts:{when:j.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return j2(this,void 0,void 0,function*(){if(!t.hasModel())return;let i=e.get(Ue),n=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new L(a.startLineNumber,1,a.startLineNumber,n.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Xr).showWhile(i.invokeFunction(rM,t,o,1,Pa.None,Me.None),250)})}};He(ZS.ID,ZS);He(GS.ID,GS);ae(GZ);ae(XZ);Ke.registerCommand("editor.action.format",r=>j2(void 0,void 0,void 0,function*(){let e=r.get(it).getFocusedCodeEditor();if(!e||!e.hasModel())return;let t=r.get(jt);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var Ug=class{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let o=0;t.children.get(n)!==void 0;o++)n=`${i}_${o}`;return n}static empty(e){return e.children.size===0}},M2=class extends Ug{constructor(e,t,i){super();this.id=e,this.parent=t,this.symbol=i,this.children=new Map}},QZ=class extends Ug{constructor(e,t,i,n){super();this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}},Ar=class extends Ug{constructor(e){super();this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let i=this._keys.for(e,!0),n=Ar._requests.get(i);if(!n){let o=new Di;n={promiseCnt:0,source:o,promise:Ar._create(e,o.token),model:void 0},Ar._requests.set(i,n);let s=Date.now();n.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return n.model?Promise.resolve(n.model):(n.promiseCnt+=1,t.onCancellationRequested(()=>{--n.promiseCnt==0&&(n.source.cancel(),Ar._requests.delete(i))}),new Promise((o,s)=>{n.promise.then(a=>{n.model=a,o(a)},a=>{Ar._requests.delete(i),s(a)})}))}static _create(e,t){let i=new Di(t),n=new Ar(e.uri),o=cl.ordered(e),s=o.map((l,c)=>{var d;let h=Ug.findId(`provider_${c}`,n),u=new QZ(h,n,(d=l.displayName)!==null&&d!==void 0?d:"Unknown Outline Provider",c);return Promise.resolve(l.provideDocumentSymbols(e,i.token)).then(m=>{for(let p of m||[])Ar._makeOutlineElement(p,u);return u},m=>(Qt(m),u)).then(m=>{Ug.empty(m)?m.remove():n._groups.set(h,m)})}),a=cl.onDidChange(()=>{let l=cl.ordered(e);zn(l,o)||i.cancel()});return Promise.all(s).then(()=>i.token.isCancellationRequested&&!t.isCancellationRequested?Ar._create(e,t):n._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let i=Ug.findId(e,t),n=new M2(i,t,e);if(e.children)for(let o of e.children)Ar._makeOutlineElement(o,n);t.children.set(n.id,n)}_compact(){let e=0;for(let[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=ot.first(this._groups.values());for(let[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){let e=[];for(let t of this.children.values())t instanceof M2?e.push(t.symbol):e.push(...ot.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>L.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){let e=this.getTopLevelSymbols(),t=[];return Ar._flattenDocumentSymbols(t,e,""),t.sort((i,n)=>L.compareRangesUsingStarts(i.range,n.range))}static _flattenDocumentSymbols(e,t,i){for(let n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&Ar._flattenDocumentSymbols(e,n.children,n.name)}};Ar._requestDurations=new nu(cl,350);Ar._requests=new Ao(9,.75);Ar._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(r,e){return`${r.id}/${e?r.getVersionId():""}/${this._hash(cl.all(r))}`}_hash(r){let e="";for(let t of r){let i=this._data.get(t);typeof i=="undefined"&&(i=this._counter++,this._data.set(t,i)),e+=i}return e}};var JZ=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function eG(r,e,t){return JZ(this,void 0,void 0,function*(){let i=yield Ar.create(r,t);return e?i.asListOfDocumentSymbols():i.getTopLevelSymbols()})}Ke.registerCommand("_executeDocumentSymbolProvider",function(r,...e){return JZ(this,void 0,void 0,function*(){let[t]=e;xt(ve.isUri(t));let i=r.get(Gt).getModel(t);if(i)return eG(i,!1,Me.None);let n=yield r.get(fn).createModelReference(t);try{return yield eG(n.object.textEditorModel,!1,Me.None)}finally{n.dispose()}})});function no(r,e){let t=0;for(let i=0;i<r.length;i++)r.charAt(i)==="	"?t+=e:t++;return t}function Vg(r,e,t){r=r<0?0:r;let i="";if(!t){let n=Math.floor(r/e);r=r%e;for(let o=0;o<n;o++)i+="	"}for(let n=0;n<r;n++)i+=" ";return i}function tG(r,e,t,i){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return[];let n=st.getIndentationRules(r.getLanguageId());if(!n)return[];for(t=Math.min(t,r.getLineCount());e<=t&&n.unIndentedLinePattern;){let _=r.getLineContent(e);if(!n.unIndentedLinePattern.test(_))break;e++}if(e>t-1)return[];let{tabSize:o,indentSize:s,insertSpaces:a}=r.getOptions(),l=(_,v)=>(v=v||1,Or.shiftIndent(_,_.length+v,o,s,a)),c=(_,v)=>(v=v||1,Or.unshiftIndent(_,_.length+v,o,s,a)),d=[],h,u=r.getLineContent(e),m=u;if(i!=null){h=i;let _=Lt(u);m=h+u.substring(_.length),n.decreaseIndentPattern&&n.decreaseIndentPattern.test(m)&&(h=c(h),m=h+u.substring(_.length)),u!==m&&d.push(Ut.replaceMove(new le(e,1,e,_.length+1),Hn.normalizeIndentation(h,s,a)))}else h=Lt(u);let p=h;n.increaseIndentPattern&&n.increaseIndentPattern.test(m)?(p=l(p),h=l(h)):n.indentNextLinePattern&&n.indentNextLinePattern.test(m)&&(p=l(p)),e++;for(let _=e;_<=t;_++){let v=r.getLineContent(_),C=Lt(v),w=p+v.substring(C.length);n.decreaseIndentPattern&&n.decreaseIndentPattern.test(w)&&(p=c(p),h=c(h)),C!==p&&d.push(Ut.replaceMove(new le(_,1,_,C.length+1),Hn.normalizeIndentation(p,s,a))),!(n.unIndentedLinePattern&&n.unIndentedLinePattern.test(v))&&(n.increaseIndentPattern&&n.increaseIndentPattern.test(w)?(h=l(h),p=h):n.indentNextLinePattern&&n.indentNextLinePattern.test(w)?p=l(p):p=h)}return d}var XS=class extends pe{constructor(){super({id:XS.ID,label:g("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:j.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;let s=new sG(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};XS.ID="editor.action.indentationToSpaces";var QS=class extends pe{constructor(){super({id:QS.ID,label:g("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:j.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;let s=new aG(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};QS.ID="editor.action.indentationToTabs";var F2=class extends pe{constructor(e,t){super(t);this.insertSpaces=e}run(e,t){let i=e.get(Ku),n=e.get(Gt),o=t.getModel();if(!o)return;let s=n.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(c=>({id:c.toString(),label:c.toString(),description:c===s.tabSize?g("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(a,{placeHolder:g({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(c=>{c&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(c.label,10),insertSpaces:this.insertSpaces})})},50)}},JS=class extends F2{constructor(){super(!1,{id:JS.ID,label:g("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}};JS.ID="editor.action.indentUsingTabs";var e0=class extends F2{constructor(){super(!0,{id:e0.ID,label:g("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}};e0.ID="editor.action.indentUsingSpaces";var t0=class extends pe{constructor(){super({id:t0.ID,label:g("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){let i=e.get(Gt),n=t.getModel();if(!n)return;let o=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}};t0.ID="editor.action.detectIndentation";var iG=class extends pe{constructor(){super({id:"editor.action.reindentlines",label:g("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:j.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=tG(i,1,i.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}},nG=class extends pe{constructor(){super({id:"editor.action.reindentselectedlines",label:g("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:j.writable})}run(e,t){let i=t.getModel();if(!i)return;let n=t.getSelections();if(n===null)return;let o=[];for(let s of n){let a=s.startLineNumber,l=s.endLineNumber;if(a!==l&&s.endColumn===1&&l--,a===1){if(a===l)continue}else a--;let c=tG(i,a,l);o.push(...c)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}},rG=class{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(let n of this._edits)t.addEditOperation(L.lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},cI=class{constructor(e){this.callOnDispose=new G,this.callOnModel=new G,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&(!this.editor.hasModel()||this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)})))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;let i=this.editor.getModel();if(!i||!i.isCheapToTokenize(e.getStartPosition().lineNumber))return;let n=this.editor.getOption(9),{tabSize:o,indentSize:s,insertSpaces:a}=i.getOptions(),l=[],c={shiftIndent:m=>Or.shiftIndent(m,m.length+1,o,s,a),unshiftIndent:m=>Or.unshiftIndent(m,m.length+1,o,s,a)},d=e.startLineNumber;for(;d<=e.endLineNumber;){if(this.shouldIgnoreLine(i,d)){d++;continue}break}if(d>e.endLineNumber)return;let h=i.getLineContent(d);if(!/\S/.test(h.substring(0,e.startColumn-1))){let m=st.getGoodIndentForLine(n,i,i.getLanguageId(),d,c);if(m!==null){let p=Lt(h),_=no(m,o),v=no(p,o);if(_!==v){let C=Vg(_,o,a);l.push({range:new L(d,1,d,p.length+1),text:C}),h=C+h.substr(p.length)}else{let C=st.getIndentMetadata(i,d);if(C===0||C===8)return}}}let u=d;for(;d<e.endLineNumber;){if(!/\S/.test(i.getLineContent(d+1))){d++;continue}break}if(d!==e.endLineNumber){let m={getLineTokens:_=>i.getLineTokens(_),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(_,v)=>i.getLanguageIdAtPosition(_,v),getLineContent:_=>_===u?h:i.getLineContent(_)},p=st.getGoodIndentForLine(n,m,i.getLanguageId(),d+1,c);if(p!==null){let _=no(p,o),v=no(Lt(i.getLineContent(d+1)),o);if(_!==v){let C=_-v;for(let w=d+1;w<=e.endLineNumber;w++){let S=i.getLineContent(w),D=Lt(S),A=no(D,o)+C,O=Vg(A,o,a);O!==D&&l.push({range:new L(w,1,w,D.length+1),text:O})}}}}if(l.length>0){this.editor.pushUndoStop();let m=new rG(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;let n=e.getLineTokens(t);if(n.getCount()>0){let o=n.findTokenIndexAtOffset(i);if(o>=0&&n.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};cI.ID="editor.contrib.autoIndentOnPaste";function oG(r,e,t,i){if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let n="";for(let s=0;s<t;s++)n+=" ";let o=new RegExp(n,"gi");for(let s=1,a=r.getLineCount();s<=a;s++){let l=r.getLineFirstNonWhitespaceColumn(s);if(l===0&&(l=r.getLineMaxColumn(s)),l===1)continue;let c=new L(s,1,s,l),d=r.getValueInRange(c),h=i?d.replace(/\t/ig,n):d.replace(o,"	");e.addEditOperation(c,h)}}var sG=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),oG(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},aG=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),oG(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};He(cI.ID,cI);ae(XS);ae(QS);ae(JS);ae(e0);ae(t0);ae(iG);ae(nG);var yge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Cge=function(r,e){return function(t,i){e(t,i,r)}},dI=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Sge=1500,B2=class{constructor(){this._data=new rn}push(e,t){let i=this._data.get(e.uri);i===void 0?this._data.set(e.uri,new Set([t])):i.add(t)}pop(e,t){let i=this._data.get(e.uri);i&&(i.delete(t),i.size===0&&this._data.delete(e.uri))}has(e,t){var i;return Boolean((i=this._data.get(e.uri))===null||i===void 0?void 0:i.has(t))}};function lG(r,e,t,i){return dI(this,void 0,void 0,function*(){let n=[],s=dl.ordered(r).reverse().map(a=>e.map(l=>dI(this,void 0,void 0,function*(){try{t.push(r,a);let c=yield a.provideInlayHints(r,l,i);(c==null?void 0:c.length)&&n.push(c.filter(d=>l.containsPosition(d.position)))}catch(c){Qt(c)}finally{t.pop(r,a)}})));return yield Promise.all(s.flat()),n.flat().sort((a,l)=>V.compare(a.position,l.position))})}var i0=class{constructor(){this._entries=new Ao(50)}get(e){let t=i0._key(e);return this._entries.get(t)}set(e,t){let i=i0._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}},mv=class cG{constructor(e,t){this._editor=e,this._codeEditorService=t,this._decorationOwnerId=++cG._decorationOwnerIdPool,this._disposables=new G,this._sessionDisposables=new G,this._getInlayHintsDelays=new nu(dl,25,500),this._cache=new i0,this._decorations=new Map,this._disposables.add(dl.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(125)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(125).enabled)return;let e=this._editor.getModel();if(!e||!dl.has(e))return;let t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);let i=new B2,n=new dt(()=>dI(this,void 0,void 0,function*(){let s=Date.now(),a=new Di;this._sessionDisposables.add(Re(()=>a.dispose(!0)));let l=this._getHintsRanges(),c=yield lG(e,l,i,a.token);n.delay=this._getInlayHintsDelays.update(e,Date.now()-s),!a.token.isCancellationRequested&&(this._updateHintsDecorators(l,c),this._cache.set(e,Array.from(this._decorations.values()).map(d=>d.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(n),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>n.schedule())),this._disposables.add(this._editor.onDidScrollChange(()=>n.schedule())),n.schedule();let o=new G;this._sessionDisposables.add(o);for(let s of dl.all(e))typeof s.onDidChangeInlayHints=="function"&&o.add(s.onDidChangeInlayHints(()=>{i.has(e,s)||n.schedule()}))}_getHintsRanges(){let e=30,t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(let o of i.sort(L.compareRangesUsingStarts)){let s=t.validateRange(new L(o.startLineNumber-e,o.startColumn,o.endLineNumber+e,o.endColumn));n.length===0||!L.areIntersectingOrTouching(n[n.length-1],s)?n.push(s):n[n.length-1]=L.plusRange(n[n.length-1],s)}return n}_updateHintsDecorators(e,t){let{fontSize:i,fontFamily:n}=this._getLayoutInfo(),o=this._editor.getModel(),s=[],a=[],l="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(l,n);for(let h of t){let{text:u,position:m,whitespaceBefore:p,whitespaceAfter:_}=h,v=p?i/3|0:0,C=_?i/3|0:0,w={contentText:xge(u),fontSize:`${i}px`,margin:`0px ${C}px 0px ${v}px`,fontFamily:`var(${l}), ${Qi.fontFamily}`,padding:`1px ${Math.max(1,i/4)|0}px`,borderRadius:`${i/4|0}px`,verticalAlign:"middle",backgroundColor:yi(wu),color:yi(vu)};h.kind===bw.Parameter?(w.backgroundColor=yi(cH),w.color=yi(lH)):h.kind===bw.Type&&(w.backgroundColor=yi(aH),w.color=yi(sH));let S={beforeInjectedText:Object.assign(Object.assign({},w),{affectsLetterSpacing:!0})},D=L.fromPositions(m),I=o.getWordAtPosition(m),A=!1;I&&(I.endColumn===m.column?(S.afterInjectedText=S.beforeInjectedText,S.beforeInjectedText=void 0,A=!0,D=dG(I,m.lineNumber)):I.startColumn===m.column&&(A=!0,D=dG(I,m.lineNumber)));let O="inlayHints-"+Hp(S).toString(16);if(this._codeEditorService.registerDecorationType("inlay-hints-controller",O,S,void 0,this._editor),s.push(O),a.push({range:D,options:Object.assign(Object.assign({},this._codeEditorService.resolveDecorationOptions(O,!0)),{showIfCollapsed:!A,stickiness:0})})>Sge)break}let c=[];for(let h of e)for(let{id:u}of o.getDecorationsInRange(h,this._decorationOwnerId,!0)){let m=this._decorations.get(u);m&&(c.push(u),this._codeEditorService.removeDecorationType(m.decorationTypeId),this._decorations.delete(u))}let d=o.deltaDecorations(c,a,this._decorationOwnerId);for(let h=0;h<d.length;h++)this._decorations.set(d[h],{hint:t[h],decorationTypeId:s[h]})}_getLayoutInfo(){let e=this._editor.getOption(125),t=this._editor.getOption(45),i=e.fontSize;(!i||i<5||i>t)&&(i=t*.9|0);let n=e.fontFamily||this._editor.getOption(42);return{fontSize:i,fontFamily:n}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorations.keys()),[]);for(let e of this._decorations.values())this._codeEditorService.removeDecorationType(e.decorationTypeId);this._decorations.clear()}};mv.ID="editor.contrib.InlayHints";mv._decorationOwnerIdPool=0;mv=yge([Cge(1,it)],mv);function dG(r,e){return new L(e,r.startColumn,e,r.endColumn)}function xge(r){let e="\xA0";return r.replace(/[ \t]/g,e)}He(mv.ID,mv);Ke.registerCommand("_executeInlayHintProvider",(r,...e)=>dI(void 0,void 0,void 0,function*(){let[t,i]=e;xt(ve.isUri(t)),xt(L.isIRange(i));let n=yield r.get(fn).createModelReference(t);try{return yield lG(n.object.textEditorModel,[L.lift(i)],new B2,Me.None)}finally{n.dispose()}}));var W2=class{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){let n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new le(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new le(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}};var Ege=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Dge=function(r,e){return function(t,i){e(t,i,r)}},sm=class U2{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(U2.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();let i=this.editor.getSelection(),n=this.editor.getModel();if(!n||!i)return;let o=i;if(o.startLineNumber!==o.endLineNumber)return;let s=new Ru(this.editor,1|4),a=n.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=At(l=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!s.validate(this.editor))return;let c=L.lift(l.range),d=l.range,h=l.value.length-(o.endColumn-o.startColumn);d={startLineNumber:d.startLineNumber,startColumn:d.startColumn,endLineNumber:d.endLineNumber,endColumn:d.startColumn+l.value.length},h>1&&(o=new le(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+h-1));let u=new W2(c,o,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,u),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:d,options:U2.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=ma(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(we)}).catch(we)):Promise.resolve(void 0)}};sm.ID="editor.contrib.inPlaceReplaceController";sm.DECORATION=ze.register({description:"in-place-replace",className:"valueSetReplacement"});sm=Ege([Dge(1,Jn)],sm);var hG=class extends pe{constructor(){super({id:"editor.action.inPlaceReplace.up",label:g("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|82,weight:100}})}run(e,t){let i=sm.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}},uG=class extends pe{constructor(){super({id:"editor.action.inPlaceReplace.down",label:g("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|84,weight:100}})}run(e,t){let i=sm.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}};He(sm.ID,sm);ae(hG);ae(uG);Be((r,e)=>{let t=r.getColor(HE);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});var V2=class{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let i=Lge(e,this._cursors);for(let n=0,o=i.length;n<o;n++){let s=i[n];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};function Lge(r,e){e.sort((s,a)=>s.lineNumber===a.lineNumber?s.column-a.column:s.lineNumber-a.lineNumber);for(let s=e.length-2;s>=0;s--)e[s].lineNumber===e[s+1].lineNumber&&e.splice(s,1);let t=[],i=0,n=0,o=e.length;for(let s=1,a=r.getLineCount();s<=a;s++){let l=r.getLineContent(s),c=l.length+1,d=0;if(n<o&&e[n].lineNumber===s&&(d=e[n].column,n++,d===c)||l.length===0)continue;let h=Lr(l),u=0;if(h===-1)u=1;else if(h!==l.length-1)u=h+2;else continue;u=Math.max(d,u),t[i++]=Ut.delete(new L(s,u,s,c))}return t}var hI=class{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=[];for(let s=i.startLineNumber;s<=i.endLineNumber;s++)n.push(e.getLineContent(s));let o=n.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new L(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new L(i.startLineNumber,1,i.startLineNumber,1),o+`
`):t.addEditOperation(new L(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let n=i.startLineNumber,o=i.startColumn,s=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(n=n+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),i=le.createWithDirection(n,o,s,a,this._selectionDirection)}return i}};var z2=class{constructor(e,t,i){this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let{tabSize:o,indentSize:s,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(o,s,a),c={getLineTokens:d=>e.getLineTokens(d),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(d,h)=>e.getLanguageIdAtPosition(d,h),getLineContent:null};if(n.startLineNumber===n.endLineNumber&&e.getLineMaxColumn(n.startLineNumber)===1){let d=n.startLineNumber,h=this._isMovingDown?d+1:d-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new L(1,1,1,1),null):(t.addEditOperation(new L(d,1,d,1),e.getLineContent(h)),t.addEditOperation(new L(h,1,h,e.getLineMaxColumn(h)),null)),n=new le(h,1,h,1)}else{let d,h;if(this._isMovingDown){d=n.endLineNumber+1,h=e.getLineContent(d),t.addEditOperation(new L(d-1,e.getLineMaxColumn(d-1),d,e.getLineMaxColumn(d)),null);let u=h;if(this.shouldAutoIndent(e,n)){let m=this.matchEnterRule(e,l,o,d,n.startLineNumber-1);if(m!==null){let _=Lt(e.getLineContent(d)),v=m+no(_,o);u=Vg(v,o,a)+this.trimLeft(h)}else{c.getLineContent=v=>v===n.startLineNumber?e.getLineContent(d):e.getLineContent(v);let _=st.getGoodIndentForLine(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),n.startLineNumber,l);if(_!==null){let v=Lt(e.getLineContent(d)),C=no(_,o),w=no(v,o);C!==w&&(u=Vg(C,o,a)+this.trimLeft(h))}}t.addEditOperation(new L(n.startLineNumber,1,n.startLineNumber,1),u+`
`);let p=this.matchEnterRuleMovingDown(e,l,o,n.startLineNumber,d,u);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,n,o,a,p);else{c.getLineContent=v=>v===n.startLineNumber?u:v>=n.startLineNumber+1&&v<=n.endLineNumber+1?e.getLineContent(v-1):e.getLineContent(v);let _=st.getGoodIndentForLine(this._autoIndent,c,e.getLanguageIdAtPosition(d,1),n.startLineNumber+1,l);if(_!==null){let v=Lt(e.getLineContent(n.startLineNumber)),C=no(_,o),w=no(v,o);if(C!==w){let S=C-w;this.getIndentEditsOfMovingBlock(e,t,n,o,a,S)}}}}else t.addEditOperation(new L(n.startLineNumber,1,n.startLineNumber,1),u+`
`)}else if(d=n.startLineNumber-1,h=e.getLineContent(d),t.addEditOperation(new L(d,1,d+1,1),null),t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+h),this.shouldAutoIndent(e,n)){c.getLineContent=m=>m===d?e.getLineContent(n.startLineNumber):e.getLineContent(m);let u=this.matchEnterRule(e,l,o,n.startLineNumber,n.startLineNumber-2);if(u!==null)u!==0&&this.getIndentEditsOfMovingBlock(e,t,n,o,a,u);else{let m=st.getGoodIndentForLine(this._autoIndent,c,e.getLanguageIdAtPosition(n.startLineNumber,1),d,l);if(m!==null){let p=Lt(e.getLineContent(n.startLineNumber)),_=no(m,o),v=no(p,o);if(_!==v){let C=_-v;this.getIndentEditsOfMovingBlock(e,t,n,o,a,C)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>Or.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>Or.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let s=o.indentation;o.indentAction===Ii.None||o.indentAction===Ii.Indent?s=o.indentation+o.appendText:o.indentAction===Ii.IndentOutdent?s=o.indentation:o.indentAction===Ii.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);let a=e.getLineContent(n);if(this.trimLeft(a).indexOf(this.trimLeft(s))>=0){let l=Lt(e.getLineContent(n)),c=Lt(s),d=st.getIndentMetadata(e,n);d!==null&&d&2&&(c=t.unshiftIndent(c));let h=no(c,i),u=no(l,i);return h-u}}return null}matchEnterRuleMovingDown(e,t,i,n,o,s){if(Lr(s)>=0){let a=e.getLineMaxColumn(o),l=st.getEnterAction(this._autoIndent,e,new L(o,a,o,a));return this.parseEnterResult(e,t,i,n,l)}else{let a=n-1;for(;a>=1;){let d=e.getLineContent(a);if(Lr(d)>=0)break;a--}if(a<1||n>e.getLineCount())return null;let l=e.getLineMaxColumn(a),c=st.getEnterAction(this._autoIndent,e,new L(a,l,a,l));return this.parseEnterResult(e,t,i,n,c)}}matchEnterRule(e,t,i,n,o,s){let a=o;for(;a>=1;){let d;if(a===o&&s!==void 0?d=s:d=e.getLineContent(a),Lr(d)>=0)break;a--}if(a<1||n>e.getLineCount())return null;let l=e.getLineMaxColumn(a),c=st.getEnterAction(this._autoIndent,e,new L(a,l,a,l));return this.parseEnterResult(e,t,i,n,c)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==n||st.getIndentRulesSupport(i)===null)}getIndentEditsOfMovingBlock(e,t,i,n,o,s){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){let l=e.getLineContent(a),c=Lt(l),h=no(c,n)+s,u=Vg(h,n,o);u!==c&&(t.addEditOperation(new L(a,1,a,c.length+1),u),a===i.endLineNumber&&i.endColumn<=c.length+1&&u===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};var Gc=class{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return Gc._COLLATOR||(Gc._COLLATOR=new Intl.Collator),Gc._COLLATOR}getEditOperations(e,t){let i=kge(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;let n=mG(e,t,i);if(!n)return!1;for(let o=0,s=n.before.length;o<s;o++)if(n.before[o]!==n.after[o])return!0;return!1}};Gc._COLLATOR=null;function mG(r,e,t){let i=e.startLineNumber,n=e.endLineNumber;if(e.endColumn===1&&n--,i>=n)return null;let o=[];for(let a=i;a<=n;a++)o.push(r.getLineContent(a));let s=o.slice(0);return s.sort(Gc.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:i,endLineNumber:n,before:o,after:s}}function kge(r,e,t){let i=mG(r,e,t);return i?Ut.replace(new L(i.startLineNumber,1,i.endLineNumber,r.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}var H2=class extends pe{constructor(e,t){super(t);this.down=e}run(e,t){if(!t.hasModel())return;let i=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));i.sort((s,a)=>L.compareRangesUsingStarts(s.selection,a.selection));let n=i[0];for(let s=1;s<i.length;s++){let a=i[s];n.selection.endLineNumber===a.selection.startLineNumber&&(n.index<a.index?a.ignore=!0:(n.ignore=!0,n=a))}let o=[];for(let s of i)o.push(new hI(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},fG=class extends H2{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:g("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:512|1024|16,linux:{primary:2048|512|1024|16},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"2_line",title:g({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}},gG=class extends H2{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:g("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:512|1024|18,linux:{primary:2048|512|1024|18},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"2_line",title:g({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}},pG=class extends pe{constructor(){super({id:"editor.action.duplicateSelection",label:g("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:j.writable,menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"2_line",title:g({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;let n=[],o=t.getSelections(),s=t.getModel();for(let a of o)if(a.isEmpty())n.push(new hI(a,!0));else{let l=new le(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new HR(l,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},$2=class extends pe{constructor(e,t){super(t);this.down=e}run(e,t){let i=[],n=t.getSelections()||[],o=t.getOption(9);for(let s of n)i.push(new z2(s,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}},_G=class extends $2{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:g("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:512|16,linux:{primary:512|16},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"2_line",title:g({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}},bG=class extends $2{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:g("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:512|18,linux:{primary:512|18},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"2_line",title:g({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}},K2=class extends pe{constructor(e,t){super(t);this.descending=e}run(e,t){let i=t.getSelections()||[];for(let o of i)if(!Gc.canRun(t.getModel(),o,this.descending))return;let n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new Gc(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},vG=class extends K2{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:g("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:j.writable})}},wG=class extends K2{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:g("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:j.writable})}},yG=class extends pe{constructor(){super({id:"editor.action.removeDuplicateLines",label:g("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:j.writable})}run(e,t){if(!t.hasModel())return;let i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let n=[],o=[],s=0;for(let a of t.getSelections()){let l=new Set,c=[];for(let m=a.startLineNumber;m<=a.endLineNumber;m++){let p=i.getLineContent(m);l.has(p)||(c.push(p),l.add(p))}let d=new le(a.startLineNumber,1,a.endLineNumber,i.getLineMaxColumn(a.endLineNumber)),h=a.startLineNumber-s,u=new le(h,1,h+c.length-1,c[c.length-1].length);n.push(Ut.replace(d,c.join(`
`))),o.push(u),s+=a.endLineNumber-a.startLineNumber+1-c.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}},n0=class extends pe{constructor(){super({id:n0.ID,label:g("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:wi(2048|41,2048|54),weight:100}})}run(e,t,i){let n=[];i.reason==="auto-save"&&(n=(t.getSelections()||[]).map(a=>new V(a.positionLineNumber,a.positionColumn)));let o=t.getSelection();if(o===null)return;let s=new V2(o,n);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}};n0.ID="editor.action.trimTrailingWhitespace";var CG=class extends pe{constructor(){super({id:"editor.action.deleteLines",label:g("lines.delete","Delete Line"),alias:"Delete Line",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:2048|1024|41,weight:100}})}run(e,t){if(!t.hasModel())return;let i=this._getLinesToRemove(t),n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let o=0,s=[],a=[];for(let l=0,c=i.length;l<c;l++){let d=i[l],h=d.startLineNumber,u=d.endLineNumber,m=1,p=n.getLineMaxColumn(u);u<n.getLineCount()?(u+=1,p=1):h>1&&(h-=1,m=n.getLineMaxColumn(h)),s.push(Ut.replace(new le(h,m,u,p),"")),a.push(new le(h-o,d.positionColumn,h-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(o=>{let s=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(s-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:s,positionColumn:o.positionColumn}});t.sort((o,s)=>o.startLineNumber===s.startLineNumber?o.endLineNumber-s.endLineNumber:o.startLineNumber-s.startLineNumber);let i=[],n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}},SG=class extends pe{constructor(){super({id:"editor.action.indentLines",label:g("lines.indent","Indent Line"),alias:"Indent Line",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|89,weight:100}})}run(e,t){let i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,pi.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}},xG=class extends pe{constructor(){super({id:"editor.action.outdentLines",label:g("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|87,weight:100}})}run(e,t){Lu.Outdent.runEditorCommand(e,t,null)}},EG=class extends pe{constructor(){super({id:"editor.action.insertLineBefore",label:g("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|3,weight:100}})}run(e,t){let i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,pi.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}},DG=class extends pe{constructor(){super({id:"editor.action.insertLineAfter",label:g("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|3,weight:100}})}run(e,t){let i=t._getViewModel();!i||(t.pushUndoStop(),t.executeCommands(this.id,pi.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}},q2=class extends pe{run(e,t){if(!t.hasModel())return;let i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let l=0,c=n.length-1;l<c;l++){let d=n[l],h=n[l+1];L.intersectRanges(d,h)===null?o.push(d):n[l+1]=L.plusRange(d,h)}o.push(n[n.length-1]);let s=this._getEndCursorState(i,o),a=o.map(l=>Ut.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}},LG=class extends q2{constructor(){super({id:"deleteAllLeft",label:g("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:2048|1},weight:100}})}_getEndCursorState(e,t){let i=null,n=[],o=0;return t.forEach(s=>{let a;if(s.endColumn===1&&o>0){let l=s.startLineNumber-o;a=new le(l,s.startColumn,l,s.startColumn)}else a=new le(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);o+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?i=a:n.push(a)}),i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let i=t,n=e.getModel();return n===null?[]:(i.sort(L.compareRangesUsingStarts),i=i.map(o=>{if(o.isEmpty())if(o.startColumn===1){let s=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:n.getLineContent(s).length+1;return new L(s,a,o.startLineNumber,1)}else return new L(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new L(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),i)}},kG=class extends q2{constructor(){super({id:"deleteAllRight",label:g("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|41,secondary:[2048|20]},weight:100}})}_getEndCursorState(e,t){let i=null,n=[];for(let o=0,s=t.length,a=0;o<s;o++){let l=t[o],c=new le(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:n.push(c)}return i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let i=e.getSelections();if(i===null)return[];let n=i.map(o=>{if(o.isEmpty()){let s=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===s?new L(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new L(o.startLineNumber,o.startColumn,o.startLineNumber,s)}return o});return n.sort(L.compareRangesUsingStarts),n}},IG=class extends pe{constructor(){super({id:"editor.action.joinLines",label:g("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:j.writable,kbOpts:{kbExpr:j.editorTextFocus,primary:0,mac:{primary:256|40},weight:100}})}run(e,t){let i=t.getSelections();if(i===null)return;let n=t.getSelection();if(n===null)return;i.sort(L.compareRangesUsingStarts);let o=[],s=i.reduce((u,m)=>u.isEmpty()?u.endLineNumber===m.startLineNumber?(n.equalsSelection(u)&&(n=m),m):m.startLineNumber>u.endLineNumber+1?(o.push(u),m):new le(u.startLineNumber,u.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>u.endLineNumber?(o.push(u),m):new le(u.startLineNumber,u.startColumn,m.endLineNumber,m.endColumn));o.push(s);let a=t.getModel();if(a===null)return;let l=[],c=[],d=n,h=0;for(let u=0,m=o.length;u<m;u++){let p=o[u],_=p.startLineNumber,v=1,C=0,w,S,D=a.getLineContent(p.endLineNumber).length-p.endColumn;if(p.isEmpty()||p.startLineNumber===p.endLineNumber){let O=p.getStartPosition();O.lineNumber<a.getLineCount()?(w=_+1,S=a.getLineMaxColumn(w)):(w=O.lineNumber,S=a.getLineMaxColumn(O.lineNumber))}else w=p.endLineNumber,S=a.getLineMaxColumn(w);let I=a.getLineContent(_);for(let O=_+1;O<=w;O++){let N=a.getLineContent(O),F=a.getLineFirstNonWhitespaceColumn(O);if(F>=1){let Y=!0;I===""&&(Y=!1),Y&&(I.charAt(I.length-1)===" "||I.charAt(I.length-1)==="	")&&(Y=!1,I=I.replace(/[\s\uFEFF\xA0]+$/g," "));let K=N.substr(F-1);I+=(Y?" ":"")+K,Y?C=K.length+1:C=K.length}else C=0}let A=new L(_,v,w,S);if(!A.isEmpty()){let O;p.isEmpty()?(l.push(Ut.replace(A,I)),O=new le(A.startLineNumber-h,I.length-C+1,_-h,I.length-C+1)):p.startLineNumber===p.endLineNumber?(l.push(Ut.replace(A,I)),O=new le(p.startLineNumber-h,p.startColumn,p.endLineNumber-h,p.endColumn)):(l.push(Ut.replace(A,I)),O=new le(p.startLineNumber-h,p.startColumn,p.startLineNumber-h,I.length-D)),L.intersectRanges(A,n)!==null?d=O:c.push(O)}h+=A.endLineNumber-A.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}},OG=class extends pe{constructor(){super({id:"editor.action.transpose",label:g("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:j.writable})}run(e,t){let i=t.getSelections();if(i===null)return;let n=t.getModel();if(n===null)return;let o=[];for(let s=0,a=i.length;s<a;s++){let l=i[s];if(!l.isEmpty())continue;let c=l.getStartPosition(),d=n.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===n.getLineCount())continue;let h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u=n.getValueInRange(h).split("").reverse().join("");o.push(new Yi(new le(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u))}else{let h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),u=n.getValueInRange(h).split("").reverse().join("");o.push(new Ff(h,u,new le(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},r0=class extends pe{run(e,t){let i=t.getSelections();if(i===null)return;let n=t.getModel();if(n===null)return;let o=t.getOption(115),s=[];for(let a of i)if(a.isEmpty()){let l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;let d=new L(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),h=n.getValueInRange(d);s.push(Ut.replace(d,this._modifyText(h,o)))}else{let l=n.getValueInRange(a);s.push(Ut.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}},TG=class extends r0{constructor(){super({id:"editor.action.transformToUppercase",label:g("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:j.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}},NG=class extends r0{constructor(){super({id:"editor.action.transformToLowercase",label:g("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:j.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}},uI=class{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}},fv=class extends r0{constructor(){super({id:"editor.action.transformToTitlecase",label:g("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:j.writable})}_modifyText(e,t){let i=fv.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,n=>n.toLocaleUpperCase()):e}};fv.titleBoundary=new uI("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var Ch=class extends r0{constructor(){super({id:"editor.action.transformToSnakecase",label:g("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:j.writable})}_modifyText(e,t){let i=Ch.caseBoundary.get(),n=Ch.singleLetters.get();return!i||!n?e:e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase()}};Ch.caseBoundary=new uI("(\\p{Ll})(\\p{Lu})","gmu");Ch.singleLetters=new uI("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");ae(fG);ae(gG);ae(pG);ae(_G);ae(bG);ae(vG);ae(wG);ae(yG);ae(n0);ae(CG);ae(SG);ae(xG);ae(EG);ae(DG);ae(LG);ae(kG);ae(IG);ae(OG);ae(TG);ae(NG);Ch.caseBoundary.isSupported()&&Ch.singleLetters.isSupported()&&ae(Ch);fv.titleBoundary.isSupported()&&ae(fv);var Ige=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Oge=function(r,e){return function(t,i){e(t,i,r)}},Y2=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},RG=new _e("LinkedEditingInputVisible",!1),PG="linked-editing-decoration",am=class Z2 extends H{constructor(e,t){super();this._debounceDuration=200,this._localToDispose=this._register(new G),this._editor=e,this._enabled=!1,this._visibleContextKey=RG.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new G),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(i=>{(i.hasChanged(61)||i.hasChanged(81))&&this.reinitialize(!1)})),this._register(Yp.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(Z2.ID)}reinitialize(e){let t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&Yp.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._languageWordPattern=st.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=st.getWordDefinition(t.getLanguageId())}));let n=new zr(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),this._debounceDuration)},s=new zr(0),a=l=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let c=t.getDecorationRange(this._currentDecorations[0]);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._currentDecorations);return}}o()})),this._localToDispose.add({dispose:()=>{n.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;let t=this._editor.getModel(),i=t.getDecorationRange(e[0]);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();let n=t.getValueInRange(i);if(this._currentWordPattern){let s=n.match(this._currentWordPattern);if((s?s[0].length:0)!==n.length)return this.clearRanges()}let o=[];for(let s=1,a=e.length;s<a;s++){let l=t.getDecorationRange(e[s]);if(!!l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:n});else{let c=t.getValueInRange(l),d=n,h=l.startColumn,u=l.endColumn,m=nl(c,d);h+=m,c=c.substr(m),d=d.substr(m);let p=Vm(c,d);u-=p,c=c.substr(0,c.length-p),d=d.substr(0,d.length-p),(h!==u||d.length!==0)&&o.push({range:new L(l.startLineNumber,h,l.endLineNumber,u),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return Y2(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}let t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}let i=this._editor.getModel(),n=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===n){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){let s=i.getDecorationRange(this._currentDecorations[0]);if(s&&s.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=n;let o=At(s=>Y2(this,void 0,void 0,function*(){try{let a=yield jG(i,t,s);if(o!==this._currentRequest||(this._currentRequest=null,n!==i.getVersionId()))return;let l=[];(a==null?void 0:a.ranges)&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let h=0,u=l.length;h<u;h++)if(L.containsPosition(l[h],t)){if(c=!0,h!==0){let m=l[h];l.splice(h,1),l.unshift(m)}break}if(!c){this.clearRanges();return}let d=l.map(h=>({range:h,options:Z2.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,d)}catch(a){co(a)||we(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}};am.ID="editor.contrib.linkedEditing";am.DECORATION=ze.register({description:"linked-editing",stickiness:0,className:PG});am=Ige([Oge(1,be)],am);var AG=class extends pe{constructor(){super({id:"editor.action.linkedEditing",label:g("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:fe.and(j.writable,j.hasRenameProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|60,weight:100}})}runCommand(e,t){let i=e.get(it),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return ve.isUri(n)&&V.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(s=>{!s||(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},we):super.runCommand(e,t)}run(e,t){let i=am.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}},Tge=fi.bindToContribution(am.get);ce(new Tge({id:"cancelLinkedEditingInput",precondition:RG,handler:r=>r.clearRanges(),kbOpts:{kbExpr:j.editorTextFocus,weight:100+99,primary:9,secondary:[1024|9]}}));function jG(r,e,t){let i=Yp.ordered(r);return $1(i.map(n=>()=>Y2(this,void 0,void 0,function*(){try{return yield n.provideLinkedEditingRanges(r,e,t)}catch(o){Qt(o);return}})),n=>!!n&&Ji(n==null?void 0:n.ranges))}var Nge=z("editor.linkedEditingBackground",{dark:q.fromHex("#f00").transparent(.3),light:q.fromHex("#f00").transparent(.3),hc:q.fromHex("#f00").transparent(.3)},g("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Be((r,e)=>{let t=r.getColor(Nge);t&&e.addRule(`.monaco-editor .${PG} { background: ${t}; border-left-color: ${t}; }`)});Uo("_executeLinkedEditingProvider",(r,e)=>jG(r,e,Me.None));He(am.ID,am);ae(AG);var MG=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},FG=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return MG(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}},o0=class{constructor(e){this._disposables=new G;let t=[];for(let[i,n]of e){let o=i.links.map(s=>new FG(s,n));t=o0._union(t,o),bp(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let i=[],n,o,s,a;for(n=0,s=0,o=e.length,a=t.length;n<o&&s<a;){let l=e[n],c=t[s];if(L.areIntersectingOrTouching(l.range,c.range)){n++;continue}L.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),n++):(i.push(c),s++)}for(;n<o;n++)i.push(e[n]);for(;s<a;s++)i.push(t[s]);return i}};function G2(r,e){let t=[],i=gd.ordered(r).reverse().map((n,o)=>Promise.resolve(n.provideLinks(r,e)).then(s=>{s&&(t[o]=[s,n])},Qt));return Promise.all(i).then(()=>{let n=new o0(Ca(t));return e.isCancellationRequested?(n.dispose(),new o0([])):n})}Ke.registerCommand("_executeLinkProvider",(r,...e)=>MG(void 0,void 0,void 0,function*(){let[t,i]=e;xt(t instanceof ve),typeof i!="number"&&(i=0);let n=r.get(Gt).getModel(t);if(!n)return[];let o=yield G2(n,Me.None);if(!o)return[];for(let a=0;a<Math.min(i,o.links.length);a++)yield o.links[a].resolve(Me.None);let s=o.links.slice(0);return o.dispose(),s}));var Rge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},BG=function(r,e){return function(t,i){e(t,i,r)}},Pge=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})};function Age(r,e){let t=r.url&&/^command:/i.test(r.url.toString()),i=r.tooltip?r.tooltip:t?g("links.navigate.executeCmd","Execute command"):g("links.navigate.follow","Follow link"),n=e?We?g("links.navigate.kb.meta.mac","cmd + click"):g("links.navigate.kb.meta","ctrl + click"):We?g("links.navigate.kb.alt.mac","option + click"):g("links.navigate.kb.alt","alt + click");if(r.url){let o="";if(/^command:/i.test(r.url.toString())){let a=r.url.toString().match(/^command:([^?#]+)/);if(a){let l=a[1];o=` "${g("tooltip.explanation","Execute command {0}",l)}"`}}return new Eo("",!0).appendMarkdown(`[${i}](${r.url.toString(!0).replace(/ /g,"%20")}${o}) (${n})`)}else return new Eo().appendText(`${i} (${n})`)}var WG={general:ze.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:ze.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},zg=class{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:zg._getOptions(e,t,!1)}}static _getOptions(e,t,i){let n=Object.assign({},i?WG.active:WG.general);return n.hoverMessage=Age(e,t),n}activate(e,t){e.changeDecorationOptions(this.decorationId,zg._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,zg._getOptions(this.link,t,!1))}},Hg=class X2{constructor(e,t,i){this.listenersToRemove=new G,this.editor=e,this.openerService=t,this.notificationService=i;let n=new iS(e);this.listenersToRemove.add(n),this.listenersToRemove.add(n.onMouseMoveOrRelevantKeyDown(([o,s])=>{this._onEditorMouseMove(o,s)})),this.listenersToRemove.add(n.onExecute(o=>{this.onEditorMouseUp(o)})),this.listenersToRemove.add(n.onCancel(o=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(o=>{let s=e.getOption(62);this.enabled!==s&&(this.enabled=s,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(o=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(o=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(o=>this.onModelModeChanged())),this.listenersToRemove.add(gd.onDidChange(o=>this.onModelModeChanged())),this.timeout=new li,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(X2.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),X2.RECOMPUTE_TIME)}beginCompute(){return Pge(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;let e=this.editor.getModel();if(!!gd.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=At(t=>G2(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){we(t)}finally{this.computePromise=null}}})}updateDecorations(e){let t=this.editor.getOption(69)==="altKey",i=[],n=Object.keys(this.currentOccurrences);for(let a=0,l=n.length;a<l;a++){let c=n[a],d=this.currentOccurrences[c];i.push(d.decorationId)}let o=[];if(e)for(let a of e)o.push(zg.decoration(a,t));let s=this.editor.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,l=s.length;a<l;a++){let c=new zg(e[a],s[a]);this.currentOccurrences[c.decorationId]=c}}_onEditorMouseMove(e,t){let i=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();let n=this.getLinkOccurrence(e.target.position);n&&this.editor.changeDecorations(o=>{n.activate(o,i),this.activeLinkDecorationId=n.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){let t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;let t=this.getLinkOccurrence(e.target.position);!t||this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;let{link:n}=e;n.resolve(Me.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){let s=this.editor.getModel().uri;if(s.scheme===Xe.file&&o.startsWith(`${Xe.file}:`)){let a=ve.parse(o);if(a.scheme===Xe.file){let l=uw(a),c=null;l.startsWith("/./")?c=`.${l.substr(1)}`:l.startsWith("//./")&&(c=`.${l.substr(2)}`),c&&(o=sU(s,c))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0})},o=>{let s=o instanceof Error?o.message:o;s==="invalid"?this.notificationService.warn(g("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):s==="missing"?this.notificationService.warn(g("missing.url","Failed to open this link because its target is missing.")):we(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;let t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(let i of t){let n=this.currentOccurrences[i.id];if(n)return n}return null}isEnabled(e,t){return Boolean(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};Hg.ID="editor.linkDetector";Hg.RECOMPUTE_TIME=1e3;Hg=Rge([BG(1,cr),BG(2,Vt)],Hg);var UG=class extends pe{constructor(){super({id:"editor.action.openLink",label:g("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let i=Hg.get(t);if(!i||!t.hasModel())return;let n=t.getSelections();for(let o of n){let s=i.getLinkOccurrence(o.getEndPosition());s&&i.openLinkOccurrence(s,!1)}}};He(Hg.ID,Hg);ae(UG);Be((r,e)=>{let t=r.getColor(U_);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function gv(r,e){let t=e.filter(i=>!r.find(n=>n.equals(i)));if(t.length>=1){let i=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),n=t.length===1?g("cursorAdded","Cursor added: {0}",i):g("cursorsAdded","Cursors added: {0}",i);yf(n)}}var VG=class extends pe{constructor(){super({id:"editor.action.insertCursorAbove",label:g("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|512|16,linux:{primary:1024|512|16,secondary:[2048|1024|16]},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();let s=o.getCursorStates();o.setCursorStates(i.source,3,gn.addCursorUp(o,s,n)),o.revealTopMostCursor(i.source),gv(s,o.getCursorStates())}},zG=class extends pe{constructor(){super({id:"editor.action.insertCursorBelow",label:g("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|512|18,linux:{primary:1024|512|18,secondary:[2048|1024|18]},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);let o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();let s=o.getCursorStates();o.setCursorStates(i.source,3,gn.addCursorDown(o,s,n)),o.revealBottomMostCursor(i.source),gv(s,o.getCursorStates())}},HG=class extends pe{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:g("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|39,weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){let o=t.getLineMaxColumn(n);i.push(new le(n,o,n,o))}e.endColumn>1&&i.push(new le(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates(),a=[];n.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),gv(s,o.getCursorStates())}},$G=class extends pe{constructor(){super({id:"editor.action.addCursorsToBottom",label:g("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getSelections(),n=t.getModel().getLineCount(),o=[];for(let l=i[0].startLineNumber;l<=n;l++)o.push(new le(l,i[0].startColumn,l,i[0].endColumn));let s=t._getViewModel(),a=s.getCursorStates();o.length>0&&t.setSelections(o),gv(a,s.getCursorStates())}},KG=class extends pe{constructor(){super({id:"editor.action.addCursorsToTop",label:g("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getSelections(),n=[];for(let a=i[0].startLineNumber;a>=1;a--)n.push(new le(a,i[0].startColumn,a,i[0].endColumn));let o=t._getViewModel(),s=o.getCursorStates();n.length>0&&t.setSelections(n),gv(s,o.getCursorStates())}},s0=class{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}},pv=class{constructor(e,t,i,n,o,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=s,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;let i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new pv(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n=!1,o,s,a=e.getSelections();a.length===1&&a[0].isEmpty()?(n=!0,o=!0,s=!0):(o=i.wholeWord,s=i.matchCase);let l=e.getSelection(),c,d=null;if(l.isEmpty()){let h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;c=h.word,d=new le(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new pv(e,t,n,c,o,s,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new s0(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new s0(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new le(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new s0(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new s0(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return i?new le(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}},lm=class extends H{constructor(e){super();this._sessionDispose=this._register(new G),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(lm.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){let t=pv.create(this._editor,e);if(!t)return;this._session=t;let i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(n=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(n=>{(n.matchCase||n.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){let e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;let i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new le(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){!e||(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(!!this._editor.hasModel()){if(!this._session){let t=this._editor.getSelections();if(t.length>1){let n=e.getState().matchCase;if(!JG(this._editor.getModel(),t,n)){let s=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(s,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null,i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex)t=this._editor.getModel().findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(i.searchScope){let n=i.searchScope,o=[];t.forEach(s=>{n.forEach(a=>{s.range.endLineNumber<=a.endLineNumber&&s.range.startLineNumber>=a.startLineNumber&&o.push(s)})}),t=o}if(t.length>0){let n=this._editor.getSelection();for(let o=0,s=t.length;o<s;o++){let a=t[o];if(a.range.intersectRanges(n)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new le(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}};lm.ID="editor.contrib.multiCursorController";var $g=class extends pe{run(e,t){let i=lm.get(t);if(!i)return;let n=Qo.get(t);if(!n)return;let o=t._getViewModel();if(o){let s=o.getCursorStates();this._run(i,n),gv(s,o.getCursorStates())}}},qG=class extends $g{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:g("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:2048|34,weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}},YG=class extends $g{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:g("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}},ZG=class extends $g{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:g("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:wi(2048|41,2048|34),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}},GG=class extends $g{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:g("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}},XG=class extends $g{constructor(){super({id:"editor.action.selectHighlights",label:g("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:j.focus,primary:2048|1024|42,weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"3_multi",title:g({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}},QG=class extends $g{constructor(){super({id:"editor.action.changeAll",label:g("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:fe.and(j.writable,j.editorTextFocus),kbOpts:{kbExpr:j.editorTextFocus,primary:2048|60,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}},Q2=class{constructor(e,t,i,n){this.searchText=e,this.matchCase=t,this.wordSeparators=i,this.modelVersionId=n}static softEquals(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId}},Xc=class extends H{constructor(e){super();this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new dt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{!this._isEnabled||(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Qo.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Xc._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e||!t.hasModel())return null;let i=t.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;let n=lm.get(t);if(!n)return null;let o=Qo.get(t);if(!o)return null;let s=n.getSession(o);if(!s){let c=t.getSelections();if(c.length>1){let h=o.getState().matchCase;if(!JG(t.getModel(),c,h))return null}s=pv.create(t,o)}if(!s||s.currentMatch||/^[ \t]+$/.test(s.searchText)||s.searchText.length>200)return null;let a=o.getState(),l=a.matchCase;if(a.isRevealed){let c=a.searchString;l||(c=c.toLowerCase());let d=s.searchText;if(l||(d=d.toLowerCase()),c===d&&s.matchCase===a.matchCase&&s.wholeWord===a.wholeWord&&!a.isRegex)return null}return new Q2(s.searchText,s.matchCase,s.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(Q2.softEquals(this.state,e)){this.state=e;return}if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;let t=this.editor.getModel();if(t.isTooLargeForTokenization())return;let i=tc.has(t)&&this.editor.getOption(71),n=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(l=>l.range);n.sort(L.compareRangesUsingStarts);let o=this.editor.getSelections();o.sort(L.compareRangesUsingStarts);let s=[];for(let l=0,c=0,d=n.length,h=o.length;l<d;){let u=n[l];if(c>=h)s.push(u),l++;else{let m=L.compareRangesUsingStarts(u,o[c]);m<0?((o[c].isEmpty()||!L.areIntersecting(u,o[c]))&&s.push(u),l++):(m>0||l++,c++)}}let a=s.map(l=>({range:l,options:i?Xc._SELECTION_HIGHLIGHT:Xc._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}};Xc.ID="editor.contrib.selectionHighlighter";Xc._SELECTION_HIGHLIGHT_OVERVIEW=ze.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:yi($_),position:kr.Inline},overviewRuler:{color:yi(UE),position:Qn.Center}});Xc._SELECTION_HIGHLIGHT=ze.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function JG(r,e,t){let i=eX(r,e[0],!t);for(let n=1,o=e.length;n<o;n++){let s=e[n];if(s.isEmpty())return!1;let a=eX(r,s,!t);if(i!==a)return!1}return!0}function eX(r,e,t){let i=r.getValueInRange(e);return t?i.toLowerCase():i}He(lm.ID,lm);He(Xc.ID,Xc);ae(VG);ae(zG);ae(HG);ae(qG);ae(YG);ae(ZG);ae(GG);ae(XG);ae(QG);ae($G);ae(KG);var tX=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},Sh={Visible:new _e("parameterHintsVisible",!1),MultipleSignatures:new _e("parameterHintsMultipleSignatures",!1)};function J2(r,e,t,i){return tX(this,void 0,void 0,function*(){let n=ll.ordered(r);for(let o of n)try{let s=yield o.provideSignatureHelp(r,e,i,t);if(s)return s}catch(s){Qt(s)}})}Ke.registerCommand("_executeSignatureHelpProvider",(r,...e)=>tX(void 0,void 0,void 0,function*(){let[t,i,n]=e;xt(ve.isUri(t)),xt(V.isIPosition(i)),xt(typeof n=="string"||!n);let o=yield r.get(fn).createModelReference(t);try{let s=yield J2(o.object.textEditorModel,V.lift(i),{triggerKind:Ms.Invoke,isRetrigger:!1,triggerCharacter:n},Me.None);return s?(setTimeout(()=>s.dispose(),0),s.value):void 0}finally{o.dispose()}}));var jge=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},cm;(function(r){r.Default={type:0};class e{constructor(n,o){this.request=n,this.previouslyActiveHints=o,this.type=2}}r.Pending=e;class t{constructor(n){this.hints=n,this.type=1}}r.Active=t})(cm||(cm={}));var _v=class extends H{constructor(e,t=_v.DEFAULT_DELAY){super();this._onChangedHints=this._register(new M),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=cm.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Mi),this.triggerChars=new rc,this.retriggerChars=new rc,this.triggerId=0,this.editor=e,this.throttledDelayer=new zr(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(ll.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=cm.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){let i=this.editor.getModel();if(!i||!ll.has(i))return;let n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(n),t).catch(we)}next(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e==e-1,n=this.editor.getOption(75).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?0:t+1)}previous(){if(this.state.type!==1)return;let e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,n=this.editor.getOption(75).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new cm.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return jge(this,void 0,void 0,function*(){let t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;let n=this._pendingTriggers.reduce(Mge);this._pendingTriggers=[];let o={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;let s=this.editor.getModel(),a=this.editor.getPosition();this.state=new cm.Pending(At(l=>J2(s,a,o,l)),i);try{let l=yield this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new cm.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=cm.Default),we(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new rc,this.retriggerChars=new rc;let e=this.editor.getModel();if(!!e)for(let t of ll.ordered(e)){for(let i of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(i.charCodeAt(0)),this.retriggerChars.add(i.charCodeAt(0));for(let i of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;let t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Ms.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Ms.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Ms.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};_v.DEFAULT_DELAY=120;function Mge(r,e){switch(e.triggerKind){case Ms.Invoke:return e;case Ms.ContentChange:return r;case Ms.TriggerCharacter:default:return e}}var Fge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},e4=function(r,e){return function(t,i){e(t,i,r)}},Cs=oe,Bge=Gi("parameter-hints-next",ge.chevronDown,g("parameterHintsNextIcon","Icon for show next parameter hint.")),Wge=Gi("parameter-hints-previous",ge.chevronUp,g("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),a0=class iX extends H{constructor(e,t,i,n){super();this.editor=e,this.renderDisposeables=this._register(new G),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Xs({editor:e},n,i)),this.model=this._register(new _v(e)),this.keyVisible=Sh.Visible.bindTo(t),this.keyMultipleSignatures=Sh.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(o=>{o?(this.show(),this.render(o)):this.hide()}))}createParameterHintDOMNodes(){let e=Cs(".editor-widget.parameter-hints-widget"),t=X(e,Cs(".phwrapper"));t.tabIndex=-1;let i=X(t,Cs(".controls")),n=X(i,Cs(".button"+Tt.asCSSSelector(Wge))),o=X(i,Cs(".overloads")),s=X(i,Cs(".button"+Tt.asCSSSelector(Bge)));this._register(J(n,"click",u=>{St.stop(u),this.previous()})),this._register(J(s,"click",u=>{St.stop(u),this.next()}));let a=Cs(".body"),l=new yl(a,{});this._register(l),t.appendChild(l.getDomNode());let c=X(a,Cs(".signature")),d=X(a,Cs(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(u=>{this.visible&&this.editor.layoutContentWidget(this)}));let h=()=>{if(!this.domNodes)return;let u=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${u.fontSize}px`,this.domNodes.element.style.lineHeight=`${u.lineHeight/u.fontSize}`};h(),this._register(ye.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(u=>u.hasChanged(43)).on(h,null)),this._register(this.editor.onDidLayoutChange(u=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),!!this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;let i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";let n=e.signatures[e.activeSignature];if(!n)return;let o=X(this.domNodes.signature,Cs(".code")),s=this.editor.getOption(43);o.style.fontSize=`${s.fontSize}px`,o.style.fontFamily=s.fontFamily;let a=n.parameters.length>0,l=(t=n.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,n,l);else{let h=X(o,Cs("span"));h.textContent=n.label}let c=n.parameters[l];if(c==null?void 0:c.documentation){let h=Cs("span.documentation");if(typeof c.documentation=="string")h.textContent=c.documentation;else{let u=this.renderMarkdownDocs(c.documentation);h.appendChild(u.element)}X(this.domNodes.docs,Cs("p",{},h))}if(n.documentation!==void 0)if(typeof n.documentation=="string")X(this.domNodes.docs,Cs("p",{},n.documentation));else{let h=this.renderMarkdownDocs(n.documentation);X(this.domNodes.docs,h.element)}let d=this.hasDocs(n,c);if(this.domNodes.signature.classList.toggle("has-docs",d),this.domNodes.docs.classList.toggle("empty",!d),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let h="",u=n.parameters[l];Array.isArray(u.label)?h=n.label.substring(u.label[0],u.label[1]):h=u.label,u.documentation&&(h+=typeof u.documentation=="string"?`, ${u.documentation}`:`, ${u.documentation.value}`),n.documentation&&(h+=typeof n.documentation=="string"?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==h&&(Oi(g("hint","{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){let t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var i;(i=this.domNodes)===null||i===void 0||i.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&mw(t.documentation).length>0||t&&typeof t.documentation=="object"&&mw(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&mw(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&mw(e.documentation.value).length>0)}renderParameters(e,t,i){let[n,o]=this.getParameterLabelOffsets(t,i),s=document.createElement("span");s.textContent=t.label.substring(0,n);let a=document.createElement("span");a.textContent=t.label.substring(n,o),a.className="parameter active";let l=document.createElement("span");l.textContent=t.label.substring(o),X(e,s,a,l)}getParameterLabelOffsets(e,t){let i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){let n=new RegExp(`(\\W|^)${Xn(i.label)}(?=\\W|$)`,"g");n.test(e.label);let o=n.lastIndex-i.label.length;return o>=0?[o,n.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return iX.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;let t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;let i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};a0.ID="editor.widget.parameterHintsWidget";a0=Fge([e4(1,be),e4(2,cr),e4(3,ui)],a0);var Uge=z("editorHoverWidget.highlightForeground",{dark:bl,light:bl,hc:bl},g("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));Be((r,e)=>{let t=r.getColor(jE);if(t){let c=r.type===qr.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${c}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}let i=r.getColor(Fd);i&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${i}; }`);let n=r.getColor(_c);n&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${n}; }`);let o=r.getColor(bc);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);let s=r.getColor(AE);s&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);let a=r.getColor(R_);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);let l=r.getColor(Uge);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var Vge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},zge=function(r,e){return function(t,i){e(t,i,r)}},Kg=class nX extends H{constructor(e,t){super();this.editor=e,this.widget=this._register(t.createInstance(a0,this.editor))}static get(e){return e.getContribution(nX.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};Kg.ID="editor.controller.parameterHints";Kg=Vge([zge(1,Ue)],Kg);var rX=class extends pe{constructor(){super({id:"editor.action.triggerParameterHints",label:g("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:j.hasSignatureHelpProvider,kbOpts:{kbExpr:j.editorTextFocus,primary:2048|1024|10,weight:100}})}run(e,t){let i=Kg.get(t);i&&i.trigger({triggerKind:Ms.Invoke})}};He(Kg.ID,Kg);ae(rX);var t4=100+75,i4=fi.bindToContribution(Kg.get);ce(new i4({id:"closeParameterHints",precondition:Sh.Visible,handler:r=>r.cancel(),kbOpts:{weight:t4,kbExpr:j.focus,primary:9,secondary:[1024|9]}}));ce(new i4({id:"showPrevParameterHint",precondition:fe.and(Sh.Visible,Sh.MultipleSignatures),handler:r=>r.previous(),kbOpts:{weight:t4,kbExpr:j.focus,primary:16,secondary:[512|16],mac:{primary:16,secondary:[512|16,256|46]}}}));ce(new i4({id:"showNextParameterHint",precondition:fe.and(Sh.Visible,Sh.MultipleSignatures),handler:r=>r.next(),kbOpts:{weight:t4,kbExpr:j.focus,primary:18,secondary:[512|18],mac:{primary:18,secondary:[512|18,256|44]}}}));var Hge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},n4=function(r,e){return function(t,i){e(t,i,r)}},l0=new _e("renameInputVisible",!1,g("renameInputVisible","Whether the rename input widget is visible")),mI=class{constructor(e,t,i,n,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._disposables=new G,this.allowEditorOverflow=!0,this._visibleContextKey=l0.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",g("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);let e=()=>{var t,i;let[n,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(n),this._label.innerText=g({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(n))===null||t===void 0?void 0:t.getLabel(),(i=this._keybindingService.lookupKeybinding(o))===null||i===void 0?void 0:i.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,n,o;if(!this._input||!this._domNode)return;let s=e.getColor(Oa);this._domNode.style.backgroundColor=String((t=e.getColor(Zr))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=s?` 0 0 8px 2px ${s}`:"",this._domNode.style.color=String((i=e.getColor(A_))!==null&&i!==void 0?i:""),this._input.style.backgroundColor=String((n=e.getColor(P_))!==null&&n!==void 0?n:"");let a=e.getColor(j_);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a==null?void 0:a.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;let e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,i,n,o,s){this._domNode.classList.toggle("preview",o),this._position=new V(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);let a=new G;return new Promise(l=>{this._currentCancelInput=c=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(c),!0),this._currentAcceptInput=c=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:o&&c})},s.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};mI=Hge([n4(2,ht),n4(3,Nt),n4(4,be)],mI);var $ge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},bv=function(r,e){return function(t,i){e(t,i,r)}},qg=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},fI=class{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=Qm.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return qg(this,void 0,void 0,function*(){let t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let n=this._providers[this._providerRenameIdx];if(!n.resolveRenameLocation)break;let o=yield n.resolveRenameLocation(this.model,this.position,e);if(!!o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}let i=this.model.getWordAtPosition(this.position);return i?{range:new L(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:L.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return qg(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,i,n){return qg(this,void 0,void 0,function*(){let o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join(`
`)};let s=yield o.provideRenameEdits(this.model,this.position,e,n);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(s.rejectReason),n)}else return this._provideRenameEdits(e,t+1,i.concat(g("no result","No result.")),n);return s})}};function Kge(r,e,t){return qg(this,void 0,void 0,function*(){let i=new fI(r,e),n=yield i.resolveRenameLocation(Me.None);return(n==null?void 0:n.rejectReason)?{edits:[],rejectReason:n.rejectReason}:i.provideRenameEdits(t,Me.None)})}var Yg=class oX{constructor(e,t,i,n,o,s,a){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=o,this._logService=s,this._configService=a,this._dispoableStore=new G,this._cts=new Di,this._renameInputField=this._dispoableStore.add(new el(()=>this._dispoableStore.add(this._instaService.createInstance(mI,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(oX.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return qg(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;let e=this.editor.getPosition(),t=new fI(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new Yd(this.editor,4|1);let i;try{let d=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(d,250),i=yield d}catch(d){Nr.get(this.editor).showMessage(d||g("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!i)return;if(i.rejectReason){Nr.get(this.editor).showMessage(i.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new Yd(this.editor,4|1,i.range);let n=this.editor.getSelection(),o=0,s=i.text.length;!L.isEmpty(n)&&!L.spansMultipleLines(n)&&L.containsRange(i.range,n)&&(o=Math.max(0,n.startColumn-i.range.startColumn),s=Math.min(i.range.endColumn,n.endColumn)-i.range.startColumn);let a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),l=yield this._renameInputField.value.getInput(i.range,i.text,o,s,a,this._cts.token);if(typeof l=="boolean"){l&&this.editor.focus();return}this.editor.focus();let c=Lp(t.provideRenameEdits(l.newName,this._cts.token),this._cts.token).then(d=>qg(this,void 0,void 0,function*(){if(!(!d||!this.editor.hasModel())){if(d.rejectReason){this._notificationService.info(d.rejectReason);return}this.editor.setSelection(L.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(gf.convert(d),{editor:this.editor,showPreview:l.wantsPreview,label:g("label","Renaming '{0}'",i==null?void 0:i.text),quotableLabel:g("quotableLabel","Renaming {0}",i==null?void 0:i.text)}).then(h=>{h.ariaSummary&&Oi(g("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",i.text,l.newName,h.ariaSummary))}).catch(h=>{this._notificationService.error(g("rename.failedApply","Rename failed to apply edits")),this._logService.error(h)})}}),d=>{this._notificationService.error(g("rename.failed","Rename failed to compute edits")),this._logService.error(d)});return this._progressService.showWhile(c,250),c})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};Yg.ID="editor.contrib.renameController";Yg=$ge([bv(1,Ue),bv(2,Vt),bv(3,h_),bv(4,Xr),bv(5,hr),bv(6,t_)],Yg);var sX=class extends pe{constructor(){super({id:"editor.action.rename",label:g("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:fe.and(j.writable,j.hasRenameProvider),kbOpts:{kbExpr:j.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){let i=e.get(it),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return ve.isUri(n)&&V.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(s=>{!s||(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},we):super.runCommand(e,t)}run(e,t){let i=Yg.get(t);return i?i.run():Promise.resolve()}};He(Yg.ID,Yg);ae(sX);var r4=fi.bindToContribution(Yg.get);ce(new r4({id:"acceptRenameInput",precondition:l0,handler:r=>r.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:j.focus,primary:3}}));ce(new r4({id:"acceptRenameInputWithPreview",precondition:fe.and(l0,fe.has("config.editor.rename.enablePreview")),handler:r=>r.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:j.focus,primary:1024+3}}));ce(new r4({id:"cancelRenameInput",precondition:l0,handler:r=>r.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:j.focus,primary:9,secondary:[1024|9]}}));Uo("_executeDocumentRenameProvider",function(r,e,...t){let[i]=t;return xt(typeof i=="string"),Kge(r,e,i)});Uo("_executePrepareRename",function(r,e){return qg(this,void 0,void 0,function*(){let i=yield new fI(r,e).resolveRenameLocation(Me.None);if(i==null?void 0:i.rejectReason)throw new Error(i.rejectReason);return i})});ii.as(ya.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:g("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var o4=class{provideSelectionRanges(e,t){let i=[];for(let n of t){let o=[];i.push(o),this._addInWordRanges(o,e,n),this._addWordRanges(o,e,n),this._addWhitespaceLine(o,e,n),o.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){let n=t.getWordAtPosition(i);if(!n)return;let{word:o,startColumn:s}=n,a=i.column-s,l=a,c=a,d=0;for(;l>=0;l--){let h=o.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(Yl(h)&&Rs(d))break;d=h}for(l+=1;c<o.length;c++){let h=o.charCodeAt(c);if(Rs(h)&&Yl(d))break;if(h===95||h===45)break;d=h}l<c&&e.push({range:new L(i.lineNumber,s+l,i.lineNumber,s+c)})}_addWordRanges(e,t,i){let n=t.getWordAtPosition(i);n&&e.push({range:new L(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new L(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}};var s4=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},gI=class{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;let i=new gI(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}},Zg=class{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(Zg.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return s4(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;let t=this._editor.getSelections(),i=this._editor.getModel();if(!Zp.has(i)||(this._state||(yield cX(i,t.map(o=>o.getPosition()),this._editor.getOption(101),Me.None).then(o=>{var s;if(!(!Ji(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!zn(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new gI(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(o=>o.mov(e));let n=this._state.map(o=>le.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}})}};Zg.ID="editor.contrib.smartSelectController";var a4=class extends pe{constructor(e,t){super(t);this._forward=e}run(e,t){return s4(this,void 0,void 0,function*(){let i=Zg.get(t);i&&(yield i.run(this._forward))})}},aX=class extends a4{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:g("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|17,mac:{primary:2048|256|1024|17,secondary:[256|1024|17]},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"1_basic",title:g({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}};Ke.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var lX=class extends a4{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:g("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:j.editorTextFocus,primary:1024|512|15,mac:{primary:2048|256|1024|15,secondary:[256|1024|15]},weight:100},menuOpts:{menuId:Ce.MenubarSelectionMenu,group:"1_basic",title:g({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}};He(Zg.ID,Zg);ae(aX);ae(lX);Zp.register("*",new o4);function cX(r,e,t,i){return s4(this,void 0,void 0,function*(){let n=Zp.all(r);n.length===1&&n.unshift(new eo);let o=[],s=[];for(let a of n)o.push(Promise.resolve(a.provideSelectionRanges(r,e,i)).then(l=>{if(Ji(l)&&l.length===e.length)for(let c=0;c<e.length;c++){s[c]||(s[c]=[]);for(let d of l[c])L.isIRange(d.range)&&L.containsPosition(d.range,e[c])&&s[c].push(L.lift(d.range))}},Qt));return yield Promise.all(o),s.map(a=>{if(a.length===0)return[];a.sort((h,u)=>V.isBefore(h.getStartPosition(),u.getStartPosition())?1:V.isBefore(u.getStartPosition(),h.getStartPosition())||V.isBefore(h.getEndPosition(),u.getEndPosition())?-1:V.isBefore(u.getEndPosition(),h.getEndPosition())?1:0);let l=[],c;for(let h of a)(!c||L.containsRange(h,c)&&!L.equalsRange(h,c))&&(l.push(h),c=h);if(!t.selectLeadingAndTrailingWhitespace)return l;let d=[l[0]];for(let h=1;h<l.length;h++){let u=l[h-1],m=l[h];if(m.startLineNumber!==u.startLineNumber||m.endLineNumber!==u.endLineNumber){let p=new L(u.startLineNumber,r.getLineFirstNonWhitespaceColumn(u.startLineNumber),u.endLineNumber,r.getLineLastNonWhitespaceColumn(u.endLineNumber));p.containsRange(u)&&!p.equalsRange(u)&&m.containsRange(p)&&!m.equalsRange(p)&&d.push(p);let _=new L(u.startLineNumber,1,u.endLineNumber,r.getLineMaxColumn(u.endLineNumber));_.containsRange(u)&&!_.equalsRange(p)&&m.containsRange(_)&&!m.equalsRange(_)&&d.push(_)}d.push(m)}return d})})}BV("_executeSelectionRangeProvider",function(r,...e){let[t]=e;return cX(r,t,{selectLeadingAndTrailingWhitespace:!0},Me.None)});var dX=class extends pe{constructor(){super({id:"editor.action.forceRetokenize",label:g("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;let i=t.getModel();i.resetTokenization();let n=new or(!0);i.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}};ae(dX);var c0=class extends pe{constructor(){super({id:c0.ID,label:g({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2048|43,mac:{primary:256|1024|43},weight:100}})}run(e,t){let n=!Uw.getTabFocusMode();Uw.setTabFocusMode(n),n?Oi(g("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):Oi(g("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};c0.ID="editor.action.toggleTabFocusMode";ae(c0);var qge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},hX=function(r,e){return function(t,i){e(t,i,r)}},Yge=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(h){s(h)}}function l(d){try{c(i.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(r,e||[])).next())})},uX="ignoreUnusualLineTerminators";function Zge(r,e,t){r.setModelProperty(e.uri,uX,t)}function Gge(r,e){return r.getModelProperty(e.uri,uX)}var d0=class extends H{constructor(e,t,i){super();this._editor=e,this._dialogService=t,this._codeEditorService=i,this._config=this._editor.getOption(112),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(112)&&(this._config=this._editor.getOption(112),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(n=>{n.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return Yge(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;let e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||Gge(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:g("unusualLineTerminators.title","Unusual Line Terminators"),message:g("unusualLineTerminators.message","Detected unusual line terminators"),detail:g("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",ar(e.uri)),primaryButton:g("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:g("unusualLineTerminators.ignore","Ignore")})).confirmed){Zge(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};d0.ID="editor.contrib.unusualLineTerminatorsDetector";d0=qge([hX(1,Sb),hX(2,it)],d0);He(d0.ID,d0);var Xge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},l4=function(r,e){return function(t,i){e(t,i,r)}},h0=class extends H{constructor(e,t,i,n){super();this._modelService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._tokenizeViewport=new dt(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(o=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(rf.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration(AD)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(let e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!jD(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!m6(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}let t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){let i=e.getVersionId(),n=At(o=>Promise.resolve(PD(e,t,o)));return n.then(o=>{if(!o||!o.tokens||e.isDisposed()||e.getVersionId()!==i)return;let{provider:s,tokens:a}=o,l=this._modelService.getSemanticTokensProviderStyling(s);e.setPartialSemanticTokens(t,RD(a,l,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}};h0.ID="editor.contrib.viewportSemanticTokens";h0=Xge([l4(1,Gt),l4(2,ht),l4(3,Mt)],h0);He(h0.ID,h0);var Qge=function(r,e,t,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(n<3?s(o):n>3?s(e,t,o):s(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Jge=function(r,e){return function(t,i){e(t,i,r)}},epe=z("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},g("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),tpe=z("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},g("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),ipe=z("editor.wordHighlightBorder",{light:null,dark:null,hc:an},g("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),npe=z("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:an},g("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),rpe=z("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},g("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ope=z("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},g("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),pI=new _e("hasWordHighlights",!1);function mX(r,e,t){let i=tc.ordered(r);return $1(i.map(n=>()=>Promise.resolve(n.provideDocumentHighlights(r,e,t)).then(void 0,Qt)),Ji)}var c4=class{constructor(e,t,i){this._wordRange=this._getCurrentWordRange(e,t),this.result=At(n=>this._compute(e,t,i,n))}_getCurrentWordRange(e,t){let i=e.getWordAtPosition(t.getPosition());return i?new L(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){let n=t.startLineNumber,o=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t),l=Boolean(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){let h=e.getDecorationRange(i[c]);h&&h.startLineNumber===n&&h.startColumn<=o&&h.endColumn>=s&&(l=!0)}return l}cancel(){this.result.cancel()}},fX=class extends c4{_compute(e,t,i,n){return mX(e,t.getPosition(),n).then(o=>o||[])}},gX=class extends c4{constructor(e,t,i){super(e,t,i);this._selectionIsEmpty=t.isEmpty()}_compute(e,t,i,n){return ma(250,n).then(()=>{if(!t.isEmpty())return[];let o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,i,!1).map(a=>({range:a.range,kind:qp.Text}))})}isValid(e,t,i){let n=t.isEmpty();return this._selectionIsEmpty!==n?!1:super.isValid(e,t,i)}};function spe(r,e,t){return tc.has(r)?new fX(r,e,t):new gX(r,e,t)}Uo("_executeDocumentHighlights",(r,e)=>mX(r,e,Me.None));var Gg=class{constructor(e,t){this.toUnhook=new G,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=pI.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(i=>{this._ignorePositionChangeEvent||!this.occurrencesHighlight||this._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(i=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(i=>{let n=this.editor.getOption(71);this.occurrencesHighlight!==n&&(this.occurrencesHighlight=n,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){!this.occurrencesHighlight||this._run()}_getSortedHighlights(){return Ca(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(L.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let o=this._getWord();if(o){let s=this.editor.getModel().getLineContent(n.startLineNumber);Oi(`${s}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);let o=this._getWord();if(o){let s=this.editor.getModel().getLineContent(n.startLineNumber);Oi(`${s}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:i})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,i=e.endColumn,n=this._getWord();if(!n||n.startColumn>t||n.endColumn<i){this._stopAll();return}let o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let s=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=spe(this.model,this.editor.getSelection(),this.editor.getOption(115)),this.workerRequest.result.then(a=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},we)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(let t of this.workerRequestValue)t.range&&e.push({range:t.range,options:Gg._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===qp.Write?this._WRITE_OPTIONS:e===qp.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}};Gg._WRITE_OPTIONS=ze.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:yi(ope),position:Qn.Center},minimap:{color:yi($_),position:kr.Inline}});Gg._TEXT_OPTIONS=ze.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:yi(UE),position:Qn.Center},minimap:{color:yi($_),position:kr.Inline}});Gg._REGULAR_OPTIONS=ze.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:yi(rpe),position:Qn.Center},minimap:{color:yi($_),position:kr.Inline}});var Xg=class pX extends H{constructor(e,t){super();this.wordHighlighter=null;let i=()=>{e.hasModel()&&(this.wordHighlighter=new Gg(e,t))};this._register(e.onDidChangeModel(n=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}static get(e){return e.getContribution(pX.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};Xg.ID="editor.contrib.wordHighlighter";Xg=Qge([Jge(1,be)],Xg);var d4=class extends pe{constructor(e,t){super(t);this._isNext=e}run(e,t){let i=Xg.get(t);!i||(this._isNext?i.moveNext():i.moveBack())}},_X=class extends d4{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:g("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:pI,kbOpts:{kbExpr:j.editorTextFocus,primary:65,weight:100}})}},bX=class extends d4{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:g("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:pI,kbOpts:{kbExpr:j.editorTextFocus,primary:1024|65,weight:100}})}},vX=class extends pe{constructor(){super({id:"editor.action.wordHighlight.trigger",label:g("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:pI.toNegated(),kbOpts:{kbExpr:j.editorTextFocus,primary:0,weight:100}})}run(e,t,i){let n=Xg.get(t);!n||n.restoreViewState(!0)}};He(Xg.ID,Xg);ae(_X);ae(bX);ae(vX);Be((r,e)=>{let t=r.getColor(ky);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));let i=r.getColor(epe);i&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${i}; }`);let n=r.getColor(tpe);n&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${n}; }`);let o=r.getColor(Qz);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${r.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);let s=r.getColor(ipe);s&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${r.type==="hc"?"dashed":"solid"} ${s}; box-sizing: border-box; }`);let a=r.getColor(npe);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${r.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});var vv=class extends fi{constructor(e){super(e);this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;let n=Ir(t.getOption(115)),o=t.getModel(),a=t.getSelections().map(l=>{let c=new V(l.positionLineNumber,l.positionColumn),d=this._move(n,o,c,this._wordNavigationType);return this._moveTo(l,d,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>nt.fromModelSelection(l))),a.length===1){let l=new V(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,i){return i?new le(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new le(t.lineNumber,t.column,t.lineNumber,t.column)}},xh=class extends vv{_move(e,t,i,n){return Ct.moveWordLeft(e,t,i,n)}},Eh=class extends vv{_move(e,t,i,n){return Ct.moveWordRight(e,t,i,n)}},wX=class extends xh{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}},yX=class extends xh{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}},CX=class extends xh{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:fe.and(j.textInputFocus,(e=fe.and(Gf,LC))===null||e===void 0?void 0:e.negate()),primary:2048|15,mac:{primary:512|15},weight:100}})}},SX=class extends xh{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}},xX=class extends xh{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}},EX=class extends xh{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:fe.and(j.textInputFocus,(e=fe.and(Gf,LC))===null||e===void 0?void 0:e.negate()),primary:2048|1024|15,mac:{primary:512|1024|15},weight:100}})}},DX=class extends xh{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,n){return super._move(Ir(lo.wordSeparators.defaultValue),t,i,n)}},LX=class extends xh{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,n){return super._move(Ir(lo.wordSeparators.defaultValue),t,i,n)}},kX=class extends Eh{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}},IX=class extends Eh{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:fe.and(j.textInputFocus,(e=fe.and(Gf,LC))===null||e===void 0?void 0:e.negate()),primary:2048|17,mac:{primary:512|17},weight:100}})}},OX=class extends Eh{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}},TX=class extends Eh{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}},NX=class extends Eh{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:fe.and(j.textInputFocus,(e=fe.and(Gf,LC))===null||e===void 0?void 0:e.negate()),primary:2048|1024|17,mac:{primary:512|1024|17},weight:100}})}},RX=class extends Eh{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}},PX=class extends Eh{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,n){return super._move(Ir(lo.wordSeparators.defaultValue),t,i,n)}},AX=class extends Eh{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,n){return super._move(Ir(lo.wordSeparators.defaultValue),t,i,n)}},wv=class extends fi{constructor(e){super(e);this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;let n=Ir(t.getOption(115)),o=t.getModel(),s=t.getSelections(),a=t.getOption(5),l=t.getOption(8),c=st.getAutoClosingPairs(o.getLanguageId()),d=t._getViewModel(),h=s.map(u=>{let m=this._delete({wordSeparators:n,model:o,selection:u,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:l,autoClosingPairs:c,autoClosedCharacters:d.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Yi(m,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}},_I=class extends wv{_delete(e,t){let i=Ct.deleteWordLeft(e,t);return i||new L(1,1,1,1)}},bI=class extends wv{_delete(e,t){let i=Ct.deleteWordRight(e,t);if(i)return i;let n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new L(n,o,n,o)}},jX=class extends _I{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:j.writable})}},MX=class extends _I{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:j.writable})}},FX=class extends _I{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:2048|1,mac:{primary:512|1},weight:100}})}},BX=class extends bI{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:j.writable})}},WX=class extends bI{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:j.writable})}},UX=class extends bI{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:2048|20,mac:{primary:512|20},weight:100}})}},VX=class extends pe{constructor(){super({id:"deleteInsideWord",precondition:j.writable,label:g("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;let n=Ir(t.getOption(115)),o=t.getModel(),a=t.getSelections().map(l=>{let c=Ct.deleteInsideWord(n,o,l);return new Yi(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}};ce(new wX);ce(new yX);ce(new CX);ce(new SX);ce(new xX);ce(new EX);ce(new kX);ce(new IX);ce(new OX);ce(new TX);ce(new NX);ce(new RX);ce(new DX);ce(new LX);ce(new PX);ce(new AX);ce(new jX);ce(new MX);ce(new FX);ce(new BX);ce(new WX);ce(new UX);ae(VX);var zX=class extends wv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|1},weight:100}})}_delete(e,t){let i=J_.deleteWordPartLeft(e);return i||new L(1,1,1,1)}},HX=class extends wv{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:j.writable,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|20},weight:100}})}_delete(e,t){let i=J_.deleteWordPartRight(e);if(i)return i;let n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new L(n,o,n,o)}},h4=class extends vv{_move(e,t,i,n){return J_.moveWordPartLeft(e,t,i)}},$X=class extends h4{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|15},weight:100}})}};Ke.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var KX=class extends h4{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|1024|15},weight:100}})}};Ke.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var u4=class extends vv{_move(e,t,i,n){return J_.moveWordPartRight(e,t,i)}},qX=class extends u4{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|17},weight:100}})}},YX=class extends u4{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:j.textInputFocus,primary:0,mac:{primary:256|512|1024|17},weight:100}})}};ce(new zX);ce(new HX);ce(new $X);ce(new KX);ce(new qX);ce(new YX);var ZX={},m4={},ape=function(){function r(e){var t=this;this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise(function(i,n){t._lazyLoadPromiseResolve=i,t._lazyLoadPromiseReject=n})}return r.getOrCreate=function(e){return m4[e]||(m4[e]=new r(e)),m4[e]},r.prototype.whenLoaded=function(){return this._lazyLoadPromise},r.prototype.load=function(){var e=this;return this._loadingTriggered||(this._loadingTriggered=!0,ZX[this._languageId].loader().then(function(t){return e._lazyLoadPromiseResolve(t)},function(t){return e._lazyLoadPromiseReject(t)})),this._lazyLoadPromise},r}();function GX(r){var e=r.id;ZX[e]=r,HC.register(r);var t=ape.getOrCreate(e);HC.setMonarchTokensProvider(e,t.whenLoaded().then(function(i){return i.language})),HC.onLanguage(e,function(){t.load().then(function(i){HC.setLanguageConfiguration(e,i.conf)})})}GX({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:function(){return Promise.resolve().then(()=>(QX(),XX))}});var vI=class{constructor(e){this.evalCounter=0;this.wasm=e,this.state=this.wasm._artichoke_web_repl_init()}read(e){let t=this.wasm._artichoke_string_getlen(this.state,e),i=new Uint8Array(t);for(let n=0;n<t;n+=1){let o=this.wasm._artichoke_string_getch(this.state,e,n);i[n]=o}return new TextDecoder().decode(i)}write(e){let t=this.wasm._artichoke_string_new(this.state),i=new TextEncoder().encode(e);for(let n of i)this.wasm._artichoke_string_putch(this.state,t,n);return t}evalRuby(e){this.evalCounter+=1;let t=`eval-ffi-${this.evalCounter}`;window.gtag("event","level_start",{level_name:t});let i=this.write(e),n=this.wasm._artichoke_eval(this.state,i),o=this.read(n);return this.wasm._artichoke_string_free(this.state,i),this.wasm._artichoke_string_free(this.state,n),window.gtag("event","level_end",{level_name:t,success:!0}),o}};var wI=class{constructor(e,t){this.editor=e,this.outputPane=t}};var u0;(function(t){t.button="button",t.codeAction="code_action"})(u0||(u0={}));var yI=class{constructor(e,t){this.counter=0;this.evalType=e,this.chrome=t}makeHandler(e){return()=>{var a,l,c;let t=this.counter+1;this.counter=t;let i=`playground-run-${this.evalType}-${t}`;window.gtag("event","level_start",{level_name:i});let o=((l=(a=this.chrome.editor.getModel())==null?void 0:a.getLinesContent())!=null?l:[]).join(`
`),s=e.evalRuby(o);(c=this.chrome.outputPane.getModel())==null||c.setValue(s),window.gtag("event","level_end",{level_name:i,success:!0})}}};var tQ=XJ(JX());var eQ=`# frozen_string_literal: true

require 'forwardable'

class Properties
  extend Forwardable
  def_delegators :@properties, :[], :[]=

  def initialize(name)
    @name = name
    @properties = {}
  end

  def inspect
    @name
  end

  def to_h
    @properties
  end
end

artichoke = Properties.new('Artichoke Ruby')
artichoke[:language] = 'Ruby'
artichoke[:implementation] = 'Artichoke'
artichoke[:target] = 'wasm'
artichoke[:emoji] = '\u{1F48E}'

puts artichoke.inspect if artichoke[:emoji] =~ /\u{1F48E}/

artichoke.to_h
`;self.MonacoEnvironment={getWorkerUrl:function(r,e){return e==="json"?"./json.worker.bundle.js":e==="css"||e==="scss"||e==="less"?"./css.worker.bundle.js":e==="html"||e==="handlebars"||e==="razor"?"./html.worker.bundle.js":e==="typescript"||e==="javascript"?"./ts.worker.bundle.js":"./editor.worker.bundle.js"}};var iQ=eQ.trim();window.location.hash&&(iQ=decodeURIComponent(window.location.hash).slice(1));var hpe=document.getElementById("editor"),SI=aM.create(hpe,{value:iQ,language:"ruby",theme:"vs-dark",fontSize:14,automaticLayout:!0}),nQ;(nQ=SI.getModel())==null||nQ.onDidChangeContent(()=>{var i,n;let e=((n=(i=SI.getModel())==null?void 0:i.getLinesContent())!=null?n:[]).join(`
`),t=encodeURIComponent(e);history.replaceState(void 0,"",`#${t}`)});var upe=document.getElementById("output"),mpe=aM.create(upe,{language:"plaintext",theme:"vs-dark",fontSize:14,automaticLayout:!0,lineNumbers:"off",readOnly:!0,wordWrap:"bounded",wordWrapBreakAfterCharacters:"",minimap:{enabled:!1}}),fpe=new URLSearchParams(window.location.search);if(fpe.has("embed")){let r=document.getElementById("embeddable");r==null||r.setAttribute("style","position: absolute; width: 100%; height: 100%; top:0; left: 0; background-color: white; max-width: 100%")}(0,tQ.default)().then(r=>{let e=new wI(SI,mpe),t="playground-interpreter-init";window.gtag("event","level_start",{level_name:t});let i=new vI(r),n=document.getElementById("artichoke-build-info");n.textContent=i.read(0);let o=document.getElementById("run");o==null||o.addEventListener("click",new yI(u0.button,e).makeHandler(i)),SI.addAction({id:"artichoke-playground-run-ruby",label:"Run Ruby source code",keybindings:[W$.CtrlCmd|B$.F8],contextMenuGroupId:"2_playground_eval",run:new yI(u0.codeAction,e).makeHandler(i)}),window.gtag("event","level_end",{level_name:t,success:!0})});})();
/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */
